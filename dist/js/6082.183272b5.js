"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6082],{26082:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=a(95353),n=a(64916),r=a(77825),i={components:{exportTip:n.default},mixins:[r.Ay,r.v8],data(){const t={create_time:"",back_status:""};return{initialParams:t,loading:!1,params:{...t},backStatusList:[{name:$t("en402","全部","lang"),value:""},{name:$t("fjrcc3","未处理","lang"),value:"0"},{name:$t("dljhn3","处理中","lang"),value:"1"},{name:$t("h4sv2","成功","lang"),value:"2"},{name:$t("fy1g2","失败","lang"),value:"4"}]}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.fetchList()},methods:{dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},dateTransfer(t){let e,a;return t&&(e=this.dateStrToTimeStamp(t[0]+" 00:00:00"),a=this.dateStrToTimeStamp(t[1]+" 23:59:59")),{time_start_begin:e,time_start_end:a}},getParams(){return{...this.dateTransfer(this.params.create_time),back_status:this.params.back_status||void 0}},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.getParams()};const{list:s,total_count:n}=await this.$api.trade.chinaumsDivisionList(a);this.tableList=s,this.page.total=n,this.loading=!1},onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},async exportData(){const{status:t,url:e,filename:a}=await this.$api.trade.chinaumsDivisionExportData(this.getParams());t?this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}):e&&(this.downloadUrl=e,this.downloadName=a,this.downloadView=!0)}}},l=a(81656),o=(0,l.A)(i,function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-body"},[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("e8915d5","日期范围:","lang")}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy/MM/dd",placeholder:$t("t9q3f56","添加时间筛选","lang")},model:{value:t.params.create_time,callback:function(e){t.$set(t.params,"create_time",e)},expression:"params.create_time"}})],1),e("SpFilterFormItem",{attrs:{prop:"back_status",label:$t("1bujv5","回盘状态:","lang")}},[e("el-select",{attrs:{placeholder:$t("v8zzss7","请选择回盘状态","lang")},model:{value:t.params.back_status,callback:function(e){t.$set(t.params,"back_status",e)},expression:"params.back_status"}},t._l(t.backStatusList,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.value}})}),1)],1)],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.exportData}},[t._v($t("efepu4"," 导出 ","lang"))])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.tableList,height:t.wheight-150}},[e("el-table-column",{attrs:{prop:"id",label:$t("ct79ug4","指令ID","lang"),width:"100"}}),e("el-table-column",{attrs:{prop:"total_fee",label:$t("hyxqu74","订单金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.total_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"actual_fee",label:$t("c6pymr4","实际金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.actual_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"division_fee",label:$t("axtnf04","分账金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.division_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"backsucc_fee",label:$t("3a1nyj6","回盘成功金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.backsucc_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"rate_fee",label:$t("w1utao5","业务处理费","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.rate_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"back_status",width:"100",label:$t("bge7gl4","回盘状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return["0"==a.row.back_status?e("el-tag",{attrs:{size:"mini",type:"info",effect:"plain"}},[t._v($t("dvlyms5"," 未处理 ","lang"))]):"1"==a.row.back_status?e("el-tag",{attrs:{size:"mini",type:"success",effect:"plain"}},[t._v($t("c757795"," 处理中 ","lang"))]):"2"==a.row.back_status?e("el-tag",{attrs:{size:"mini",type:"success",effect:"dark"}},[t._v($t("fbkgh4"," 成功 ","lang"))]):"3"==a.row.back_status?e("el-tag",{attrs:{size:"mini",type:"danger",effect:"dark"}},[t._v($t("o8m7oz6"," 部分成功 ","lang"))]):"4"==a.row.back_status?e("el-tag",{attrs:{size:"mini",type:"info",effect:"dark"}},[t._v($t("eaquk4"," 失败 ","lang"))]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"create_time",label:$t("ar84e54","创建时间","lang"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("datetime")(a.row.create_time,"YYYY-MM-DD HH:mm:ss")))])]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.page.total,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1)],1)},[],!1,null,"0eedf622",null).exports,c={components:{exportTip:n.default},mixins:[r.Ay,r.v8],data(){const t={create_time:"",order_id:void 0,division_id:void 0};return{initialParams:t,loading:!1,params:{...t}}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.fetchList()},methods:{dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},dateTransfer(t){let e,a;return t&&(e=this.dateStrToTimeStamp(t[0]+" 00:00:00"),a=this.dateStrToTimeStamp(t[1]+" 23:59:59")),{time_start_begin:e,time_start_end:a}},getParams(){return{...this.dateTransfer(this.params.create_time),order_id:this.params.order_id||void 0,division_id:this.params.division_id||void 0}},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.getParams()};const{list:s,total_count:n}=await this.$api.trade.chinaumsDivisionDetailList(a);this.tableList=s,this.page.total=n,this.loading=!1},onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},async exportData(){const{status:t,url:e,filename:a}=await this.$api.trade.chinaumsDivisionDetailExportData(this.getParams());t?this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}):e&&(this.downloadUrl=e,this.downloadName=a,this.downloadView=!0)}}},p=(0,l.A)(c,function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-body"},[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"order_id",label:$t("t1eula5","指令ID:","lang")}},[e("el-input",{attrs:{placeholder:$t("kpvr0f7","请输入指令ID","lang")},model:{value:t.params.division_id,callback:function(e){t.$set(t.params,"division_id",e)},expression:"params.division_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"order_id",label:$t("hymdzq4","订单号:","lang")}},[e("el-input",{attrs:{placeholder:$t("7djicl6","请输入订单号","lang")},model:{value:t.params.order_id,callback:function(e){t.$set(t.params,"order_id",e)},expression:"params.order_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("e8915d5","日期范围:","lang")}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy/MM/dd",placeholder:$t("t9q3f56","添加时间筛选","lang")},model:{value:t.params.create_time,callback:function(e){t.$set(t.params,"create_time",e)},expression:"params.create_time"}})],1)],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v($t("efepu4"," 导出 ","lang"))])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.tableList,height:t.wheight-150}},[e("el-table-column",{attrs:{prop:"division_id",label:$t("ct79ug4","指令ID","lang"),width:"100"}}),e("el-table-column",{attrs:{prop:"order_id",label:$t("kuwys3","订单号","lang"),width:"180"}}),e("el-table-column",{attrs:{prop:"total_fee",label:$t("hyxqu74","订单金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.total_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"actual_fee",label:$t("c6pymr4","实际金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.actual_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"commission_rate_fee",label:$t("jiwqtk5","收单手续费","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.commission_rate_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"division_fee",label:$t("axtnf04","分账金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.division_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"create_time",label:$t("ar84e54","创建时间","lang"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("datetime")(a.row.create_time,"YYYY-MM-DD HH:mm:ss")))])]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.page.total,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1)],1)},[],!1,null,"5bb48ffe",null).exports,u={mixins:[r.Ay,r.v8],data(){const t={create_time:"",status:"all"};return{initialParams:t,loading:!1,params:{...t},statusList:[{name:$t("en402","全部","lang"),value:"all"},{name:$t("e8s3q3","已提交","lang"),value:"is_resubmit"},{name:$t("fle2m3","未提交","lang"),value:"not"},{name:$t("efg7b3","待处理","lang"),value:"waiting"}]}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.fetchList()},methods:{dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},dateTransfer(t){let e,a;return t&&(e=this.dateStrToTimeStamp(t[0]+" 00:00:00"),a=this.dateStrToTimeStamp(t[1]+" 23:59:59")),{time_start_begin:e,time_start_end:a}},getParams(){return{...this.dateTransfer(this.params.create_time),status:this.params.status||void 0}},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.getParams()};const{list:s,total_count:n}=await this.$api.trade.chinaumsDivisionErrorlogList(a);this.tableList=s,this.page.total=n,this.loading=!1},async refundResubmit(t){await this.$api.trade.chinaumsDivisionErrorlogResubmit(t.id),this.$message.success($t("plbheq5","提交成功!","lang")),this.onSearch()},onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()}}},d={components:{transfer:o,transferdetail:p,transferlog:(0,l.A)(u,function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-body"},[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("e8915d5","日期范围:","lang")}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy/MM/dd",placeholder:$t("t9q3f56","添加时间筛选","lang")},model:{value:t.params.create_time,callback:function(e){t.$set(t.params,"create_time",e)},expression:"params.create_time"}})],1),e("SpFilterFormItem",{attrs:{prop:"status",label:$t("809z9p5","处理状态:","lang")}},[e("el-select",{attrs:{placeholder:$t("vicb7o7","请选择处理状态","lang")},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.statusList,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.value}})}),1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.tableList,height:t.wheight-150}},[e("el-table-column",{attrs:{prop:"division_id",label:$t("ct79ug4","指令ID","lang"),width:"180"}}),e("el-table-column",{attrs:{prop:"total_fee",label:$t("hyxqu74","订单金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.total_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"actual_fee",label:$t("c6pymr4","实际金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.actual_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"division_fee",label:$t("axtnf04","分账金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ￥"+t._s(e.row.division_fee/100)+" ")]}}])}),e("el-table-column",{attrs:{prop:"error_desc",label:$t("jdzh4n4","错误描述","lang")}}),e("el-table-column",{attrs:{prop:"create_time",label:$t("ar84e54","创建时间","lang"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("datetime")(a.row.create_time,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e("el-table-column",{attrs:{prop:"is_resubmit",label:$t("xpente7","是否已重新提交","lang"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return["1"==a.row.is_resubmit?e("span",[t._v($t("et7om4"," 已提交","lang"))]):"2"==a.row.is_resubmit?e("span",[t._v($t("ezvs74"," 待处理","lang"))]):e("span",[t._v($t("g5tni4"," 未提交","lang"))])]}}])}),e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return["0"===a.row.is_resubmit?e("el-link",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.refundResubmit(a.row)}}},[t._v($t("u81zd56"," 重新提交 ","lang"))])],1):t._e()]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.page.total,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1)],1)},[],!1,null,"6bacc50c",null).exports},data(){return{activeName:"transfer",tabList:[{name:$t("cemfj3","划付单","lang"),activeName:"transfer"},{name:$t("nypfeh5","划付单明细","lang"),activeName:"transferdetail"},{name:$t("vojihg6","划付失败日志","lang"),activeName:"transferlog"}]}},mounted(){},methods:{handleTabClick:function(){}}},m=(0,l.A)(d,function(){var t=this,e=t._self._c;return e("div",[-1===t.$route.path.indexOf("detail")?e("div",[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabList,function(a,s){return e("el-tab-pane",{key:s,attrs:{label:a.name,name:a.activeName}},["transfer"==t.activeName?e("transfer"):t._e(),"transferdetail"==t.activeName?e("transferdetail"):t._e(),"transferlog"==t.activeName?e("transferlog"):t._e()],1)}),1)],1):t._e(),e("router-view")],1)},[],!1,null,null,null).exports}}]);