"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6961],{96961:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var l=a(2038),s={data(){return{list:[],total:0,dialogContent:{user_name:"",saleman:"",content:"",images:""},dialogVisible:!1,detailVisiable:!1,dialogTitle:$t("bbyltv4","回复投诉","lang"),replyContent:"",tableLoading:!0,replyForm:{reply_id:0,reply_content:""},detailData:{},listQuery:{page:1,pageSize:20},filterData:{user_name:"",user_mobile:"",saleman_name:"",saleman_mobile:"",reply_status:""},replyStatusSelect:[{label:$t("e6mw13","已回复","lang"),value:1},{label:$t("fj8ux3","未回复","lang"),value:0}],srcList:[]}},mounted(){this.getList()},methods:{getList(){const t=Object.assign(this.listQuery,this.filterData);(0,l.getSalemanCustomerComplaints)(t).then(t=>{t.data.data.list&&(this.list=t.data.data.list,this.total=t.data.data.total_count),this.tableLoading=!1})},handleReply(t){this.dialogVisible=!0,this.dialogTitle=$t("3xvmjx5","回复会员 ","lang")+t.user_name+$t("iewc84"," 的投诉","lang"),this.dialogContent.saleman=t.saleman_name,this.dialogContent.content=t.complaints_content,this.dialogContent.images=t.complaints_images,this.srcList=t.complaints_images?t.complaints_images.split(","):[],this.replyForm.reply_id=t.id},handleClose(){this.dialogVisible=!1,this.resetReplyForm()},handleDetail(t){this.srcList=t.complaints_images?t.complaints_images.split(","):[],this.detailData=Object.assign({},t,{reply_content_list:JSON.parse(t.reply_content)}),this.srcList=this.detailData.complaints_images?this.detailData.complaints_images.split(","):[],this.detailVisiable=!0},handleSizeChange(t){this.listQuery.pageSize=t,this.getList()},handleCurrentChange(t){this.listQuery.page=t,this.getList()},resetReplyForm(){this.replyContent="",this.replyForm={reply_id:0,reply_content:""}},replyCustomerComplaints(){""!=this.replyContent.trim()?(this.replyForm.reply_content=this.replyContent,(0,l.replySalemanCustomerComplaints)(this.replyForm).then(t=>{this.$message({message:$t("3v2jgd5","回复成功！","lang"),type:"success"}),this.dialogVisible=!1,this.getList(),this.resetReplyForm()})):this.$message({message:$t("h6ijcd8","回复内容不能为空","lang"),type:"warning"})},reset(){this.getList()}}},i=(0,a(81656).A)(s,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"15px"}},[e("el-input",{staticClass:"filterInput",attrs:{placeholder:$t("bzwpb3","会员名","lang"),clearable:""},on:{clear:t.reset},model:{value:t.filterData.user_name,callback:function(e){t.$set(t.filterData,"user_name",e)},expression:"filterData.user_name"}}),e("el-input",{staticClass:"filterInput",attrs:{placeholder:$t("ytf6465","会员手机号","lang"),clearable:""},on:{clear:t.reset},model:{value:t.filterData.user_mobile,callback:function(e){t.$set(t.filterData,"user_mobile",e)},expression:"filterData.user_mobile"}}),e("el-input",{staticClass:"filterInput",attrs:{placeholder:$t("c6r76u4","导购员名","lang"),clearable:""},on:{clear:t.reset},model:{value:t.filterData.saleman_name,callback:function(e){t.$set(t.filterData,"saleman_name",e)},expression:"filterData.saleman_name"}}),e("el-input",{staticClass:"filterInput",attrs:{placeholder:$t("7ox09r6","导购员手机号","lang"),clearable:""},on:{clear:t.reset},model:{value:t.filterData.saleman_mobile,callback:function(e){t.$set(t.filterData,"saleman_mobile",e)},expression:"filterData.saleman_mobile"}}),e("el-select",{attrs:{placeholder:$t("bc13y24","回复状态","lang"),clearable:""},on:{change:t.getList},model:{value:t.filterData.reply_status,callback:function(e){t.$set(t.filterData,"reply_status",e)},expression:"filterData.reply_status"}},t._l(t.replyStatusSelect,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),e("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v($t("gg26b4"," 查询 ","lang"))])],1),e("el-card",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{prop:"user_name",label:$t("dx1a2","会员","lang"),width:""}}),e("el-table-column",{attrs:{prop:"user_mobile",label:$t("ytf6465","会员手机号","lang"),width:""}}),e("el-table-column",{attrs:{prop:"saleman_name",label:$t("e5i9z3","导购员","lang"),width:""}}),e("el-table-column",{attrs:{prop:"saleman_mobile",label:$t("7ox09r6","导购员手机号","lang"),width:""}}),e("el-table-column",{attrs:{prop:"complaints_content",label:$t("d0hwa04","投诉内容","lang")}}),e("el-table-column",{attrs:{prop:"reply_status",label:$t("bc13y24","回复状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.reply_status?e("span",[t._v($t("e6mw13","已回复","lang"))]):0==a.row.reply_status?e("span",[t._v($t("fj8ux3","未回复","lang"))]):t._e()]}}])}),e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.handleReply(a.row)}}},[t._v($t("bggqc55"," 回 复 ","lang"))]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.handleDetail(a.row)}}},[t._v($t("i5anit5"," 详 情 ","lang"))])]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,50,100],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{title:$t("obrz2","详情","lang"),visible:t.detailVisiable},on:{"update:visible":function(e){t.detailVisiable=e}}},[e("el-form",{attrs:{"label-position":"left","label-width":"100px"}},[e("el-form-item",{attrs:{label:$t("bzwpb3","会员名","lang")}},[e("span",[t._v(t._s(t.detailData.user_name))])]),e("el-form-item",{attrs:{label:$t("ytf6465","会员手机号","lang")}},[e("span",[t._v(t._s(t.detailData.user_mobile))])]),e("el-form-item",{attrs:{label:$t("e5i9z3","导购员","lang")}},[e("span",[t._v(t._s(t.detailData.saleman_name))])]),e("el-form-item",{attrs:{label:$t("7ox09r6","导购员手机号","lang")}},[e("span",[t._v(t._s(t.detailData.saleman_mobile))])]),e("el-form-item",{attrs:{label:$t("d0hwa04","投诉内容","lang")}},[e("span",[t._v(t._s(t.detailData.complaints_content))])]),e("el-form-item",{attrs:{label:$t("d0iy8t4","投诉图片","lang")}},t._l(t.srcList,function(a,l){return e("el-image",{key:l,staticStyle:{width:"100px",height:"100px"},attrs:{src:a,"preview-src-list":t.srcList}})}),1),e("el-form-item",{attrs:{label:$t("bc13y24","回复状态","lang")}},[0==t.detailData.reply_status?e("span",[t._v($t("fj8ux3","未回复","lang"))]):e("span",[t._v($t("e6mw13","已回复","lang"))])]),e("el-form-item",{attrs:{label:$t("bbvfur4","回复内容","lang")}},t._l(t.detailData.reply_content_list,function(a,l){return e("el-row",{key:l,staticClass:"operator-con",attrs:{gutter:0}},[e("el-col",{attrs:{span:12}},[t._v($t("djbsj35"," 操作人：","lang")+t._s(a.reply_operator_name)+" ")]),e("el-col",{attrs:{span:12}},[t._v($t("bb9dil6"," 回复时间：","lang")+t._s(t._f("datetime")(a.reply_time,"YYYY-MM-DD HH:mm:ss"))+" ")]),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"div-flex"},[e("div",{staticClass:"w-135"},[t._v($t("3xg8095","回复内容：","lang"))]),e("div",[t._v(" "+t._s(a.reply_content)+" ")])])])],1)}),1),e("el-form-item",{attrs:{label:$t("bbz8j14","回复时间","lang")}},[e("span",[t._v(t._s(t._f("datetime")(t.detailData.reply_time,"YYYY-MM-DD HH:mm:ss")))])]),e("el-form-item",{attrs:{label:$t("3uplc65","回复操作员","lang")}},[e("span",[t._v(t._s(t.detailData.reply_operator_name))])])],1)],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:$t("e5i9z3","导购员","lang")}},[e("span",[t._v(t._s(t.dialogContent.saleman))])]),e("el-form-item",{attrs:{label:$t("d0hwa04","投诉内容","lang")}},[e("span",[t._v(t._s(t.dialogContent.content))])]),e("el-form-item",{attrs:{label:$t("ff9l2","图片","lang")}},t._l(t.srcList,function(a,l){return e("el-image",{key:l,staticStyle:{width:"100px",height:"100px"},attrs:{src:a,"preview-src-list":t.srcList}})}),1),e("el-form-item",{attrs:{label:$t("f9in2","回复","lang")}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:$t("m77l047","请输入回复内容","lang"),maxlength:"255","show-word-limit":""},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.handleClose()}}},[t._v($t("caoqm3","取 消","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.replyCustomerComplaints}},[t._v($t("cqk3v3","回 复","lang"))])],1)],1)],1)},[],!1,null,"57113673",null).exports}}]);