"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5004],{95004:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var a=i(5134),r={data(){return{form:{isOpenMemberPoint:"false",gain_point:1,gain_limit:999999,gain_time:3,isOpenDeductPoint:!1,deduct_point:0,deduct_proportion_limit:1,access:"order",include_freight:"true",rule_desc:"",point_pay_first:"1",can_deduct_freight:"1"},access:"order",include_freight:"true"}},mounted(){this.getPointRule()},methods:{isOpenMemberPointHandle(e){"false"==e&&this.$confirm($t("7wdz8z11","若关闭该设置，营销 - 分销推广 - 佣金奖励, 自动变更为现金奖励方式。","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.isOpenMemberPoint="true",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getPointRule(){(0,a.getPointRule)().then(e=>{this.form=e.data.data,this.access=this.form.access,this.include_freight=this.form.include_freight})},save(){if(this.form.isOpenMemberPoint){if(this.form.gain_point<0||this.form.gain_time<0)return void this.$message({message:$t("wh1d9g9","请配置获取积分参数","lang"),type:"error"});if(""!=this.form.gain_limit&&0!=this.form.gain_limit||(this.form.gain_limit=9999999),this.form.gain_limit<this.form.gain_point)return void this.$message({message:$t("cylxdkg","获取积分限制不能小于获取积分比例","lang"),type:"error"});if(this.form.isOpenDeductPoint){if(""==this.form.deduct_point)return void this.$message({message:$t("kh50459","请配置积分抵扣参数","lang"),type:"error"});""!=this.form.deduct_proportion_limit&&0!=this.form.deduct_proportion_limit||(this.form.deduct_proportion_limit=1)}}(0,a.savePointRule)(this.form).then(e=>{this.getPointRule(),this.$message({message:$t("aghf564","保存成功","lang"),type:"success"})})},changeAccess(e){this.access=e,this.access}}},l=(0,i(81656).A)(r,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"section section-white point-rule",attrs:{title:$t("fqdgqg4","积分配置","lang")}},[t("div",{staticClass:"text-center",attrs:{slot:"page-footer"},slot:"page-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v($t("ako8wb5"," 保 存 ","lang"))])],1),t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"180px"}},[t("div",{staticClass:"section-body"},[e.VERSION_SHUYUN()?e._e():t("el-form-item",{attrs:{label:$t("iaayr3","积分：","lang")}},[t("el-switch",{attrs:{width:40,"active-value":"true","inactive-value":"false","inactive-color":"#ccc","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},on:{change:e.isOpenMemberPointHandle},model:{value:e.form.isOpenMemberPoint,callback:function(t){e.$set(e.form,"isOpenMemberPoint",t)},expression:"form.isOpenMemberPoint"}})],1),e.VERSION_SHUYUN()?e._e():t("el-form-item",{attrs:{label:$t("lidyky5","展示名称：","lang")}},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"",max:8},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:$t("es3hi0e","设置店铺内积分对应的展示名称","lang"),placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",[e.VERSION_SHUYUN()||"true"!=e.form.isOpenMemberPoint?e._e():t("el-form-item",{attrs:{label:$t("ssc8hx5","获取方式：","lang")}},[t("el-radio-group",{on:{change:e.changeAccess},model:{value:e.form.access,callback:function(t){e.$set(e.form,"access",t)},expression:"form.access"}},[t("el-radio",{attrs:{label:"order"}},[e._v($t("levzh4"," 订单 ","lang"))]),t("el-radio",{attrs:{label:"items"}},[e._v($t("dght14"," 商品 ","lang"))])],1),"order"==e.access?t("p",{staticClass:"frm-tips"},[e._v($t("f3nrqpd","说明：可按订单金额比例获取","lang"))]):e._e(),"items"==e.access?t("p",{staticClass:"frm-tips"},[e._v($t("4z4biyg","说明：可按单商品设置的积分值获取","lang"))]):e._e()],1),e.VERSION_SHUYUN()||"true"!=e.form.isOpenMemberPoint||"order"!=e.access?e._e():t("el-form-item",{attrs:{label:$t("st5sh05","获取比例：","lang")}},[e._v($t("p4c4efd"," 订单金额1元人民币 获得","lang")),t("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"",min:0,max:9999999},model:{value:e.form.gain_point,callback:function(t){e.$set(e.form,"gain_point",t)},expression:"form.gain_point"}}),e._v($t("i8wll3","积分 ","lang"))],1),e.VERSION_SHUYUN()||"true"!=e.form.isOpenMemberPoint||"order"!=e.access?e._e():t("el-form-item",{attrs:{label:$t("ch6v005","运费配置：","lang")}},[t("el-radio-group",{model:{value:e.form.include_freight,callback:function(t){e.$set(e.form,"include_freight",t)},expression:"form.include_freight"}},[t("el-radio",{attrs:{label:"true"}},[e._v($t("d4id64"," 包含 ","lang"))]),t("el-radio",{attrs:{label:"false"}},[e._v($t("aojuod5"," 不包含 ","lang"))])],1),"true"==e.include_freight?t("p",{staticClass:"frm-tips"},[e._v($t("louzko"," 说明：可设置订单中运费部分金额是否可获取积分 ","lang"))]):e._e(),"false"==e.include_freight?t("p",{staticClass:"frm-tips"},[e._v($t("louzko"," 说明：可设置订单中运费部分金额是否可获取积分 ","lang"))]):e._e()],1),e.VERSION_SHUYUN()||"true"!=e.form.isOpenMemberPoint?e._e():t("el-form-item",{attrs:{label:$t("toh3pe7","积分获取限制：","lang")}},[e._v($t("v94doy7"," 每月最多获取","lang")),t("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"",min:1,max:9999999},model:{value:e.form.gain_limit,callback:function(t){e.$set(e.form,"gain_limit",t)},expression:"form.gain_limit"}}),e._v($t("i8wll3","积分 ","lang")),t("div",{staticClass:"frm-tips"},[e._v($t("jm1nyc","不限制请填写999999","lang"))])],1),e.VERSION_SHUYUN()||"true"!=e.form.isOpenMemberPoint?e._e():t("el-form-item",{attrs:{label:$t("ssmtvh5","获取时间：","lang")}},[e._v($t("ig9mqf5"," 订单完成","lang")),t("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"",min:1,max:9999999},model:{value:e.form.gain_time,callback:function(t){e.$set(e.form,"gain_time",t)},expression:"form.gain_time"}}),e._v($t("9x7xxj7","天，获取积分 ","lang"))],1),[e.VERSION_SHUYUN()||"true"==e.form.isOpenMemberPoint&&!e.VERSION_IN_PURCHASE()?t("el-form-item",{attrs:{label:$t("9p479n5","积分抵扣：","lang")}},[t("el-switch",{attrs:{width:60,"active-value":"true","inactive-value":"false","inactive-color":"#ccc","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},on:{change:e.isOpenMemberPointHandle},model:{value:e.form.isOpenDeductPoint,callback:function(t){e.$set(e.form,"isOpenDeductPoint",t)},expression:"form.isOpenDeductPoint"}})],1):e._e(),e.VERSION_SHUYUN()||"true"==e.form.isOpenMemberPoint&&!e.VERSION_IN_PURCHASE()?t("el-form-item",{attrs:{label:$t("d0c2n47","每单抵扣上限：","lang")}},[t("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"",min:1,max:100},model:{value:e.form.deduct_proportion_limit,callback:function(t){e.$set(e.form,"deduct_proportion_limit",t)},expression:"form.deduct_proportion_limit"}}),e._v($t("gzp4uh","% 上限范围：1<=x<=100 ","lang"))],1):e._e(),e.VERSION_SHUYUN()||"true"==e.form.isOpenMemberPoint&&!e.VERSION_IN_PURCHASE()?t("el-form-item",{attrs:{label:$t("rdt5cb5","抵扣比例：","lang")}},[t("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"",min:1,max:9999999},model:{value:e.form.deduct_point,callback:function(t){e.$set(e.form,"deduct_point",t)},expression:"form.deduct_point"}}),e._v($t("27n2f3c"," 积分 抵扣1元人民币 ","lang"))],1):e._e(),"true"!=e.form.isOpenMemberPoint||e.VERSION_IN_PURCHASE()||e.VERSION_SHUYUN()?e._e():t("el-form-item",{attrs:{label:$t("ev082c7","积分抵扣运费：","lang")}},[t("el-radio-group",{model:{value:e.form.can_deduct_freight,callback:function(t){e.$set(e.form,"can_deduct_freight",t)},expression:"form.can_deduct_freight"}},[t("el-radio",{attrs:{label:"1"}},[e._v($t("d4id64"," 包含 ","lang"))]),t("el-radio",{attrs:{label:"0"}},[e._v($t("aojuod5"," 不包含 ","lang"))])],1)],1),"true"!=e.form.isOpenMemberPoint||e.VERSION_IN_PURCHASE()||e.VERSION_SHUYUN()?e._e():t("el-form-item",{attrs:{label:$t("nw7sjv6","优先积分抵扣","lang")}},[t("el-switch",{attrs:{width:60,"active-value":"1","inactive-value":"0","inactive-color":"#ccc","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},model:{value:e.form.point_pay_first,callback:function(t){e.$set(e.form,"point_pay_first",t)},expression:"form.point_pay_first"}}),t("span",{staticClass:"frm-tips"},[e._v($t("j8u0gwq"," 开启优先积分抵扣功能，消费者下单时优先使用积分抵扣","lang"))])],1),e.VERSION_SHUYUN()||"true"==e.form.isOpenMemberPoint&&!e.VERSION_IN_PURCHASE()?t("el-form-item",{attrs:{label:$t("9jh0mq5","积分规则：","lang")}},[t("SpRichText",{model:{value:e.form.rule_desc,callback:function(t){e.$set(e.form,"rule_desc",t)},expression:"form.rule_desc"}}),e.VERSION_SHUYUN()?t("div",[e._v($t("dny72rf","(注：积分规则会在c端展示！)","lang"))]):e._e()],1):e._e()]],2)],1)])],1)},[],!1,null,"53c31b4b",null).exports}}]);