"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[8811],{38811:function(t,a,e){e.r(a),e.d(a,{default:function(){return c}});var l=e(82997),s=e(62109),o=e(1811),n=e(95093),r=e.n(n),i={components:{shopSelect:o.default},data(){return{dateRange:[],loginType:this.$store.getters.login_type,rangeData:"",loading:!0,performInit:!1,dataSource:{total_count:0,loading:!1},params:{page:1,page_size:10},formData:{start_date:"",end_date:"",profitsharing_status:0,order_id:"",app_pay_type:"",distributor_id:"",order_status:""},profitOptions:[{label:$t("en402","全部","lang"),value:0},{label:$t("edmdy3","已结算","lang"),value:2},{label:$t("fq8cu3","未结算","lang"),value:1}],payOptions:[{label:$t("en402","全部","lang"),value:""},{label:$t("ceo0wr4","微信正扫","lang"),value:"01"},{label:$t("k87qzo5","支付宝正扫","lang"),value:"02"},{label:$t("jboyyu4","银联正扫","lang"),value:"03"},{label:$t("td8rq15","微信公众号","lang"),value:"05"},{label:$t("bov2fpa","支付宝小程序/生活号","lang"),value:"06"},{label:$t("tf07z45","微信小程序","lang"),value:"07"},{label:$t("r2r9pu8","微信正扫(直连)","lang"),value:"08"},{label:$t("fjfdf2b","微信app支付(直连)","lang"),value:"09"},{label:$t("48fuus7","银联app支付","lang"),value:"10"},{label:$t("d3sal97","apple支付","lang"),value:"11"},{label:$t("6yrvgga","微信H5支付(直连)","lang"),value:"12"},{label:$t("ylhwtvc","支付宝app支付(直连)","lang"),value:"13"}],statusOption:[{label:$t("en402","全部","lang"),value:""},{label:$t("llz8v3","退款中","lang"),value:"refunding"},{label:$t("d3gkpk4","支付成功","lang"),value:"pay"},{label:$t("im16q54","退款成功","lang"),value:"refundsuccess"},{label:$t("ilzzyq4","退款失败","lang"),value:"refundfail"}],tableDataList:[],allAccountList:{},totalList:{},pickerOptions:{onPick:({maxDate:t,minDate:a})=>{a&&!t&&(this.dateRange[0]=a),t&&(this.dateRange[1]=t)},disabledDate:t=>{if(this.dateRange){let a=this.dateRange[0],e=7776e6;if(a)return t.getTime()>a.getTime()+e||t.getTime()<a.getTime()-e}},shortcuts:[{text:$t("4znkgj5","最近一个月","lang"),onClick(t){const a=new Date,e=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:$t("4zndsa5","最近三个月","lang"),onClick(t){const a=new Date,e=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},mounted(){this.initDate(),this.getCompanyDataList()},methods:{getCompanyDataList(){this.dataSource.loading=!0,(0,l.GetAccountStatisList)({...this.formData,...this.params}).then(t=>{this.tableDataList=t.data.data.list.data,this.allAccountList=t.data.data.total;let a=t.data.data.list.total_count;this.dataSource={total_count:Number(a),loading:!1},"distributor"===this.loginType&&(0,s.getStoreAccount)({...this.formData,...this.params}).then(t=>{this.totalList=t.data.data.totle}),this.loading=!1}).catch(t=>{this.$message({type:"error",message:$t("mpokya8","获取统计信息出错","lang")})})},performInitChange(){this.performInit=!1},handleReset(){this.formData={start_date:"",end_date:"",profitsharing_status:0,order_id:"",app_pay_type:"",distributor_id:"",order_status:""},this.performInit=!0,this.initDate()},dateChange(t){t&&(this.formData.start_date=t[0],this.formData.end_date=t[1])},storeSearch(t){this.formData.distributor_id=t.shop_id},handleSizeChange(t){this.params.page=1,this.params.page_size=t,this.getCompanyDataList()},handleCurrentChange(t){this.params.page=t,this.getCompanyDataList()},onExportExcel(){(0,l.onOrderExportData)(this.formData).then(t=>{const{status:a,url:e,filename:l}=t.data.data;return a?void this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}):void this.$message({type:"error",message:$t("d17rj2j","无内容可导出 或 执行失败，请检查重试","lang")})})},initDate(){var t=new Date,a=new Date;t.setTime(t.getTime()-2592e6),this.rangeData=[t,a],this.formData.start_date=r()(t).format("YYYY-MM-DD"),this.formData.end_date=r()(a).format("YYYY-MM-DD")}}},c=(0,e(81656).A)(i,function(){var t=this,a=t._self._c;return a("div",[-1===t.$route.path.indexOf("_detail")?a("div",["distributor"===t.loginType?a("el-card",[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-col",{staticClass:"admin-total-num-box",attrs:{span:5}},[a("p",{staticClass:"admin-total-num-top-fonts"},[t._v("¥ "+t._s(t.totalList.income))]),a("p",{staticClass:"admin-total-num-bot-fonts"},[t._v($t("mdefkte"," 店铺总计收入(不含退款) ","lang")),a("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover",content:$t("47ul0zc","分账金额统计(不含退款)","lang")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-col",{staticClass:"admin-total-num-box",attrs:{span:5}},[a("p",{staticClass:"admin-total-num-top-fonts"},[t._v("¥ "+t._s(t.totalList.refund))]),a("p",{staticClass:"admin-total-num-bot-fonts"},[t._v($t("tegz2a9"," 店铺总退款金额 ","lang")),a("el-popover",{attrs:{placement:"bottom",width:"220",trigger:"hover",content:$t("9wiy0ge","店铺总退款金额(已退款成功)","lang")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-col",{staticClass:"admin-total-num-box",attrs:{span:5}},[a("p",{staticClass:"admin-total-num-top-fonts"},[t._v("¥ "+t._s(t.totalList.unsettled_funds))]),a("p",{staticClass:"admin-total-num-bot-fonts"},[t._v($t("zf5juf9"," 店铺未结算金额 ","lang")),a("el-popover",{attrs:{placement:"bottom",width:"420",trigger:"hover",content:$t("6rtux8s","订单未过售后期进行分账的金额(不含全额退款成功及退款中)","lang")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-col",{staticClass:"admin-total-num-box",attrs:{span:5}},[a("p",{staticClass:"admin-total-num-top-fonts"},[t._v("¥ "+t._s(t.totalList.settlement_funds))]),a("p",{staticClass:"admin-total-num-bot-fonts"},[t._v($t("gboqrj9"," 店铺已结算金额 ","lang")),a("el-popover",{attrs:{placement:"bottom",width:"230",trigger:"hover",content:$t("wybnqd","已进行分账且成功金额的总额","lang")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-col",{staticClass:"admin-total-num-box",attrs:{span:4}},[a("p",{staticClass:"admin-total-num-top-fonts"},[t._v("¥ "+t._s(t.totalList.withdrawal_balance))]),a("p",{staticClass:"admin-total-num-bot-fonts"},[t._v($t("pror0n9"," 当前可提现余额 ","lang")),a("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover",content:$t("eztlfqb","汇付店铺账户中当前余额","lang")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})])],1)])],1)],1):t._e(),a("el-card",[a("el-form",{attrs:{model:t.formData,"label-width":"100px"}},[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:$t("daeffv4","日期范围","lang")}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","alue-format":"yyyy-MM-dd",align:"right","unlink-panels":"","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:!1,size:"small"},on:{change:t.dateChange},model:{value:t.rangeData,callback:function(a){t.rangeData=a},expression:"rangeData"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("giip7z4","结算状态","lang")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.formData.profitsharing_status,callback:function(a){t.$set(t.formData,"profitsharing_status",a)},expression:"formData.profitsharing_status"}},t._l(t.profitOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("hyu6l04","订单编号","lang")}},[a("el-input",{attrs:{size:"small",placeholder:$t("fk8u9v7","请输入订单编号","lang")},model:{value:t.formData.order_id,callback:function(a){t.$set(t.formData,"order_id",a)},expression:"formData.order_id"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("d3l3g94","支付类型","lang")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.formData.app_pay_type,callback:function(a){t.$set(t.formData,"app_pay_type",a)},expression:"formData.app_pay_type"}},t._l(t.payOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),"distributor"!==t.loginType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:$t("ikyrsz4","选择店铺","lang")}},[a("shop-select",{ref:"shopSelect",attrs:{size:"small",distributors:"","perform-init":t.performInit,"shop-id-default":t.formData.distributor_id},on:{update:t.storeSearch,performInitChange:t.performInitChange}})],1)],1):t._e(),"distributor"===t.loginType?a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:4,push:14}},[a("div",{staticClass:"flex-right"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleReset}},[t._v($t("miwv34"," 重置 ","lang"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getCompanyDataList}},[t._v($t("ftlbu4"," 搜索 ","lang"))])],1)]):t._e()],1),"distributor"!==t.loginType?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,push:20}},[a("div",{staticClass:"flex-right"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleReset}},[t._v($t("miwv34"," 重置 ","lang"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getCompanyDataList}},[t._v($t("ftlbu4"," 搜索 ","lang"))])],1)])],1):t._e()],1)],1),a("el-card",[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" "+t._s(t.allAccountList.order_count)+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("ye016g5","交易总笔数","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s(t.allAccountList.order_total_fee))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("2ap8cnb","总计交易金额(含退款)","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" "+t._s(t.allAccountList.order_refund_count)+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("utnzc76","已退款总笔数","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s(t.allAccountList.order_refund_total_fee))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("fcuxa5b","退款总金额(退款成功)","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" "+t._s(t.allAccountList.order_refunding_count)+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("470qkf5","在退总笔数","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s(t.allAccountList.order_refunding_total_fee))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("kn742ba","在退总金额(退款中)","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s(t.allAccountList.order_profit_sharing_charge))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("wogtr78","已结算手续费总额","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:3}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s(t.allAccountList.order_un_profit_sharing_charge))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("pqr9xna"," 未结算手续费总额 ","lang")),"distributor"!==t.loginType?a("el-popover",{attrs:{placement:"left",width:"500",trigger:"hover"}},[a("div",{staticClass:"popover-box"},[a("h3",[t._v($t("b3itstc","根据上面筛选条件进行统计","lang"))]),a("h3",[t._v($t("ye016g5","交易总笔数","lang"))]),a("p",[t._v($t("5vneiuc","当前筛选条件下交易总笔数","lang"))]),a("h3",[t._v($t("30ektd6","总计交易金额","lang"))]),a("p",[t._v($t("e45vgyl","当前筛选条件下交易金额(包含所有退款状态)","lang"))]),a("h3",[t._v($t("uqn5u15","已退总笔数","lang"))]),a("p",[t._v($t("uj5r4qu","当前筛选条件下退款成功笔数(多笔部分退款按退款成功次数记录)","lang"))]),a("h3",[t._v($t("fcuxa5b","退款总金额(退款成功)","lang"))]),a("p",[t._v($t("a69azah","仅记录当前筛选条件下退款成功总金额","lang"))]),a("h3",[t._v($t("470qkf5","在退总笔数","lang"))]),a("p",[t._v($t("fd43iud","当前筛选条件下退款中总笔数","lang"))]),a("h3",[t._v($t("kn742ba","在退总金额(退款中)","lang"))]),a("p",[t._v($t("fd88vad","当前筛选条件下退款中总金额","lang"))]),a("h3",[t._v($t("73up9n8","未结算手续费总额","lang"))]),a("p",[t._v($t("gqh9l5i","当前筛选条件下未结算状态中手续费总额","lang"))]),a("h3",[t._v($t("wogtr78","已结算手续费总额","lang"))]),a("p",[t._v($t("ax9wxri","当前筛选条件下已结算状态中手续费总额","lang"))])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#c1c1c1","font-size":"16px"},attrs:{slot:"reference"},slot:"reference"})]):t._e()],1)])],1)],1),a("el-card",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.onExportExcel()}}},[t._v($t("efepu4"," 导出 ","lang"))])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableDataList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"create_time",label:$t("hwbe2","日期","lang"),width:"180"}}),a("el-table-column",{attrs:{prop:"order_id",label:$t("kuwys3","订单号","lang"),width:"180"}}),"distributor"===t.loginType?a("el-table-column",{attrs:{prop:"app_pay_type_desc",label:$t("d3l3g94","支付类型","lang"),width:"150"}}):t._e(),a("el-table-column",{attrs:{prop:"profitsharing_status",label:$t("giip7z4","结算状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s("1"===a.row.profitsharing_status||1===a.row.profitsharing_status?$t("fq8cu3","未结算","lang"):$t("edmdy3","已结算","lang"))+" ")]}}],null,!1,506312e3)}),a("el-table-column",{attrs:{label:$t("vm0eq59","交易金额(含退款)","lang"),width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{color:"#67c23a"}},[t._v("￥"+t._s((e.row.total_fee/100).toFixed(2)))])]}}],null,!1,724329951)}),a("el-table-column",{attrs:{label:$t("24ls36a","平台手续费(含退款)","lang"),width:"170"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" ￥"+t._s((a.row.charge/100).toFixed(2))+" ")]}}],null,!1,2080181005)}),"distributor"!==t.loginType?a("el-table-column",{attrs:{prop:"distributor_name",label:$t("cjqdxi4","店铺名称","lang"),width:"180"}}):t._e(),a("el-table-column",{attrs:{label:$t("im9oyy4","退款金额","lang"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{color:"#d9001b"}},[t._v("￥"+t._s((e.row.refund_fee/100).toFixed(2)))])]}}],null,!1,266633503)}),a("el-table-column",{attrs:{prop:"order_status",label:$t("hys56m4","订单状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s("refunding"===a.row.order_status&&$t("llz8v3","退款中","lang")||"pay"===a.row.order_status&&$t("k7ehtk5","支付成功 ","lang")||"refundsuccess"===a.row.order_status&&$t("im16q54","退款成功","lang")||"refundfail"===a.row.order_status&&$t("ilzzyq4","退款失败","lang")||"NOTPAY"===a.row.order_status&&$t("flmib3","未支付","lang")||"PART_PAYMENT"===a.row.order_status&&$t("imd7no4","部分付款","lang")||"WAIT_GROUPS_SUCCESS"===a.row.order_status&&$t("d1ddtb6","等待拼团成功","lang")||"PAYED"===a.row.order_status&&$t("e90jf3","已支付","lang")||"CANCEL"===a.row.order_status&&$t("e68dg3","已取消","lang")||"WAIT_BUYER_CONFIRM"===a.row.order_status&&$t("xij9qd5","待用户收货","lang"))+" ")]}}],null,!1,3932807076)}),a("el-table-column",{attrs:{fixed:"right",label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:t.matchRoutePath("detail"),query:{orderId:e.row.order_id}}}},[t._v($t("likox4"," 详情 ","lang"))])]}}],null,!1,3345421612)})],1),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.params.page,"page-sizes":[10,20,50],total:t.dataSource.total_count,"page-size":t.params.page_size},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1):t._e(),a("router-view")],1)},[],!1,null,"e87e6708",null).exports}}]);