"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2139],{2139:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var s=a(94644),n=(a(57270),a(42005)),r={data(){return{visible:!1,form:{mobile:"",password:""},currentUser:{id:""}}},computed:{setting(){return"merchant"!=(e=this).$store.getters.login_type?(0,s.createSetting)({search:[{key:"mobile",name:$t("ewbd43","手机号","lang")},{key:"merchant_name",name:$t("b5zu9g4","商户名称","lang")}],columns:[{name:$t("ujvy6j9","手机号（账号名称）","lang"),key:"mobile",render:(e,{row:t})=>"soletrader"===t.settled_type?[e("span",{style:{"margin-right":"20px"}},t.mobile),e("el-tag",{props:{type:"text",type:"warning",size:"medium"}},$t("bu6su3","个体户","lang"))]:[e("span",{style:{"margin-right":"20px"}},t.mobile),e("el-tag",{props:{type:"text",type:"success",size:"medium"}},$t("dv7d2","企业","lang"))]},{name:$t("b5zu9g4","商户名称","lang"),key:"merchant_name"}],actions:[{name:$t("ix54os4","重置密码","lang"),key:"detail",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{e.fnChangePassword(t[0])}}}]}):(0,s.createSetting)({columns:[{name:$t("ujvy6j9","手机号（账号名称）","lang"),key:"mobile",render:(e,{row:t})=>"1"==t.is_merchant_main?[e("span",{style:{"margin-right":"20px"}},t.mobile),e("el-tag",{props:{type:"text",type:"warning",size:"medium"}},$t("1l0s4x5","超级管理员","lang"))]:e("span",{style:{"margin-right":"20px"}},t.mobile)}],actions:[{name:$t("mekb2","编辑","lang"),key:"detail",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{e.editHandler(t[0])}}}]});var e}},methods:{fnChangePassword(e){const t=`${$t("ad354m2k",'<p>请确认是否重置【商户名称】的密码<br/><span class="tips">（新密码将以短信形式发送至其手机号上，<br/>短信费用将从短信余额中扣除）</span></p>',"lang")}`;this.$confirm(t,$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning",dangerouslyUseHTMLString:!0,center:!0}).then(async()=>{(await(0,n.setChangePassword)(e.operator_id)).data.data.status&&this.$message({type:"success",message:$t("tgcwhl5","修改成功!","lang")})})},beforeSearch(e){return{...e}},async fnConfirm(){(await(0,n.updateTheMerchantInfo)({operator_id:this.currentUser.id,password:this.form.password})).data.data.status&&(this.$message.success($t("ai8d7e4","修改成功","lang")),this.handleClose())},editHandler(e){this.visible=!0,this.form.mobile=e.mobile,this.currentUser.id=e.operator_id},handleClose(){this.visible=!1,this.form.password="",this.currentUser.id=""}}},i=(0,a(81656).A)(r,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"merchantAccount"},[t("SpFinder",{ref:"finder",attrs:{"split-count":2,"search-row-count":2,"fixed-row-action":!0,setting:e.setting,"no-selection":"",hooks:{beforeSearch:e.beforeSearch},url:"/merchant/operator"}}),t("el-dialog",{attrs:{title:$t("1jfmbe6","编辑账号信息","lang"),visible:e.visible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{attrs:{model:e.form,"label-width":"60px"}},[t("el-form-item",{attrs:{label:$t("fcm8nf4","登录账号","lang")}},[t("span",[e._v(e._s(e.form.mobile))])]),t("el-form-item",{attrs:{label:$t("fce1f94","登录密码","lang")}},[t("el-input",{staticStyle:{"max-width":"160px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t("span",{staticStyle:{color:"#999"}},[e._v($t("icfrttk"," 密码6-16位，支持字母、数字、下划线","lang"))])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v($t("caoqm3","取 消","lang"))]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.fnConfirm}},[e._v($t("hnjoo3","确 定","lang"))])],1)],1)],1)},[],!1,null,"2c89f80d",null).exports}}]);