"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6054],{36054:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});a(44114),a(57270);var l=a(6919),r=a(87378),i=a(43224),n={inject:["refresh"],components:{imgPicker:r.default,imgBox:i.A},data(){return{form:{id:"",form_element:"text",field_title:"",field_name:"username",options:[{value:"",image_url:""},{value:"",image_url:""}],image_url:"",pic_name:""},formText:!1,formTextarea:!1,formRadio:!1,formCheckbox:!1,formSelect:!1,formLable:"",formName:"",imgDialog:!1,isGetImage:!1,imgIndex:0,ctrlFields:[{name:"username",value:"username"},{name:"birthday",value:"birthday"},{name:"idcard",value:"idcard"},{name:"mobile",value:"mobile"},{name:"bankcard",value:"bankcard"},{name:"address",value:"address"},{name:"other",value:"other"},{name:"type",value:"type"},{name:"account number",value:"account number"},{name:"Attendance IDCard",value:"Attendance IDCard"},{name:"Company name",value:"Company name"},{name:"Unified Social Credit Code",value:"Unified Social Credit Code"},{name:"Attachment upload",value:"Attachment upload"}],defalutFileName:"username"}},mounted(){this.$route.query.id&&(0,l.getSettingInfo)(this.$route.query.id).then(e=>{this.form=e.data.data,this.defalutFileName=e.data.data.field_name,this.form.options||(this.form.options=[{value:"",image_url:""},{value:"",image_url:""}])})},methods:{handleOnChageCtrlFields(e){this.form.field_name=e},ElementChange(e){"text"!=e&&"textarea"!=e||(this.form.options=[{value:"",image_url:""},{value:"",image_url:""}])},fieldTitleChange(e){this.formLable=e},fieldNameChange(e){this.formName=e},addOption(){let e={value:"",key:Date.now()};this.form.options.push(e)},removeDomain(e){var t=this.form.options.indexOf(e);-1!==t&&this.form.options.splice(t,1)},submitAction(){const e=this;this.$refs.form.validate(t=>{if(!t)return this.$message({type:"error",message:$t("y73vps8","请录入正确的数据","lang")}),!1;this.form.id?(0,l.updateSetting)(this.form).then(t=>{t.data.data&&this.$message({message:$t("deua4r4","更新成功","lang"),type:"success",duration:2e3,onClose(){e.refresh(),e.$router.go(-1)}})}):(0,l.saveSetting)(this.form).then(t=>{t.data.data&&this.$message({message:$t("e7ygyc4","添加成功","lang"),type:"success",duration:2e3,onClose(){e.refresh(),e.$router.go(-1)}})})})},handleCancel(){this.$router.go(-1)},handleImgChange(e){this.imgIndex=e,this.imgDialog=!0,this.isGetImage=!0},pickImg(e){"all"==this.imgIndex?this.form.image_url=e.url:this.form.options[this.imgIndex].image_url=e.url,this.imgDialog=!1},closeImgDialog(){this.imgDialog=!1},handleImgBChange(){this.imgIndex="all",this.imgDialog=!0,this.isGetImage=!0}}},o=(0,a(81656).A)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"section section-white"},[t("div",{staticClass:"section-header with-border"},[e._v($t("xc61rj6","添加表单元素","lang"))]),t("div",{staticClass:"section-body"},[t("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"150px","label-position":"right"}},[t("el-form-item",{attrs:{label:$t("ij5d2","标题","lang"),prop:"field_title",rules:[{required:!0,message:$t("2j7m1y5","请输入标题","lang"),trigger:"blur"}]}},[t("el-col",{attrs:{span:15}},[t("el-input",{attrs:{maxlength:30,placeholder:$t("1nb2n06","身高(cm)","lang")},on:{change:e.fieldTitleChange},model:{value:e.form.field_title,callback:function(t){e.$set(e.form,"field_title","string"==typeof t?t.trim():t)},expression:"form.field_title"}})],1)],1),t("el-form-item",{attrs:{label:$t("z1qzhi6","表单元素类型","lang"),prop:"form_element",rules:[{required:!0,message:$t("xoj2ov7","请选择表单元素","lang"),trigger:"change"}]}},[t("el-col",{attrs:{span:15}},[t("el-radio-group",{on:{change:e.ElementChange},model:{value:e.form.form_element,callback:function(t){e.$set(e.form,"form_element",t)},expression:"form.form_element"}},[t("el-radio",{attrs:{label:"text"}},[e._v($t("xrrl86"," 单文本框 ","lang"))]),t("el-radio",{attrs:{label:"number"}},[e._v($t("4fohl89"," 数字(纯数字) ","lang"))]),t("el-radio",{attrs:{label:"checkbox"}},[e._v($t("cbj39y5"," 复选框 ","lang"))]),t("el-radio",{attrs:{label:"select"}},[e._v($t("lsqvoe6"," 下拉选择 ","lang"))]),t("el-radio",{attrs:{label:"radio"}},[e._v($t("4euebr6"," 单选按钮 ","lang"))]),t("el-radio",{attrs:{label:"textarea"}},[e._v($t("lm9kdc6"," 多文本域 ","lang"))]),t("el-radio",{attrs:{label:"date"}},[e._v($t("z5kva6"," 日期选择 ","lang"))]),t("el-radio",{attrs:{label:"area"}},[e._v($t("bzs8mu6"," 地区选择 ","lang"))]),t("el-radio",{attrs:{label:"idcard"}},[e._v($t("s08euf7"," 上传身份证 ","lang"))]),t("el-radio",{attrs:{label:"otherfile"}},[e._v($t("ad01bc8"," 上传其他附件 ","lang"))])],1)],1)],1),e._l(e.form.options,function(a,l){return"radio"==e.form.form_element||"checkbox"==e.form.form_element||"select"==e.form.form_element?t("el-form-item",{key:a.key,attrs:{label:$t("ll5kp3","选择项","lang")+l,prop:"options."+l+".value",rules:{required:!0,message:$t("m7cstz7","选择项不能为空","lang"),trigger:"blur"},span:10}},[t("el-row",[t("el-col",{attrs:{span:15}},[t("el-input",{attrs:{width:"20"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"domain.value"}})],1),l>1?t("el-col",{attrs:{span:5}},[t("el-button",{on:{click:function(t){return t.preventDefault(),e.removeDomain(a)}}},[e._v($t("db22k4"," 删除 ","lang"))])],1):e._e()],1),t("el-row",[t("el-col",{attrs:{span:5}},[t("div",[t("imgBox",{attrs:{"img-url":e.wximageurl+a.image_url,inline:""},on:{click:function(t){return e.handleImgChange(l)}}})],1),t("div",{staticClass:"frm-tips"},[e._v($t("k0y0zv17"," 只能上传jpg/png文件，且不超过2M （建议尺寸：400px * 450px） ","lang"))]),t("imgPicker",{attrs:{"dialog-visible":e.imgDialog,"sc-status":e.isGetImage},on:{chooseImg:e.pickImg,closeImgDialog:e.closeImgDialog}})],1)],1)],1):e._e()}),"radio"==e.form.form_element||"checkbox"==e.form.form_element||"select"==e.form.form_element?t("el-form-item",[t("el-col",{attrs:{span:15}},[t("el-button",{attrs:{type:"primary",circle:""},on:{click:e.addOption}},[e._v($t("fqea3"," 增 ","lang"))])],1)],1):e._e(),t("el-form-item",{attrs:{label:$t("gxxsk54","英文标识","lang"),rules:[{required:!0,message:$t("gl58aq7","请输入英文标识","lang"),trigger:"blur"}]}},[t("el-col",{attrs:{span:15}},[t("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:$t("yakh2s7","请选择英文标识","lang")},on:{change:e.handleOnChageCtrlFields},model:{value:e.defalutFileName,callback:function(t){e.defalutFileName=t},expression:"defalutFileName"}},e._l(e.ctrlFields,function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.value}})}),1)],1)],1),t("el-form-item",[t("div",{staticStyle:{"line-height":"24px"}},[e._v($t("wtbohp9","英文标识填写说明：","lang"))]),t("div",{staticStyle:{"line-height":"24px"}},[e._v($t("mm5phn6y"," 需填写姓名请选择字符username、生日为birthday、 身份证号码为idcard、手机号码为mobile、银行卡号为bankcard、地址为address、 公司名称为Company name、统一社会信用代码为Unified Social Credit Code、出席人身份证号为Attendance IDCard、帐号为account number、 类型为type、提示信息为Reminder information、上传附件为Attachment upload，若都不是，选其他。 ","lang"))])]),"other"==e.defalutFileName?t("el-form-item",{attrs:{label:$t("gxxsk54","英文标识","lang"),prop:"field_name",rules:[{required:!0,message:$t("gl58aq7","请输入英文标识","lang"),trigger:"blur"}]}},[t("el-col",{attrs:{span:15}},[t("el-input",{attrs:{placeholder:$t("cb1hmnh","height 或者 shengao","lang")},on:{blur:e.fieldNameChange},model:{value:e.form.field_name,callback:function(t){e.$set(e.form,"field_name","string"==typeof t?t.trim():t)},expression:"form.field_name"}})],1)],1):e._e(),"idcard"==e.form.form_element||"otherfile"==e.form.form_element?t("el-form-item",{attrs:{label:$t("i3lfbd4","证照名称","lang"),prop:"pic_name",rules:[{required:"idcard"==e.form.form_element||"otherfile"==e.form.form_element,message:$t("ffhlji7","请输入证照名称","lang"),trigger:"blur"}]}},[t("el-col",{attrs:{span:15}},[t("el-input",{attrs:{maxlength:30,placeholder:$t("ffhlji7","请输入证照名称","lang")},model:{value:e.form.pic_name,callback:function(t){e.$set(e.form,"pic_name","string"==typeof t?t.trim():t)},expression:"form.pic_name"}})],1)],1):e._e(),t("el-form-item",[t("el-button",{nativeOn:{click:function(t){return e.handleCancel.apply(null,arguments)}}},[e._v($t("dd4ni4"," 取消 ","lang"))]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAction}},[e._v($t("cp35x4"," 保存 ","lang"))])],1)],2)],1)])},[],!1,null,"33e501a6",null),m=o.exports}}]);