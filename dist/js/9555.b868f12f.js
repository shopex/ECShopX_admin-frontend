"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9555],{9555:function(t,e,a){a.r(e),a.d(e,{default:function(){return n}});var s=a(95353),i=(a(57270),a(91142)),o={data(){return{isEdit:!1,vipGradeList:[],loading:!1,total_count:0,params:{page:1,pageSize:20},form:{tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:""},memberTagDialog:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],datapass_block:1}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.getDataList()},methods:{onCopy(){this.$notify.success({message:$t("bkv2mw4","复制成功","lang"),showClose:!0})},handleCurrentChange(t){this.params.page=t,this.getDataList()},addTemplate(){this.memberTagDialog=!0,this.form={tag_id:"",tag_name:"",tag_color:"#ff1939",description:""}},editAction(t,e){this.form=e,this.memberTagDialog=!0},preview(t,e){this.dialogVisible=!0,this.dataInfo=e},searchData(){this.params.page=1,this.getDataList()},getDataList(){this.loading=!0,(0,i.listVipGrade)(this.params).then(t=>{this.vipGradeList=t.data.data.list,this.total_count=t.data.data.total_count,this.datapass_block=t.data.data.datapass_block,this.loading=!1}).catch(t=>{this.loading=!1,this.$message({type:"error",message:$t("65u1h98","获取列表信息出错","lang")})})},deleteAction(t,e){this.$confirm($t("xvw7g9f","此操作将删除数据, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{deleteTag(e.tag_id).then(e=>{this.vipGradeList.splice(t,1),this.$message({message:$t("azeh8z4","删除成功","lang"),type:"success",duration:5e3})}).catch(()=>{this.$message({type:"error",message:$t("azdahk4","删除失败","lang")})})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getTaskTime(t){let e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;let i=e.getDate();return i=i<10?"0"+i:i,a+"-"+s+"-"+i},getTimeStr(t){return this.getTaskTime(new Date(1e3*parseInt(t)))},handleCancelLabelsDialog(){this.memberTagDialog=!1},saveTagData(){this.memberTagDialog=!1,this.form.tag_id?updateTag(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.getDataList())}):saveTag(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.getDataList())})}}},n=(0,a(81656).A)(o,function(){var t=this,e=t._self._c;return e("SpPage",[e("el-card",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.vipGradeList,height:t.wheight-80}},[e("el-table-column",{attrs:{prop:"order_id",label:$t("kuwys3","订单号","lang"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"order-num"},[t._v(" "+t._s(a.row.order_id)+" "),e("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.order_id,expression:"scope.row.order_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"el-icon-document-copy"})])],1),e("div",{staticClass:"order-time"},[e("el-tooltip",{attrs:{effect:"dark",content:$t("a72nl44","下单时间","lang"),placement:"top-start"}},[e("i",{staticClass:"el-icon-time"})]),t._v(" "+t._s(t._f("datetime")(a.row.created,"YYYY-MM-DD HH:mm:ss"))+" ")],1)]}}])}),e("el-table-column",{attrs:{prop:"lv_type",label:$t("lny62","等级","lang"),width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:"vip"===a.row.lv_type?"warning":"danger",size:"mini"}},[t._v(" "+t._s(a.row.lv_type)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"title",label:$t("cmmck3","卡名称","lang")}}),e("el-table-column",{attrs:{prop:"card_type",label:$t("ctb4h3","卡类型","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.card_type.desc)+" ")]}}])}),e("el-table-column",{attrs:{width:"160",label:$t("ytf6465","会员手机号","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("i",{staticClass:"el-icon-mobile"}),t._v(t._s(a.row.mobile)+" "),0==t.datapass_block?e("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"el-icon-document-copy"})]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"price",label:$t("i585jj4","购买金额","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"mark"},[e("span",{staticClass:"cur"},[t._v(t._s(a.row.fee_symbol))]),t._v(t._s(a.row.price/100)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"discount",label:$t("ex2353","折扣值","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((100-e.row.discount)/100)+$t("grrc2","折 ","lang"))]}}])})],1),t.total_count>t.params.pageSize?e("div",{staticClass:"content-center content-top-padded"},[e("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.params.page,total:t.total_count,"page-size":t.params.page_size},on:{"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)},[],!1,null,"28fab36f",null).exports}}]);