"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4194],{14194:function(t,a,e){e.r(a),e.d(a,{default:function(){return h}});e(44114),e(57270);var s=e(21255),l=(e(18111),e(7588),{props:{tmpData:Array,handleType:String,loading:Boolean},data(){return{}},computed:{resetText(){return t=>{var a=$t("g5o72","审核","lang");return"1"==t.status?a=$t("dudn2","下架","lang"):"2"==t.status&&(a=$t("erte2","发布","lang")),a}}},mounted(){},methods:{whereDisable(t){return!0},viewDetails(t){this.$refs.notestable.clearSelection(),this.$refs.notestable.toggleRowSelection(t),this.$emit("viewDetails",t.post_id)},auditNote(t){var a={id_set:[t.post_id],auditdiff:!1,aloneAuditType:"1"==t.status?"refuse":"pass"};this.$refs.notestable.clearSelection(),this.$refs.notestable.toggleRowSelection(t),this.$emit("selectNotes",a)},checkChange(t){var a=[],e=!1,s=null;t.forEach(t=>{a.push(t.post_id),null==s?s=t.status:s!=t.status&&(e=!0)});var l={id_set:a,auditdiff:e};this.$emit("selectNotes",l)}}}),i=e(81656),o=(0,i.A)(l,function(){var t=this,a=t._self._c;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"notestable",attrs:{data:t.tmpData},on:{"selection-change":t.checkChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.whereDisable}}),a("el-table-column",{attrs:{prop:"post_id",label:"id"}}),a("el-table-column",{attrs:{prop:"title",label:$t("g3tqbx4","笔记标题","lang")}}),a("el-table-column",{attrs:{label:$t("o0hh2","角标","lang"),prop:"badges[0].badge_name"}}),a("el-table-column",{attrs:{prop:"status_text",label:$t("g3v8kn4","笔记状态","lang")}}),a("el-table-column",{attrs:{label:$t("hge52","排序","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.is_top?a("el-tag",{attrs:{type:"danger",size:"mini",effect:"dark"}},[t._v($t("jyavp4"," 置项 ","lang"))]):a("div",{staticClass:"text"},[t._v(" "+t._s(e.row.p_order)+" ")])]}}])}),a("el-table-column",{attrs:{label:$t("chizf3","创建人","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["2"==e.row.source?a("div",[t._v($t("io38z3","管理员","lang"))]):a("div",[t._v(t._s(e.row.userInfo.nickname)),a("br"),t._v(t._s(e.row.userInfo.mobile))])]}}])}),a("el-table-column",{attrs:{prop:"created_text",label:$t("ar84e54","创建时间","lang")}}),t.handleType?a("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operating-icons"},["2"!=e.row.source?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.viewDetails(e.row,e.$index)}}},[t._v($t("likox4"," 详情 ","lang"))]):t._e(),"2"==e.row.source?a("el-button",{attrs:{type:"text"}},[a("router-link",{attrs:{to:{path:"/content/ugc/note-management/editor",query:{id:e.row.post_id}}}},[t._v($t("juz394"," 编辑 ","lang"))])],1):t._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.auditNote(e.row)}}},[t._v(" "+t._s(t.resetText(e.row))+" ")])],1)]}}],null,!1,453833281)}):t._e()],1)],1)},[],!1,null,"e815646e",null).exports,n=e(37505),r=e(73910),d={components:{flagModal:r.A},props:{post_id:String,dialogIsShow:Boolean},data(){return{magnifyShow:!1,magnifySrc:null,magnifyVideo:null,errInfo:null,formLoad:!1,dialogTitle:$t("g3ziyj4","笔记详情","lang"),post_info:{},taglist:[],is_top:!1,flagModalShow:!1,relFlag:{},ruleForm:{is_top:0,p_order:0,flag:null},rules:{p_order:[{required:!0,message:$t("9hohtf5","请填写序号","lang"),trigger:"change"},{validator:(t,a,e)=>a<0?e(new Error($t("tzltjp7","数值不能小于0","lang"))):a>t.max?e(new Error($t("o8ajlu6","数值不能超过","lang")+t.max)):void e(),max:5,trigger:"blur"}]}}},computed:{},watch:{post_id:{handler(t,a){this.fetch()},immediate:!0}},mounted(){},methods:{fetch(){const t=this,{post_id:a}=this.$props;this.$data.formLoad=!0,(0,s.getNotesDetail)({post_id:a}).then(a=>{var e=a.data.data.post_info,s=[],l={},i={p_order:e.p_order,is_top:e.is_top};JSON.parse(e.images).forEach(t=>{t.tags&&(s=[...s,...t.tags])}),e.badges&&(i.badges=[e.badges[0].badge_id],l=e.badges[0]),t.$data.post_info=e,t.$data.taglist=s,t.$data.ruleForm=i,t.$data.relFlag=l,t.$data.is_top=1==e.is_top,t.$data.formLoad=!1},a=>{t.$data.post_info={},t.$data.errInfo=a,t.$data.formLoad=!1})},handleCancelLabelsDialog(){this.$emit("cancelLabelsDialog",!1)},handleAudit(){const{post_info:t,ruleForm:a}=this.$data;var e={id_set:[t.post_id],auditdiff:!1,aloneAuditType:"pass",option:a};this.$refs.dataForm.validate(t=>{if(!t)return!1;this.handleCancelLabelsDialog(),this.$emit("notesAuditHandle",e)})},serialChanges(){const{is_top:t}=this.$data;this.ruleForm.p_order=0,this.ruleForm.is_top=t?1:0,this.updataNotes()},updataNotes(){const t=this,{post_info:a,ruleForm:e}=this.$data;e.post_id=a.post_id,(0,s.notesSimpleEdit)(e).then(a=>{var e=a.data.data.message;this.$message({type:"success",message:e,duration:1500,onClose(){t.$emit("modalHandle")}})},t=>{})},magnifyHide(){this.$data.magnifyShow=!1,this.$data.magnifyVideo=null,this.$data.magnifySrc=null},magnifyImg(t,a){a?this.$data.magnifyVideo=t:this.$data.magnifySrc=t,this.$data.magnifyShow=!0},toUserInfo(t){this.$router.push({path:"/member/member",query:{mobile:t.mobile}})},flagModalHide(t){this.$data.flagModalShow=t},flagModalHandle(t){this.ruleForm.badges=[t.badge_id],this.$data.relFlag=t,this.flagModalHide(!1),this.updataNotes()},removeFlag(){this.ruleForm.badges=null,this.relFlag={},this.updataNotes()}}},c=(0,i.A)(d,function(){var t=this,a=t._self._c;return a("div",[a("el-dialog",{attrs:{title:t.dialogTitle,"before-close":t.handleCancelLabelsDialog,visible:t.dialogIsShow,width:"40%",top:"3vh"},on:{"update:visible":function(a){t.dialogIsShow=a}}},[t.post_info.post_id?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoad,expression:"formLoad"}],staticClass:"notesinfo"},[a("el-form",{ref:"dataForm",staticClass:"notes-form",attrs:{model:t.ruleForm,rules:t.rules}},[a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("h7btmv6"," 笔记排序 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[a("div",{staticClass:"serialBar"},[a("el-checkbox",{on:{change:t.serialChanges},model:{value:t.is_top,callback:function(a){t.is_top=a},expression:"is_top"}},[t._v($t("jyavp4"," 置项 ","lang"))]),a("span",{staticClass:"text-ml"},[t._v($t("ejnu8sm"," 最多置顶两篇笔记，置顶后将自动排序最优。 ","lang"))])],1),a("div",{staticClass:"serialBar"},[a("el-form-item",{staticClass:"serial-ipt",attrs:{prop:"serial"}},[a("el-input",{staticClass:"serialInp",attrs:{disabled:t.is_top,type:"number",size:"small",min:"0",max:"50"},on:{change:t.updataNotes},model:{value:t.ruleForm.p_order,callback:function(a){t.$set(t.ruleForm,"p_order",a)},expression:"ruleForm.p_order"}}),a("span",{staticClass:"text-ml"},[t._v($t("q807ipp"," 默认为0，排序数字越小优先级越高；相同优先级下 ","lang"))])],1)],1)])],1),a("el-row",{staticClass:"flag-bar"},[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("hcz4i76"," 笔记角标 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[t.ruleForm.badges?a("div",{staticClass:"badgebar"},[a("span",{staticClass:"text"},[t._v($t("f1pc34"," 已选：","lang")+t._s(t.relFlag.badge_name)+" ")]),a("span",{staticClass:"el-icon el-icon-close",on:{click:t.removeFlag}})]):a("span",{staticClass:"text"},[t._v($t("l72nr3","请选择","lang"))]),a("el-button",{staticClass:"flagBtn",attrs:{size:"small",type:"primary",plain:""},on:{click:function(a){return t.flagModalHide(!0)}}},[t._v($t("n4lpuz6"," 选择角标 ","lang"))])],1)],1)],1),a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("h8972r6"," 笔记标题 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[t._v(" "+t._s(t.post_info.title)+" ")])],1),a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("h7lh8j6"," 笔记描述 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[a("pre",{staticClass:"info-content",domProps:{innerHTML:t._s(t.post_info.content)}})])],1),t.post_info.topics?a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("4rhzoc6"," 关联话题 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},t._l(t.post_info.topics,function(e,s){return a("span",{key:s,staticClass:"tag"},[t._v(t._s(e.topic_name))])}),0)],1):t._e(),a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("h5kupn6"," 笔记图片 ","lang"))]),a("el-col",{staticClass:"value imgflxe",attrs:{span:20}},[t.post_info.video?a("div",{staticClass:"img"},[a("video",{staticClass:"video",attrs:{id:"video"}},[a("source",{attrs:{src:t.post_info.video,type:"video/mp4"}})]),a("div",{staticClass:"upload-box",on:{click:function(a){return t.magnifyImg(t.post_info.video,!0)}}},[a("div",{staticClass:"iconfont icon-play"})])]):t._e(),t._l(JSON.parse(t.post_info.images),function(e,s){return a("div",{key:s,staticClass:"img",on:{click:function(a){return t.magnifyImg(e.url)}}},[a("img",{attrs:{src:e.url,alt:""}})])})],2)],1),t.taglist.length?a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("lxao2q8"," 图片内Tag ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},t._l(t.taglist,function(e,s){return a("span",{key:s,staticClass:"tag"},[t._v(t._s(e.tag_name))])}),0)],1):t._e(),t.post_info.goods?a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("4gkk1v6"," 推荐商品 ","lang"))]),a("el-col",{staticClass:"value imgflxe",attrs:{span:20}},t._l(t.post_info.goods,function(e,s){return a("div",{key:s,staticClass:"goods"},[a("div",{staticClass:"pics"},[a("img",{attrs:{src:e.pics,alt:""}})]),a("div",{staticClass:"text"},[t._v(" "+t._s(e.item_name)+" ")])])}),0)],1):t._e(),t.post_info.userInfo?a("el-row",{staticClass:"bor-top"},[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("b60xgq6"," 用户昵称 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[a("div",{staticClass:"user-name",on:{click:function(a){return t.toUserInfo(t.post_info.userInfo)}}},[t._v(" "+t._s(t.post_info.userInfo.nickname)+" ")])])],1):t._e(),t.post_info.userInfo?a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("dbf7aw5"," 手机号 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[t._v(" "+t._s(t.post_info.userInfo.mobile)+" ")])],1):t._e(),a("el-row",[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("h7xuna6"," 笔记时间 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[t._v(" "+t._s(t.post_info.created_text)+" ")])],1),a("el-row",{staticClass:"bor-top"},[a("el-col",{staticClass:"name",attrs:{span:4}},[t._v($t("rgitl16"," 当前状态 ","lang"))]),a("el-col",{staticClass:"value",attrs:{span:20}},[t._v(" "+t._s(t.post_info.status_text)+" ")])],1)],1):t._e(),t.post_info.post_id?t._e():a("div",{staticClass:"tips"},[t._v("id "+t._s(t.post_id)+$t("j96ke4"," 笔记:","lang")+t._s(t.errInfo))]),t.post_info.post_id?a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"0"==t.post_info.status?"primary":"danger"},on:{click:t.handleAudit}},[t._v(" "+t._s("0"==t.post_info.status?$t("g5o72","审核","lang"):$t("pawk2","重审","lang"))+" ")]),a("el-button",{on:{click:t.handleCancelLabelsDialog}},[t._v($t("dd4ni4"," 取消 ","lang"))])],1):t._e()]),a("el-dialog",{staticClass:"pic-dialog",attrs:{"before-close":t.magnifyHide,visible:t.magnifyShow,width:"600px",top:"3vh"},on:{"update:visible":function(a){t.magnifyShow=a}}},[a("div",{staticClass:"magnify",on:{click:t.magnifyHide}},[t.magnifyVideo?a("video",{staticClass:"video",attrs:{id:"preview-video",controls:"",autoplay:""}},[a("source",{attrs:{src:t.magnifyVideo,type:"video/mp4"}})]):t._e(),t.magnifySrc?a("img",{attrs:{src:t.magnifySrc,alt:""}}):t._e()])]),a("flagModal",{attrs:{"dialog-is-show":t.flagModalShow},on:{cancelLabelsDialog:t.flagModalHide,modalHandle:t.flagModalHandle}})],1)},[],!1,null,"1dc02f16",null).exports,g={components:{imgPicker:e(87378).default},props:{dialogIsShow:Boolean},data(){return{formLoad:!1,ruleForm:{nickname:null,avatar:null},rules:{nickname:[{required:!0,message:$t("n2et2f7","请填写账户名称","lang"),trigger:"blur"}],avatar:[{required:!0,message:$t("x0sbkt7","请选择账户头像","lang"),trigger:"blur"}]},picsDialog:!1,isGetPics:!1,multiple:!1}},mounted(){this.getFetch()},methods:{getFetch(){(0,s.getUGCSetting)({type:"official"}).then(t=>{var{data:a}=t.data,e={nickname:a["official.nickname"],avatar:a["official.headerimgurl"]};this.$data.ruleForm=e})},pickPics(t){this.ruleForm.avatar=t.url,this.picsDialog=!1},handlePicsChange:function(){this.picsDialog=!0,this.isGetPics=!0,this.multiple=!0,this.$data.picdanger=!1},closePicsDialog(){this.picsDialog=!1},removePicsImg(){this.ruleForm.avatar=null},confirmHandle(){const t=this,{ruleForm:a}=this.$data;this.$refs.dataForm.validate(e=>{if(!e)return!1;{const{video_enable:e}=this.$data;var l={type:"official",setting:{"official.nickname":a.nickname,"official.headerimgurl":a.avatar}};l.setting=JSON.stringify(l.setting),(0,s.setUGCSetting)(l).then(a=>{var{message:e}=a.data.data;this.$message({type:"success",message:e,duration:1500,onClose(){t.handleCancelLabelsDialog()}})})}})},handleCancelLabelsDialog(){this.$emit("cancelLabelsDialog",!1)}}},p=(0,i.A)(g,function(){var t=this,a=t._self._c;return a("div",[a("el-dialog",{attrs:{title:$t("g5ykfa5","官方号设置","lang"),"before-close":t.handleCancelLabelsDialog,visible:t.dialogIsShow,width:"30%"},on:{"update:visible":function(a){t.dialogIsShow=a}}},[a("div",{staticClass:"tips"},[t._v($t("8dxrmp","所有官方笔记都将改下设置的账户名称及头像进行展示。","lang"))]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoad,expression:"formLoad"}],ref:"dataForm",staticClass:"official-form",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-row",[a("el-col",[a("el-form-item",{staticClass:"last-ipt",attrs:{label:$t("i7pams4","账户名称","lang"),prop:"nickname"}},[a("el-input",{staticClass:"mipt",attrs:{maxlength:"20","show-word-limit":!0},model:{value:t.ruleForm.nickname,callback:function(a){t.$set(t.ruleForm,"nickname",a)},expression:"ruleForm.nickname"}})],1)],1),a("el-col",[a("el-form-item",{staticClass:"last-ipt",attrs:{label:$t("i7py244","账户头像","lang"),prop:"avatar"}},[a("div",{class:["img-wrap",t.ruleForm.avatar?"mask":null]},[t.ruleForm.avatar?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.ruleForm.avatar}}):t._e(),t.ruleForm.avatar?a("div",{staticClass:"goodspic-mask",on:{click:t.removePicsImg}},[a("div",{staticClass:"iconfont icon-trash-alt"})]):a("div",{staticClass:"goodspic-mask",on:{click:t.handlePicsChange}},[a("div",{staticClass:"iconfont iconfont icon-camera"})])],1)])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandle}},[t._v($t("iv7ii4"," 确认 ","lang"))]),a("el-button",{on:{click:t.handleCancelLabelsDialog}},[t._v($t("dd4ni4"," 取消 ","lang"))])],1)],1),a("imgPicker",{attrs:{"dialog-visible":t.picsDialog,"sc-status":t.isGetPics},on:{chooseImg:t.pickPics,closeImgDialog:t.closePicsDialog}})],1)},[],!1,null,"4b251e66",null).exports,u={components:{noteslist:o,auditNote:n.A,viewNotes:c,flagModal:r.A,settingOfficial:p},provide(){return{refresh:this.getDataList}},data(){return{activeName:"first",loading:!1,params:{page:1,pageSize:10,status:null,source:null},pagers:{total:0},noteList:[],flagList:[],aloneForm:{},post_id:null,id_set:[],filt_badge:null,searchkey:"",searchtype:"nickname",searPlace:$t("2j83985","请输入昵称","lang"),auditdiff:!1,dufStatus:null,auditDialogShow:!1,notesDialogShow:!1,flagModalShow:!1,video_enable:!1,settingshow:!1}},watch:{$route(t,a){const{path:e}=this.$route;-1===e.indexOf("editor")&&this.searchData()}},mounted(){const{path:t}=this.$route;-1===t.indexOf("editor")&&(this.searchData(),this.getFlagsList(),this.getVideoSetting())},methods:{handleCurrentChange(t){this.params.page=t,this.getDataList()},handleSizeChange(t){this.params.page=1,this.params.pageSize=t,this.getDataList()},viewDetails(t){this.$data.post_id=t,this.cancelNotesDialog(!0)},clearAudioData(){this.$data.id_set=[],this.$data.aloneForm={},this.$data.auditdiff=!1},researchMsg(t){var a=$t("2j83985","请输入昵称","lang");return"title"==t?a=$t("7lr2i56","请输入关键字","lang"):"mobile"==t&&(a=$t("7ji3y96","请输入手机号","lang")),this.params.nickname=null,this.params.content=null,this.params.mobile=null,a},searchData(t){const{searchkey:a,searchtype:e}=this.$data;if("searchkey"==t&&""==a){var s=this.researchMsg(e);return this.$message({type:"error",message:s,duration:1500}),!1}this.$data.pagers={total:0},this.params.page=1,this.clearAudioData(),this.getDataList()},changeName(){const{searchtype:t}=this.$data;var a=this.researchMsg(t);this.$data.searPlace=a},getDataList(){const t=this,{activeName:a,params:e,searchkey:l,searchtype:i,filt_badge:o}=this.$data;e[i]=""!=l?l:null,e.badges=o?[o]:null,t.$data.loading=!0,(0,s.getNotes)(e).then(a=>{var{list:e,total_count:s}=a.data.data;t.$data.noteList=e,t.$data.pagers={total:s},t.$data.loading=!1},a=>{t.$data.loading=!1})},getFlagsList(){const t=this;(0,s.getBadge)({}).then(a=>{var{list:e,total_count:s}=a.data.data;t.$data.flagList=e})},getVideoSetting(){(0,s.getUGCSetting)({type:"video"}).then(t=>{var{data:a}=t.data,e="1"==a.video_enable;this.$data.video_enable=e})},setUGCSetting(){const{video_enable:t}=this.$data;var a={type:"video",setting:{video_enable:t?"1":"0"}};a.setting=JSON.stringify(a.setting),(0,s.setUGCSetting)(a).then(t=>{var{message:a}=t.data.data;this.$message({type:"success",message:a})})},handleClick(t,a){var{activeName:e,params:s}=this.$data;"first"===this.activeName?s.status=null:"second"===this.activeName?s.status="0":"third"===this.activeName?s.status="1":"fourth"===this.activeName&&(s.status="4"),this.searchData()},cancelAuditDialog(t){this.$data.auditDialogShow=t},cancelNotesDialog(t){this.$data.notesDialogShow=t},officialModalHide(t){this.$data.settingshow="boolean"==typeof t&&t},addNote(){this.$router.push({path:this.matchRoutePath("editor")})},delNote(){const{id_set:t}=this.$data;var a={post_id:t};if(t.length<1)return this.$message({type:"error",message:$t("2egqjx5","请选择笔记","lang"),duration:1500}),!1;this.$confirm($t("tg9spbi","此操作将永久删除该笔记, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,s.notesDelete)(a).then(t=>{var a=t.data.data.message;this.clearAudioData(),this.getDataList(),this.$message({type:"success",message:a})})})},selectNotes(t){this.$data.id_set=t.id_set,this.$data.auditdiff=t.auditdiff,t.aloneAuditType?(t.option&&(this.$data.aloneForm=t.option),this.$data.dufStatus=t.aloneAuditType,this.auditHandle()):this.$data.dufStatus="pass"},auditHandle(){const{id_set:t,dufStatus:a}=this.$data;t.length?this.cancelAuditDialog(!0):this.$message({type:"error",message:$t("2egqjx5","请选择笔记","lang"),duration:1500})},auditNote(t){const{id_set:a,aloneForm:e}=this.$data;e&&(t={...t,...e}),t.post_id=a,(0,s.notesVerify)(t).then(t=>{var a=t.data.data.message;this.cancelAuditDialog(!1),this.clearAudioData(),this.getDataList(),this.$message({type:"success",message:a})})},flagModalHide(t){this.$data.flagModalShow=t},handleNotesFlag(){const{id_set:t}=this.$data;t.length?this.flagModalHide(!0):this.$message({type:"error",message:$t("2egqjx5","请选择笔记","lang"),duration:1500})},flagModalHandle(t){const{id_set:a}=this.$data;var e={post_id:a,badges:[t.badge_id]};(0,s.batchSetBadges)(e).then(t=>{var a=t.data.data.message;this.flagModalHide(!1),this.clearAudioData(),this.getDataList(),this.$message({type:"success",message:a})})}}},h=(0,i.A)(u,function(){var t=this,a=t._self._c;return a("SpRouterView",[a("SpPage",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"p-title"},[t._v($t("lcknfn6","社区笔记管理","lang"))])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"tips"},[t._v($t("z839i71p"," 用户发表的笔记会通过「机器审核」，若包含违禁内容将自动变为下架状态；官方笔记不会被审核，默认下架状态，需人工上架笔记； ","lang")),a("br"),t._v($t("as4bmj10","若通过「机器审核」，则会为待审核，等待人工审核，此时社区内会展示笔记。 ","lang"))])]),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:t.searPlace,size:"small"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchData("searchkey")}},model:{value:t.searchkey,callback:function(a){t.searchkey=a},expression:"searchkey"}},[a("el-select",{staticClass:"barSelect",attrs:{slot:"prepend",placeholder:$t("l72nr3","请选择","lang")},on:{change:t.changeName},slot:"prepend",model:{value:t.searchtype,callback:function(a){t.searchtype=a},expression:"searchtype"}},[a("el-option",{attrs:{label:$t("f6ukdm4","用户昵称","lang"),value:"nickname"}}),a("el-option",{attrs:{label:$t("qc473b5","用户手机号","lang"),value:"mobile"}}),a("el-option",{attrs:{label:$t("5naff5","标题关键字","lang"),value:"content"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(a){return t.searchData("searchkey")}},slot:"append"})],1)],1)],1),a("el-row",{staticClass:"margin-col"},[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.auditHandle(!1)}}},[t._v($t("l31ll36"," 状态变更 ","lang"))]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addNote}},[t._v($t("ymhqjd8"," 新建官方笔记 ","lang"))]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleNotesFlag}},[t._v($t("dgq4vs5"," 打角标 ","lang"))]),a("span",{staticClass:"marbor"}),a("el-select",{staticClass:"searSelect",attrs:{filterable:"",placeholder:$t("htf21k4","角标不限","lang")},on:{change:t.searchData},model:{value:t.filt_badge,callback:function(a){t.filt_badge=a},expression:"filt_badge"}},[a("el-option",{attrs:{label:$t("htf21k4","角标不限","lang"),value:null}}),t._l(t.flagList,function(t,e){return a("el-option",{key:e,attrs:{label:t.badge_name,value:t.badge_id}})})],2),a("el-select",{staticClass:"searSelect",attrs:{filterable:"",placeholder:$t("avgn184","全部笔记","lang")},on:{change:t.searchData},model:{value:t.params.source,callback:function(a){t.$set(t.params,"source",a)},expression:"params.source"}},[a("el-option",{attrs:{label:$t("avgn184","全部笔记","lang"),value:null}}),a("el-option",{attrs:{label:$t("bze7el4","官方笔记","lang"),value:"2"}}),a("el-option",{attrs:{label:$t("f6y7or4","用户笔记","lang"),value:"1"}})],1),a("span",{staticClass:"marbor"}),a("el-button",{attrs:{plain:""},on:{click:function(a){return t.officialModalHide(!0)}}},[t._v($t("i7h89u8"," 官方账号设置 ","lang"))]),a("span",{staticClass:"marbor"}),a("el-switch",{attrs:{"active-color":"#13ce66","active-text":$t("ttr3g68","允许会员上传视频","lang")},on:{change:t.setUGCSetting},model:{value:t.video_enable,callback:function(a){t.video_enable=a},expression:"video_enable"}})],1)],1),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:$t("avez634","全部状态","lang"),name:"first"}},[a("noteslist",{ref:"notestable",attrs:{"tmp-data":t.noteList,loading:t.loading,"handle-type":"view"},on:{selectNotes:t.selectNotes,viewDetails:t.viewDetails}})],1),a("el-tab-pane",{attrs:{label:$t("eftvg3","待审核","lang"),name:"second"}},[a("noteslist",{attrs:{"tmp-data":t.noteList,loading:t.loading,"handle-type":"view"},on:{selectNotes:t.selectNotes,viewDetails:t.viewDetails}})],1),a("el-tab-pane",{attrs:{label:$t("e656s3","已发布","lang"),name:"third"}},[a("noteslist",{attrs:{"tmp-data":t.noteList,loading:t.loading,"handle-type":"view"},on:{selectNotes:t.selectNotes,viewDetails:t.viewDetails}})],1),a("el-tab-pane",{attrs:{label:$t("e57r13","已下架","lang"),name:"fourth"}},[a("noteslist",{attrs:{"tmp-data":t.noteList,loading:t.loading,"handle-type":"view"},on:{selectNotes:t.selectNotes,viewDetails:t.viewDetails}})],1)],1),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:t.pagers.total,"page-size":t.params.pageSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("auditNote",{attrs:{"audit-type":"note","dialog-is-show":t.auditDialogShow,auditdiff:t.auditdiff,"duf-status":t.dufStatus},on:{notesAuditHandle:t.auditNote,cancelLabelsDialog:t.cancelAuditDialog}}),t.post_id?a("viewNotes",{attrs:{"dialog-is-show":t.notesDialogShow,post_id:t.post_id},on:{notesAuditHandle:t.selectNotes,cancelLabelsDialog:t.cancelNotesDialog,modalHandle:t.getDataList}}):t._e(),t.flagModalShow?a("flagModal",{attrs:{"dialog-is-show":t.flagModalShow},on:{cancelLabelsDialog:t.flagModalHide,modalHandle:t.flagModalHandle}}):t._e(),t.settingshow?a("settingOfficial",{attrs:{"dialog-is-show":t.settingshow},on:{cancelLabelsDialog:t.officialModalHide}}):t._e()],1)],1)},[],!1,null,"f4ad8c6e",null).exports}}]);