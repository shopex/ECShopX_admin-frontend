"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5222],{65222:function(e,t,i){i.r(t),i.d(t,{default:function(){return $}});i(44114),i(18111),i(22489),i(20116),i(61701);var a=i(95353),r=i(77825),s=i(26456),l=i(41776),o=i(17659),n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"dialog-tip"},[t("p",[e._v($t("gn4vf313","订单应付金额 = 商品应付金额 + 运费；总运费 ＝ 运费 + 积分抵扣运费。","lang"))]),t("p",[e._v($t("43rdgp1d"," 一键改价后的金额为商品总价，该金额会按商品单价的金额比例分摊到每个商品，不会分摊到优惠和运费。 ","lang"))]),t("p",[e._v($t("x9tsone","订单应付金额不能小于等于0。","lang"))])])}],c=i(69900),d=i.n(c),m={name:"CompTableView",props:{value:Array,itemTotalFee:[String,Number],freightFee:[String,Number],orderFee:[String,Number],orderId:String,receiptType:String,pointFreightFee:[String,Number]},data(){return{tableData:[],tableLoading:!1,globalChangePrice:"",globalFreightFee:"",changeType:"change_price",dItemTotalFee:0,dFreightFee:0,dOrderFee:0,downType:""}},watch:{value(e,t){this.tableData=e.map(e=>({item_id:e.item_id,item_name:e.item_name,item_spec_desc:e.item_spec_desc||$t("cvevh3","单规格","lang"),price:(e.price/100).toFixed(2),item_fee:(e.item_fee/100).toFixed(2),num:e.num,discount_fee:(0-e.discount_fee/100).toFixed(2),point:(0-e.point).toFixed(2),total_fee:(e.total_fee/100).toFixed(2),change_discount:e.change_discount,change_price:e.change_price,total:e.total.toFixed(2)})),this.dItemTotalFee=this.itemTotalFee,this.dFreightFee=this.freightFee,this.dOrderFee=this.orderFee}},created(){},methods:{globalPriceFormat(){new RegExp("((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$").test(this.globalChangePrice)||(this.globalChangePrice=this.globalChangePrice.substring(0,this.globalChangePrice.length-1))},globalFreightFormat(){new RegExp("((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$").test(this.globalFreightFee)||(this.globalFreightFee=this.globalFreightFee.substring(0,this.globalFreightFee.length-1))},priceFormat({change_price:e},t){new RegExp("((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$").test(e)||(this.tableData[t].change_price=e.substring(0,e.length-1))},discountFormat({change_discount:e},t){new RegExp("^([1-9]|[1-9]\\d|100)$").test(e)||(this.tableData[t].change_discount=e.substring(0,e.length-1))},calcItemsFee(){return new(d())(this.dOrderFee).minus(this.dFreightFee).toFixed(2)},objectSpanMethod({row:e,column:t,rowIndex:i,columnIndex:a}){const r=this.tableData.length;if(7===a)return i%r===0?{rowspan:r,colspan:1}:{rowspan:0,colspan:0}},toggleChangePriceType(e){this.changeType=e},onChangeItemPrice({change_price:e,total_fee:t}){if(parseFloat(e)>=parseFloat(t))return void this.$message.error($t("nos1mw9","不能高于原订单金额","lang"));const i=this.tableData.map(e=>({item_id:e.item_id,total_fee:e.change_price?100*e.change_price:100*e.total_fee}));this.downType="items",this.calcOrder(i)},onChangeItemDiscount({change_discount:e}){const t=this.tableData.map(e=>({item_id:e.item_id,total_fee:e.change_discount?e.total_fee*e.change_discount:100*e.total_fee}));this.downType="items",this.calcOrder(t)},async handleChangePrice(){isNaN(parseFloat(this.globalChangePrice))||(this.downType="total",this.calcOrder([]))},onChangeFreightFee(){const e=this.tableData.map(e=>{let t;return t="change_price"==this.changeType?e.change_price?100*e.change_price:100*e.total_fee:e.change_discount?e.total_fee*e.change_discount:100*e.total_fee,{item_id:e.item_id,total_fee:t}});this.downType="items",this.calcOrder(e)},async calcOrder(e){this.tableLoading=!0;let t={order_id:this.orderId};this.downType&&(t.down_type=this.downType),this.globalChangePrice&&(t.total_fee=100*this.globalChangePrice),isNaN(parseFloat(this.globalFreightFee))||(t.freight_fee=100*this.globalFreightFee),e.length>0&&(t.items=e);try{const e=await this.$api.trade.changePrice(t);this.downType="",this.tableLoading=!1,this.$emit("onChange",e)}catch(e){this.tableLoading=!1}}}},p=i(81656),g=(0,p.A)(m,function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-tableview"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"span-method":e.objectSpanMethod,height:280,border:""}},[t("el-table-column",{attrs:{prop:"itemName",label:$t("eywr2","商品","lang")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",[e._v(e._s(i.row.item_name))]),t("div",{staticClass:"sku-text"},[e._v(e._s(i.row.item_spec_desc))])]}}])}),t("el-table-column",{attrs:{prop:"price",label:$t("ibv9me5","单价（¥）","lang"),width:"100"}}),t("el-table-column",{attrs:{prop:"num",label:$t("i1y72","数量","lang"),width:"80"}}),t("el-table-column",{attrs:{prop:"discount_fee",label:$t("wn4ekc5","优惠（¥）","lang"),width:"100"}}),t("el-table-column",{attrs:{prop:"point",label:$t("efdok97","积分抵扣（¥）","lang"),width:"120"}}),t("el-table-column",{attrs:{prop:"total_fee",label:$t("v9ye0q5","总计（¥）","lang"),width:"100"}}),t("el-table-column",{attrs:{width:"160"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-dropdown",{on:{command:e.toggleChangePriceType}},[t("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s("change_price"==e.changeType?$t("logk4d7","直接改价（¥）","lang"):$t("7m20bq8","按折扣改价（%）","lang"))+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{staticClass:"change-price-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{class:{active:"change_discount"==e.changeType},attrs:{command:"change_discount"}},[e._v($t("fek5ji7"," 按折扣改价 ","lang"))]),t("el-dropdown-item",{class:{active:"change_price"==e.changeType},attrs:{command:"change_price"}},[e._v($t("3yydbj6"," 直接改价 ","lang"))])],1)],1)]},proxy:!0},{key:"default",fn:function(i){return["change_price"==e.changeType?t("el-input",{attrs:{placeholder:$t("ff7f7z4","直接改价","lang"),size:"small"},on:{change:()=>e.onChangeItemPrice(i.row)},nativeOn:{keyup:function(t){return(()=>e.priceFormat(i.row,i.$index)).apply(null,arguments)}},model:{value:i.row.change_price,callback:function(t){e.$set(i.row,"change_price",t)},expression:"scope.row.change_price"}}):e._e(),"change_discount"==e.changeType?t("el-input",{attrs:{placeholder:$t("q3zngu5","按折扣改价","lang"),size:"small"},on:{change:()=>e.onChangeItemDiscount(i.row)},nativeOn:{keyup:function(t){return(()=>e.discountFormat(i.row,i.$index)).apply(null,arguments)}},model:{value:i.row.change_discount,callback:function(t){e.$set(i.row,"change_discount",t)},expression:"scope.row.change_discount"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"total",label:$t("v74ji99","商品应付金额（¥）","lang"),width:"150"}})],1),t("div",{staticClass:"tableview-ft"},[t("div",{staticClass:"ft-l"},[t("div",{staticClass:"l-item"},[t("label",[e._v($t("uxqnsi5","一键改价：","lang"))]),t("el-input",{staticClass:"price",attrs:{size:"small"},on:{change:e.handleChangePrice},nativeOn:{keyup:function(t){return(()=>e.globalPriceFormat(e.globalChangePrice)).apply(null,arguments)}},model:{value:e.globalChangePrice,callback:function(t){e.globalChangePrice=t},expression:"globalChangePrice"}}),t("el-button",{attrs:{type:"text"},on:{click:e.handleChangePrice}},[e._v($t("in1ck4"," 确定 ","lang"))])],1),t("div",{staticClass:"l-item"},[t("label",[e._v($t("lrqoh3","运费：","lang"))]),t("el-input",{attrs:{size:"small",disabled:"dada"==e.receiptType},on:{change:e.onChangeFreightFee},nativeOn:{keyup:function(t){return(()=>e.globalFreightFormat(e.globalFreightFee)).apply(null,arguments)}},model:{value:e.globalFreightFee,callback:function(t){e.globalFreightFee=t},expression:"globalFreightFee"}}),"dada"!=e.receiptType?t("el-button",{attrs:{type:"text"},on:{click:()=>{this.globalFreightFee=0,this.onChangeFreightFee()}}},[e._v($t("bchdai5"," 免运费 ","lang"))]):e._e()],1),e.pointFreightFee?t("div",{staticClass:"l-item"},[t("div",{staticClass:"freight-point-discount"},[e._v($t("fxhrsk8"," 积分抵扣运费：","lang")+e._s(`${e.pointFreightFee.toFixed(2)}`)+" ")])]):e._e()]),t("div",{staticClass:"ft-r"},[t("div",{staticClass:"r-item"},[t("label",[e._v($t("7svvg17","商品应付金额：","lang"))]),t("span",[e._v(e._s(` ¥${e.dItemTotalFee.toFixed(2)}`))])]),t("div",{staticClass:"r-item"},[t("label",[e._v($t("cqpsja4","总运费：","lang"))]),t("span",[e._v(e._s(` ¥${e.dFreightFee.toFixed(2)}`))])]),t("div",{staticClass:"r-item"},[t("label",[e._v($t("ev082c7","积分抵扣运费：","lang"))]),t("span",[e._v(e._s(`-¥${e.pointFreightFee.toFixed(2)}`))])]),t("div",{staticClass:"r-item"},[t("label",[e._v($t("2rnt5j7","订单应付金额：","lang"))]),t("span",[e._v(e._s(` ¥${e.dOrderFee.toFixed(2)}`))])])])]),e._m(0)],1)},n,!1,null,null,null),h=g.exports,u={name:"CompReceiveInfo",props:["orderId"],data(){return{buy_member:"",buy_mobile:"",isZiti:!1,receive_name:"",receive_mobile:"",receive_address:""}},created(){this.fetch()},methods:{async fetch(){const{orderInfo:e,distributor:t,profit:i,tradeInfo:a}=await this.$api.trade.getOrderDetail(this.orderId),{store_address:r,store_name:s}=t,{items:l=[],user_id:o,receiver_name:n,receiver_mobile:c,receiver_state:d,receiver_city:m,receiver_district:p,receiver_address:g,order_class:h,total_fee:u,freight_fee:_,item_fee_new:f,item_total_fee:b,receipt_type:y,point_freight_fee:v,ziti_info:$}=e,{username:F,mobile:w}=await this.$api.member.getMember({user_id:o});if(this.buy_member=F,this.buy_mobile=w,"excard"==h||"shopadmin"==h)this.receive_name=F,this.receive_mobile=w,this.receive_address=`${r}（${s}）`,this.isZiti=!0;else if("ziti"==y){const{province:e,city:t,area:i,address:a,pickup_date:r,pickup_time:s}=$;this.receive_name=n,this.receive_mobile=c,this.receive_address=`${e}${t}${i}${a}`,this.isZiti=!0}else this.receive_name=n,this.receive_mobile=c,this.receive_address=`${d}${m}${p}${g}`,this.isZiti=!1;this.$emit("onLoad",{orderInfo:e})}}},_=(0,p.A)(u,function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-receive-info receive-info"},[t("div",{staticClass:"receive-item"},[t("label",{staticClass:"item-label"},[e._v($t("bru8385","订单ID：","lang"))]),e._v(" "+e._s(e.orderId)+" ")]),t("div",{staticClass:"receive-item"},[t("label",{staticClass:"item-label"},[e._v($t("byljo3","买家：","lang"))]),e._v(" "+e._s(`${e.buy_member} | ${e.buy_mobile}`)+" ")]),t("div",{staticClass:"receive-item"},[t("label",{staticClass:"item-label"},[e._v(e._s(`${e.isZiti?$t("d6anuf4","提货人：","lang"):$t("dcn95d4","收货人：","lang")}`))]),e._v(" "+e._s(`${e.receive_name} | ${e.receive_mobile}`)+" ")]),t("div",{staticClass:"receive-item"},[t("label",{staticClass:"item-label"},[e._v(" "+e._s(`${e.isZiti?$t("np8obo5","自提地址：","lang"):$t("ca5zk75","收货地址：","lang")}`)+" ")]),e._v(" "+e._s(e.receive_address)+" ")])])},[],!1,null,null,null).exports,f=i(95093),b=i.n(f),y=i(33318),v={mixins:[r.Ay,r.v8],data(){const e=this.$createElement;return{loading:!1,defaultTime:["00:00:00","23:59:59"],params:{mobile:"",order_id:"",salesman_mobile:"",receipt_type:"",source:"",order_status:"",order_class:"employee_purchase",is_invoiced:"",time_start_begin:"",time_start_end:"",distributor_type:"",distributor_id:"",subDistrict:[],act_id:[],enterprise_id:""},datapass_block:1,subDistrictList:[],distributionType:y.as,orderStatus:(0,s.L3)()?y.i8:(0,s.hd)()?y.dj:y.w8,orderType:y.W4,invoiceStatus:y.jY,orderCategory:y.In,pickerOptions:y.Dv,orderSourceList:[],remarkDialog:!1,remarkFormList:[{label:$t("bokzlb4","备注信息","lang"),key:"remark",type:"textarea",maxlength:150,placeholder:$t("4dr4fe","请输入对此订单需要备注的内容","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],remarkForm:{orderId:"",is_distribution:1,remark:""},cancelOrderDialog:!1,cancelOrderFormList:[{component:()=>e("div",{class:"tip-bar"},[$t("a2n8qw13","订单取消后，消费者在商城中看到的订单状态将变更为已取消，无法对其进行支付操作。","lang")])},{label:"",component:()=>e(_,{attrs:{orderId:this.cancelOrderForm.order_id},on:{onLoad:this.onLoadCancelOrderRef}})},{label:$t("b149oz4","取消原因","lang"),key:"cancel_reason",placeholder:$t("amt70d9","请选择取消订单原因","lang"),type:"select",options:[{title:$t("pz0w3u8","客户现在不想购买","lang"),value:1},{title:$t("s2wbp58","客户商品价格较贵","lang"),value:2},{title:$t("5ub2dc6","客户价格波动","lang"),value:3},{title:$t("54f4lf6","客户商品缺货","lang"),value:4},{title:$t("2iss7z6","客户重复下单","lang"),value:5},{title:$t("s1oguha","客户订单商品选择有误","lang"),value:6},{title:$t("yfg8h2a","客户支付方式选择有误","lang"),value:7},{title:$t("9z46tka","客户收货信息填写有误","lang"),value:8},{title:$t("ozd78ya","客户发票信息填写有误","lang"),value:9},{title:$t("l4oqme8","客户无法支付订单","lang"),value:10},{title:$t("j4es208","客户长时间未付款","lang"),value:11},{title:$t("5mt8x66","客户其他原因","lang"),value:12}],required:!0,message:$t("adohlc4","不能为空","lang"),onChange:e=>{this.cancelOrderFormList[3].isShow=12==e}},{label:$t("alu6v54","其他原因","lang"),key:"other_reason",type:"input",placeholder:$t("bf9qgl9","请填写取消订单原因","lang"),isShow:!1,validator:(e,t,i)=>{12!=this.cancelOrderForm.cancel_reason||t?i():i(new Error($t("adohlc4","不能为空","lang")))}}],cancelOrderForm:{order_id:"",buy_member:"",buy_mobile:"",receive_name:"",receive_mobile:"",receive_address:"",loading:!1,cancel_reason:"",other_reason:""},deliverGoodsDialog:!1,deliverGoodsFormList:[{label:$t("b5urmu4","发货类型","lang"),key:"delivery_type",type:"radio",disabled:!1,options:[{label:"batch",name:$t("d5a74n4","整单发货","lang")},{label:"sep",name:$t("csx9py4","拆分发货","lang")}],onChange:e=>{this.deliverGoodsFormList[1].options[4].isShow="sep"==e}},{label:"",key:"items",type:"table",options:[{title:$t("cwisy3","商品名","lang"),key:"item_name"},{title:$t("i1y72","数量","lang"),key:"num",width:60},{title:$t("nbuukn5","已发货数量","lang"),key:"delivery_item_num",width:100},{title:$t("mapop37","总支付价（¥）","lang"),key:"price",width:120},{title:$t("b5r61h4","发货数量","lang"),key:"item_num",width:160,render:(t,i,a)=>t.num-t.delivery_item_num==0?$t("e7hbq3","已完成","lang"):e("el-input-number",{attrs:{size:"mini",min:1,max:t.num-t.delivery_item_num},model:{value:t.delivery_num,callback:e=>{this.$set(t,"delivery_num",e)}}}),isShow:!1}]},{label:$t("cp0yj74","快递公司","lang"),key:"delivery_corp",placeholder:$t("whmqve7","请选择快递公司","lang"),type:"select",options:[],required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("evwh164","物流单号","lang"),key:"delivery_code",type:"input",placeholder:$t("s5y24m6","物流公司单号","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],deliverGoodsForm:{order_id:"",delivery_type:"batch",delivery_corp:"",delivery_code:"",type:"",items:[]},writeOffDialog:!1,writeOffFormList:[{label:"",key:"items",type:"table",options:[{title:$t("cwisy3","商品名","lang"),key:"item_name"},{title:$t("i1y72","数量","lang"),key:"num",width:60},{title:$t("nbuukn5","已发货数量","lang"),key:"delivery_item_num",width:100},{title:$t("mapop37","总支付价（¥）","lang"),key:"price",width:120}]}],writeOffForm:{order_id:"",pickupcode:"",items:[]},refundDialog:!1,refundFormList:[{label:$t("b17rgd4","取消来源","lang"),key:"source",type:"text"},{label:$t("fd5ujm4","申请时间","lang"),key:"applyTime",type:"text"},{label:$t("im43bd4","退款状态","lang"),key:"refundStatus",type:"text"},{label:$t("bpvh2l4","处理进度","lang"),key:"process",type:"text"},{label:$t("im9oyy4","退款金额","lang"),key:"refundPrice",type:"text"},{label:$t("d3h9kv4","支付方式","lang"),key:"payType",type:"text"},{label:$t("b149oz4","取消原因","lang"),key:"reason",type:"text"},{label:$t("bpsmjv4","处理结果","lang"),key:"check_cancel",type:"radio",options:[{label:"0",name:$t("budzk3","不同意","lang")},{label:"1",name:$t("ettv2","同意","lang")}],onChange:e=>{this.refundFormList[8].isShow="0"==e}},{label:$t("czp1gs4","拒绝原因","lang"),key:"shop_reject_reason",type:"input",placeholder:$t("kjdze37","请输入拒绝原因","lang"),isShow:!1,validator:(e,t,i)=>{"0"!=this.refundFormList.check_cancel||t?i():i(new Error($t("adohlc4","不能为空","lang")))}}],refundForm:{order_id:"",source:"",applyTime:"",refundStatus:"",process:"",refundPrice:"",payType:"",reason:"",check_cancel:"1",shop_reject_reason:""},changePriceDialog:!1,changePriceFormList:[{component:()=>e("div",{class:"tip-bar"},[$t("bb8alp10","仅未支付订单可修改价格，改价后请联系买家刷新订单并核实订单金额后再支付。","lang")])},{component:()=>e("div",{class:"receive-info"},[e("div",{class:"receive-item"},[e("label",{class:"item-label"},[$t("byljo3","买家：","lang")]),`${this.changePriceForm.buy_member} | ${this.changePriceForm.buy_mobile}`]),e("div",{class:"receive-item"},[e("label",{class:"item-label"},[`${this.changePriceForm.isZiti?$t("d6anuf4","提货人：","lang"):$t("dcn95d4","收货人：","lang")}`]),`${this.changePriceForm.receive_name} | ${this.changePriceForm.receive_mobile}`]),e("div",{class:"receive-item"},[e("label",{class:"item-label"},[`${this.changePriceForm.isZiti?$t("np8obo5","自提地址：","lang"):$t("ca5zk75","收货地址：","lang")}`]),this.changePriceForm.receive_address])])},{component:()=>e(h,{attrs:{value:this.changePriceForm.items,orderId:this.changePriceForm.order_id,itemTotalFee:this.changePriceForm.itemTotalFee,pointFreightFee:this.changePriceForm.pointFreightFee,receiptType:this.changePriceForm.receipt_type,freightFee:this.changePriceForm.freightFee,orderFee:this.changePriceForm.orderFee},on:{onChange:this.onChangeTableView}})}],changePriceForm:{order_id:"",buy_member:"",buy_mobile:"",receive_name:"",receive_mobile:"",receive_address:"",loading:!1,isZiti:!1,items:[],receipt_type:"",itemTotalFee:0,freightFee:0,orderFee:0,pointFreightFee:0},origin:"",isBindOMS:!1,purchaseActivityList:[],enterpriseList:[],jstErpSetting:{}}},computed:{...(0,a.L8)(["login_type","isMicorMall"])},async created(){const{result:e}=await this.$api.trade.isBindOMS();this.isBindOMS=e,this.pagesQuery=new o.A({fetch:this.getPurchaseActivity}).nextPage(),this.enterprisePagesQuery=new o.A({fetch:this.getEnterpriseList}).nextPage()},async mounted(){await this.getJstErpSetting(),this.origin=window.location.origin;const{tab:e,activity_id:t}=this.$route.query;e&&(this.params.order_status=e),t&&this.params.act_id.push(t),this.fetchList(),this.getOrderSourceList(),this.getLogisticsList(),this.getSubDistrictList(),this.getPickupcodeSetting(),this.$EventBus.$on("event.tradelist.refresh",()=>{this.fetchList()})},methods:{getJstErpSetting(){this.$api.third.getJstErpSetting().then(e=>{this.jstErpSetting=e})},async fetchList(){this.loading=!0;const{pageIndex:e,pageSize:t}=this.page;let i={page:e,pageSize:t,order_type:"normal",...this.params,subdistrict_parent_id:this.params.subDistrict[0],subdistrict_id:this.params.subDistrict[1]};delete i.subDistrict,(0,s.cy)(this.params.create_time)&&this.params.create_time.length>=2&&(i.time_start_begin=b()(this.params.create_time[0]).unix(),i.time_start_end=b()(this.params.create_time[1]).unix()),(0,s.cy)(this.params.delivery_time)&&this.params.delivery_time.length>=2&&(i.delivery_time_begin=b()(this.params.delivery_time[0]).unix(),i.delivery_time_end=b()(this.params.delivery_time[1]).unix()),delete i.create_time,delete i.delivery_time;const{list:a,pager:r,datapass_block:l,total_count:o}=await this.$api.trade.getOrderList(i);this.tableList=a.map(e=>{const t=[],{distributor_id:i,receipt_type:a,cancel_status:r,is_logistics:l,is_invoiced:o,invoice:n,order_status:c,order_status_des:d,ziti_status:m,dada:p,delivery_status:g,pay_status:h,can_apply_aftersales:u}=e,_="dada"==a,f="logistics"==a;return((0,s.bz)()||0==i||"distributor"==this.login_type)&&(!_&&"NO_APPLY_CANCEL"==r&&["NOTPAY","PAYED"].includes(c)&&"DONE"!=m&&(!_||_&&["0","1"].includes(p.data_status))&&t.push({name:$t("b1drz94","取消订单","lang"),key:"cancel"}),"PAYED"==c&&"ziti"==a&&"PENDING"==m&&t.push({name:$t("ijm02","核销","lang"),key:"writeOff"}),_&&["NO_APPLY_CANCEL","FAILS"].includes(r)&&"PAYED"==c&&"DONE"!=g&&"0"==p.dada_status&&t.push({name:$t("hemo2","接单","lang"),key:"takeOrder"}),_&&"PAYED"==h&&"9"==p.dada_status&&t.push({name:$t("frz0444","确认退回","lang"),key:"orderSendBack"}),!f&&!l||_||"PAYED"!=c||"DONE"==g||"ziti"==a||this.jstErpSetting?.is_open||t.push({name:$t("f14m2","发货","lang"),key:"deliverGoods"}),"WAIT_PROCESS"==r&&"PAYED"==c&&t.push({name:$t("p2ym2","退款","lang"),key:"refund"}),"0"==o&&n&&t.push({name:$t("eghwt3","待开票","lang"),key:"waitInvoice"}),t.push({name:$t("fqo12","备注","lang"),key:"remark"})),"NOTPAY"==c&&((0,s.fE)()?(this.IS_ADMIN()&&0==i||this.IS_DISTRIBUTOR())&&t.push({name:$t("hnfi2","改价","lang"),key:"changePrice"}):(0,s.hd)()||t.push({name:$t("hnfi2","改价","lang"),key:"changePrice"})),1==u&&((0,s.fE)()?(this.IS_ADMIN()&&0==i||this.IS_DISTRIBUTOR())&&t.push({name:$t("fd2mro4","申请售后","lang"),key:"salesAfter"}):(0,s.hd)()||t.push({name:$t("fd2mro4","申请售后","lang"),key:"salesAfter"})),{...e,actionBtns:t}}),this.page.total=parseInt(o),this.datapass_block=l,this.loading=!1},async getSubDistrictList(){const e=await this.$api.subdistrict.getSubDistrictList();this.subDistrictList=e},getOrderType({order_class:e,type:t}){if("normal"==e)return"1"==t?$t("i9z8we4","跨境订单","lang"):$t("divfxb4","普通订单","lang");const i=y.W4.find(t=>t.value==e);return i?i.title:void 0},getDistributionType({receipt_type:e}){const t=y.as.find(t=>t.value==e);if(t)return t.title},async getOrderSourceList(){const{list:e}=await this.$api.datacube.getSourcesList({page:1,pageSize:1e3});this.orderSourceList=e.map(({sourceName:e,sourceId:t})=>({title:e,value:t}))},async getLogisticsList(){const{list:e}=await this.$api.trade.getLogisticsList();this.deliverGoodsFormList[2].options=e.map(e=>({title:e.name,value:e.value}))},async handleAction({order_id:e,order_status:t,distributor_remark:i,items:a,delivery_type:r,delivery_status:l,receipt_type:o},{key:n}){if("remark"==n)this.$refs.remarkDialogRef.resetForm(),this.remarkForm.orderId=e,this.remarkForm.remark=i,this.remarkDialog=!0;else if("cancel"==n)this.$refs.cancelOrderDialogRef.resetForm(),this.cancelOrderFormList[0].isShow="PAYED"!=t,this.cancelOrderForm.order_id=e,this.cancelOrderForm.loading=!0,this.cancelOrderDialog=!0;else if("deliverGoods"==n){if(this.isBindOMS)return this.$message.warning($t("tckdokb","请至OMS处理订单发货","lang"));this.$refs.deliverGoodsDialogRef.resetForm(),this.deliverGoodsForm.order_id=e,this.deliverGoodsForm.items=a.map(e=>({...e,price:e.price/100})),this.deliverGoodsForm.type=r,"PARTAIL"==l?(this.deliverGoodsForm.delivery_type="sep",this.deliverGoodsFormList[0].disabled=!0,this.deliverGoodsFormList[1].options[4].isShow=!0):(this.deliverGoodsFormList[0].disabled=!1,this.deliverGoodsFormList[1].options[4].isShow=!1),this.deliverGoodsDialog=!0}else if("writeOff"==n)this.$refs.writeOffDialogRef.resetForm(),this.writeOffForm.order_id=e,this.writeOffForm.items=a.map(e=>({...e,price:e.price/100})),this.writeOffDialog=!0;else if("takeOrder"==n)this.$confirm($t("8zir98d","请在接单前确认商品当前库存","lang"),$t("cx567u4","接单提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await this.$api.trade.doBusinessReceipt(e),this.$message.success($t("cx4nvj4","接单成功","lang"))});else if("orderSendBack"==n)this.$confirm($t("frz0444","确认退回","lang"),$t("w4w05a6","确认退回提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await this.$api.trade.confirmBack(e),this.$message.success($t("ij1qzx4","退回成功","lang"))});else if("refund"==n){this.$refs.refundRef.resetForm(),this.refundDialog=!0;const{cancel_from:t,create_time:i,refund_status:a,progress:r,fee_symbol:s,total_fee:l,pay_type:o,pay_channel:n,cancel_reason:c}=await this.$api.trade.getCancelOrderInfo(e,{order_type:"normal"});this.refundForm={...this.refundForm,order_id:e,source:"buyer"==t?$t("kff1qw5","消费者申请","lang"):$t("ysidro6","系统自动取消","lang"),applyTime:b()(1e3*i).format("YYYY-MM-DD HH:mm:ss"),refundStatus:y.ks[a],process:y.hi[r],refundPrice:`${s}${l/100}`,payType:n?y.CV[n]:y.CV[o],reason:c}}else if("waitInvoice"==n)this.$confirm($t("ektlr8c","确定更新该订单开票状态？","lang"),$t("hn562","提示","lang"),{cancelButtonText:$t("ev022","取消","lang"),confirmButtonText:$t("kzjg2","确定","lang"),type:"warning"}).then(async()=>{const{success:t}=await this.$api.trade.isInvoiced({order_id:e,status:1});this.fetchList(),t?this.$message.success($t("75zb4x7","已更新开票状态","lang")):this.$message.error($t("4q13i58","更新开票状态失败","lang"))});else if("changePrice"==n){this.changePriceDialog=!0,this.changePriceForm.loading=!0;const{orderInfo:t,distributor:i,profit:a,tradeInfo:r}=await this.$api.trade.getOrderDetail(e),{store_address:s,store_name:l}=i,{items:o=[],user_id:n,receiver_name:c,receiver_mobile:d,receiver_state:m,receiver_city:p,receiver_district:g,receiver_address:h,order_class:u,total_fee:_,freight_fee:f,item_fee_new:b,item_total_fee:y,receipt_type:v,point_freight_fee:$}=t,{username:F,mobile:w}=await this.$api.member.getMember({user_id:n});this.changePriceForm.loading=!1,this.changePriceForm.order_id=e,this.changePriceForm.buy_member=F,this.changePriceForm.buy_mobile=w,"excard"==u||"shopadmin"==u||"normal"==u&&"ziti"==v?(this.changePriceForm.receive_name=F,this.changePriceForm.receive_mobile=w,this.changePriceForm.receive_address=`${s}（${l}）`,this.changePriceForm.isZiti=!0):(this.changePriceForm.receive_name=c,this.changePriceForm.receive_mobile=d,this.changePriceForm.receive_address=`${m}${p}${g}${h}`,this.changePriceForm.isZiti=!1),this.changePriceForm.receipt_type=v,this.changePriceForm.freightFee=f/100,this.changePriceForm.orderFee=_/100,this.changePriceForm.itemTotalFee=y/100,this.changePriceForm.pointFreightFee=$/100,this.changePriceForm.items=o.map(e=>({...e,change_discount:"",change_price:"",total:y/100}))}else"salesAfter"==n&&((0,s.JR)()?this.$router.push({path:`/shopadmin/order/tradenormalorders/after-sale/${e}`}):this.$router.push({path:`/order/entitytrade/tradenormalorders/after-sale/${e}`}))},onLoadCancelOrderRef(){this.cancelOrderForm.loading=!1},async onRemarkSubmit(){await this.$api.order.remarks(this.remarkForm),this.$message.success($t("rzycyb9","订单备注修改成功!","lang")),this.remarkDialog=!1,this.fetchList()},async onCancelOrderSubmit(){const{order_id:e}=this.cancelOrderForm;await this.$api.trade.cancelOrderConfirm(e,this.cancelOrderForm),this.cancelOrderDialog=!1,this.$message.success($t("zgosdp7","订单取消成功!","lang")),this.fetchList()},async deliverGoodsSubmit(){const{order_id:e,delivery_type:t,delivery_corp:i,delivery_code:a,type:r,items:s}=this.deliverGoodsForm;let l={order_id:e,delivery_type:t,delivery_corp:i,delivery_code:a,type:r};"sep"==t&&(l.sepInfo=JSON.stringify(s.filter(e=>e.delivery_num)));const{delivery_status:o}=await this.$api.trade.delivery(l);this.deliverGoodsDialog=!1,this.fetchList(),o&&"PENDING"!=o?this.$message.success($t("97ym6c5","发货成功!","lang")):this.$message.error($t("98zfs95","发货失败!","lang"))},async writeOffSubmit(){const{order_id:e}=this.writeOffForm,{ziti_status:t}=await this.$api.trade.doWriteoff(e,this.writeOffForm);"DONE"==t?this.$message.success($t("cza3sh9","自提订单核销成功!","lang")):this.$message.error($t("cy9a6k9","自提订单核销失败!","lang")),this.writeOffDialog=!1},async refundSubmit(){const{order_id:e,check_cancel:t,shop_reject_reason:i}=this.refundForm,{refund_status:a}=await this.$api.trade.cancelConfirm(e,{order_id:e,check_cancel:t,shop_reject_reason:i});"AUDIT_SUCCESS"==a?this.$message.success($t("gv1tj15","审核通过!","lang")):"SHOP_CHECK_FAILS"==a?this.$message.success($t("j11vzv6","审核已拒绝!","lang")):this.$message.error($t("gmztyu5","审核失败!","lang")),this.refundDialog=!1},async changePriceSubmit(){const{items:e,freightFee:t,order_id:i,pointFreightFee:a}=this.changePriceForm;let r={order_id:i,down_type:"items"};t>=0&&(r.freight_fee=100*(t-a)),e.length>0&&(r.items=e.map(e=>({item_id:e.item_id,total_fee:e.total_fee}))),await this.$api.trade.changePriceConfirm(r),this.changePriceDialog=!1,this.fetchList()},async salesAfterSubmit(){},exportInvoice(){let e="normal";this.$emit("onChangeData","params",{type:e}),(0,l.exportInvoice)({...this.params,type:e,order_type:"normal"}).then(e=>{const{status:t,url:i,filename:a}=e.data.data;if(t)return this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),void this.$export_open("invoice");i?window.open(i):this.$message.error($t("thm90yh","无内容可导出或执行失败，请检查重试","lang"))})},exportDataNormal(){this.exportData("normal_order")},exportDataMaster(){this.exportData("normal_master_order")},exportData(e){let t={...this.params,order_type:"normal",type:e,page:this.page.pageIndex};(0,s.cy)(this.params.create_time)&&this.params.create_time.length>=2&&(t.time_start_begin=b()(this.params.create_time[0]).unix(),t.time_start_end=b()(this.params.create_time[1]).unix()),(0,s.cy)(this.params.delivery_time)&&this.params.delivery_time.length>=2&&(t.delivery_time_begin=b()(this.params.delivery_time[0]).unix(),t.delivery_time_end=b()(this.params.delivery_time[1]).unix()),delete t.create_time,delete t.delivery_time,(0,l.orderExport)(t).then(t=>{const{status:i,url:a,filename:r}=t.data.data;if(i)return this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),void this.$export_open(e);a?window.open(a):this.$message.error($t("thm90yh","无内容可导出或执行失败，请检查重试","lang"))})},async uploadHandleChange(e){const t={isUploadFile:!0,file_type:"normal_orders",file:e.raw};await this.$api.common.handleUploadFile(t),this.$message.success($t("dn5eu39","上传成功，等待处理","lang")),this.fetchList()},async uploadHandlePatchCancel(e){const t={isUploadFile:!0,file_type:"normal_orders_cancel",file:e.raw};await this.$api.common.handleUploadFile(t),this.$message.success($t("dn5eu39","上传成功，等待处理","lang")),this.fetchList()},async getPickupcodeSetting(){const{pickupcode_status:e}=await this.$api.company.getPickupcodeSetting();e&&this.writeOffFormList.push({label:$t("d6ga9c4","提货码:","lang"),key:"pickupcode",type:"input",placeholder:$t("7j3g5b6","请输入提货码","lang"),required:!0,message:$t("adohlc4","不能为空","lang")})},onChangeTableView({items:e,item_fee_new:t,freight_fee:i,total_fee:a,item_total_fee:r}){this.changePriceForm.freightFee=i/100,this.changePriceForm.orderFee=a/100,this.changePriceForm.itemTotalFee=r/100,this.changePriceForm.items=e.map(e=>({...e,change_discount:"",change_price:"",total:r/100}))},async getPurchaseActivity({page:e,pageSize:t}){const{list:i,total_count:a}=await this.$api.marketing.getPurchaseActivity({page:e,pageSize:t});this.pagesQuery.setTotal(a),this.purchaseActivityList=this.purchaseActivityList.concat(i)},async getEnterpriseList({page:e,pageSize:t}){const{list:i,total_count:a}=await this.$api.member.getPurchaseCompanyList({page:e,pageSize:t});this.pagesQuery.setTotal(a),this.enterpriseList=this.enterpriseList.concat(i)}}},$=(0,p.A)(v,function(){var e=this,t=e._self._c;return t("SpPage",[t("SpRouterView",[t("SpFilterForm",{attrs:{model:e.params},on:{onSearch:e.onSearch,onReset:e.onSearch}},[t("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("cttsc24","手机号:","lang")}},[t("el-input",{attrs:{placeholder:$t("m6m16f9","请输入客户手机号码","lang")},model:{value:e.params.mobile,callback:function(t){e.$set(e.params,"mobile",t)},expression:"params.mobile"}})],1),t("SpFilterFormItem",{attrs:{prop:"order_id",label:$t("hymdzq4","订单号:","lang")}},[t("el-input",{attrs:{placeholder:$t("7djicl6","请输入订单号","lang")},model:{value:e.params.order_id,callback:function(t){e.$set(e.params,"order_id",t)},expression:"params.order_id"}})],1),e.isMicorMall?e._e():t("SpFilterFormItem",{attrs:{prop:"receipt_type",label:$t("ik14vq5","配送类型:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.receipt_type,callback:function(t){e.$set(e.params,"receipt_type",t)},expression:"params.receipt_type"}},e._l(e.distributionType,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("vyu3bm5","下单时间:","lang"),size:"max"}},[t("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":e.defaultTime,"picker-options":e.pickerOptions},model:{value:e.params.create_time,callback:function(t){e.$set(e.params,"create_time",t)},expression:"params.create_time"}})],1),t("SpFilterFormItem",{attrs:{prop:"act_id",label:$t("i5iwxn5","内购活动:","lang"),size:"max"}},[t("el-select",{directives:[{name:"scroll",rawName:"v-scroll",value:()=>e.pagesQuery.nextPage(),expression:"() => pagesQuery.nextPage()"}],attrs:{multiple:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.act_id,callback:function(t){e.$set(e.params,"act_id",t)},expression:"params.act_id"}},e._l(e.purchaseActivityList,function(e,i){return t("el-option",{key:`activity-item__${i}`,attrs:{label:e.name,value:e.id}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"delivery_time",label:$t("972ltm5","发货时间:","lang"),size:"max"}},[t("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":e.defaultTime,"picker-options":e.pickerOptions},model:{value:e.params.delivery_time,callback:function(t){e.$set(e.params,"delivery_time",t)},expression:"params.delivery_time"}})],1),t("SpFilterFormItem",{attrs:{prop:"enterprise_id",label:$t("bxvdt3","企业:","lang"),size:"max"}},[t("el-select",{directives:[{name:"scroll",rawName:"v-scroll",value:()=>e.enterprisePagesQuery.nextPage(),expression:"() => enterprisePagesQuery.nextPage()"}],attrs:{multiple:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.enterprise_id,callback:function(t){e.$set(e.params,"enterprise_id",t)},expression:"params.enterprise_id"}},e._l(e.enterpriseList,function(e,i){return t("el-option",{key:`enterprise-item__${i}`,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("div",{staticClass:"action-container"},[t("el-dropdown",[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("gr6m3"," 导出","lang")),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("div",{on:{click:e.exportInvoice}},[e._v($t("abkmez5","未开票订单","lang"))])]),t("el-dropdown-item",[t("div",{on:{click:e.exportDataMaster}},[e._v($t("c4pri3","主订单","lang"))])]),t("el-dropdown-item",[t("div",{on:{click:e.exportDataNormal}},[e._v($t("e1p373","子订单","lang"))])])],1)],1),t("el-tooltip",{attrs:{effect:"light",content:$t("ym4t5h1a","请将从订单列表导出的主订单文件，删除不想批量发货的订单号，修改物流公司，物流单号后上传即可。","lang"),placement:"top-start"}},[t("el-upload",{staticClass:"btn-upload",attrs:{action:"","on-change":e.uploadHandleChange,"auto-upload":!1,"show-file-list":!1}},[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("79aqr06"," 批量发货 ","lang"))])],1)],1),t("el-upload",{staticClass:"btn-upload",attrs:{action:"","on-change":e.uploadHandlePatchCancel,"auto-upload":!1,"show-file-list":!1}},[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("79g0o86"," 批量取消 ","lang"))])],1)],1),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.onSearch},model:{value:e.params.order_status,callback:function(t){e.$set(e.params,"order_status",t)},expression:"params.order_status"}},[e._l(e.orderStatus,function(e){return t("el-tab-pane",{key:e.value,attrs:{label:e.title,name:e.value}})}),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableList}},[t("el-table-column",{attrs:{width:"220",prop:"order_id",label:$t("hym7z54","订单信息","lang")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"order-num"},[e._v(" "+e._s(i.row.order_id)+" "),t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.order_id,expression:"scope.row.order_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})])],1),"0"!==i.row.distributor_id?t("div",{staticClass:"order-store"},[t("el-tooltip",{attrs:{effect:"dark",content:$t("ekkkq3","店铺名","lang"),placement:"top-start"}},[t("i",{staticClass:"el-icon-office-building"})]),e._v(" "+e._s(i.row.distributor_name)+" ")],1):e._e(),t("div",{staticClass:"order-time"},[t("el-tooltip",{attrs:{effect:"dark",content:$t("a72nl44","下单时间","lang"),placement:"top-start"}},[t("i",{staticClass:"el-icon-time"})]),e._v(" "+e._s(e._f("datetime")(i.row.create_time,"YYYY-MM-DD HH:mm:ss"))+" ")],1)]}}])}),t("el-table-column",{attrs:{prop:"total_fee",width:"120",label:$t("96gz77","订单金额（¥）","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.total_fee/100).toFixed(2))+" ")]}}])}),t("el-table-column",{attrs:{width:"100",label:$t("cwnwg35","运费（¥）","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.freight_fee||0)/100)+" ")]}}])}),t("el-table-column",{attrs:{prop:"mobile",label:$t("fxg7tf5","客户手机号","lang")},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.user_delete||"merchant"===e.login_type?[t("span",[e._v(e._s(i.row.mobile))]),0==e.datapass_block?t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})]):e._e()]:[t("router-link",{attrs:{target:"_blank",to:{path:""+("distributor"!=e.login_type?"/member/member/memberlist/detail":"/shopadmin/member/member/detail"),query:{user_id:i.row.user_id}}}},[e._v(" "+e._s(i.row.mobile)+" ")]),0==e.datapass_block?t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})]):e._e()]]}}])}),"merchant"!=e.login_type?[e.isMicorMall?e._e():t("el-table-column",{attrs:{label:$t("hytrc34","订单类型","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getOrderType(t.row))+" ")]}}],null,!1,3071688018)})]:e._e(),t("el-table-column",{attrs:{prop:"order_status",label:$t("hys56m4","订单状态","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_status_msg)+" ")]}}])}),t("el-table-column",{attrs:{label:$t("ixcclm4","配送方式","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getDistributionType(t.row))+" ")]}}])}),t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"}},[t("router-link",{attrs:{to:`${e.$route.path}/detail?orderId=${i.row.order_id}&resource=${e.$route.path}`}},[e._v($t("likox4"," 详情 ","lang"))])],1),t("el-popover",{attrs:{placement:"right",trigger:"hover"}},[t("div",{staticClass:"operating-icons"},[t("el-button",{attrs:{type:"text"}},[t("router-link",{attrs:{to:`${e.$route.path}/process?orderId=${i.row.order_id}&resource=${e.$route.path}`}},[e._v($t("fy0tq4"," 日志 ","lang"))])],1),e._l(i.row.actionBtns,function(a,r){return[t("el-button",{key:`btn-item__${r}`,attrs:{type:"text"},on:{click:function(t){return e.handleAction(i.row,a)}}},[e._v(" "+e._s(a.name)+" ")])]})],2),t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v($t("inra3"," 更多","lang")),t("i",{staticClass:"iconfont icon-angle-double-right"})])],1)]}}])})],2),t("div",{staticClass:"mt-4 text-right"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageIndex,"page-sizes":[10,20,50],total:e.page.total,"page-size":e.page.pageSize},on:{"update:currentPage":function(t){return e.$set(e.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.page,"pageIndex",t)},"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)],2),t("SpDialog",{ref:"remarkDialogRef",attrs:{title:`${$t("mk0yu58","修改备注【订单:","lang")}${e.remarkForm.orderId}】`,form:e.remarkForm,"form-list":e.remarkFormList},on:{onSubmit:e.onRemarkSubmit},model:{value:e.remarkDialog,callback:function(t){e.remarkDialog=t},expression:"remarkDialog"}}),t("SpDialog",{ref:"cancelOrderDialogRef",staticClass:"dialog-cancelorder",attrs:{title:`${$t("53n9c48","取消订单【订单:","lang")}${e.cancelOrderForm.order_id}】`,loading:e.cancelOrderForm.loading,form:e.cancelOrderForm,"form-list":e.cancelOrderFormList},on:{onSubmit:e.onCancelOrderSubmit},model:{value:e.cancelOrderDialog,callback:function(t){e.cancelOrderDialog=t},expression:"cancelOrderDialog"}}),t("SpDialog",{ref:"deliverGoodsDialogRef",attrs:{width:"1000px",title:`${$t("7sn7qr6","发货【订单:","lang")}${e.deliverGoodsForm.order_id}】`,form:e.deliverGoodsForm,"form-list":e.deliverGoodsFormList},on:{onSubmit:e.deliverGoodsSubmit},model:{value:e.deliverGoodsDialog,callback:function(t){e.deliverGoodsDialog=t},expression:"deliverGoodsDialog"}}),t("SpDialog",{ref:"writeOffDialogRef",attrs:{title:`${$t("9rdkkf6","核销【订单:","lang")}${e.writeOffForm.order_id}】`,form:e.writeOffForm,"form-list":e.writeOffFormList},on:{onSubmit:e.writeOffSubmit},model:{value:e.writeOffDialog,callback:function(t){e.writeOffDialog=t},expression:"writeOffDialog"}}),t("SpDialog",{ref:"refundRef",attrs:{title:`${$t("jozlez6","退款【订单:","lang")}${e.refundForm.order_id}】`,form:e.refundForm,"form-list":e.refundFormList},on:{onSubmit:e.refundSubmit},model:{value:e.refundDialog,callback:function(t){e.refundDialog=t},expression:"refundDialog"}}),t("SpDialog",{ref:"changePriceRef",staticClass:"dialog-changeprice",attrs:{width:"1000px",loading:e.changePriceForm.loading,"destroy-on-close":!0,title:`${$t("ja25yd8","申请售后【订单:","lang")}${e.changePriceForm.order_id}】`,form:e.changePriceForm,"form-list":e.changePriceFormList},on:{onSubmit:e.changePriceSubmit},model:{value:e.changePriceDialog,callback:function(t){e.changePriceDialog=t},expression:"changePriceDialog"}})],1)],1)},[],!1,null,null,null).exports}}]);