"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7360],{87360:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});a(44114);var i=a(95353),n=a(81193),s=a(5134),r={props:["view"],data(){return{loading:!1,groupList:[],total_count:0,params:{view:0,page:1,pageSize:20,keywords:""},currency:{},cursymbol:"￥"}},computed:{...(0,i.L8)(["wheight"])},watch:{view(t){this.params.view=t,this.getGroupsList()}},mounted(){this.params.view=this.view,this.getGroupsList()},methods:{handleCurrentChange(t){this.params.page=t,this.getGroupsList()},getGroupsList(){this.loading=!0,(0,s.getGroupsList)(this.params).then(t=>{this.groupList=t.data.data.list,this.total_count=t.data.data.total_count,this.loading=!1}).catch(t=>{this.loading=!1,this.$message({type:"error",message:$t("4jlhopa","获取拼团活动列表失败","lang")})})},showGroupsActivityDataAction(t,e){this.$router.push({path:this.matchRoutePath("team/")+e.groups_activity_id})},showGroupsAction(t,e){this.$router.push({path:this.matchRoutePath("editor/")+e.groups_activity_id,query:{show:"1"}})},editGroupsAction(t,e){this.$router.push({path:this.matchRoutePath("editor/")+e.groups_activity_id})},finishGroupsAction(t,e){this.$confirm($t("69kqv1i","此操作将终止该拼团活动, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,s.finishGroupActivity)(e.groups_activity_id).then(t=>{this.getGroupsList()})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},deleteGroupsAction(t,e){this.$confirm($t("v61n71i","此操作将删除该拼团活动, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,s.deleteGroupActivity)(e.groups_activity_id).then(t=>{this.getGroupsList()})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getCurrencyInfo(){(0,n.getDefaultCurrency)().then(t=>{this.currency=t.data.data,this.cursymbol=this.currency.symbol})}}},o=a(81656),u={components:{groupsList:(0,o.A)(r,function(){var t=this,e=t._self._c;return e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.groupList,height:t.wheight-240}},[e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",icon:"edit"},on:{click:function(e){return t.showGroupsActivityDataAction(a.$index,a.row)}}},[t._v($t("qwlfx16"," 活动数据 ","lang"))]),1==a.row.activity_status?e("el-button",{attrs:{size:"mini",icon:"edit"},on:{click:function(e){return t.editGroupsAction(a.$index,a.row)}}},[t._v($t("juz394"," 编辑 ","lang"))]):t._e(),2==a.row.activity_status?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.showGroupsAction(a.$index,a.row)}}},[t._v($t("gcika4"," 查看 ","lang"))]):t._e(),2==a.row.activity_status?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.finishGroupsAction(a.$index,a.row)}}},[t._v($t("jn7om4"," 终止 ","lang"))]):t._e(),1==a.row.activity_status||3==a.row.activity_status?e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteGroupsAction(a.$index,a.row)}}},[t._v($t("av7zvg5"," 删 除 ","lang"))]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"act_name",label:$t("culb3d4","拼团名称","lang")}}),e("el-table-column",{attrs:{label:$t("b47jsb4","商品类型","lang"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return["services"==a.row.group_goods_type?e("el-tag",{attrs:{type:"success"}},[t._v($t("gr6e667"," 服务类商品 ","lang"))]):e("el-tag",[t._v($t("wfqadd7"," 实体类商品 ","lang"))])]}}])}),e("el-table-column",{attrs:{prop:"goods_name",label:$t("culb8h4","拼团商品","lang")}}),e("el-table-column",{attrs:{label:$t("rrmmbq5","拼团有效期","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datetime")(e.row.begin_time,"YYYY-MM-DD HH:mm:ss"))+" - "+t._s(t._f("datetime")(e.row.end_time,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),e("el-table-column",{attrs:{prop:"act_price",label:$t("cukcgb4","拼团价格","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.cursymbol+a.row.act_price/100))])]}}])}),e("el-table-column",{attrs:{prop:"disabled",label:$t("k1e32","状态","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.activity_status?e("span",[t._v($t("fkmt13","未开始","lang"))]):2==a.row.activity_status?e("span",[t._v($t("lq5q43","进行中","lang"))]):e("span",[t._v($t("edie63","已结束","lang"))])]}}])})],1),t.total_count>t.params.pageSize?e("div",{staticClass:"content-center content-top-padded"},[e("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.params.page,total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"current-change":t.handleCurrentChange}})],1):t._e()],1)},[],!1,null,"8efc2b42",null).exports},provide(){return{refresh:this.refresh}},data(){return{loading:!1,view:0,activeName:"first",tabList:[{name:$t("en402","全部","lang"),activeName:"first"},{name:$t("fkmt13","未开始","lang"),activeName:"second"},{name:$t("lq5q43","进行中","lang"),activeName:"third"},{name:$t("edie63","已结束","lang"),activeName:"fourth"}]}},mounted(){void 0!==this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{addGroups(){this.$router.push({path:this.matchRoutePath("editor")})},refresh(){this.$refs.getGroupsList}}},c=(0,o.A)(u,function(){var t=this,e=t._self._c;return e("SpPage",[-1===t.$route.path.indexOf("detail")&&-1===t.$route.path.indexOf("editor")&&-1===t.$route.path.indexOf("team")?[t.VERSION_SHUYUN()?t._e():e("SpPlatformTip"),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary",icon:"iconfont icon-xinzengcaozuo-01"},on:{click:t.addGroups}},[t._v($t("12vtz38"," 新增拼团活动 ","lang"))])],1),e("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabList,function(a,i){return e("el-tab-pane",{key:i,attrs:{label:a.name,name:a.activeName}},["first"===t.activeName?e("groupsList",{ref:"groupsList",refInFor:!0,attrs:{view:0}}):t._e(),"second"===t.activeName?e("groupsList",{attrs:{view:1}}):t._e(),"third"===t.activeName?e("groupsList",{attrs:{view:2}}):t._e(),"fourth"===t.activeName?e("groupsList",{attrs:{view:3}}):t._e()],1)}),1)]:t._e(),e("router-view")],2)},[],!1,null,"2598e3fd",null).exports}}]);