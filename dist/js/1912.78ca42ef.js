"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1912],{29325:function(t){t.exports="data:image/png;base64,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"},91912:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});a(18111),a(61701);var e=a(95353),i=a(38211),l=a(95093),o=a.n(l),n={props:["info","title","roleData","distributorIds","operatorInfo"],methods:{timeFilter(t,s="YYYY-MM-DD HH:mm:ss"){return t?o()(1e3*t).format(s):"-"}}},r=a(81656),p={components:{PersonInfo:(0,r.A)(n,function(){var t=this,s=t._self._c;return s("el-card",{staticClass:"cus-card"},[s("div",{staticClass:"cus-title"},[t._v($t("i66pfy4","详细信息","lang"))]),s("div",{staticClass:"avater-box"},[s("div",{staticClass:"flex-avater-box"},[s("img",{staticClass:"avater-img",attrs:{src:a(29325),alt:""}}),s("span",{staticClass:"cus-username"},[t._v(t._s(t.operatorInfo.login_name))]),s("el-tag",{staticStyle:{"margin-left":"25px"},attrs:{type:"staff"===t.operatorInfo.operator_type?"success":"warning",size:"medium"}},[t._v(" "+t._s("staff"===t.operatorInfo.operator_type?$t("p8tugm5","平台管理员","lang"):$t("xzxvf45","店铺管理员","lang"))+" ")])],1),"1"==t.info.status?s("img",{staticStyle:{width:"64px",height:"64px"},attrs:{src:a(19348),alt:""}}):t._e(),"2"==t.info.status?s("img",{staticStyle:{width:"70px",height:"69px"},attrs:{src:a(43878),alt:""}}):t._e()]),s("el-row",{staticClass:"cus-info-box"},[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("dlc5c3","姓名：","lang"))]),s("span",[t._v(t._s(t.operatorInfo.username))])]),s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("ctv6oi4","手机号：","lang"))]),s("span",[t._v(t._s(t.operatorInfo.mobile))])]),s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("kvpojs5","申请时间：","lang"))]),s("span",[t._v(t._s(t.timeFilter(t.info.create_time)))])]),s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("tz31d35","所属店铺：","lang"))]),t._l(t.distributorIds,function(a){return s("el-tag",{key:a.name,staticClass:"cus-authory-tags",attrs:{type:"",size:"small"}},[t._v(" "+t._s(a.name)+" ")])})],2),"staff"===t.operatorInfo.operator_type?s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("kub7e3","角色：","lang"))]),t._l(t.roleData,function(a){return s("el-tag",{key:a.role_name,staticClass:"cus-authory-tags",attrs:{type:"success",size:"small"}},[t._v(" "+t._s(a.role_name)+" ")])})],2):t._e(),s("el-col",{attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("kqdhwk5","申请说明：","lang"))]),s("span",[t._v(t._s(t.info.reason||"-"))])]),s("el-col",{staticClass:"cus-time",attrs:{span:24}},[s("span",{staticClass:"cus-label"},[t._v($t("6m8ppa7","申请开通时间：","lang"))]),s("span",[t._v(t._s(t.info.range?$t("5lfhqr5","每个工作日","lang")+t.info.range:$t("ec3l2","全天","lang")))]),s("span",{staticClass:"cus-label"},[t._v($t("q2cvil5","生效时间：","lang"))]),s("span",[t._v(t._s(t.info.start_time))]),s("span",{staticClass:"cus-label"},[t._v($t("c4xods5","结束时间：","lang"))]),s("span",[t._v(t._s(t.info.end_time))])])],1)],1)},[],!1,null,"76564288",null).exports,loadingBtn:a(79836).default},data(){return{loading:!0,activeName:"first",pass_id:"",operator_id:"",approvel_info:{},operator_info:{},visibleModal:!1,visibleContent:"",remarks:"",approveType:"",distributorIds:[],roleData:[],logList:[],disabledBtn:!1}},computed:{...(0,e.L8)(["wheight"])},mounted(){if(this.$route.query.pass_id){const{pass_id:t,operator_id:s}=this.$route.query||{};this.getDetail(t),this.getLog(s),this.pass_id=t,this.operator_id=s}},methods:{getDetail(t){(0,i.encryptDetail)(t).then(t=>{let s=t.data.data;this.approvel_info=s||{},this.operator_info=s.operator_info||{},this.distributorIds=s.operator_info.distributor_ids||[],this.roleData=s.operator_info.role_data||[];let a=new Date(s.end_time+" 23:59:59").valueOf();(new Date).valueOf()>=a&&(this.disabledBtn=!0)}).catch(t=>{this.loading=!1,this.$message({type:"error",message:$t("q74pc36","获取详情出错","lang")})})},getLog(t){(0,i.datapassLog)({operator_id:t}).then(t=>{let s=t.data.data.list;s=s.map(t=>(t.custimestamp=this.timeFilter(t.create_time),t)),this.logList=s||{}}).catch(t=>{this.loading=!1,this.$message({type:"error",message:$t("uztt746","获取日志出错","lang")})})},handleDialogOpen(t){const{username:s,login_name:a}=this.operator_info;this.approveType=t,1===t?this.visibleContent=`${$t("u9so1d7","请确认是否通过","lang")}${a}${$t("62mqz7a","的查看脱敏权限的申请","lang")}`:2===t?this.visibleContent=`${$t("u9u45r7","请确认是否驳回","lang")}${a}${$t("7h6l9aa","的查看脱敏数据的申请","lang")}`:3===t?this.visibleContent=`${$t("u9i1lq7","请确认是否关闭","lang")}${a}${$t("7h8wk5a","的查看脱敏数据的权限","lang")}`:4===t&&(this.visibleContent=`${$t("u9km357","请确认是否打开","lang")}${a}${$t("7h8wk5a","的查看脱敏数据的权限","lang")}`),this.visibleModal=!0},handleDialogChange(t){let s=null,a={};1===this.approveType||2===this.approveType?(s=i.encryptApprove,a={status:this.approveType,remarks:this.remarks}):3===this.approveType?(s=i.encryptClose,a={is_closed:"1"}):4===this.approveType&&(s=i.encryptOpen,a={is_closed:"0"}),s(this.pass_id,a).then(s=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"}),this.getDetail(this.pass_id),this.getLog(this.operator_id),this.$refs[t].closeLoading(),this.visibleModal=!1,this.visibleContent="",this.remarks=""})},handleDialogClose(){this.visibleModal=!1,this.remarks="",this.visibleContent=""},timeFilter(t){return o()(1e3*t).format("YYYY-MM-DD HH:mm:ss")}}},c=(0,r.A)(p,function(){var t=this,s=t._self._c;return s("SpPage",[s("PersonInfo",{attrs:{info:t.approvel_info,title:$t("i66pfy4","详细信息","lang"),"operator-info":t.operator_info,"distributor-ids":t.distributorIds,"role-data":t.roleData}}),"1"==t.approvel_info.status?s("el-card",[s("div",{staticClass:"cus-title"},[t._v($t("d1tfy94","操作日志","lang"))]),s("el-timeline",{staticClass:"cus-timeline",attrs:{reverse:!1}},t._l(t.logList,function(a,e){return s("el-timeline-item",{key:e,attrs:{timestamp:a.custimestamp}},[t._v(" "+t._s(a.content)+" ")])}),1)],1):t._e(),"2"==t.approvel_info.status?s("el-card",[s("div",{staticClass:"cus-title"},[t._v($t("jufdbg4","驳回原因","lang"))]),s("el-row",[s("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:24}},[s("span",[t._v(t._s(t.approvel_info.remarks||"-"))])])],1)],1):t._e(),s("div",{staticClass:"text-center",attrs:{slot:"page-footer"},slot:"page-footer"},["0"==t.approvel_info.status?s("el-button",{staticClass:"btn",attrs:{type:"success"},on:{click:function(s){return t.handleDialogOpen(1)}}},[t._v($t("mcqer4"," 通过 ","lang"))]):t._e(),"0"==t.approvel_info.status?s("el-button",{staticClass:"btn",attrs:{type:"danger"},on:{click:function(s){return t.handleDialogOpen(2)}}},[t._v($t("nlm6t4"," 驳回 ","lang"))]):t._e(),"1"==t.approvel_info.status&&0==t.approvel_info.is_closed?s("el-button",{staticClass:"btn",attrs:{disabled:t.disabledBtn,type:"primary"},on:{click:function(s){return t.handleDialogOpen(3)}}},[t._v($t("26sz536"," 关闭权限 ","lang"))]):t._e(),"1"==t.approvel_info.status&&1==t.approvel_info.is_closed?s("el-button",{staticClass:"btn",attrs:{disabled:t.disabledBtn,type:"primary"},on:{click:function(s){return t.handleDialogOpen(4)}}},[t._v($t("e604ca6"," 打开权限 ","lang"))]):t._e()],1),s("el-dialog",{attrs:{title:$t("byxvs54","审批弹框","lang"),visible:t.visibleModal,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(s){t.visibleModal=s},close:t.handleDialogClose}},[s("el-row",[t._v(t._s(t.visibleContent))]),2===t.approveType?s("el-input",{attrs:{type:"textarea",rows:5,maxlength:100,"show-word-limit":!0,placeholder:$t("tb5q297","请填写审批意见","lang")},model:{value:t.remarks,callback:function(s){t.remarks=s},expression:"remarks"}}):t._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("loading-btn",{ref:"loadingBtn",attrs:{size:"medium",type:"primary",text:$t("hnjoo3","确 定","lang")},on:{clickHandle:function(s){return t.handleDialogChange("loadingBtn")}}})],1)],1)],1)},[],!1,null,null,null).exports}}]);