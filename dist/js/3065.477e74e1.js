"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[3065],{3065:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});a(44114);var n=a(42005),r=a(33318),l=a(22541),s=a(95093),i=a.n(s),o={data(){this.$createElement;return{defaultTime:["00:00:00","23:59:59"],pickerOptions:r.Dv,formParams:{merchant_name:"",legal_name:"",legal_mobile:"",time_start:[]},datapass_block:0,setting:(0,l.createSetting)({columns:[{name:$t("b5zu9g4","商户名称","lang"),key:"merchant_name"},{name:$t("jed0z3","联系人","lang"),key:"legal_name"},{name:$t("gpkj3j4","联系电话","lang"),key:"legal_mobile"},{name:$t("awpo8k4","入驻时间","lang"),key:"created",formatter:(t,{created:e})=>i()(1e3*e).format("YYYY-MM-DD HH:mm:ss")},{name:$t("bzieb5l","商品审核（商户商家商品是否需通过平台审核）","lang"),key:"audit_goods",width:"100px",render:(t,{row:e})=>t("el-button",{class:"yahh",props:{type:"text"},on:{click:()=>{this.fnAffirm(e)}}},[t("span",{class:"aaa"},e.audit_goods?$t("i1gx3"," 是 ","lang"):$t("ez163"," 否 ","lang")),t("i",{class:"el-icon-s-tools"},"")]),renderHeader(){const t=this.$createElement;return t("div",[t("span",[$t("ansmhe5","商品审核 ","lang")]),t("el-tooltip",{class:"item",attrs:{effect:"light",content:$t("xcima6f","商户上架商品是否需通过平台审核","lang"),placement:"top-start"}},[t("i",{class:"el-icon-question"})])])}}],actions:[{name:$t("obrz2","详情","lang"),key:"detail",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{this.$router.push({path:this.matchRoutePath("editor"),query:{type:"detail",merchantId:t[0].id}})}}},{name:$t("mekb2","编辑","lang"),key:"editor",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{this.$router.push({path:this.matchRoutePath("editor"),query:{type:"edit",merchantId:t[0].id}})}},visible:()=>0==this.datapass_block},{name:$t("lb5z2","禁用","lang"),key:"off",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{this.fnMerchantsState(t,!1)}},visible:t=>!t.disabled},{name:$t("gmcv2","开启","lang"),key:"off",type:"button",buttonType:"text",action:{type:"link",handler:async t=>{this.fnMerchantsState(t,!0)}},visible:t=>t.disabled}]})}},methods:{onSearch(){this.$refs.finder.refresh(!0)},beforeSearch(t){return{...t,...this.formParams}},afterSearch({data:t}){const{datapass_block:e}=t.data;this.datapass_block=e},fnAffirm(t){const e=t.audit_goods?$t("dd9zu5m","关闭后商户商品上架时无需审核，请确认是否关闭","lang"):$t("frfj6m","开启后商户商品上架时需要审核，请确认是否开启","lang");this.$confirm(e,$t("ioej3m4","通知消息","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning",center:!0}).then(async()=>{(await(0,n.setCommodityAudit)({audit_goods:!t.audit_goods},t.id)).data.data.status&&(this.$message({type:"success",message:$t("aellqi5","更新成功!","lang")}),this.$refs.finder.refresh(!0))})},fnMerchantsState(t,e){const a=t[0].id,r=e?$t("rgwklp1g","开启后且该商户及其关联店铺的账号可登录商家端以及店铺端，该商户及其关联店铺在小程序显示，请确认是否开启。","lang"):$t("qnhq261l","禁用后该商户及其关联店铺不在小程序显示，且该商户及其关联店铺的账号无法登录商家端以及店铺端，请确认是否禁用该商户。","lang");this.$confirm(r,$t("ioej3m4","通知消息","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning",center:!0}).then(async()=>{(await(0,n.setMerchantsState)({disabled:!e},a)).data.data.status&&(this.$message({type:"success",message:$t("aellqi5","更新成功!","lang")}),this.$refs.finder.refresh(!0))})},addMerchant(){this.$router.push({path:this.matchRoutePath("editor"),query:{type:"add"}})}}},m=(0,a(81656).A)(o,function(){var t=this,e=t._self._c;return e("SpPage",[e("SpRouterView",{staticClass:"merchantList"},[e("SpFilterForm",{attrs:{model:t.formParams},on:{onSearch:t.onSearch,onReset:t.onSearch}},[e("SpFilterFormItem",{attrs:{prop:"merchant_name",label:$t("8zp7p65","商户名称:","lang")}},[e("el-input",{attrs:{placeholder:$t("md36lf7","请输入商户名称","lang")},model:{value:t.formParams.merchant_name,callback:function(e){t.$set(t.formParams,"merchant_name",e)},expression:"formParams.merchant_name"}})],1),e("SpFilterFormItem",{attrs:{prop:"legal_name",label:$t("gpd7vr4","联系人:","lang")}},[e("el-input",{attrs:{placeholder:$t("7f02ae6","请输入联系人","lang")},model:{value:t.formParams.legal_name,callback:function(e){t.$set(t.formParams,"legal_name",e)},expression:"formParams.legal_name"}})],1),e("SpFilterFormItem",{attrs:{prop:"legal_mobile",label:$t("ksw2975","联系电话:","lang")}},[e("el-input",{attrs:{placeholder:$t("gtihrc7","请输入联系电话","lang")},model:{value:t.formParams.legal_mobile,callback:function(e){t.$set(t.formParams,"legal_mobile",e)},expression:"formParams.legal_mobile"}})],1),e("SpFilterFormItem",{attrs:{prop:"time_start",label:$t("gzgegq5","入驻时间:","lang"),size:"max"}},[e("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":t.defaultTime,"picker-options":t.pickerOptions},model:{value:t.formParams.time_start,callback:function(e){t.$set(t.formParams,"time_start",e)},expression:"formParams.time_start"}})],1)],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary",icon:"ecx-icon icon-xinzeng"},on:{click:t.addMerchant}},[t._v($t("1wgbpb6"," 新增商户 ","lang"))])],1),e("SpFinder",{ref:"finder",attrs:{"no-selection":"",setting:t.setting,hooks:{beforeSearch:t.beforeSearch,afterSearch:t.afterSearch},url:"/merchant/list"}})],1)],1)},[],!1,null,null,null).exports}}]);