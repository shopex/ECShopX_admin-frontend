"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5409],{65409:function(t,e,a){a.r(e),a.d(e,{default:function(){return s}});var r=a(22541),n={data(){return{form:{start_time:"",end_time:"",date_type:"0",range:"",reason:"",isDay:!1,time:""},pickerOptions:{disabledDate(t){return t.getTime()<Date.now()-864e5}}}},computed:{setting(){return(()=>{const t=t=>{if("0"==t)return"-";var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())};return(0,r.createSetting)({columns:[{name:$t("ar84e54","创建时间","lang"),key:"create_time",width:200,formatter:t},{name:$t("8y9ksk6","申请开通时间","lang"),key:"ex",width:600},{name:$t("fd826n4","申请理由","lang"),key:"reason",width:130},{name:$t("bz15hf4","审批状态","lang"),key:"status",width:100,formatter:t=>"1"==t?$t("ego673","已通过","lang"):"2"==t?$t("fta533","未通过","lang"):"3"==t?$t("eod62","关闭","lang"):$t("efsql3","待审批","lang")},{name:$t("byza2e4","审批时间","lang"),key:"approve_time",formatter:t},{name:$t("bywurd4","审批备注","lang"),key:"remarks",width:300}]})})()}},watch:{"form.isDay"(t){"0"!=t?this.form.range="":this.getRange()}},mounted(){this.getDate(),this.getRange();Number("05")},methods:{async submit(){let t;t=this.form.isDay?{...this.form,range:""}:{...this.form,range:`${this.form.range[0]}-${this.form.range[1]}`};const{status:e,message:a}=await this.$api.encrypt.createEncrypt(t);e?(this.$message.success($t("cx7dr74","提交成功","lang")),this.$refs.finder.refresh(!0),this.getDate(),this.getRange(),this.form.reason="",this.form.date_type="0"):this.open(a)},open(t){this.$confirm(t,$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),showCancelButton:!1,dangerouslyUseHTMLString:!0,type:"warning",customClass:"zyk_authAdmin_messageBox"})},getDate(){const t=new Date;let e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();t.getHours(),t.getMinutes();a<10&&(a="0"+a),r<10&&(r="0"+r),this.form.start_time=`${e}-${a}-${r}`,this.form.end_time=`${e}-${a}-${r}`,this.form.time=[`${e}-${a}-${r}`,`${e}-${a}-${r}`]},getRange(){const t=new Date;let e=t.getHours(),a=t.getMinutes();if(e<10)var r="0";a<10&&(a="0"+a),this.form.range=r?[`${r+e}:${a}`,`${r+Number(e+1)}:${a}`]:[`${e}:${a}`,`${Number(e+1)}:${a}`]},timeChange(t){t?(this.form.start_time=t[0],this.form.end_time=t[1]):(this.form.time=[],this.form.start_time="",this.form.end_time="")}}},s=(0,a(81656).A)(n,function(){var t=this,e=t._self._c;return e("SpPage",[e("div",{staticClass:"zyk_authAdmin"},[e("el-row",[e("el-col",{attrs:{span:24}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:7},placeholder:$t("8udoyhc","请填写申请理由（非必填）","lang"),maxlength:"100","show-word-limit":""},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1)],1),e("el-row",{staticClass:"form",attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("i",{staticClass:"el-icon-alarm-clock icon-time"}),t._v($t("za33p87"," 重复时间： ","lang")),e("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:t.form.date_type,callback:function(e){t.$set(t.form,"date_type",e)},expression:"form.date_type"}},[e("el-option",{attrs:{label:$t("itru2","每天","lang"),value:"0"}}),e("el-option",{attrs:{label:$t("exzol85","周一到周五","lang"),value:"1"}})],1),e("el-checkbox",{staticStyle:{margin:"0 20px"},model:{value:t.form.isDay,callback:function(e){t.$set(t.form,"isDay",e)},expression:"form.isDay"}},[t._v($t("cwuov4"," 全天 ","lang"))]),e("el-col",{staticStyle:{"margin-top":"20px","padding-left":"20px"},attrs:{span:24}},[e("el-date-picker",{staticStyle:{width:"384px"},attrs:{type:"daterange","range-separator":$t("po31","至","lang"),"value-format":"yyyy-MM-dd","start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"picker-options":t.pickerOptions},on:{change:t.timeChange},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1)],1),t.form.isDay?t._e():e("el-col",{staticStyle:{"margin-top":"20px","padding-left":"30px"},attrs:{span:24}},[e("el-time-picker",{staticStyle:{width:"384px"},attrs:{"is-range":"",clearable:!1,format:"HH:mm","value-format":"HH:mm","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0k3t4","开始时间","lang"),"end-placeholder":$t("gfi7qi4","结束时间","lang"),placeholder:$t("tv79n36","选择时间范围","lang")},model:{value:t.form.range,callback:function(e){t.$set(t.form,"range",e)},expression:"form.range"}})],1)],1),e("el-row",[t.form.isDay?e("el-col",{staticClass:"tips",attrs:{span:16}},[t._v($t("m272"," 每","lang")+t._s(0==t.form.date_type?$t("hm11","天","lang"):$t("exzol85","周一到周五","lang"))+$t("p139fha"," 有权限，生效时间：","lang")+t._s(t.form.start_time)+$t("radl006"," 结束时间：","lang")+t._s(t.form.end_time)+" ")]):e("el-col",{attrs:{span:16}},[t._v($t("m272"," 每","lang")+t._s(0==t.form.date_type?$t("hm11","天","lang"):$t("exzol85","周一到周五","lang"))+" "+t._s(t.form.range[0])+$t("mrhp3"," 至 ","lang")+t._s(t.form.range[1])+$t("p139fha"," 有权限，生效时间：","lang")+t._s(t.form.start_time)+$t("radl006"," 结束时间：","lang")+t._s(t.form.end_time)+" ")]),e("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v($t("d3714c5"," 提 交 ","lang"))])],1)],1),e("el-divider"),e("SpFinder",{ref:"finder",attrs:{"split-count":4,"search-row-count":2,"fixed-row-action":!0,setting:t.setting,"no-selection":"",url:"/datapass"}})],1)])},[],!1,null,"bf097660",null).exports}}]);