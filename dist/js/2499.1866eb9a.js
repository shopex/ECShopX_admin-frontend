"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2499],{2499:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=a(22541),l=a(95093),n=a.n(l),o=a(63366),r=a(41472);const s=e=>(0,r.u)([{label:$t("ei0k23","开票人","lang"),key:"seller_name",type:"input"},{label:$t("fcctu3","收款人","lang"),key:"payee",type:"input"},{label:$t("djpzj3","复核人","lang"),key:"reviewer",type:"input"},{label:$t("w14tjo5","开票方名称","lang"),key:"seller_company_name",type:"input",required:!0},{label:$t("w1b2re5","开票方税号","lang"),key:"seller_tax_no",type:"input",required:!0},{label:$t("w1fxuv5","开票方银行","lang"),key:"seller_bank_name",type:"input",required:!0},{label:$t("y5fiew7","开票方银行账号","lang"),key:"seller_bank_account",type:"input",required:!0},{label:$t("vhzdz47","开票方联系电话","lang"),key:"seller_phone",type:"input",required:!0},{label:$t("vhtzrc7","开票方联系地址","lang"),key:"seller_address",type:"input",required:!0,maxlength:"255",tip:$t("xoz3ioj","联系地址文字长度，请不要超过255个字","lang")}],e);var d=a(49986),h=a(77825),c=a(89886),g={mixins:[h.v8],data(){return{activeName:"all",status:d.h5,selectedRows:[],editRow:null,areas:[],dialogForm:(0,r.C)(s(this)),dialogShow:!1,dialogTitle:"",confirmStatus:!1,itemCategoryList:[]}},computed:{tableSchema(){return e=this,(0,i.createSetting)({actions:[{name:$t("mekb2","编辑","lang"),key:"edit",type:"button",buttonType:"text",action:{handler:(0,o.default)(([t])=>{e.editRowHandle(t)},2e3,{leading:!0})}}],columns:[{name:$t("w14tjo5","开票方名称","lang"),key:"seller_company_name",width:"140"},{name:$t("w1b2re5","开票方税号","lang"),key:"seller_tax_no",width:"140"},{name:$t("w1ak495","开票方电话","lang"),key:"seller_phone",width:"140"},{name:$t("ei0k23","开票人","lang"),key:"seller_name",width:"100"},{name:$t("fcctu3","收款人","lang"),key:"payee",width:"100"},{name:$t("djpzj3","复核人","lang"),key:"reviewer",width:"100"},{name:$t("w155wh5","开票方地址","lang"),key:"seller_address",width:"140"},{name:$t("e7zi4j4","添加时间","lang"),key:"created",render(e,{row:t}){return e("span",[" ",n()(1e3*t.created_at).format("yyyy-MM-DD HH:mm:ss")," "])}}]});var e},dialogRuleForm(){return s(this)}},mounted(){this.getMainCategory()},methods:{async getMainCategory(){const e=await this.$api.goods.getCategory({is_main_category:!0});this.itemCategoryList=e},refresh(){this.$refs.finder.refresh(!0)},beforeSearch(e){return{...e}},editRowHandle(e){this.dialogTitle=$t("2loov66","编辑销方信息","lang"),this.editRow=e,this.dialogShow=!0,this.dialogForm=(0,r.C)(s(this),e)},handleSelectionChange(e){this.selectedRows=e},onDialogFormSubmit(){this.confirmStatus=!0,this.editRow.id?c.default.financial.updateInvoiceSeller(this.editRow.id,this.dialogForm).then(e=>{this.$message.success($t("deua4r4","更新成功","lang")),this.dialogShow=!1,this.refresh()}).finally(()=>{this.confirmStatus=!1}):c.default.financial.createInvoiceSeller(this.dialogForm).then(e=>{this.$message.success($t("ar737y4","创建成功","lang")),this.dialogShow=!1,this.refresh()}).finally(()=>{this.confirmStatus=!1})},handleAdd(){this.dialogTitle=$t("z018do6","添加销方信息","lang"),this.editRow={},this.dialogShow=!0,this.dialogForm=(0,r.C)(s(this),{})}}},u=(0,a(81656).A)(g,function(){var e=this,t=e._self._c;return t("SpPage",[t("SpRouterView",[t("SpFinder",{ref:"finder",attrs:{url:"/order/invoice-seller/list","fixed-row-action":"","row-actions-width":"80px",setting:e.tableSchema,hooks:{beforeSearch:e.beforeSearch},"row-actions-fixed-align":"left"},on:{"select-all":e.handleSelectionChange,"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"tableTop",fn:function(){return[t("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"iconfont icon-xinzengcaozuo-01"},on:{click:e.handleAdd}},[e._v($t("z018do6","添加销方信息","lang"))])]},proxy:!0}])}),t("SpDialog",{ref:"dialogRef",staticClass:"base-form",attrs:{title:e.dialogTitle,modal:!1,"label-width":"130px",form:e.dialogForm,"form-list":e.dialogRuleForm,"confirm-status":e.confirmStatus},on:{onSubmit:e.onDialogFormSubmit},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}})],1)],1)},[],!1,null,"9d3f7ee6",null).exports}}]);