"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1958],{1958:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});a(44114),a(18111),a(22489),a(20116),a(61701);var r=a(95353),i=a(77825),s=a(26456),l=a(41776),o=a(95093),n=a.n(o),c=a(33318);const d=[{title:$t("pwmtty6","社区团购订单","lang"),value:"community"}];var p={mixins:[i.Ay,i.v8],data(){const e=this.$createElement;return{loading:!1,defaultTime:["00:00:00","23:59:59"],params:{mobile:"",order_id:"",salesman_mobile:"",receipt_type:"",source:"",order_status:"",order_class:"community",is_invoiced:"",time_start_begin:"",time_start_end:"",distributor_type:"",distributor_id:"",subDistrict:[]},datapass_block:1,subDistrictList:[],distributionType:c.as,orderStatus:(0,s.L3)()?c.i8:(0,s.hd)()?c.dj:c.w8,orderType:d,invoiceStatus:c.jY,orderCategory:c.In,pickerOptions:c.Dv,orderSourceList:[],remarkDialog:!1,remarkFormList:[{label:$t("bokzlb4","备注信息","lang"),key:"remark",type:"textarea",maxlength:150,placeholder:$t("4dr4fe","请输入对此订单需要备注的内容","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],remarkForm:{orderId:"",is_distribution:1,remark:""},cancelOrderDialog:!1,cancelOrderFormList:[{label:$t("b149oz4","取消原因","lang"),key:"cancel_reason",placeholder:$t("amt70d9","请选择取消订单原因","lang"),type:"select",options:[{title:$t("pz0w3u8","客户现在不想购买","lang"),value:1},{title:$t("s2wbp58","客户商品价格较贵","lang"),value:2},{title:$t("5ub2dc6","客户价格波动","lang"),value:3},{title:$t("54f4lf6","客户商品缺货","lang"),value:4},{title:$t("2iss7z6","客户重复下单","lang"),value:5},{title:$t("s1oguha","客户订单商品选择有误","lang"),value:6},{title:$t("yfg8h2a","客户支付方式选择有误","lang"),value:7},{title:$t("9z46tka","客户收货信息填写有误","lang"),value:8},{title:$t("ozd78ya","客户发票信息填写有误","lang"),value:9},{title:$t("l4oqme8","客户无法支付订单","lang"),value:10},{title:$t("j4es208","客户长时间未付款","lang"),value:11},{title:$t("5mt8x66","客户其他原因","lang"),value:12}],required:!0,message:$t("adohlc4","不能为空","lang"),onChange:e=>{this.cancelOrderFormList[1].isShow=12==e}},{label:$t("alu6v54","其他原因","lang"),key:"other_reason",type:"input",placeholder:$t("bf9qgl9","请填写取消订单原因","lang"),isShow:!1,validator:(e,t,a)=>{12!=this.cancelOrderForm.cancel_reason||t?a():a(new Error($t("adohlc4","不能为空","lang")))}}],cancelOrderForm:{order_id:"",cancel_reason:"",other_reason:""},deliverGoodsDialog:!1,deliverGoodsFormList:[{label:$t("b5urmu4","发货类型","lang"),key:"delivery_type",type:"radio",disabled:!1,options:[{label:"batch",name:$t("d5a74n4","整单发货","lang")},{label:"sep",name:$t("csx9py4","拆分发货","lang")}],onChange:e=>{this.deliverGoodsFormList[1].options[4].isShow="sep"==e}},{label:"",key:"items",type:"table",options:[{title:$t("cwisy3","商品名","lang"),key:"item_name"},{title:$t("i1y72","数量","lang"),key:"num",width:60},{title:$t("nbuukn5","已发货数量","lang"),key:"delivery_item_num",width:100},{title:$t("mapop37","总支付价（¥）","lang"),key:"price",width:120},{title:$t("b5r61h4","发货数量","lang"),key:"item_num",width:160,render:(t,a,r)=>t.num-t.delivery_item_num==0?$t("e7hbq3","已完成","lang"):e("el-input-number",{attrs:{size:"mini",min:1,max:t.num-t.delivery_item_num},model:{value:t.delivery_num,callback:e=>{this.$set(t,"delivery_num",e)}}}),isShow:!1}]},{label:$t("cp0yj74","快递公司","lang"),key:"delivery_corp",placeholder:$t("whmqve7","请选择快递公司","lang"),type:"select",options:[],required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("evwh164","物流单号","lang"),key:"delivery_code",type:"input",placeholder:$t("s5y24m6","物流公司单号","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],deliverGoodsForm:{order_id:"",delivery_type:"batch",delivery_corp:"",delivery_code:"",type:"",items:[]},writeOffDialog:!1,writeOffFormList:[{label:"",key:"items",type:"table",options:[{title:$t("cwisy3","商品名","lang"),key:"item_name"},{title:$t("i1y72","数量","lang"),key:"num",width:60},{title:$t("nbuukn5","已发货数量","lang"),key:"delivery_item_num",width:100},{title:$t("mapop37","总支付价（¥）","lang"),key:"price",width:120}]},{label:$t("faz623","提货码","lang"),key:"pickupcode",type:"input",placeholder:$t("7j3g5b6","请输入提货码","lang"),message:$t("adohlc4","不能为空","lang"),isShow:()=>"community"!=this.params.order_class}],writeOffForm:{order_id:"",pickupcode:"",items:[]},refundDialog:!1,refundFormList:[{label:$t("b17rgd4","取消来源","lang"),key:"source",type:"text"},{label:$t("fd5ujm4","申请时间","lang"),key:"applyTime",type:"text"},{label:$t("im43bd4","退款状态","lang"),key:"refundStatus",type:"text"},{label:$t("bpvh2l4","处理进度","lang"),key:"process",type:"text"},{label:$t("im9oyy4","退款金额","lang"),key:"refundPrice",type:"text"},{label:$t("d3h9kv4","支付方式","lang"),key:"payType",type:"text"},{label:$t("b149oz4","取消原因","lang"),key:"reason",type:"text"},{label:$t("bpsmjv4","处理结果","lang"),key:"check_cancel",type:"radio",options:[{label:"0",name:$t("budzk3","不同意","lang")},{label:"1",name:$t("ettv2","同意","lang")}],onChange:e=>{this.refundFormList[8].isShow="0"==e}},{label:$t("czp1gs4","拒绝原因","lang"),key:"shop_reject_reason",type:"input",placeholder:$t("kjdze37","请输入拒绝原因","lang"),isShow:!1,validator:(e,t,a)=>{"0"!=this.refundForm.check_cancel||t?a():a(new Error($t("adohlc4","不能为空","lang")))}}],refundForm:{order_id:"",source:"",applyTime:"",refundStatus:"",process:"",refundPrice:"",payType:"",reason:"",check_cancel:"1",shop_reject_reason:""},origin:""}},computed:{...(0,r.L8)(["login_type","isMicorMall"])},mounted(){this.origin=window.location.origin;const{tab:e}=this.$route.query;e&&(this.params.order_status=e),this.fetchList(),this.getOrderSourceList(),this.getLogisticsList(),this.getSubDistrictList()},methods:{async fetchList(){this.loading=!0;const{pageIndex:e,pageSize:t}=this.page;let a={page:e,pageSize:t,order_type:"normal",...this.params,subdistrict_parent_id:this.params.subDistrict[0],subdistrict_id:this.params.subDistrict[1]};delete a.subDistrict,(0,s.cy)(this.params.create_time)&&this.params.create_time.length>=2&&(a.time_start_begin=n()(this.params.create_time[0]).unix(),a.time_start_end=n()(this.params.create_time[1]).unix()),(0,s.cy)(this.params.delivery_time)&&this.params.delivery_time.length>=2&&(a.delivery_time_begin=n()(this.params.delivery_time[0]).unix(),a.delivery_time_end=n()(this.params.delivery_time[1]).unix()),delete a.create_time,delete a.delivery_time;const{list:r,pager:i,datapass_block:l}=await this.$api.community.getCommunityOrderList(a);this.tableList=r.map(e=>{const t=[],{distributor_id:a,receipt_type:r,cancel_status:i,is_logistics:l,is_invoiced:o,invoice:n,order_status:c,ziti_status:d,dada:p,delivery_status:m,pay_status:u}=e,g="dada"==r,_="logistics"==r;return((0,s.bz)()||0==a||"distributor"==this.login_type)&&(!g&&"NO_APPLY_CANCEL"==i&&["NOTPAY","PAYED"].includes(c)&&"DONE"!=d&&(!g||g&&["0","1"].includes(p.data_status))&&t.push({name:$t("b1drz94","取消订单","lang"),key:"cancel"}),"PAYED"==c&&"ziti"==r&&"PENDING"==d&&t.push({name:$t("ijm02","核销","lang"),key:"writeOff"}),g&&["NO_APPLY_CANCEL","FAILS"].includes(i)&&"PAYED"==c&&"DONE"!=m&&"0"==p.dada_status&&t.push({name:$t("hemo2","接单","lang"),key:"takeOrder"}),g&&"PAYED"==u&&"9"==p.dada_status&&t.push({name:$t("frz0444","确认退回","lang"),key:"orderSendBack"}),!_&&!l||g||"PAYED"!=c||"DONE"==m||"ziti"==r||t.push({name:$t("f14m2","发货","lang"),key:"deliverGoods"}),"WAIT_PROCESS"==i&&"PAYED"==c&&t.push({name:$t("p2ym2","退款","lang"),key:"refund"}),"0"==o&&n&&t.push({name:$t("eghwt3","待开票","lang"),key:"waitInvoice"}),t.push({name:$t("fqo12","备注","lang"),key:"remark"})),{...e,actionBtns:t}}),this.page.total=i?i.count:0,this.datapass_block=l,this.loading=!1},async getSubDistrictList(){const e=await this.$api.subdistrict.getSubDistrictList();this.subDistrictList=e},getOrderType({order_class:e,type:t}){if("normal"==e)return"1"==t?$t("i9z8we4","跨境订单","lang"):$t("divfxb4","普通订单","lang");const a=d.find(t=>t.value==e);return a?a.title:void 0},getDistributionType({receipt_type:e}){const t=c.as.find(t=>t.value==e);if(t)return t.title},async getOrderSourceList(){const{list:e}=await this.$api.datacube.getSourcesList({page:1,pageSize:1e3});this.orderSourceList=e.map(({sourceName:e,sourceId:t})=>({title:e,value:t}))},async getLogisticsList(){const{list:e}=await this.$api.trade.getLogisticsList();this.deliverGoodsFormList[2].options=e.map(e=>({title:e.name,value:e.value}))},async handleAction({order_id:e,distributor_remark:t,items:a,delivery_type:r,delivery_status:i},{key:s}){if("remark"==s)this.$refs.remarkDialogRef.resetForm(),this.remarkForm.orderId=e,this.remarkForm.remark=t,this.remarkDialog=!0;else if("cancel"==s)this.$refs.cancelOrderDialogRef.resetForm(),this.cancelOrderForm.order_id=e,this.cancelOrderDialog=!0;else if("deliverGoods"==s)this.$refs.deliverGoodsDialogRef.resetForm(),this.deliverGoodsForm.order_id=e,this.deliverGoodsForm.items=a.map(e=>({...e,price:e.price/100})),this.deliverGoodsForm.type=r,"PARTAIL"==i?(this.deliverGoodsForm.delivery_type="sep",this.deliverGoodsFormList[0].disabled=!0,this.deliverGoodsFormList[1].options[4].isShow=!0):(this.deliverGoodsFormList[0].disabled=!1,this.deliverGoodsFormList[1].options[4].isShow=!1),this.deliverGoodsDialog=!0;else if("writeOff"==s)this.$refs.writeOffDialogRef.resetForm(),this.writeOffForm.order_id=e,this.writeOffForm.items=a.map(e=>({...e,price:e.price/100})),this.writeOffDialog=!0;else if("takeOrder"==s)this.$confirm($t("8zir98d","请在接单前确认商品当前库存","lang"),$t("cx567u4","接单提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await this.$api.trade.doBusinessReceipt(e),this.$message.success($t("cx4nvj4","接单成功","lang"))});else if("orderSendBack"==s)this.$confirm($t("frz0444","确认退回","lang"),$t("w4w05a6","确认退回提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await this.$api.trade.confirmBack(e),this.$message.success($t("ij1qzx4","退回成功","lang"))});else if("refund"==s){this.$refs.refundRef.resetForm(),this.refundDialog=!0;const{cancel_from:t,create_time:a,refund_status:r,progress:i,fee_symbol:s,total_fee:l,pay_channel:o,pay_type:d,cancel_reason:p}=await this.$api.trade.getCancelOrderInfo(e,{order_type:"normal"});this.refundForm={...this.refundForm,order_id:e,source:"buyer"==t?$t("kff1qw5","消费者申请","lang"):$t("ysidro6","系统自动取消","lang"),applyTime:n()(1e3*a).format("YYYY-MM-DD HH:mm:ss"),refundStatus:c.ks[r],process:c.hi[i],refundPrice:`${s}${l/100}`,payType:o?c.CV[o]:c.CV[d],reason:p}}else"waitInvoice"==s&&this.$confirm($t("ektlr8c","确定更新该订单开票状态？","lang"),$t("hn562","提示","lang"),{cancelButtonText:$t("ev022","取消","lang"),confirmButtonText:$t("kzjg2","确定","lang"),type:"warning"}).then(async()=>{const{success:t}=await this.$api.trade.isInvoiced({order_id:e,status:1});this.fetchList(),t?this.$message.success($t("75zb4x7","已更新开票状态","lang")):this.$message.error($t("4q13i58","更新开票状态失败","lang"))})},async onRemarkSubmit(){await this.$api.order.remarks(this.remarkForm),this.$message.success($t("rzycyb9","订单备注修改成功!","lang")),this.remarkDialog=!1,this.fetchList()},async onCancelOrderSubmit(){const{order_id:e}=this.cancelOrderForm;await this.$api.trade.cancelOrderConfirm(e,this.cancelOrderForm),this.$message.success($t("zgosdp7","订单取消成功!","lang")),this.cancelOrderDialog=!1,this.fetchList()},async deliverGoodsSubmit(){const{order_id:e,delivery_type:t,delivery_corp:a,delivery_code:r,type:i,items:s}=this.deliverGoodsForm;let l={order_id:e,delivery_type:t,delivery_corp:a,delivery_code:r,type:i};"sep"==t&&(l.sepInfo=JSON.stringify(s.filter(e=>e.delivery_num)));const{delivery_status:o}=await this.$api.trade.delivery(l);this.deliverGoodsDialog=!1,this.fetchList(),o&&"PENDING"!=o?this.$message.success($t("97ym6c5","发货成功!","lang")):this.$message.error($t("98zfs95","发货失败!","lang"))},async writeOffSubmit(){const{order_id:e}=this.writeOffForm,{ziti_status:t}=await this.$api.trade.doWriteoff(e,this.writeOffForm);"DONE"==t?this.$message.success($t("cza3sh9","自提订单核销成功!","lang")):this.$message.error($t("cy9a6k9","自提订单核销失败!","lang")),this.writeOffDialog=!1},async refundSubmit(){const{order_id:e,check_cancel:t,shop_reject_reason:a}=this.refundForm,{refund_status:r}=await this.$api.trade.cancelConfirm(e,{order_id:e,check_cancel:t,shop_reject_reason:a});"AUDIT_SUCCESS"==r?this.$message.success($t("gv1tj15","审核通过!","lang")):"SHOP_CHECK_FAILS"==r?this.$message.success($t("j11vzv6","审核已拒绝!","lang")):this.$message.error($t("gmztyu5","审核失败!","lang")),this.refundDialog=!1},exportInvoice(){let e="normal";this.$emit("onChangeData","params",{type:e}),(0,l.exportInvoice)({...this.params,type:e,order_type:"normal"}).then(e=>{const{status:t,url:a,filename:r}=e.data.data;if(t)return this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),void this.$export_open("invoice");a?window.open(a):this.$message.error($t("thm90yh","无内容可导出或执行失败，请检查重试","lang"))})},exportDataNormal(){this.exportData("normal_order")},exportDataMaster(){this.exportData("normal_master_order")},exportData(e){let t={...this.params,order_type:"normal",type:e,page:this.page.pageIndex};(0,s.cy)(this.params.create_time)&&this.params.create_time.length>=2&&(t.time_start_begin=n()(this.params.create_time[0]).unix(),t.time_start_end=n()(this.params.create_time[1]).unix()),(0,s.cy)(this.params.delivery_time)&&this.params.delivery_time.length>=2&&(t.delivery_time_begin=n()(this.params.delivery_time[0]).unix(),t.delivery_time_end=n()(this.params.delivery_time[1]).unix()),delete t.create_time,delete t.delivery_time,(0,l.orderExport)(t).then(t=>{const{status:a,url:r,filename:i}=t.data.data;if(a)return this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),void this.$export_open(e);r?window.open(r):this.$message.error($t("thm90yh","无内容可导出或执行失败，请检查重试","lang"))})},async uploadHandleChange(e){const t={isUploadFile:!0,file_type:"normal_orders",file:e.raw};await this.$api.common.handleUploadFile(t),this.$message.success($t("dn5eu39","上传成功，等待处理","lang")),this.fetchList()},async uploadHandlePatchCancel(e){const t={isUploadFile:!0,file_type:"normal_orders_cancel",file:e.raw};await this.$api.common.handleUploadFile(t),this.$message.success($t("dn5eu39","上传成功，等待处理","lang")),this.fetchList()}}},m=(0,a(81656).A)(p,function(){var e=this,t=e._self._c;return t("SpPage",[t("SpRouterView",[t("div",{staticClass:"page-body"},[t("div",[t("SpFilterForm",{attrs:{model:e.params},on:{onSearch:e.onSearch,onReset:e.onSearch}},[t("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("cttsc24","手机号:","lang")}},[t("el-input",{attrs:{placeholder:$t("m6m16f9","请输入客户手机号码","lang")},model:{value:e.params.mobile,callback:function(t){e.$set(e.params,"mobile",t)},expression:"params.mobile"}})],1),t("SpFilterFormItem",{attrs:{prop:"order_id",label:$t("hymdzq4","订单号:","lang")}},[t("el-input",{attrs:{placeholder:$t("7djicl6","请输入订单号","lang")},model:{value:e.params.order_id,callback:function(t){e.$set(e.params,"order_id",t)},expression:"params.order_id"}})],1),e.isMicorMall?e._e():t("SpFilterFormItem",{attrs:{prop:"receipt_type",label:$t("ik14vq5","配送类型:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.receipt_type,callback:function(t){e.$set(e.params,"receipt_type",t)},expression:"params.receipt_type"}},e._l(e.distributionType,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"source",label:$t("bc962s5","订单来源:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.source,callback:function(t){e.$set(e.params,"source",t)},expression:"params.source"}},e._l(e.orderSourceList,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"order_class",label:$t("b99wcp5","订单类型:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.order_class,callback:function(t){e.$set(e.params,"order_class",t)},expression:"params.order_class"}},e._l(e.orderType,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("vyu3bm5","下单时间:","lang"),size:"max"}},[t("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":e.defaultTime,"picker-options":e.pickerOptions},model:{value:e.params.create_time,callback:function(t){e.$set(e.params,"create_time",t)},expression:"params.create_time"}})],1),e.isMicorMall||e.VERSION_IN_PURCHASE()?e._e():t("SpFilterFormItem",{attrs:{prop:"is_invoiced",label:$t("w32o875","开票状态:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.is_invoiced,callback:function(t){e.$set(e.params,"is_invoiced",t)},expression:"params.is_invoiced"}},e._l(e.invoiceStatus,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"delivery_time",label:$t("972ltm5","发货时间:","lang"),size:"max"}},[t("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":e.defaultTime,"picker-options":e.pickerOptions},model:{value:e.params.delivery_time,callback:function(t){e.$set(e.params,"delivery_time",t)},expression:"params.delivery_time"}})],1),e.VERSION_STANDARD()?e._e():t("SpFilterFormItem",{attrs:{prop:"distributor_type",label:$t("bfbhny5","订单分类:","lang")}},[t("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.distributor_type,callback:function(t){e.$set(e.params,"distributor_type",t)},expression:"params.distributor_type"}},e._l(e.orderCategory,function(e){return t("el-option",{key:e.value,attrs:{size:"mini",label:e.title,value:e.value}})}),1)],1),e.isMicorMall&&"distributor"==e.login_type||e.VERSION_B2C()?e._e():t("SpFilterFormItem",{attrs:{prop:"distributor_id",label:$t("ek40n3","店铺:","lang")}},[t("SpSelectShop",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.params.distributor_id,callback:function(t){e.$set(e.params,"distributor_id",t)},expression:"params.distributor_id"}})],1),t("SpFilterFormItem",{attrs:{prop:"subDistrict",label:$t("7z4uzi5","选择街道:","lang")}},[t("el-cascader",{attrs:{clearable:"",props:{value:"id",checkStrictly:!0},options:e.subDistrictList},model:{value:e.params.subDistrict,callback:function(t){e.$set(e.params,"subDistrict",t)},expression:"params.subDistrict"}})],1),t("SpFilterFormItem",{attrs:{prop:"params.activity_name",label:$t("bug4wd5","社团名称:","lang")}},[t("el-input",{attrs:{placeholder:$t("hvfei87","请输入社团名称","lang")},model:{value:e.params.activity_name,callback:function(t){e.$set(e.params,"activity_name",t)},expression:"params.activity_name"}})],1)],1),t("div",{staticClass:"action-container"},[t("el-dropdown",[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("gr6m3"," 导出","lang")),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("div",{on:{click:e.exportInvoice}},[e._v($t("abkmez5","未开票订单","lang"))])]),t("el-dropdown-item",[t("div",{on:{click:e.exportDataMaster}},[e._v($t("c4pri3","主订单","lang"))])]),t("el-dropdown-item",[t("div",{on:{click:e.exportDataNormal}},[e._v($t("e1p373","子订单","lang"))])])],1)],1),t("el-tooltip",{attrs:{effect:"light",content:$t("ym4t5h1a","请将从订单列表导出的主订单文件，删除不想批量发货的订单号，修改物流公司，物流单号后上传即可。","lang"),placement:"top-start"}},[t("el-upload",{staticClass:"btn-upload",attrs:{action:"","on-change":e.uploadHandleChange,"auto-upload":!1,"show-file-list":!1}},[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("79aqr06"," 批量发货 ","lang"))])],1)],1),t("el-upload",{staticClass:"btn-upload",attrs:{action:"","on-change":e.uploadHandlePatchCancel,"auto-upload":!1,"show-file-list":!1}},[t("el-button",{attrs:{type:"primary",plain:""}},[e._v($t("79g0o86"," 批量取消 ","lang"))])],1)],1),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.onSearch},model:{value:e.params.order_status,callback:function(t){e.$set(e.params,"order_status",t)},expression:"params.order_status"}},[e._l(e.orderStatus,function(e){return t("el-tab-pane",{key:e.value,attrs:{label:e.title,name:e.value}})}),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableList}},[t("el-table-column",{attrs:{width:"220",prop:"order_id",label:$t("hym7z54","订单信息","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"order-num"},[e._v(" "+e._s(a.row.order_id)+" "),t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.order_id,expression:"scope.row.order_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})])],1),"0"!==a.row.distributor_id?t("div",{staticClass:"order-store"},[t("el-tooltip",{attrs:{effect:"dark",content:$t("ekkkq3","店铺名","lang"),placement:"top-start"}},[t("i",{staticClass:"el-icon-office-building"})]),e._v(" "+e._s(a.row.distributor_name)+" ")],1):e._e(),t("div",{staticClass:"order-time"},[t("el-tooltip",{attrs:{effect:"dark",content:$t("a72nl44","下单时间","lang"),placement:"top-start"}},[t("i",{staticClass:"el-icon-time"})]),e._v(" "+e._s(e._f("datetime")(a.row.create_time,"YYYY-MM-DD HH:mm:ss"))+" ")],1)]}}])}),t("el-table-column",{attrs:{width:"220",prop:"order_id",label:$t("i9atht4","跟团信息","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v($t("u07l6p5","所属团长：","lang")+e._s(a.row.community_info.chief_name))]),t("div",[e._v($t("bbfefp4","团名称：","lang")+e._s(a.row.community_info.activity_name))]),t("div",[e._v($t("i9cduu4","跟团号：","lang")+e._s(a.row.community_info.activity_trade_no))])]}}])}),t("el-table-column",{attrs:{prop:"mobile",width:"150",label:$t("k5uobc5","收件人信息","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.user_delete||"merchant"===e.login_type?[t("span",[e._v(e._s(a.row.mobile))]),0==e.datapass_block?t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})]):e._e()]:[t("div",[e._v($t("d3jbj44","收件人：","lang")+e._s(a.row.community_info.ziti_contact_user))]),t("router-link",{attrs:{target:"_blank",to:{path:""+("distributor"!=e.login_type?"/member/member/memberlist/detail":"/shopadmin/member/member/detail"),query:{user_id:a.row.user_id}}}},[e._v(" "+e._s(a.row.mobile)+" ")]),0==e.datapass_block?t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"el-icon-document-copy"})]):e._e()]]}}])}),t("el-table-column",{attrs:{prop:"total_fee",width:"120",label:$t("96gz77","订单金额（¥）","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.total_fee/100).toFixed(2))+" ")]}}])}),t("el-table-column",{attrs:{width:"100",label:$t("cwnwg35","运费（¥）","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.freight_fee||0)/100)+" ")]}}])}),"merchant"!=e.login_type?[e.isMicorMall?e._e():t("el-table-column",{attrs:{label:$t("hytrc34","订单类型","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getOrderType(t.row))+" ")]}}],null,!1,3071688018)})]:e._e(),t("el-table-column",{attrs:{prop:"order_status",label:$t("hys56m4","订单状态","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_status_msg)+" ")]}}])}),t("el-table-column",{attrs:{label:$t("ixcclm4","配送方式","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getDistributionType(t.row))+" ")]}}])}),t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"}},[t("router-link",{attrs:{to:`${e.$route.path}/detail?orderId=${a.row.order_id}&resource=${e.$route.path}`}},[e._v($t("likox4"," 详情 ","lang"))])],1),t("el-popover",{attrs:{placement:"right",trigger:"hover"}},[t("div",{staticClass:"operating-icons"},[t("el-button",{attrs:{type:"text"}},[t("router-link",{attrs:{to:`${e.$route.path}/process?orderId=${a.row.order_id}&resource=${e.$route.path}`}},[e._v($t("fy0tq4"," 日志 ","lang"))])],1),e._l(a.row.actionBtns,function(r,i){return[t("el-button",{key:`btn-item__${i}`,attrs:{type:"text"},on:{click:function(t){return e.handleAction(a.row,r)}}},[e._v(" "+e._s(r.name)+" ")])]})],2),t("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v($t("inra3"," 更多","lang")),t("i",{staticClass:"iconfont icon-angle-double-right"})])],1)]}}])})],2),t("div",{staticClass:"mt-4 text-right"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageIndex,"page-sizes":[10,20,50],total:e.page.total,"page-size":e.page.pageSize},on:{"update:currentPage":function(t){return e.$set(e.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.page,"pageIndex",t)},"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)],2),t("SpDialog",{ref:"remarkDialogRef",attrs:{title:`${$t("mk0yu58","修改备注【订单:","lang")}${e.remarkForm.orderId}】`,form:e.remarkForm,"form-list":e.remarkFormList},on:{onSubmit:e.onRemarkSubmit},model:{value:e.remarkDialog,callback:function(t){e.remarkDialog=t},expression:"remarkDialog"}}),t("SpDialog",{ref:"cancelOrderDialogRef",attrs:{title:`${$t("53n9c48","取消订单【订单:","lang")}${e.cancelOrderForm.order_id}】`,form:e.cancelOrderForm,"form-list":e.cancelOrderFormList},on:{onSubmit:e.onCancelOrderSubmit},model:{value:e.cancelOrderDialog,callback:function(t){e.cancelOrderDialog=t},expression:"cancelOrderDialog"}}),t("SpDialog",{ref:"deliverGoodsDialogRef",attrs:{width:"1000px",title:`${$t("7sn7qr6","发货【订单:","lang")}${e.deliverGoodsForm.order_id}】`,form:e.deliverGoodsForm,"form-list":e.deliverGoodsFormList},on:{onSubmit:e.deliverGoodsSubmit},model:{value:e.deliverGoodsDialog,callback:function(t){e.deliverGoodsDialog=t},expression:"deliverGoodsDialog"}}),t("SpDialog",{ref:"writeOffDialogRef",attrs:{title:`${$t("9rdkkf6","核销【订单:","lang")}${e.writeOffForm.order_id}】`,form:e.writeOffForm,"form-list":e.writeOffFormList},on:{onSubmit:e.writeOffSubmit},model:{value:e.writeOffDialog,callback:function(t){e.writeOffDialog=t},expression:"writeOffDialog"}}),t("SpDialog",{ref:"refundRef",attrs:{title:`${$t("jozlez6","退款【订单:","lang")}${e.refundForm.order_id}】`,form:e.refundForm,"form-list":e.refundFormList},on:{onSubmit:e.refundSubmit},model:{value:e.refundDialog,callback:function(t){e.refundDialog=t},expression:"refundDialog"}})],1)])])],1)},[],!1,null,null,null).exports}}]);