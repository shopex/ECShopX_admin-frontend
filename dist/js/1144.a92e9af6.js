"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1144],{21144:function(t,a,e){e.r(a),e.d(a,{default:function(){return i}});e(18111),e(61701);var s=e(95093),r=e.n(s),l=e(27671),n=(e(69472),{data(){return{loading:!0,regions:l,created:"",params:{page:1,pageSize:20,user_name:"",status:"",time_star:"",time_end:""},regions_value:[],approveStatusList:[{name:$t("en402","全部","lang"),value:""},{name:$t("efsql3","待审批","lang"),value:"WAIT_APPROVE"},{name:$t("byy8w74","审批成功","lang"),value:"APPROVED"},{name:$t("byx24s4","审批失败","lang"),value:"REJECT"}],total_count:0,list:[]}},mounted(){this.getList(this.params)},methods:{dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},dateChange(t){t.length>0?(this.params.time_star=this.dateStrToTimeStamp(t[0]+" 00:00:00"),this.params.time_end=this.dateStrToTimeStamp(t[1]+" 23:59:59")):(this.params.time_star="",this.params.time_end=""),this.params.page=1},searchData(t){this.params.page=1,this.getList(this.params)},handleCurrentChange(t){this.params.page=t,this.loading=!1,this.getList(this.params)},handleSizeChange(t){this.loading=!1,this.params.page=1,this.params.pageSize=t,this.getList(this.params)},getList(t){this.loading=!0,this.$api.bspay.getSubApproveList(t).then(t=>{this.list=t.list,this.total_count=Number(t.total_count),this.loading=!1})},RegionChangeSearch(t){var a=this.getCascaderObj(t,this.regions);1==a.length?this.params.address=a[0].label:2==a.length?this.params.address=a[0].label+"-"+a[1].label:3==a.length?this.params.address=a[0].label+"-"+a[1].label+"-"+a[2].label:this.params.address="",this.params.page=1},getCascaderObj(t,a){return t.map(function(t,e,s){for(var r of a)if(r.value===t)return a=r.children,r;return null})},resetForm(t){this.$refs[t].resetFields()},createTimeFilter(t){return r()(1e3*t).format("YYYY-MM-DD HH:mm:ss")}}}),i=(0,e(81656).A)(n,function(){var t=this,a=t._self._c;return a("SpPage",[-1===t.$route.path.indexOf("approve")?a("div",[a("el-card",{staticClass:"cus-card"},[a("el-form",{ref:"myForm",attrs:{model:t.params,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("bz15hf4","审批状态","lang")}},[a("el-select",{staticClass:"input-m",attrs:{placeholder:$t("vrmxtm7","请选择审批状态","lang")},model:{value:t.params.status,callback:function(a){t.$set(t.params,"status",a)},expression:"params.status"}},t._l(t.approveStatusList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("b5zu9g4","商户名称","lang")}},[a("el-input",{staticClass:"input-m",attrs:{placeholder:$t("l6wdl3","请输入","lang"),clearable:""},model:{value:t.params.user_name,callback:function(a){t.$set(t.params,"user_name",a)},expression:"params.user_name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:$t("fd5kvy4","申请日期","lang")}},[a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang")},on:{change:t.dateChange},model:{value:t.created,callback:function(a){t.created=a},expression:"created"}})],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12,offset:12}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchData}},[t._v($t("ftlbu4"," 搜索 ","lang"))]),a("el-button",{on:{click:function(a){return t.resetForm("myForm")}}},[t._v($t("miwv34"," 重置 ","lang"))])],1)],1)],1)],1)],1),a("el-card",[t._l(t.list,function(s){return a("div",{key:s.id,staticClass:"cus-list"},[a("el-row",{staticClass:"cus-row"},[a("el-col",{attrs:{span:3}},["distributor"===s.operator_type?a("img",{staticClass:"cus-row-img",attrs:{src:e(67620),alt:""}}):t._e(),"merchant"===s.operator_type?a("img",{staticClass:"cus-row-img",attrs:{src:e(18508),alt:""}}):t._e()]),a("el-col",{attrs:{span:13}},[a("router-link",{attrs:{to:{path:t.matchRoutePath("approve"),query:{id:s.id}}}},[a("span",{staticClass:"cus-row-name"},[t._v(t._s(s.user_name))])]),a("div",{staticClass:"cus-row-time"},[a("span",[t._v($t("kvpojs5","申请时间：","lang")+t._s(s.created?t.createTimeFilter(s.created):"-"))]),a("span",[t._v($t("u0h95a5","所属地区：","lang")+t._s(s.address||"-"))]),a("span",[t._v($t("4uss5t6","所属来源： ","lang")),"supplier"===s.operator_type?a("span",[t._v($t("c4b9p3","供应商","lang"))]):t._e(),"distributor"===s.operator_type?a("span",[t._v($t("gwn72","店铺","lang"))]):t._e(),"merchant"===s.operator_type?a("span",[t._v($t("f1kh2","商户","lang"))]):t._e()])])],1),a("el-col",{attrs:{span:5}},["APPROVED"===s.status?a("img",{staticStyle:{width:"100px",height:"84px"},attrs:{src:e(19348),alt:""}}):t._e(),"REJECT"===s.status?a("img",{staticStyle:{width:"90px",height:"89px"},attrs:{src:e(43878),alt:""}}):t._e()]),a("el-col",{staticClass:"cus-row-btn",attrs:{span:3,offset:"WAIT_APPROVE"===s.status?5:0}},["WAIT_APPROVE"===s.status?a("router-link",{attrs:{to:{path:t.matchRoutePath("approve"),query:{id:s.id}}}},[a("el-button",{attrs:{type:"primary"}},[t._v($t("egc944"," 审批 ","lang"))])],1):a("el-button",{attrs:{type:"info",plain:"",disabled:""}},[t._v($t("cq1u6u5"," 已审批 ","lang"))])],1)],1)],1)}),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.params.page,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],2)],1):t._e(),a("router-view")],1)},[],!1,null,"3d91d8f8",null).exports}}]);