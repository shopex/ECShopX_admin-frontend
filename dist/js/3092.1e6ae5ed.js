"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[3092],{33092:function(t,a,e){e.r(a),e.d(a,{default:function(){return s}});e(44114);var l={data(){return{form:{order_id:"",trade_id:"",pay_type:"",status:"",adapay_div_status:"",can_div:"",distributor_name:"",adapay_fee_mode:"",time:""},params:{page:1,pageSize:10},loading:!0,total_count:0,total:{totalFee:"",payFee:"",divFee:"",adapayFee:""},list:[],time:{time_start_begin:"",time_start_end:""}}},mounted(){this.getSub_account()},methods:{getDistributorId(){return{distributor_id:this.$store.getters.shopId||0}},async uploadHandleChange(t,a){let e={isUploadFile:!0,file_type:"adapay_tradedata",file:t.raw,...this.getDistributorId()};await this.$api.common.handleUploadFile(e),this.$message({type:"success",message:$t("dn5eu39","上传成功，等待处理","lang")}),this.getSub_account()},goDetail(t){this.$router.push({path:`${this.$route.path}/detail/${t}`})},async getSub_account(){this.loading=!0;const{list:t,total:a,total_count:e}=await this.$api.adapay.subAccount({...this.form,...this.params,...this.time});this.total=a,this.list=t,this.total_count=e,this.loading=!1},handleCurrentChange(t){this.params.page=t,this.getSub_account()},handleSizeChange(t){this.params.pageSize=t,this.getSub_account()},timeHandle(t){this.time.time_start_begin=t[0],this.time.time_start_end=t[1]},queryHandle(){this.params={page:1,pageSize:10},this.getSub_account()},resetForm(t){this.$refs[t].resetFields(),this.form.pay_type="",this.form.status="",this.time.time_start_begin="",this.time.time_start_end=""},async exportFile(){const{status:t}=await this.$api.adapay.exportFileList({...this.form,...this.params,...this.time});t?this.$message.success(`${$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}`):this.$message.error(`${$t("by46j64","导出失败","lang")}`)}}},s=(0,e(81656).A)(l,function(){var t=this,a=t._self._c;return a("SpPage",[a("SpRouterView",{staticClass:"zyk_adapay_account"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"100px"}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v($t("c0hmu3","交易单","lang"))])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("kuwys3","订单号","lang"),prop:"order_id"}},[a("el-input",{model:{value:t.form.order_id,callback:function(a){t.$set(t.form,"order_id",a)},expression:"form.order_id"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("yc5zij5","交易流水号","lang"),prop:"trade_id"}},[a("el-input",{model:{value:t.form.trade_id,callback:function(a){t.$set(t.form,"trade_id",a)},expression:"form.trade_id"}})],1)],1),"distributor"!=t.$store.getters.login_type?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("cjqdxi4","店铺名称","lang"),prop:"distributor_name"}},[a("el-input",{model:{value:t.form.distributor_name,callback:function(a){t.$set(t.form,"distributor_name",a)},expression:"form.distributor_name"}})],1)],1):t._e(),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("d3h9kv4","支付方式","lang"),prop:"pay_type"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.pay_type,callback:function(a){t.$set(t.form,"pay_type",a)},expression:"form.pay_type"}},[a("el-option",{attrs:{label:$t("pfaqf7","微信小程序支付","lang"),value:"wx_lite"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("acl1ru4","交易状态","lang"),prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},[a("el-option",{attrs:{label:$t("d3fjv14","支付完成","lang"),value:"SUCCESS"}}),a("el-option",{attrs:{label:$t("imoan04","部分退款","lang"),value:"PARTIAL_REFUND"}}),a("el-option",{attrs:{label:$t("awonqr4","全额退款","lang"),value:"FULL_REFUND"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("d8plo74","是否分账","lang"),prop:"adapay_div_status"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.adapay_div_status,callback:function(a){t.$set(t.form,"adapay_div_status",a)},expression:"form.adapay_div_status"}},[a("el-option",{attrs:{label:$t("fiphm3","未分账","lang"),value:"NOTDIV"}}),a("el-option",{attrs:{label:$t("e63iq3","已分账","lang"),value:"DIVED"}})],1)],1)],1),"admin"==t.$store.getters.login_type?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("csikv77","手续费扣费方式","lang"),prop:"adapay_fee_mode"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.adapay_fee_mode,callback:function(a){t.$set(t.form,"adapay_fee_mode",a)},expression:"form.adapay_fee_mode"}},[a("el-option",{attrs:{label:$t("eem62","内扣","lang"),value:"I"}}),a("el-option",{attrs:{label:$t("foy52","外扣","lang"),value:"O"}})],1)],1)],1):t._e(),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("dhk87j4","时间范围","lang"),prop:"time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"-","start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang")},on:{change:t.timeHandle},model:{value:t.form.time,callback:function(a){t.$set(t.form,"time",a)},expression:"form.time"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:$t("axo1rf4","分账状态","lang"),prop:"can_div"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.can_div,callback:function(a){t.$set(t.form,"can_div",a)},expression:"form.can_div"}},[a("el-option",{attrs:{label:$t("cpb0v3","可分账","lang"),value:"true"}}),a("el-option",{attrs:{label:$t("a73nxe4","不可分账","lang"),value:"false"}})],1)],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.queryHandle}},[t._v($t("gg26b4"," 查询 ","lang"))]),a("el-button",{attrs:{type:"info",size:"medium"},on:{click:function(a){return t.resetForm("ruleForm")}}},[t._v($t("h9ea34"," 清空 ","lang"))])],1),a("el-row",{staticClass:"group",attrs:{gutter:20}},["distributor"!=t.$store.getters.login_type?a("el-col",{staticClass:"item",attrs:{span:6}},[a("p",{staticClass:"title"},[t._v($t("hypb794","订单总额","lang"))]),a("p",{staticClass:"money"},[t._v("￥ "+t._s(t._f("formatNumMoney")(t.total.totalFee/100)))])]):t._e(),a("el-col",{staticClass:"item",attrs:{span:6}},[a("p",{staticClass:"title"},[t._v($t("aci7sh4","交易总额","lang"))]),a("p",{staticClass:"money"},[t._v("￥ "+t._s(t._f("formatNumMoney")(t.total.payFee/100)))])]),"distributor"==t.$store.getters.login_type?a("el-col",{staticClass:"item",attrs:{span:6}},[a("p",{staticClass:"title"},[t._v($t("d3gnbf4","支付总额","lang"))]),a("p",{staticClass:"money"},[t._v("￥ "+t._s(t._f("formatNumMoney")(t.total.totalFee/100)))])]):t._e(),a("el-col",{staticClass:"item",attrs:{span:6}},[a("p",{staticClass:"title"},[t._v($t("axl7s24","分账总额","lang"))]),a("p",{staticClass:"money"},[t._v("￥ "+t._s(t._f("formatNumMoney")(t.total.divFee/100)))])]),"admin"==t.$store.getters.login_type?a("el-col",{staticClass:"item",attrs:{span:6}},[a("p",{staticClass:"title"},[t._v($t("p9jwxz5","手续费总额","lang"))]),a("p",{staticClass:"money"},[t._v("￥ "+t._s(t._f("formatNumMoney")(t.total.adapayFee/100)))])]):t._e()],1),a("div",{staticClass:"tablelist"},[a("el-row",{staticStyle:{"text-align":"right"}},[a("el-upload",{staticStyle:{"margin-right":"10px",display:"inline-block"},attrs:{action:"","on-change":t.uploadHandleChange,"auto-upload":!1,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary"}},[t._v($t("gr2h3"," 导入","lang")),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:$t("kuwys3","订单号","lang"),prop:"orderId"}}),"distributor"!=t.$store.getters.login_type?[a("el-table-column",{attrs:{label:$t("bdfi7r4","商铺名称","lang"),prop:"distributor_name"}})]:t._e(),[a("el-table-column",{attrs:{label:$t("yc5zij5","交易流水号","lang"),prop:"tradeId"}}),a("el-table-column",{attrs:{label:$t("d3h9kv4","支付方式","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["wxpay"==e.row.payType?a("span",[t._v($t("cemv244","微信支付","lang"))]):t._e(),"wxpayapp"==e.row.payType?a("span",[t._v($t("k8r0sp7","微信APP支付","lang"))]):t._e(),"wxpayh5"==e.row.payType?a("span",[t._v($t("njsuvr6","微信H5支付","lang"))]):t._e(),"wxpaypc"==e.row.payType?a("span",[t._v($t("njnglt6","微信PC支付","lang"))]):t._e(),"wxpaypos"==e.row.payType?a("span",[t._v($t("k0ionq7","微信POS支付","lang"))]):t._e(),"alipayapp"==e.row.payType?a("span",[t._v($t("2samja8","支付宝APP支付","lang"))]):t._e(),"alipay"==e.row.payType?a("span",[t._v($t("k88wub5","支付宝支付","lang"))]):t._e(),"alipayh5"==e.row.payType?a("span",[t._v($t("99rluy7","支付宝H5支付","lang"))]):t._e(),"alipaypos"==e.row.payType?a("span",[t._v($t("30iyo98","支付宝POS支付","lang"))]):t._e(),"deposit"==e.row.payType?a("span",[t._v($t("an4pv14","余额支付","lang"))]):t._e(),"point"==e.row.payType?a("span",[t._v($t("fq5ozk4","积分支付","lang"))]):t._e(),"pos"==e.row.payType?a("span",[t._v($t("f5b6xs8","POS银行卡支付","lang"))]):t._e(),"adapay"==e.row.payType&&"wx_lite"==e.row.payChannel?a("span",[t._v($t("cemv244","微信支付","lang"))]):t._e()]}}])})],"distributor"!=t.$store.getters.login_type?a("el-table-column",{attrs:{label:$t("hyxqu74","订单金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatNumMoney")(e.row.totalFee/100)))])]}}],null,!1,728680641)}):t._e(),"distributor"==t.$store.getters.login_type?a("el-table-column",{attrs:{label:$t("acqnff4","交易金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatNumMoney")(e.row.totalFee/100)))])]}}],null,!1,728680641)}):t._e(),a("el-table-column",{attrs:{label:$t("acl1ru4","交易状态","lang"),prop:"tradeState"},scopedSlots:t._u([{key:"default",fn:function(e){return["SUCCESS"==e.row.tradeState?a("span",[t._v($t("d3fjv14","支付完成","lang"))]):"PARTIAL_REFUND"==e.row.tradeState?a("span",[t._v($t("imoan04","部分退款","lang"))]):"FULL_REFUND"==e.row.tradeState?a("span",[t._v($t("awonqr4","全额退款","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{label:$t("im9oyy4","退款金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatNumMoney")(e.row.refundedFee/100)))])]}}])}),a("el-table-column",{attrs:{label:$t("axpnww4","分账类型","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["adapay"==e.row.payType?a("span",[t._v($t("lzjf2","线上","lang"))]):a("span",[t._v($t("lzjg2","线下","lang"))])]}}])}),a("el-table-column",{attrs:{label:$t("axo1rf4","分账状态","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===e.row.canDiv?a("span",[t._v($t("cpb0v3","可分账","lang"))]):a("span",[t._v($t("a73nxe4","不可分账","lang"))])]}}])}),a("el-table-column",{attrs:{label:$t("d8plo74","是否分账","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["NOTDIV"==e.row.adapayDivStatus?a("span",[t._v($t("fiphm3","未分账","lang"))]):"DIVED"==e.row.adapayDivStatus?a("span",[t._v($t("e63iq3","已分账","lang"))]):t._e()]}}])}),"admin"==t.$store.getters.login_type?[a("el-table-column",{attrs:{label:$t("csikv77","手续费扣费方式","lang"),prop:"adapayFeeMode"},scopedSlots:t._u([{key:"default",fn:function(e){return["I"==e.row.adapayFeeMode?a("span",[t._v($t("eem62","内扣","lang"))]):"O"==e.row.adapayFeeMode?a("span",[t._v($t("foy52","外扣","lang"))]):a("span",[t._v("-")])]}}],null,!1,3168514291)}),a("el-table-column",{attrs:{label:$t("f0nsn3","手续费","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatNumMoney")(e.row.adapayFee/100)))])]}}],null,!1,496711055)})]:t._e(),a("el-table-column",{attrs:{label:$t("axtnf04","分账金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatNumMoney")(e.row.divFee/100)))])]}}])}),a("el-table-column",{attrs:{label:$t("ar7uqh4","创建日期","lang"),prop:"timeStart"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatTimestamp")(e.row.timeStart)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row.tradeId)}}},[t._v($t("gcika4"," 查看 ","lang"))])]}}])})],2),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-sizes":[10,20,30],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total_count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)],1)],1)},[],!1,null,"7eaa2598",null).exports}}]);