"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1822],{71822:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});a(18111),a(61701);var i=a(81125);const[l,n]=(0,i.mN)({formItems:[{component:"imagepicker",componentProps:{placeholder:$t("ij5d2","标题","lang")},fieldName:"image_url",label:$t("c8ctvu4","封面图片","lang"),value:"",rules:[{required:!0,message:$t("w0ym817","请选择封面图片","lang")}]},{component:"Input",componentProps:{placeholder:$t("ij5d2","标题","lang")},fieldName:"title",formItemClass:"w-2/5",label:$t("dbic8a4","文章标题","lang"),value:"",rules:[{required:!0,message:$t("k7koml7","请输入文章标题","lang")}]},{component:"Select",componentProps:{placeholder:$t("2ensyc5","请选择分类","lang"),options:[]},fieldName:"category_id",formItemClass:"w-2/5",label:$t("dbefxq4","文章分类","lang"),value:"",rules:[{required:!0,validator:(e,t,a)=>{t||a(new Error($t("x4089x7","请选择文章分类","lang"))),a()}}]},{component:({h:e,value:t,onInput:a})=>e("SpRichText",{attrs:{value:t},on:{change:e=>{a(e)}}}),fieldName:"content",label:$t("dbe6dp4","文章内容","lang"),value:"",rules:[{required:!0,message:$t("k7ouh67","请输入文章内容","lang")}]}]});var o={components:{Form:l},data(){return{}},async mounted(){if(this.$route.query.id){const e=await this.$api.article.getArticleInfo(this.$route.query.id);n.setFieldsValue({title:e.title,category_id:e.category_id,content:e.content,image_url:e.image_url})}const e=await this.$api.article.getArticleCategoryList({category_type:"general"});n.setFieldComponentProps("category_id",{options:e.map(e=>({label:e.category_name,value:e.category_id}))})},methods:{async onHandleSubmit(){await n.validate();const e=await n.getFieldsValue();this.$route.query.id?(await this.$api.article.updateArticle(this.$route.query.id,{title:e.title,category_id:e.category_id,content:e.content,image_url:e.image_url}),this.$message.success($t("axgh776","修改文章成功","lang"))):(await this.$api.article.createArticle({title:e.title,category_id:e.category_id,content:e.content,image_url:e.image_url}),this.$message.success($t("t3nsp96","添加文章成功","lang"))),setTimeout(()=>{this.$parent.onActivated(),this.$router.go(-1)},70)}}},r=(0,a(81656).A)(o,function(){var e=this._self._c;return e("SpPage",{attrs:{title:$t("e7za4e4","添加文章","lang")}},[e("Form",{on:{submit:this.onHandleSubmit}})],1)},[],!1,null,"f992ed98",null).exports}}]);