"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[997],{20997:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(33318),r=a(22541),i=a(95093),s=a.n(i),c={name:"",data(){const e=this.$createElement;return{formQuery:{distributor_id:"",merchant_id:"",statement_status:"",cycleTime:[]},id:"",defaultTime:["00:00:00","23:59:59"],pickerOptions:n.Dv,merchantLoading:!1,merchantList:[],setting:(0,r.createSetting)({actions:[{name:$t("g3ge2","导出","lang"),key:"action",type:"button",slot:"header",buttonType:"primary is-plain",action:{handler:async e=>{const t=JSON.parse(JSON.stringify(this.formQuery));t.cycleTime.length>0&&(t.start_time=s()(t.cycleTime[0]).unix(),t.end_time=s()(t.cycleTime[1]).unix(),delete t.cycleTime),await this.$api.financial.exportDetialData({statement_id:this.id,start_time:t.start_time,end_time:t.end_time}),this.$message.success($t("by5dal4","导出成功","lang"))}}}],columns:[{name:$t("kuwys3","订单号","lang"),key:"order_id",width:160},{name:$t("gwn72","店铺","lang"),key:"distributor_name",width:160},{name:$t("8du79d7","订单实付（¥）","lang"),key:"total_fee",render:(e,{row:t})=>e("span",{},t.total_fee/100)},{name:$t("cwnwg35","运费（¥）","lang"),key:"freight_fee",width:100,render:(e,{row:t})=>e("span",{},t.freight_fee/100)},{name:$t("xnuzvj6","同城配（¥）","lang"),key:"intra_city_freight_fee",width:100,render:(e,{row:t})=>e("span",{},t.intra_city_freight_fee/100)},{name:$t("cvf9i67","退款金额（¥）","lang"),key:"refund_fee",render:(e,{row:t})=>e("span",{},t.refund_fee/100)},{name:$t("91qscc7","结算金额（¥）","lang"),key:"statement_fee",render:(e,{row:t})=>e("span",{},t.statement_fee/100)},{name:$t("ar84e54","创建时间","lang"),key:"alert_required_message",width:160,formatter:(t,a)=>e("div",[e("div",[s()(1e3*a.created).format("YYYY-MM-DD HH:mm:ss")])])},{name:$t("d3h9kv4","支付方式","lang"),key:"statement_status",render:(e,{row:t})=>e("span",{},this.getPayment(t.pay_channel,t.pay_type))}]})}},created(){this.id=this.$route.query.id},methods:{onSearch(){this.$refs.finder.refresh(!0)},beforeSearch(e){const t=JSON.parse(JSON.stringify(this.formQuery));return t.cycleTime.length>0&&(t.start_time=s()(t.cycleTime[0]).unix(),t.end_time=s()(t.cycleTime[1]).unix(),delete t.cycleTime),{...e,...t}},afterSearch(e){const{total_statement_fee_done:t,total_statement_fee_ready:a}=e.data.data.count;this.feeDone=t,this.feeReady=a},getPayment(e,t){return e?n.CV[e]:n.CV[t]},remoteMerchantList:async function(e){this.merchantLoading=!0;const t=await this.$api.marketing.getMerchantsList({pageSize:10,page:1});return this.merchantLoading=!1,t}}},m=(0,a(81656).A)(c,function(){var e=this,t=e._self._c;return t("div",[t("SpFilterForm",{attrs:{model:e.formQuery},on:{onSearch:e.onSearch,onReset:e.onSearch}},[t("SpFilterFormItem",{attrs:{prop:"cycleTime",label:$t("lpkhnn5","创建时间:","lang"),size:"max"}},[t("el-date-picker",{attrs:{clearable:"",type:"datetimerange",align:"right",format:"yyyy-MM-dd HH:mm:ss","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","default-time":e.defaultTime,"picker-options":e.pickerOptions},model:{value:e.formQuery.cycleTime,callback:function(t){e.$set(e.formQuery,"cycleTime",t)},expression:"formQuery.cycleTime"}})],1)],1),t("SpFinder",{ref:"finder",attrs:{"no-selection":"",setting:e.setting,hooks:{beforeSearch:e.beforeSearch},url:`/statement/detail/${e.id}`}})],1)},[],!1,null,"002a9cc6",null).exports}}]);