"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6020],{16020:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});a(44114);var r=a(94644),o=a(95093),s=a.n(o),l={name:"",data(){return{formQuery:{name:"",mobile:"",approve_status:"-1"},stateList:[{title:$t("en402","全部","lang"),value:"-1"},{title:$t("efsql3","待审批","lang"),value:"0"}],setting:(0,r.createSetting)({actions:[{name:$t("ibpi2","查看","lang"),key:"detail",type:"button",buttonType:"text",action:{handler:([e])=>{const{path:t}=this.$route;this.$router.push({path:`${t.split("/approve")[0]}/detail/${e.apply_id}`})}}},{name:$t("g4jc2","审批","lang"),key:"apply",type:"button",buttonType:"text",visible:e=>"0"==e.approve_status,action:{handler:async([e])=>{this.resloveForm.apply_id=e.apply_id,this.resloveDialog=!0}}}],columns:[{name:$t("fljx2","团长","lang"),key:"chief_name"},{name:$t("ewbd43","手机号","lang"),key:"chief_mobile"},{name:$t("bz15hf4","审批状态","lang"),key:"approve_status",render:(e,{row:t})=>e("span",{},this.getApproveStatus(t.approve_status))},{name:$t("fd5ujm4","申请时间","lang"),key:"created_at",render:(e,{row:t})=>e("span",{},s()(1e3*t.created_at).format("YYYY-MM-DD HH:mm:ss"))}]}),resloveDialog:!1,resloveForm:{apply_id:"",approve_status:1,refuse_reason:""},resloveFormList:[{label:$t("dvwoy3","审批:","lang"),key:"approve_status",type:"radio",options:[{label:1,name:$t("ettv2","同意","lang")},{label:2,name:$t("budzk3","不同意","lang")}],onChange:e=>{this.resloveFormList[1].isShow=2==e}},{label:$t("ng42cy5","拒绝原因:","lang"),key:"refuse_reason",type:"input",placeholder:$t("kjdze37","请输入拒绝原因","lang"),isShow:!1,validator:(e,t,a)=>{2!=this.resloveForm.approve_status||t?a():a(new Error($t("adohlc4","不能为空","lang")))}}]}},created(){},methods:{onSearch(){this.$refs.finder.refresh(!0)},beforeSearch(e){const t=JSON.parse(JSON.stringify(this.formQuery));return"-1"==t.approve_status&&delete t.approve_status,{...e,...t}},afterSearch(){},async onResloveSubmit(){const{apply_id:e,approve_status:t,refuse_reason:a}=this.resloveForm;await this.$api.community.approveChief(e,{approve_status:t,refuse_reason:a}),this.resloveDialog=!1,this.$refs.finder.refresh(!0)},getApproveStatus(e){return"0"==e?$t("fk50h3","未审核","lang"):"1"==e?$t("e7j1l3","已审核","lang"):"2"==e?$t("e8vjx3","已拒绝","lang"):void 0}}},n=(0,a(81656).A)(l,function(){var e=this,t=e._self._c;return t("SpPage",[-1===e.$route.path.indexOf("detail")?t("div",[t("SpFilterForm",{attrs:{model:e.formQuery},on:{onSearch:e.onSearch,onReset:e.onSearch}},[t("SpFilterFormItem",{attrs:{prop:"name",label:$t("3sckir5","团长姓名:","lang")}},[t("el-input",{attrs:{placeholder:$t("ly8xk07","请输入团长姓名","lang")},model:{value:e.formQuery.name,callback:function(t){e.$set(e.formQuery,"name",t)},expression:"formQuery.name"}})],1),t("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("cttsc24","手机号:","lang")}},[t("el-input",{attrs:{placeholder:$t("tus14y8","请输入团长手机号","lang")},model:{value:e.formQuery.mobile,callback:function(t){e.$set(e.formQuery,"mobile",t)},expression:"formQuery.mobile"}})],1)],1),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.onSearch},model:{value:e.formQuery.approve_status,callback:function(t){e.$set(e.formQuery,"approve_status",t)},expression:"formQuery.approve_status"}},[e._l(e.stateList,function(e){return t("el-tab-pane",{key:e.value,attrs:{label:e.title,name:e.value}})}),t("SpFinder",{ref:"finder",attrs:{"no-selection":"",setting:e.setting,hooks:{beforeSearch:e.beforeSearch,afterSearch:e.afterSearch},url:"/community/chief/apply/list"}})],2),t("SpDialog",{ref:"resloveDialogRef",attrs:{title:`${$t("g4jc2","审批","lang")}`,form:e.resloveForm,"form-list":e.resloveFormList},on:{onSubmit:e.onResloveSubmit},model:{value:e.resloveDialog,callback:function(t){e.resloveDialog=t},expression:"resloveDialog"}})],1):e._e()])},[],!1,null,"45c31939",null).exports}}]);