"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2983],{22983:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var i=a(95353),s=a(79296),n={mixins:[a(77825).v8],provide(){return{refresh:this.fetchList}},data(){const t={wxapp_id:void 0};return{initialParams:t,params:{...t},wxaList:[],loading:!1,imgDialog:!1,isGetImage:!1,imgIndex:0,brand_name:"",show_sideBar:!1,page:{pageIndex:1,pageSize:10,total:0}}},mounted(){this.getWxaList(),this.fetchList()},methods:{onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},getParams(){return{...this.params}},async fetchList(){if(!this.params.wxapp_id)return!1;this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.getParams()};const{list:i,total_count:s}=await this.$api.promotions.getLiverooms(a);this.tableList=i,this.page.total=Number(s),this.loading=!1},getWxaList(){(0,s.getWxaAuthList)().then(t=>{this.wxaList=t.data.data.list})}},computed:{...(0,i.L8)(["wheight"])}},r=n,o=(0,a(81656).A)(r,function(){var t=this,e=t._self._c;return e("SpPage",{staticClass:"zyk_video"},[-1===t.$route.path.indexOf("editor")?[t.VERSION_SHUYUN()?t._e():e("SpPlatformTip"),e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"wxapp_id",label:$t("ofzein5","针对人群:","lang")}},[e("el-select",{attrs:{placeholder:$t("3jwuw46","请选择小程序","lang")},model:{value:t.params.wxapp_id,callback:function(e){t.$set(t.params,"wxapp_id",e)},expression:"params.wxapp_id"}},t._l(t.wxaList,function(t,a){return e("el-option",{key:a,attrs:{label:t.nick_name,value:t.authorizer_appid}})}),1)],1)],1),e("el-card",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableList,border:"","element-loading-text":$t("go5gpa5","数据加载中","lang"),"default-sort":{prop:"bind_date",order:"descending"}}},[e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{to:{path:t.matchRoutePath("editor"),query:{roomid:a.row.roomid,wxapp_id:t.params.wxapp_id}}}},[t._v($t("57d56d6"," 视频回放 ","lang"))])]}}],null,!1,3838636057)}),e("el-table-column",{attrs:{label:$t("isirbw5","直播间图片","lang"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.share_img?e("img",{attrs:{src:t.row.share_img,width:"display:block;width:100px"}}):e("img",{attrs:{src:"https://fakeimg.pl/50x50/EFEFEF/CCC/?text=brand&font=lobster"}})]}}],null,!1,3152107127)}),e("el-table-column",{attrs:{prop:"name",label:$t("isj7tu5","直播间名称","lang")}}),e("el-table-column",{attrs:{label:$t("ffddiv4","直播时间","lang"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datetime")(e.row.start_time,"YYYY-MM-DD HH:mm:ss"))+" - "+t._s(t._f("datetime")(e.row.end_time,"YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,3601064850)})],1)],1),t.page.total>t.page.pageSize?e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.page.total,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1):t._e()]:t._e(),e("router-view")],2)},[],!1,null,"90322148",null).exports}}]);