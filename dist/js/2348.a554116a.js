"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2348],{82348:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var s=[function(){var e=this._self._c;return e("div",{staticClass:"form-block-head clearfix"},[e("div",{staticClass:"block-head-hd"},[this._v($t("srckdx6","商品管理分类","lang"))])])},function(){var e=this._self._c;return e("div",{staticClass:"form-block-head clearfix"},[e("div",{staticClass:"block-head-hd"},[this._v($t("u3rc9u9","PC关键词搜索引擎","lang"))])])},function(){var e=this._self._c;return e("div",{staticClass:"form-block-head clearfix"},[e("div",{staticClass:"block-head-hd"},[this._v($t("bejmaw4","图文详情","lang"))])])}],i=(a(44114),a(18111),a(22489),a(20116),a(7588),a(61701),a(18306),a(5748)),l=a(42017),r=a(43224),o=a(87378),n=[function(){var e=this._self._c;return e("div",{staticClass:"form-block-head clearfix"},[e("div",{staticClass:"block-head-hd"},[this._v($t("blh1h04","基础信息","lang"))])])}],c=(a(13579),a(18979)),u=a.n(c),m=a(432),p=a.n(m),d=a(9146),_=a(71866),g=a(27671),h={name:"CmBaseForm",components:{imgPicker:o.default,videoPicker:d.default,Treeselect:u(),draggable:p()},props:["value","isCross"],data(){return{templatesList:[],brandList:[],categoryList:[],loading:!0,regions:g,picsDialog:!1,isGetPics:!1,multiple:!1,picsCurrent:-1,dragIssuesOptions:{animation:300,forceFallback:!1,scroll:!0,handle:".icon-arrows-alt",draggable:".goodspic"}}},computed:{isAllCheck(){const{pics_create_qrcode:e}=this.value;return!e.some(e=>!e)}},created(){this.fetch()},methods:{async fetch(){const e=(await(0,_.getShippingTemplatesList)({page:1,pageSize:99})).data.data.list;e.length>0?this.templatesList=e:this.$message({type:"error",message:$t("l83xib8","请先添加运费模板","lang")});const t=await(0,i.getCategory)({is_show:!1});this.categoryList=t.data.data,this.getBrandList(),this.loading=!1},async getBrandList(e=""){const t=await(0,i.getGoodsAttr)({page:1,pageSize:1e3,attribute_type:"brand",attribute_name:e});this.brandList=t.data.data.list.map(({attribute_id:e,attribute_name:t})=>({attribute_name:t,attribute_id:e}))},removePicsImg(e){this.value.pics.splice(e,1),this.value.pics_create_qrcode.splice(e,1)},pickVideo({media_id:e,url:t}){this.value.itemVideo={media_id:e,url:t}},deleteVideo(){this.value.itemVideo.media_id="",this.value.itemVideo.url=""},pickPics(e){if(this.value.pics.length+e.length>=10)return this.$message.error($t("evzlzz9","最多上传9张图片!","lang")),!1;0!=e.length&&e.forEach(e=>{this.value.pics.push(e.url),this.value.pics_create_qrcode.push(!1)}),this.picsDialog=!1},closePicsDialog(){this.picsDialog=!1},handleAllSelect(e){const{pics_create_qrcode:t}=this.value;this.value.pics_create_qrcode=t.map(t=>e)},handlePicsChange:function(){this.picsDialog=!0,this.isGetPics=!0,this.multiple=!0},dragEnd(e){const{oldIndex:t,newIndex:a}=e,{pics_create_qrcode:s}=this.form,i=s[t];s[t]=s[a],s[a]=i}}},v=a(81656),b=(0,v.A)(h,function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-baseform"},[e._m(0),t("div",{staticClass:"form-block-body"},[t("el-form",{attrs:{model:e.value,"label-position":"right","label-width":"80px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("b44fe44","商品标题","lang"),required:""}},[t("el-input",{attrs:{maxlength:100,placeholder:""},model:{value:e.value.itemName,callback:function(t){e.$set(e.value,"itemName",t)},expression:"value.itemName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("cl7a83","副标题","lang")}},[t("el-input",{attrs:{maxlength:30,placeholder:""},model:{value:e.value.brief,callback:function(t){e.$set(e.value,"brief",t)},expression:"value.brief"}})],1)],1),"merchant"!==e.$store.getters.login_type?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("iq77af4","运费模板","lang"),required:""}},[t("el-select",{staticClass:"width-full",attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:e.value.templatesId,callback:function(t){e.$set(e.value,"templatesId",t)},expression:"value.templatesId"}},e._l(e.templatesList,function(e){return t("el-option",{key:e.template_id,attrs:{label:e.name,value:e.template_id}})}),1)],1)],1):e._e()],1),t("el-row",{attrs:{gutter:20}},["merchant"!==e.$store.getters.login_type?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("f1kb2","品牌","lang"),required:""}},[t("el-select",{staticClass:"width-full",attrs:{remote:"",filterable:"",clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:e.value.brandId,callback:function(t){e.$set(e.value,"brandId",t)},expression:"value.brandId"}},e._l(e.brandList,function(e){return t("el-option",{key:e.attribute_id,attrs:{label:e.attribute_name,value:e.attribute_id}})}),1)],1)],1):e._e(),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("i7rihy4","计量单位","lang")}},[t("el-input",{attrs:{maxlength:60,placeholder:""},model:{value:e.value.itemUnit,callback:function(t){e.$set(e.value,"itemUnit",t)},expression:"value.itemUnit"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("cyko7y4","排序编号","lang")}},[t("el-input",{attrs:{placeholder:""},model:{value:e.value.sort,callback:function(t){e.$set(e.value,"sort",t)},expression:"value.sort"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("duuh2","产地","lang")}},[t("el-cascader",{staticClass:"width-full",attrs:{placeholder:$t("ikx5hm4","选择地区","lang"),options:e.regions},model:{value:e.value.regionsId,callback:function(t){e.$set(e.value,"regionsId",t)},expression:"value.regionsId"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("b47agk4","商品税率","lang")}},[t("el-input",{attrs:{placeholder:""},model:{value:e.value.taxRate,callback:function(t){e.$set(e.value,"taxRate",t)},expression:"value.taxRate"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[e.isCross?e._e():t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("oig12","赠品","lang")}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.value.isGift,callback:function(t){e.$set(e.value,"isGift",t)},expression:"value.isGift"}}),t("span",[t("i",{staticClass:"el-alert__icon el-icon-info"}),e._v($t("w416ntb"," 开启后前台不可购买 ","lang"))])],1)],1)],1),t("el-row",{attrs:{gutter:20}},["merchant"!==e.$store.getters.login_type?t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:$t("vu157i6","商品销售分类","lang"),required:"","label-width":"120px"}},[t("treeselect",{attrs:{options:e.categoryList,"show-count":!0,multiple:!0,"disable-branch-nodes":!0,placeholder:$t("3326xq8","选择商品销售分类","lang")},model:{value:e.value.itemCategory,callback:function(t){e.$set(e.value,"itemCategory",t)},expression:"value.itemCategory"}})],1)],1):e._e()],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:$t("cwjdv3","商品图","lang"),required:""}},[t("div",{staticClass:"goodsimages-hd"},[t("span",{staticClass:"tipinfo"},[t("i",{staticClass:"el-alert__icon el-icon-info"}),e._v($t("yn7qiwc","选中以下图片生成分享码 ","lang"))]),t("el-checkbox",{attrs:{value:e.isAllCheck},on:{change:e.handleAllSelect}},[e._v($t("d66pr4"," 全选 ","lang"))])],1),t("div",{staticClass:"goodsimages-bd pics-box"},[t("ul",{staticClass:"goodspic-wrap"},[t("draggable",{staticClass:"goodspic-drag",staticStyle:{position:"'relative'"},attrs:{options:e.dragIssuesOptions},on:{update:e.dragEnd},model:{value:e.value.pics,callback:function(t){e.$set(e.value,"pics",t)},expression:"value.pics"}},[e._l(e.value.pics,function(a,s){return t("li",{key:s,staticClass:"goodspic"},[t("div",{staticClass:"img-wrap"},[t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a,fit:"contain"}}),t("div",{staticClass:"goodspic-mask"},[t("div",{staticClass:"iconfont icon-trash-alt",on:{click:function(t){return e.removePicsImg(s)}}}),t("div",{staticClass:"iconfont icon-arrows-alt"})])],1),t("el-checkbox",{staticClass:"checkBox",model:{value:e.value.pics_create_qrcode[s],callback:function(t){e.$set(e.value.pics_create_qrcode,s,t)},expression:"value.pics_create_qrcode[index]"}})],1)}),e.value.pics.length<9?t("li",{staticClass:"upload-box",on:{click:e.handlePicsChange}},[t("i",{staticClass:"iconfont icon-camera"})]):e._e()],2)],1)]),t("div",{staticClass:"goodsimages-ft frm-tips"},[t("p",[e._v($t("k4iqbb1w"," 1. 最多可上传9张图片，文件格式为bmp、png、jpeg、jpg或gif，大小不超过2M（建议尺寸：500px * 500px） ","lang"))]),t("p",[e._v($t("gfa09oc","2. 拖动图片进行可排序","lang"))]),t("p",[e._v($t("6vj7xaj","3. 相册图朋友圈分享是否生成小程序码","lang"))])])])],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:$t("a6lxsx4","上传视频","lang")}},[t("videoPicker",{staticClass:"video-picker",attrs:{data:e.value.itemVideo},on:{change:e.pickVideo}}),e.value.itemVideo.media_id?t("el-button",{attrs:{type:"text"},on:{click:e.deleteVideo}},[e._v($t("db22k4"," 删除 ","lang"))]):e._e()],1)],1)],1)],1),t("imgPicker",{attrs:{"dialog-visible":e.picsDialog,"sc-status":e.isGetPics,"is-most":e.multiple},on:{chooseImg:e.pickPics,closeImgDialog:e.closePicsDialog}})],1)])},n,!1,null,null,null).exports,f=[function(){var e=this._self._c;return e("div",{staticClass:"form-block-head clearfix"},[e("div",{staticClass:"block-head-hd"},[this._v($t("b40p614","商品参数","lang"))])])}],k={name:"CmGoodsParams",props:["value"],data(){return{}},created(){},methods:{paramsChange(e,t){if(e){const a=t.children.find(t=>t.value==e);t.attribute_value_name=a.label,this.$emit("input",this.value)}else t.attribute_value_name=""}}},y=(0,v.A)(k,function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-goodsparams"},[e._m(0),t("div",{staticClass:"form-block-body"},[t("el-row",{attrs:{gutter:20}},e._l(e.value,function(a,s){return t("el-col",{key:`params-data__${s}`,attrs:{span:8}},[t("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:a.label}},[a.children.length>0?t("el-select",{staticClass:"width-full",attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},on:{change:t=>{e.paramsChange(t,a)}},model:{value:a.attribute_value_id,callback:function(t){e.$set(a,"attribute_value_id",t)},expression:"item.attribute_value_id"}},e._l(a.children,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):t("el-input",{attrs:{maxlength:60,placeholder:""},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1)],1)],1)}),1)],1)])},f,!1,null,null,null).exports,w={name:"CmSkuForm",components:{imgBox:r.A,imgPicker:o.default},props:["value","isEditor","isPackageItems","pointAccess"],data(){return{picsDialog:!1,isGetPics:!1,multiple:!1,statusOption:this.VERSION_IN_PURCHASE()?[{title:$t("meu01y5","前台可销售","lang"),value:"onsale"},{title:$t("mfuo7t5","前台仅展示","lang"),value:"only_show"},{title:$t("a7er004","不可销售","lang"),value:"instock"}]:[{title:$t("meu01y5","前台可销售","lang"),value:"onsale"},{title:$t("mfygnl5","前台不展示","lang"),value:"offline_sale"},{title:$t("mfuo7t5","前台仅展示","lang"),value:"only_show"},{title:$t("a7er004","不可销售","lang"),value:"instock"}],bulkFilling:[{approve_status:"",store:"",item_bn:"",price:"",cost_price:"",market_price:"",barcode:"",point_num:"",weight:"",volume:""}],rowIndex:0}},created(){},methods:{specOnChange(){this.$emit("specOnChange")},renderRequire(e,{column:t}){return e("span",{class:"mark"},"*"+t.label)},handleSkuChange(e,t){this.$parent.getSkuItems()},handleSkuName(e,t,a){const{itemSpecList:s,specImages:i,specItems:l}=this.value,r=i.find(t=>t.spec_value_id==e.attribute_value_id);r&&(r.spec_custom_value_name=e.custom_attribute_value),s[t].attribute_values.list[a].custom_attribute_value=e.custom_attribute_value,l.forEach(t=>{t.item_spec.forEach(t=>{t.spec_value_id==e.attribute_value_id&&(t.spec_custom_value_name=e.custom_attribute_value)})}),this.$parent.getSkuItems()},handleImgRemove(e,t){this.value.specImages[e].item_image_url.splice(t,1)},pickPics(e){0!=e.length&&e.forEach(e=>{this.value.specImages[this.rowIndex].item_image_url.push(e.url)}),this.picsDialog=!1},closePicsDialog(){this.picsDialog=!1},handleSkuImg(e){this.picsDialog=!0,this.isGetPics=!0,this.multiple=!0,this.rowIndex=e},fillSku(){const e={...this.bulkFilling[0]};this.value.specItems.forEach(t=>{Object.assign(t,e)})},clearSku(e){this.$confirm($t("vaskp9d","确定清除当前规格的数据吗？","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{const t=this.value.specItems[e];Object.assign(t,{approve_status:"",store:"",item_bn:"",price:"",cost_price:"",market_price:"",barcode:"",point_num:"",weight:"",volume:""})})}}},$=(0,v.A)(w,function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-skuform"},[t("div",{staticClass:"form-block-head clearfix"},[t("div",{staticClass:"block-head-hd"},[e._v($t("b49wfn4","商品规格","lang"))]),t("div",{staticClass:"block-head-ft"},[e.isEditor?e._e():t("el-switch",{staticStyle:{"margin-left":"30px"},attrs:{"active-color":"#13ce66","inactive-color":"#efefef","active-text":$t("gc5xo94","统一规格","lang"),"inactive-text":$t("dpu363","多规格","lang")},on:{change:e.specOnChange},model:{value:e.value.nospec,callback:function(t){e.$set(e.value,"nospec",t)},expression:"value.nospec"}}),t("span",{staticStyle:{"margin-left":"30px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v($t("f95pccc","是否在商详页成列图片规格","lang"))]),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#efefef"},model:{value:e.value.isShowSpecimg,callback:function(t){e.$set(e.value,"isShowSpecimg",t)},expression:"value.isShowSpecimg"}})],1)],1)]),t("div",{staticClass:"form-block-body"},[e.value.nospec?[t("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("b45xmu4","商品状态","lang"),required:""}},[t("el-select",{staticClass:"width-full",attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:e.value.specData.approve_status,callback:function(t){e.$set(e.value.specData,"approve_status",t)},expression:"value.specData.approve_status"}},e._l(e.statusOption,function(e){return t("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})}),1)],1)],1),e.isPackageItems?e._e():t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("gl5x2","库存","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.store,callback:function(t){e.$set(e.value.specData,"store",t)},expression:"value.specData.store"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("b4ad634","商品货号","lang")}},[t("el-input",{attrs:{maxlength:60,placeholder:""},model:{value:e.value.specData.item_bn,callback:function(t){e.$set(e.value.specData,"item_bn",t)},expression:"value.specData.item_bn"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("pllu2","重量","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.weight,callback:function(t){e.$set(e.value.specData,"weight",t)},expression:"value.specData.weight"}},[t("template",{slot:"append"},[e._v(" kg ")])],2)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("e5to2","体积","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.volume,callback:function(t){e.$set(e.value.specData,"volume",t)},expression:"value.specData.volume"}},[t("template",{slot:"append"},[e._v(" m³ ")])],2)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("m8lft3","销售价","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.price,callback:function(t){e.$set(e.value.specData,"price",t)},expression:"value.specData.price"}},[t("template",{slot:"prepend"},[e._v(" ¥ ")])],2)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("ev2aj3","成本价","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.cost_price,callback:function(t){e.$set(e.value.specData,"cost_price",t)},expression:"value.specData.cost_price"}},[t("template",{slot:"prepend"},[e._v(" ¥ ")])],2)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("e6yyn3","市场价","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.market_price,callback:function(t){e.$set(e.value.specData,"market_price",t)},expression:"value.specData.market_price"}},[t("template",{slot:"prepend"},[e._v(" ¥ ")])],2)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("flzwg3","条形码","lang")}},[t("el-input",{attrs:{required:"",min:"0",placeholder:""},model:{value:e.value.specData.barcode,callback:function(t){e.$set(e.value.specData,"barcode",t)},expression:"value.specData.barcode"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},["items"==e.pointAccess?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("gyxnw64","获取积分","lang")}},[t("el-input",{attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.value.specData.point_num,callback:function(t){e.$set(e.value.specData,"point_num",t)},expression:"value.specData.point_num"}})],1)],1):e._e()],1)],1)]:[t("div",{staticClass:"sub-label"}),t("div",{staticClass:"sub-block"},e._l(e.value.skus,function(a,s){return t("div",{key:s,staticClass:"sku-row"},[t("div",{staticClass:"sku-name"},[e._v(e._s(a.sku_name)+"：")]),t("div",{staticClass:"sku-list"},[t("el-checkbox-group",{staticClass:"clearfix",on:{change:e.handleSkuChange},model:{value:a.checked_sku,callback:function(t){e.$set(a,"checked_sku",t)},expression:"item.checked_sku"}},e._l(a.sku_value,function(i,l){return t("div",{key:l,staticClass:"sku-select__checkitem"},[e._v(" "+e._s(i.custom_attribute_value)+" "),t("el-checkbox",{staticClass:"sku-checkbox",attrs:{label:i.attribute_value_id}},[-1!==a.checked_sku.indexOf(i.attribute_value_id)?t("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:function(t){return e.handleSkuName(i,s,l)}},model:{value:i.custom_attribute_value,callback:function(t){e.$set(i,"custom_attribute_value",t)},expression:"itemValue.custom_attribute_value"}}):t("span",[e._v(e._s(i.attribute_value))])],1),i.image_url?t("imgBox",{staticClass:"sku-image",attrs:{"img-url":i.image_url,width:"50",height:"50"}}):e._e()],1)}),0)],1)])}),0),t("div",{staticClass:"sub-label"},[e._v($t("jhowpb6","设置规格图片","lang"))]),t("div",{staticClass:"sub-block"},[t("el-table",{attrs:{data:e.value.specImages,"header-cell-style":{background:"#f5f7fa"}}},[t("el-table-column",{attrs:{label:$t("o06w2","规格","lang"),width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.spec_custom_value_name||t.row.spec_value_name)+" ")]}}])}),t("el-table-column",{attrs:{label:$t("kon463","规格图","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[e._l(a.row.item_image_url,function(s,i){return[t("imgBox",{key:i,staticStyle:{"margin-right":"10px"},attrs:{"img-url":s,inline:"","remove-btn":"",width:"50",height:"50"},on:{remove:function(t){return e.handleImgRemove(a.$index,i)}}})]}),a.row.item_image_url.length<5?t("imgBox",{attrs:{width:"50",height:"50",inline:""},on:{click:function(t){return e.handleSkuImg(a.$index)}}}):e._e()]}}])})],1)],1),t("div",{staticClass:"sub-label"},[e._v($t("i5uijs4","设置规格","lang"))]),t("div",{staticClass:"sub-block"},[t("el-table",{attrs:{data:e.bulkFilling,"show-header":!1,"highlight-current-row":!1}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.custom_attribute_value||t.row.item_spec)+" ")]}}])}),t("el-table-column",{attrs:{label:$t("kwj93","*状态","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{size:"mini",placeholder:$t("l72nr3","请选择","lang")},model:{value:a.row.approve_status,callback:function(t){e.$set(a.row,"approve_status",t)},expression:"scope.row.approve_status"}},e._l(e.statusOption,function(e){return t("el-option",{key:e.value,attrs:{label:e.title,size:"mini",value:e.value}})}),1)]}}])}),e.isPackageItems?e._e():t("el-table-column",{attrs:{label:$t("gl5x2","库存","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.store,callback:function(t){e.$set(a.row,"store",t)},expression:"scope.row.store"}})]}}],null,!1,3794582033)}),t("el-table-column",{attrs:{label:$t("ogxc2","货号","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.item_bn,callback:function(t){e.$set(a.row,"item_bn",t)},expression:"scope.row.item_bn"}})]}}])}),t("el-table-column",{attrs:{label:$t("pllu2","重量","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.weight,callback:function(t){e.$set(a.row,"weight",t)},expression:"scope.row.weight"}})]}}])}),t("el-table-column",{attrs:{label:$t("e5to2","体积","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.volume,callback:function(t){e.$set(a.row,"volume",t)},expression:"scope.row.volume"}})]}}])}),t("el-table-column",{attrs:{label:$t("m8lft3","销售价","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.price,callback:function(t){e.$set(a.row,"price",t)},expression:"scope.row.price"}})]}}])}),t("el-table-column",{attrs:{label:$t("ev2aj3","成本价","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.cost_price,callback:function(t){e.$set(a.row,"cost_price",t)},expression:"scope.row.cost_price"}})]}}])}),t("el-table-column",{attrs:{label:$t("e6yyn3","市场价","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.market_price,callback:function(t){e.$set(a.row,"market_price",t)},expression:"scope.row.market_price"}})]}}])}),t("el-table-column",{attrs:{label:$t("flzwg3","条形码","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.barcode,callback:function(t){e.$set(a.row,"barcode",t)},expression:"scope.row.barcode"}})]}}])}),"items"==e.pointAccess?t("el-table-column",{attrs:{label:$t("gyxnw64","获取积分","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.point_num,callback:function(t){e.$set(a.row,"point_num",t)},expression:"scope.row.point_num"}})]}}],null,!1,3406113291)}):e._e(),t("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fillSku}},[e._v($t("dwhdy4"," 填充 ","lang"))])]}}])})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.value.specItems,"header-cell-style":{background:"#f5f7fa"},"max-height":600}},[t("el-table-column",{attrs:{label:$t("kols43","规格值","lang"),prop:"spec_name"}}),t("el-table-column",{attrs:{label:$t("k1e32","状态","lang"),"render-header":e.renderRequire},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{size:"mini",placeholder:$t("l72nr3","请选择","lang")},model:{value:a.row.approve_status,callback:function(t){e.$set(a.row,"approve_status",t)},expression:"scope.row.approve_status"}},e._l(e.statusOption,function(e){return t("el-option",{key:e.value,attrs:{label:e.title,size:"mini",value:e.value}})}),1)]}}])}),e.isPackageItems?e._e():t("el-table-column",{attrs:{label:$t("gl5x2","库存","lang"),"render-header":e.renderRequire},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.store,callback:function(t){e.$set(a.row,"store",t)},expression:"scope.row.store"}})]}}],null,!1,3794582033)}),t("el-table-column",{attrs:{label:$t("ogxc2","货号","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.item_bn,callback:function(t){e.$set(a.row,"item_bn",t)},expression:"scope.row.item_bn"}})]}}])}),t("el-table-column",{attrs:{label:$t("ceieyh6","重量(kg)","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.weight,callback:function(t){e.$set(a.row,"weight",t)},expression:"scope.row.weight"}})]}}])}),t("el-table-column",{attrs:{label:$t("5816tz6","体积(m³)","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:60,size:"mini",placeholder:""},model:{value:a.row.volume,callback:function(t){e.$set(a.row,"volume",t)},expression:"scope.row.volume"}})]}}])}),t("el-table-column",{attrs:{label:$t("m8lft3","销售价","lang"),"render-header":e.renderRequire},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.price,callback:function(t){e.$set(a.row,"price",t)},expression:"scope.row.price"}})]}}])}),t("el-table-column",{attrs:{label:$t("ev2aj3","成本价","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.cost_price,callback:function(t){e.$set(a.row,"cost_price",t)},expression:"scope.row.cost_price"}})]}}])}),t("el-table-column",{attrs:{label:$t("e6yyn3","市场价","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.market_price,callback:function(t){e.$set(a.row,"market_price",t)},expression:"scope.row.market_price"}})]}}])}),t("el-table-column",{attrs:{label:$t("flzwg3","条形码","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{maxlength:6e3,size:"mini",placeholder:""},model:{value:a.row.barcode,callback:function(t){e.$set(a.row,"barcode",t)},expression:"scope.row.barcode"}})]}}])}),"items"==e.pointAccess?t("el-table-column",{attrs:{label:$t("gyxnw64","获取积分","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{type:"number",required:"",min:"0",size:"mini",placeholder:""},model:{value:a.row.point_num,callback:function(t){e.$set(a.row,"point_num",t)},expression:"scope.row.point_num"}})]}}],null,!1,3406113291)}):e._e(),t("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clearSku(a.$index)}}},[e._v($t("he57l4"," 清除 ","lang"))])]}}])})],1)],1)]],2),t("imgPicker",{attrs:{"dialog-visible":e.picsDialog,"sc-status":e.isGetPics,"is-most":e.multiple},on:{chooseImg:e.pickPics,closeImgDialog:e.closePicsDialog}})],1)},[],!1,null,null,null).exports,x=a(43868),C=a(5134),D={components:{richTextEditor:l.A,imgBox:r.A,imgPicker:o.default,CmBaseForm:b,CmGoodsParams:y,CmSkuForm:$},inject:["refresh"],beforeRouteLeave(e,t,a){this.isLeave?a():this.$confirm($t("lnrzlal","确定要离开当前页面，您将丢失已编辑的数据？","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(e=>{a()}).catch(()=>{a(!1)})},data(){return{itemVideo:{},select_regions_value:[],categoryNames:[],mainCateLoader:!1,submitLoading:!1,isEditor:!1,isLeave:!1,imgDialog:!1,isGetVideo:!1,thumbDialog:!1,isGetThumb:!1,cacheCreateDetail:{},mainCategory:[],selectedMainCategory:[],loading:!0,isCross:!1,origincountry:[],taxstrategy:[],baseData:{item_type:"normal",special_type:"normal",item_source:"mall",item_id:"",itemName:"",brief:"",templatesId:"",brandId:"",itemUnit:"",sort:1,regionsId:[],taxRate:0,isProfit:!0,isPackageItems:!1,isGift:!1,itemCategory:[],pics:[],pics_create_qrcode:[],itemVideo:{media_id:"",url:""},point_access:"order"},modules:[{icon:"iconfont icon-image",name:"uploader"}],paramsData:[],skuData:{nospec:!0,isShowSpecimg:!1,specData:{approve_status:"onsale",store:1,item_bn:"",weight:"",volume:"",price:"",cost_price:"",market_price:"",barcode:"",point_num:0},skus:[],specImages:[],specItems:[],itemSpecList:[]},tdk_info:{title:"",mate_description:"",mate_keywords:""},mode:"richText",content:[],intro:""}},computed:{},watch:{selectedMainCategory:{handler:function(e){e.length>0&&this.addUploaderEventListener()},immediate:!0}},async created(){const{itemId:e}=this.$route.params;this.isEditor=!!e,"godsphysicalkj"===this.$route.path.split("/")[2]?(this.isCross=!0,this.fetchOriginData()):this.isCross=!1,e?await this.fetchDetail():await this.getMainCategory(),this.fetch()},mounted:function(){this.addUploaderEventListener()},methods:{async fetch(){const e=await(0,C.getPointRule)();this.$set(this.baseData,"point_access",e.data.data.access)},addUploaderEventListener(){const e=this;setTimeout(()=>{const t=document.getElementsByClassName("icon iconfont icon-image")[0];t&&t.addEventListener("click",()=>{e.addImgPreview()})},0)},async fetchOriginData(){const e=await(0,x.getOrigincountry)({page:1,pageSize:99999});this.origincountry=e.data.data.list;const t=await(0,x.getTaxstrategyList)({page:1,pageSize:99999});this.taxstrategy=[...t.data.data.list,{id:"0",taxstrategy_name:$t("vkmw115","不使用策略","lang"),created:"0",updated:"0"}]},async fetchDetail(){const{itemId:e}=this.$route.params,{is_new:t}=this.$route.query,a=(await(0,i.getItemsDetail)(e)).data.data,s=(await(0,i.getCategoryInfo)(a.item_main_cat_id)).data.data;this.baseData={item_type:a.item_type,special_type:a.special_type,item_source:a.item_source,item_id:a.item_id,itemName:a.item_name,brief:a.brief,templatesId:a.templates_id.toString(),brandId:a.brand_id,itemUnit:a.item_unit,sort:a.sort,regionsId:a.regions_id,taxRate:a.tax_rate,isProfit:a.is_profit,isPackageItems:a.is_package_items,isGift:a.is_gift,itemCategory:a.item_category,pics:a.pics,pics_create_qrcode:a.pics_create_qrcode,item_main_cat_id:a.item_main_cat_id,distributor_id:a.distributor_id,itemVideo:{media_id:a.videos,url:a.videos_url||a.videos}},this.deepMainCategory(a.item_category_main[0],this.categoryNames),this.skuData={...this.skuData,nospec:a.nospec,specImages:a.spec_images,specItems:a.spec_items,itemSpecDesc:a.item_spec_desc,itemSpecList:s.goods_spec,isShowSpecimg:a.is_show_specimg},this.getGoodsParams(a.item_params_list,a.item_params),a.nospec?this.skuData.specData={approve_status:a.approve_status,store:a.store,item_bn:t?"":a.item_bn,weight:a.weight,volume:a.volume,price:a.price/100,cost_price:a.cost_price/100,market_price:a.market_price/100,barcode:a.barcode,point_num:a.point_num}:(a.spec_items.forEach(e=>{e.price=e.price/100,e.cost_price=e.cost_price/100,e.market_price=e.market_price/100}),this.getGoodsSkus(a.item_spec_list,a.spec_items),this.getSkuItems(),a.spec_items.forEach(e=>{e.sku_id=e.custom_spec_id,e.spec_name=e.custom_spec_name}),this.skuData.specItems=this.skuData.specItems.concat(a.spec_items),this.skuData.specItems=this.skuData.specItems.filter((e,t)=>this.skuData.specItems.indexOf(e)===t)),a.tdk_content&&(this.tdk_info=JSON.parse(a.tdk_content)),"object"==typeof a.intro?(this.mode="component",this.content=a.intro):this.intro=a.intro,this.loading=!1},deepMainCategory(e,t){t.push(e.category_name),e.children&&this.deepMainCategory(e.children[0],t)},getGoodsParams(e,t){e.forEach(e=>{const a={value:e.attribute_id,label:e.attribute_name,attribute_value_id:"",attribute_value_name:"",children:[]};e.attribute_values.list.forEach(({attribute_value_id:e,attribute_value:t})=>{a.children.push({value:e,label:t})});const s=t.find(t=>t.attribute_id==e.attribute_id);s&&(a.attribute_value_id=s.attribute_value_id,a.attribute_value_name=s.attribute_value_name),this.paramsData.push(a)})},getGoodsSkus(e,t){this.skuData.skus=[],e&&e.forEach(e=>{const a=[];e.attribute_values.list.forEach(e=>{a.push({image_url:e.image_url?e.image_url:"",attribute_value_id:e.attribute_value_id,custom_attribute_value:e.custom_attribute_value||e.attribute_value,attribute_value:e.attribute_value})});const s=[];t.forEach(t=>{t.item_spec.forEach(t=>{e.attribute_id==t.spec_id&&s.indexOf(t.spec_value_id)<0&&s.push(t.spec_value_id)})}),this.skuData.skus.push({sku_id:e.attribute_id,sku_name:e.attribute_name,is_image:e.is_image,sku_value:a,checked_sku:s})})},getSkuItems(){const{is_new:e}=this.$route.query,t=[];this.skuData.skus.forEach(e=>{t.push(e.checked_sku)});const a=this.cartesianProductOf(...t),s={};this.skuData.specItems.forEach(e=>{const t=e.item_spec.map(e=>e.spec_value_id);s[t.join("_")]=e}),this.skuData.specItems=a.map(t=>{const a=t.join("_"),i={sku_id:a,spec_name:this.getSpecName(t),is_default:!!s[a]&&s[a].is_default,approve_status:s[a]?s[a].approve_status:"",store:s[a]?s[a].store:"",item_bn:e?"":s[a]?s[a].item_bn:"",weight:s[a]?s[a].weight:"",volume:s[a]?s[a].volume:"",price:s[a]?s[a].price:"",cost_price:s[a]?s[a].cost_price:"",market_price:s[a]?s[a].market_price:"",barcode:s[a]?s[a].barcode:"",point_num:s[a]?s[a].point_num:"",item_spec:s[a]?s[a].item_spec:t.map((e,t)=>{let a,s;return this.skuData.skus.forEach(t=>{let i=t.sku_value.find(t=>t.attribute_value_id==e);i&&(s=i,a=t.sku_id)}),{spec_id:a,spec_value_id:e,spec_value_name:s.attribute_value,spec_custom_value_name:s.custom_attribute_value}})};return this.isEditor&&(i.item_id=s[a]?s[a].item_id:""),i});const i=JSON.parse(JSON.stringify(this.skuData.skus)).reverse().find(e=>"true"==e.is_image);if(i){const e=i.sku_value.filter(e=>i.checked_sku.indexOf(e.attribute_value_id)>-1);this.skuData.specImages=e.map(e=>{const t=this.skuData.specImages.find(t=>t.spec_value_id==e.attribute_value_id);return{spec_value_id:e.attribute_value_id,spec_custom_value_name:e.custom_attribute_value,spec_value_name:e.attribute_value,item_image_url:t?t.item_image_url:e.image_url?[e.image_url]:[]}})}},cartesianProductOf(){var e=Array.prototype.reduce.call(arguments,function(e,t){var a=[];return t.length>0?e.forEach(function(e){t.forEach(function(t){a.push(e.concat([t]))})}):e[0].length?a.push(...e):a=[[]],a},[[]]);return 1===e.length&&0===e[0].length&&(e=[]),e},getSpecName(e){const t=[];var a;return e.forEach((e,s)=>{this.skuData.itemSpecList.forEach(t=>{var s=t.attribute_values.list.find(t=>t.attribute_value_id==e);s&&(a=s)}),t.push(a.custom_attribute_value||a.attribute_value)}),t.join(" ")},async getMainCategory(){!function e(t,a){t.forEach(t=>{const s={label:t.category_name,value:t.category_id};t.children&&(s.children=[],e(t.children,s.children)),a.push(s)})}((await(0,i.getCategory)({is_main_category:!0})).data.data,this.mainCategory),this.mainCateLoader=!1},async handleCategoryChange(e){const t=(await(0,i.getCategoryInfo)(e[e.length-1])).data.data;this.cacheCreateDetail=t,this.getGoodsParams(t.goods_params,[]),this.skuData.itemSpecList=t.goods_spec,this.skuData.nospec||this.getGoodsSkus(t.goods_spec,[]),this.skuData.specImages=[],this.loading=!1},specOnChange(){this.getGoodsSkus(this.cacheCreateDetail.goods_spec,[])},clearSku(e){this.$confirm($t("vaskp9d","确定清除当前规格的数据吗？","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{this.$set(this.specItems,e,{...this.specItems[e],approve_status:"",store:"",item_bn:"",weight:"",volume:"",price:"",cost_price:"",market_price:"",barcode:"",point_num:""})})},handleCancel(){this.$router.go(-1)},async handleSave(){this.submitLoading=!0;const{item_id:e,itemName:t,itemCategory:a,sort:s,taxRate:l,brief:r,templatesId:o,brandId:n,itemUnit:c,regionsId:u,isProfit:m,isPackageItems:p,isGift:d,pics:_,pics_create_qrcode:g,itemVideo:h,item_type:v,special_type:b,item_source:f,item_main_cat_id:k,distributor_id:y}=this.baseData,{nospec:w,isShowSpecimg:$}=this.skuData,{is_new:x}=this.$route.query;let C={item_type:v,special_type:b,item_source:f,item_category:a,item_name:t,sort:s,tax_rate:l,brief:r,templates_id:o,brand_id:n,item_unit:c,regions_id:u,is_profit:m,is_package_items:p,is_gift:d,pics:_,pics_create_qrcode:g,videos:h.media_id,videos_url:h.url,distributor_id:y,nospec:w,is_show_specimg:$,item_params:this.paramsData.map(e=>({attribute_id:e.value,attribute_value_id:e.attribute_value_id,attribute_value_name:e.attribute_value_name})),tdk_content:JSON.stringify(this.tdk_info),item_main_cat_id:e?k:this.selectedMainCategory[this.selectedMainCategory.length-1]};if(w)C={...C,approve_status:this.skuData.specData.approve_status,store:this.skuData.specData.store,item_bn:this.skuData.specData.item_bn,weight:this.skuData.specData.weight,volume:this.skuData.specData.volume,price:this.skuData.specData.price,cost_price:this.skuData.specData.cost_price,market_price:this.skuData.specData.market_price,barcode:this.skuData.specData.barcode,point_num:this.skuData.specData.point_num};else{const t=this.skuData.specImages.map(e=>({spec_value_id:e.spec_value_id,item_spec:e.spec_custom_value_name||e.spec_value_name,item_image_url:e.item_image_url}));if(C={...C,spec_images:JSON.stringify(t)},e)C.spec_items=JSON.stringify(this.skuData.specItems.filter(e=>!!e.approve_status));else{const e=this.skuData.specItems.map((e,t)=>{const a=e.sku_id.split("_"),s=[];return a.forEach(e=>{let t,a;this.skuData.skus.forEach(s=>{let i=s.sku_value.find(t=>t.attribute_value_id==e);i&&(a=i,t=s)}),s.push({spec_id:t.sku_id,spec_value_id:e,spec_value_name:a.attribute_value,spec_custom_value_name:a.custom_attribute_value})}),{is_default:0==t,sku_id:e.sku_id,item_spec:s,approve_status:e.approve_status,store:e.store,item_bn:e.item_bn,weight:e.weight,volume:e.volume,price:e.price,cost_price:e.cost_price,market_price:e.market_price,barcode:e.barcode,point_num:e.point_num}});C.spec_items=JSON.stringify(e)}}if("component"===this.mode?C.intro=JSON.stringify(this.content):C.intro=this.intro,Number(C.store)<0)return this.$message({type:"error",message:$t("h9255s7","库存需为正整数","lang")}),void(this.submitLoading=!1);if(e&&!x)try{C={...C,item_id:e},await(0,i.updateItems)(e,C),this.$message({message:$t("deua4r4","更新成功","lang"),type:"success",duration:2e3,onClose:()=>{this.submitLoading=!1,this.refresh(),this.isLeave=!0,this.$router.go(-1)}})}catch(e){this.submitLoading=!1}else try{await(0,i.createItems)(C),this.$message({message:$t("e7ygyc4","添加成功","lang"),type:"success",duration:2e3,onClose:()=>{this.submitLoading=!1,this.refresh(),this.isLeave=!0,this.$router.go(-1)}})}catch(e){this.submitLoading=!1}},addImgPreview:function(){this.thumbDialog=!0,this.isGetThumb=!0},pickThumb:function(e){0!=e.length&&e.forEach(e=>{if(e&&""!==e.url){this.thumbDialog=!1;this.$refs.editor.$el.id;var t=this.$refs.editor,a=new Image;if(a.src=this.wximageurl+e.url,t.range){t.range.insertNode(a);var s=t.range.endContainer;"content"!==s.className?t.range.setStartAfter(s):t.range.setStart(t.range.endContainer,t.range.endOffset)}else t.$refs.content.appendChild(a),t.focus(),t.restoreSelection();this.intro=t.$refs.content.innerHTML}})},closeThumbDialog:function(){this.thumbDialog=!1}}},S=D,I=(0,v.A)(S,function(){var e=this,t=e._self._c;return t("div",[e.isEditor?[e._m(0),t("div",{staticClass:"form-block-body"},[t("el-breadcrumb",{staticClass:"inline",attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.categoryNames,function(a,s){return t("el-breadcrumb-item",{key:s},[e._v(" "+e._s(a)+" ")])}),1)],1)]:[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.mainCateLoader,expression:"mainCateLoader"}],attrs:{shadow:"never",header:$t("wge4je6","选择管理分类","lang")}},[t("el-cascader",{staticStyle:{width:"360px"},attrs:{options:e.mainCategory},on:{change:e.handleCategoryChange},model:{value:e.selectedMainCategory,callback:function(t){e.selectedMainCategory=t},expression:"selectedMainCategory"}})],1)],e.isEditor||e.selectedMainCategory.length>0?[t("CmBaseForm",{attrs:{"is-cross":e.isCross},model:{value:e.baseData,callback:function(t){e.baseData=t},expression:"baseData"}}),e.paramsData.length>0?t("CmGoodsParams",{attrs:{"point-access":e.baseData.point_access},model:{value:e.paramsData,callback:function(t){e.paramsData=t},expression:"paramsData"}}):e._e(),t("CmSkuForm",{attrs:{"is-editor":e.isEditor,"is-package-items":e.baseData.isPackageItems,"point-access":e.baseData.point_access},on:{specOnChange:e.specOnChange},model:{value:e.skuData,callback:function(t){e.skuData=t},expression:"skuData"}}),t("div",{staticClass:"comp-tdk"},[e._m(1),t("div",{staticClass:"form-block-body"},[t("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[t("el-form-item",{staticStyle:{"margin-bottom":"20px",width:"600px"},attrs:{label:$t("juxqri4","页面标题","lang")}},[t("el-input",{attrs:{type:"text"},model:{value:e.tdk_info.title,callback:function(t){e.$set(e.tdk_info,"title",t)},expression:"tdk_info.title"}})],1),t("el-form-item",{staticStyle:{"margin-bottom":"20px",width:"600px"},attrs:{label:$t("juwz7y4","页面描述","lang")}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.tdk_info.mate_description,callback:function(t){e.$set(e.tdk_info,"mate_description",t)},expression:"tdk_info.mate_description"}})],1),t("el-form-item",{staticStyle:{width:"600px"},attrs:{label:$t("cnmdu3","关键词","lang")}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.tdk_info.mate_keywords,callback:function(t){e.$set(e.tdk_info,"mate_keywords",t)},expression:"tdk_info.mate_keywords"}}),t("span",{staticClass:"tip"},[e._v($t("zfyhawe","关键词之间请用半角”,”分隔","lang"))])],1)],1)],1)]),t("div",{staticClass:"comp-desc"},[e._m(2),t("div",{staticClass:"form-block-body"},[t("el-radio-group",{staticClass:"mode-text",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[t("el-radio",{attrs:{label:"richText"}},[e._v($t("chrn675"," 富文本 ","lang"))]),t("el-radio",{attrs:{label:"component"}},[e._v($t("gt7ccj5"," 组件式 ","lang"))])],1),"richText"===e.mode?t("div",{staticClass:"richText-block"},[t("div",{staticClass:"ricktext-con"},[t("SpRichText",{model:{value:e.intro,callback:function(t){e.intro=t},expression:"intro"}})],1)]):t("div",{staticClass:"component-block"},[t("richTextEditor",{attrs:{data:e.content,control:["film","slider","heading","writing"]},on:{change:t=>{e.content=t}}})],1),t("imgPicker",{attrs:{"dialog-visible":e.thumbDialog,"sc-status":e.isGetThumb,"is-most":!0},on:{chooseImg:e.pickThumb,closeImgDialog:e.closeThumbDialog}})],1)]),t("div",{staticClass:"footer-container"},[t("el-button",{nativeOn:{click:function(t){return e.handleCancel.apply(null,arguments)}}},[e._v($t("dd4ni4"," 取消 ","lang"))]),!e.VERSION_STANDARD()||!e.IS_DISTRIBUTOR()&&e.VERSION_STANDARD()?t("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSave}},[e._v(" "+e._s(e.submitLoading?$t("f04493","提交中","lang"):$t("e32z2","保存","lang"))+" ")]):e._e()],1)]:e._e()],2)},s,!1,null,"2a2a9ed1",null),q=I.exports}}]);