"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7530],{27530:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});l(44114),l(18111),l(20116);var n=l(94644),m=l(22636),t=l(95093),u=l.n(t),r=l(33318),v=l(26456),o=l(81125),i=JSON.parse('[{"value":"AAE","name":"AAE全球专递"},{"value":"ANE","name":"安能物流"},{"value":"ARAMEX","name":"Aramex"},{"value":"AT","name":"奥地利邮政"},{"value":"BALUNZHI","name":"巴伦支快递"},{"value":"BEL","name":"比利时邮政"},{"value":"BFDF","name":"百福东方"},{"value":"BHT","name":"BHT快递"},{"value":"BKWL","name":"宝凯物流"},{"value":"BQXHM","name":"北青小红帽"},{"value":"BR","name":"巴西邮政"},{"value":"BSWL","name":"邦送物流"},{"value":"CA","name":"加拿大邮政"},{"value":"CITY100","name":"城市100"},{"value":"COE","name":"COE东方快递"},{"value":"CSCY","name":"长沙创一"},{"value":"D4PX","name":"递四方速递"},{"value":"DBL","name":"德邦"},{"value":"DHL_C","name":"DHL(中国件)"},{"value":"DHL_DE","name":"DHL(德国件)"},{"value":"DHL_GLB","name":"DHL全球"},{"value":"DHL_USA","name":"DHL(美国)"},{"value":"DK","name":"丹麦邮政"},{"value":"DPEX","name":"DPEX"},{"value":"DSWL","name":"D速物流"},{"value":"DTWL","name":"大田物流"},{"value":"EMS","name":"EMS国内"},{"value":"EMSGJ","name":"EMS国际"},{"value":"FAST","name":"快捷速递"},{"value":"FEDEX_C","name":"FedEx联邦快递(中国件)"},{"value":"FKD","name":"飞康达"},{"value":"FKRFD","name":"凡客如风达"},{"value":"GHX","name":"挂号信"},{"value":"GJYZ","name":"国际邮政包裹"},{"value":"GSD","name":"共速达"},{"value":"GTO","name":"国通快递"},{"value":"GTSD","name":"高铁速递"},{"value":"HHTT","name":"天天快递"},{"value":"HOAU","name":"天地华宇"},{"value":"hq568","name":"华强物流"},{"value":"HTKY","name":"百世汇通"},{"value":"HXLWL","name":"华夏龙物流"},{"value":"HYLSD","name":"好来运快递"},{"value":"IE","name":"爱尔兰邮政"},{"value":"JD","name":"京东快递"},{"value":"JGSD","name":"京广速递"},{"value":"JJKY","name":"佳吉快运"},{"value":"JLDT","name":"嘉里大通"},{"value":"JP","name":"日本邮政"},{"value":"JTKD","name":"捷特快递"},{"value":"JXD","name":"急先达"},{"value":"JYKD","name":"晋越快递"},{"value":"JYM","name":"加运美"},{"value":"JYWL","name":"佳怡物流"},{"value":"LB","name":"龙邦快递"},{"value":"LHTEX","name":"联昊通速递"},{"value":"NEDA","name":"能达速递"},{"value":"NL","name":"荷兰邮政"},{"value":"ONTRAC","name":"ONTRAC"},{"value":"QFKD","name":"全峰快递"},{"value":"QRT","name":"全日通快递"},{"value":"RDSE","name":"瑞典邮政"},{"value":"SDWL","name":"上大物流"},{"value":"SF","name":"顺丰快递"},{"value":"SFWL","name":"盛丰物流"},{"value":"SHWL","name":"盛辉物流"},{"value":"ST","name":"速通物流"},{"value":"STO","name":"申通快递"},{"value":"STSD","name":"三态速递"},{"value":"SURE","name":"速尔快递"},{"value":"SWCH","name":"瑞士邮政"},{"value":"TSSTO","name":"唐山申通"},{"value":"UAPEX","name":"全一快递"},{"value":"UC","name":"优速快递"},{"value":"UPS","name":"UPS"},{"value":"USPS","name":"USPS美国邮政"},{"value":"XFEX","name":"信丰快递"},{"value":"XYT","name":"希优特"},{"value":"YADEX","name":"源安达快递"},{"value":"YAMA","name":"日本大和运输(Yamato)"},{"value":"YD","name":"韵达快递"},{"value":"YFEX","name":"越丰物流"},{"value":"YFHEX","name":"原飞航物流"},{"value":"YJSD","name":"银捷速递"},{"value":"YTO","name":"圆通速递"},{"value":"YZPY","name":"邮政平邮/小包"},{"value":"ZENY","name":"增益快递"},{"value":"ZJS","name":"宅急送"},{"value":"ZMKM","name":"芝麻开门"},{"value":"ZTE","name":"众通快递"},{"value":"ZTKY","name":"中铁快运"},{"value":"ZTO","name":"中通速递"},{"value":"ZTWL","name":"中铁物流"},{"value":"ZY_AG","name":"爱购转运"},{"value":"ZY_AOZ","name":"爱欧洲"},{"value":"ZY_AUSE","name":"澳世速递"},{"value":"ZY_AXO","name":"AXO"},{"value":"ZY_AZY","name":"澳转运"},{"value":"ZY_BDA","name":"八达网"},{"value":"ZY_BEE","name":"蜜蜂速递"},{"value":"ZY_BH","name":"贝海速递"},{"value":"ZY_BL","name":"百利快递"},{"value":"ZY_BM","name":"斑马物流"},{"value":"ZY_BOZ","name":"败欧洲"},{"value":"ZY_BT","name":"百通物流"},{"value":"ZY_BYECO","name":"贝易购"},{"value":"ZY_CM","name":"策马转运"},{"value":"ZY_CTM","name":"赤兔马转运"},{"value":"ZY_CUL","name":"CUL中美速递"},{"value":"ZY_DGHT","name":"德国海淘之家"},{"value":"ZY_DYW","name":"德运网"},{"value":"ZY_EFS","name":"EFS POST"},{"value":"ZY_ETD","name":"ETD"},{"value":"ZY_FD","name":"飞碟快递"},{"value":"ZY_FG","name":"飞鸽快递"},{"value":"ZY_FLSD","name":"风雷速递"},{"value":"ZY_FX","name":"风行快递"},{"value":"ZY_FXSD","name":"风行速递"},{"value":"ZY_FY","name":"飞洋快递"},{"value":"ZY_HC","name":"皓晨快递"},{"value":"ZY_HCYD","name":"皓晨优递"},{"value":"ZY_HDB","name":"海带宝"},{"value":"ZY_HFMZ","name":"汇丰美中速递"},{"value":"ZY_HJSD","name":"豪杰速递"},{"value":"ZY_HMKD","name":"华美快递"},{"value":"ZY_HTAO","name":"360hitao转运"},{"value":"ZY_HTCUN","name":"海淘村"},{"value":"ZY_HTKE","name":"365海淘客"},{"value":"ZY_HTONG","name":"华通快运"},{"value":"ZY_HXKD","name":"海星桥快递"},{"value":"ZY_HXSY","name":"华兴速运"},{"value":"ZY_HYSD","name":"海悦速递"},{"value":"ZY_IHERB","name":"LogisticsY"},{"value":"ZY_JA","name":"君安快递"},{"value":"ZY_JD","name":"时代转运"},{"value":"ZY_JDKD","name":"骏达快递"},{"value":"ZY_JDZY","name":"骏达转运"},{"value":"ZY_JH","name":"久禾快递"},{"value":"ZY_JHT","name":"金海淘"},{"value":"ZY_LBZY","name":"联邦转运FedRoad"},{"value":"ZY_LPZ","name":"领跑者快递"},{"value":"ZY_LX","name":"龙象快递"},{"value":"ZY_LZWL","name":"量子物流"},{"value":"ZY_MBZY","name":"明邦转运"},{"value":"ZY_MGZY","name":"美国转运"},{"value":"ZY_MJ","name":"美嘉快递"},{"value":"ZY_MST","name":"美速通"},{"value":"ZY_MXZY","name":"美西转运"},{"value":"ZY_MZ","name":"168 美中快递"},{"value":"ZY_OEJ","name":"欧e捷"},{"value":"ZY_OZF","name":"欧洲疯"},{"value":"ZY_OZGO","name":"欧洲GO"},{"value":"ZY_QMT","name":"全美通"},{"value":"ZY_QQEX","name":"QQ-EX"},{"value":"ZY_RDGJ","name":"润东国际快线"},{"value":"ZY_RT","name":"瑞天快递"},{"value":"ZY_RTSD","name":"瑞天速递"},{"value":"ZY_SCS","name":"SCS国际物流"},{"value":"ZY_SDKD","name":"速达快递"},{"value":"ZY_SFZY","name":"四方转运"},{"value":"ZY_SOHO","name":"SOHO苏豪国际"},{"value":"ZY_SONIC","name":"Sonic-Ex速递"},{"value":"ZY_ST","name":"上腾快递"},{"value":"ZY_TCM","name":"通诚美中快递"},{"value":"ZY_TJ","name":"天际快递"},{"value":"ZY_TM","name":"天马转运"},{"value":"ZY_TN","name":"滕牛快递"},{"value":"ZY_TPAK","name":"TrakPak"},{"value":"ZY_TPY","name":"太平洋快递"},{"value":"ZY_TSZ","name":"唐三藏转运"},{"value":"ZY_TTHT","name":"天天海淘"},{"value":"ZY_TWC","name":"TWC转运世界"},{"value":"ZY_TX","name":"同心快递"},{"value":"ZY_TY","name":"天翼快递"},{"value":"ZY_TZH","name":"同舟快递"},{"value":"ZY_UCS","name":"UCS合众快递"},{"value":"ZY_WDCS","name":"文达国际DCS"},{"value":"ZY_XC","name":"星辰快递"},{"value":"ZY_XDKD","name":"迅达快递"},{"value":"ZY_XDSY","name":"信达速运"},{"value":"ZY_XF","name":"先锋快递"},{"value":"ZY_XGX","name":"新干线快递"},{"value":"ZY_XIYJ","name":"西邮寄"},{"value":"ZY_XJ","name":"信捷转运"},{"value":"ZY_YGKD","name":"优购快递"},{"value":"ZY_YJSD","name":"友家速递(UCS)"},{"value":"ZY_YPW","name":"云畔网"},{"value":"ZY_YQ","name":"云骑快递"},{"value":"ZY_YQWL","name":"一柒物流"},{"value":"ZY_YSSD","name":"优晟速递"},{"value":"ZY_YSW","name":"易送网"},{"value":"ZY_YTUSA","name":"运淘美国"},{"value":"ZY_ZCSD","name":"至诚速递"},{"value":"ZYWL","name":"中邮物流"}]');const s=(0,m.A)(r.W4,e=>({label:e.title,value:e.value})),[_,Y]=(0,o.mN)({formType:"searchForm",formItems:[{component:"Input",componentProps:{placeholder:$t("7ji3y96","请输入手机号","lang")},fieldName:"mobile",label:$t("ewbd43","手机号","lang"),value:""},{component:"Input",componentProps:{placeholder:$t("7djicl6","请输入订单号","lang")},fieldName:"order_id",label:$t("kuwys3","订单号","lang"),value:""},{component:"Select",componentProps:{placeholder:$t("x9oiau7","请选择订单类型","lang"),options:s},fieldName:"order_class",label:$t("hytrc34","订单类型","lang"),value:""},{component:"DateTimePicker",componentProps:{type:"datetimerange"},fieldName:"create_time",formItemClass:"col-span-2",label:$t("hyq9rl4","订单时间","lang"),value:[]}],inline:!0}),[d,Z]=(0,o.mN)({formItems:[{component:({h:e,value:a})=>e("div",[a]),label:$t("kuwys3","订单号","lang"),fieldName:"order_id"},{component:({h:e,value:a})=>e("el-table",{attrs:{border:!0,data:a},style:"width: 100%"},[e("el-table-column",{attrs:{prop:"item_name",label:$t("cwisy3","商品名","lang")}}),e("el-table-column",{attrs:{prop:"num",label:$t("i1y72","数量","lang"),width:"80"}}),e("el-table-column",{attrs:{label:$t("gsv02","总价","lang"),width:"160"},scopedSlots:{default:a=>e("span",[(0,v.$g)(a.row.total_fee)])}})]),label:$t("b400fd4","商品信息","lang"),fieldName:"goods_info",value:[]},{component:"Select",label:$t("cp0yj74","快递公司","lang"),fieldName:"delivery_corp",formItemClass:"w-1/3",componentProps:{filterable:!0,options:(0,m.A)(i,e=>({label:e.name,value:e.value}))},rules:[{required:!0,message:$t("whmqve7","请选择快递公司","lang")}]},{component:"Input",label:$t("cp1a894","快递单号","lang"),fieldName:"delivery_no",formItemClass:"w-1/3",rules:[{required:!0,message:$t("7zh3fd8","快递单号不能为空","lang")}]}],showDefaultActions:!1});var c={components:{SearchForm:_},data(){const e=this.$createElement;return{datapass_block:1,finderSetting:(0,n.createSetting)({actions:[{name:$t("obrz2","详情","lang"),key:"detail",type:"button",buttonType:"text",action:{handler:([e])=>{this.$router.push({path:`${this.$route.path}/detail`,query:{orderId:e.order_id,resource:"/mall/trade/normalorders"}})}}},{name:$t("f14m2","发货","lang"),key:"delivery",type:"button",buttonType:"text",action:{handler:async([a])=>{const{orderInfo:l}=await this.$api.trade.getOrderDetail(a.order_id),n=l?.items||[];await this.$dialog.open({title:$t("f14m2","发货","lang"),content:e(d,{attrs:{value:{order_id:a.order_id,goods_info:n}}}),confirmBefore:async()=>{try{await Z.validate()}catch(e){throw new Error($t("pr074a6","表单验证失败","lang"))}}});const m=await Z.getFieldsValue();await this.$api.trade.delivery({order_id:a.order_id,delivery_corp:m.delivery_corp,delivery_code:m.delivery_code}),this.$message.success($t("b5q8w54","发货成功","lang")),this.$refs.finder.refresh()}},visible:e=>"logistics"==e.receipt_type&&"PAYED"==e.order_status&&"DONE"!=e.delivery_status&&!(0,v.Hr)()}],columns:[{name:$t("kuwys3","订单号","lang"),key:"order_id",width:220,render(e,{row:a}){return e("div",[e("SpClipboard",{attrs:{content:a.order_id}}),e("div",{class:"flex items-center"},[e("SpIcon",{class:"mr-1",attrs:{name:"store"}}),a.distributor_name])])}},{name:$t("hyq9rl4","订单时间","lang"),key:"create_time",width:180,formatter:(e,a,l)=>`${u()(1e3*a.create_time).format("YYYY-MM-DD HH:mm:ss")}`},{name:$t("p8ix2","运费","lang"),key:"freight_fee",width:100,formatter:(e,a,l)=>`${(0,v.$g)(e||0)}`},{name:$t("hyxqu74","订单金额","lang"),key:"total_fee",width:120,formatter:(e,a,l)=>`${(0,v.$g)(e)}`},{name:$t("gpkj3j4","联系电话","lang"),key:"mobile",render(e,{row:a}){return e("SpClipboard",{attrs:{content:a.mobile}})}},{name:$t("hytrc34","订单类型","lang"),key:"order_class",formatter:e=>s.find(a=>a.value==e)?.label},{name:$t("hys56m4","订单状态","lang"),key:"order_status",render(e,{row:a}){return e("el-tag",{props:{type:r.rp[a.order_status_des]?.type,size:"mini"}},a.order_status_msg)}}]}),activeTab:"all",tabList:[{label:$t("avj59v4","全部订单","lang"),name:"all"},{label:$t("eepbv3","待发货","lang"),name:"notship"},{label:$t("e7hbq3","已完成","lang"),name:"done"},{label:$t("flmib3","未支付","lang"),name:"notpay"},{label:$t("e68dg3","已取消","lang"),name:"cancel"}]}},mounted(){},methods:{beforeSearch(e){const{create_time:a,mobile:l,order_id:n,order_class:m,distributor_id:t}=Y.getFieldsValue(),u={...e,order_type:"normal",order_class_exclude:"community",is_distribution:1};return a.length>0&&(u.time_start_begin=a[0].getTime()/1e3,u.time_start_end=a[1].getTime()/1e3),n&&(u.order_id=n),l&&(u.mobile=l),m&&(u.order_class=m),t&&(u.distributor_id=t),"all"!==this.activeTab&&(u.order_status=this.activeTab),u},afterSearch(e){return e.data.data.total_count=e.data.data.pager.count,e},handleTabChange(e){this.$refs.finder.refresh(!0)},handleSearch(e){this.$refs.finder.refresh(!0)}}},S=(0,l(81656).A)(c,function(){var e=this,a=e._self._c;return a("SpRouterView",[a("SpPage",[e.VERSION_SHUYUN()?e._e():a("SpPlatformTip",{attrs:{h5:"",app:"",alipay:""}}),a("SearchForm",{staticClass:"mb-4",on:{submit:e.handleSearch}}),a("SpTabs",{attrs:{"tab-list":e.tabList},on:{change:e.handleTabChange},model:{value:e.activeTab,callback:function(a){e.activeTab=a},expression:"activeTab"}}),a("SpFinder",{ref:"finder",attrs:{"no-selection":"",url:"/orders","row-actions-align":"left","row-actions-fixed-align":"left","row-actions-width":"120px","fixed-row-action":!0,setting:e.finderSetting,hooks:{beforeSearch:e.beforeSearch,afterSearch:e.afterSearch}}})],1)],1)},[],!1,null,null,null).exports}}]);