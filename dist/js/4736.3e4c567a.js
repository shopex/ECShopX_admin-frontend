"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4736],{54736:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});i(44114),i(18111),i(7588),i(61701);var a=i(95353),s=(i(58524),i(2038)),l=(i(89326),i(27671)),n=i(27810),o=i(15530),r=i(62109),d=i(41776),c=i(77825),u=(i(26456),i(59025),i(18306));var p={components:{shopDecoration:n.A,pcDecoration:o.A},mixins:[c.Ay,c.v8],data(){const t=this.$createElement,e={is_valid:void 0,distributor_id:void 0,tag_id:[],shop_code:void 0,open_divided:void 0},i=(t,e,i)=>{const{channel:a,wxapp:s,h5:l,app:n,aliapp:o,pc:r}=this.keFuForm;"multi"==a?s||l||n||o||r?i():i(new Error($t("2i9ss98","至少一项不能为空","lang"))):i()};return{formList:[{label:$t("osqm2","距离","lang"),key:"distance",component:()=>t("div",[t("el-input",{attrs:{placeholder:$t("v3cbygk","输入大于等于0的数字，为0则显示所有店铺","lang"),width:"60%"},model:{value:this.distanceForm.distance,callback:t=>{this.$set(this.distanceForm,"distance",t)}}})," km"]),validator:(t,e,i)=>{const{distance:a}=this.distanceForm;/^\d+$/.test(a)?i():i(new Error($t("2j8e0g5","请输入数字","lang")))}}],distributorIds:"",initialParams:e,params:{...e},origin:"",datapass_block:1,is_distributor:!1,dialogVisible:!1,current:"",isValidList:[{name:$t("en402","全部","lang"),value:void 0},{name:$t("eymx2","启用","lang"),value:"true"},{name:$t("lb5z2","禁用","lang"),value:"false"},{name:$t("gm6c2","废弃","lang"),value:"delete"}],isOpenList:[{name:$t("rekihi5","开启白名单","lang"),value:!0},{name:$t("uepk186","未开启白名单","lang"),value:!1}],changeStatus:!0,activeName:"first",total_count:0,distributor_self:"",detailDialog:!1,pcDialogVisible:!1,dialogTitle:"",loading:!1,form:{distributor_id:null,mobile:"",address:"",name:"",is_valid:"true",regions_id:[],regions:[],shop_id:0,contact:"",is_distributor:"true"},list:[],regions:l,codetype:"index",rowdata:{},downDistributorVal:!1,distributor_id:[],tag:{dialog:!1,editItem:[],list:[],form:{tag_ids:[],distributor_id:[]},currentTags:[],tags:[]},editValidDialog:!1,editValidData:{distributor_id:"",is_valid:""},setMeiQiaVisible:!1,setMeiQiaDialog:!1,meiqia_form:{distributor_id:"",meiqia_id:"",meiqia_token:""},setDistanceVisible:!1,setDistanceDialog:!1,distanceForm:{distance:""},setChinaumspayVisible:!1,chinaumspayForm:{distributor_id:0,mid:"",tid:"",enterpriseid:""},isOpen:!1,keFuDialog:!1,keFuForm:{distributor_id:"",channel:"single",common:"",wxapp:"",h5:"",app:"",aliapp:"",pc:""},keFuFormList:[{label:$t("cjrkmm4","店铺客服","lang"),key:"channel",type:"radio",options:[{label:"single",name:$t("qejm7n5","按店铺配置","lang")},{label:"multi",name:$t("w3crt88","按店铺和渠道配置","lang")}]},{label:$t("bzvs5u4","客服链接","lang"),key:"common",component:()=>t("div",{class:"kf-link"},[t("el-input",{attrs:{type:"text",placeholder:$t("lj78p17","请输入客服链接","lang")},model:{value:this.keFuForm.common,callback:t=>{this.$set(this.keFuForm,"common",t)}}}),t("div",{class:"tips"},[$t("s273bp1b","如实际运营中有多个客服人员接待咨询，建议配置为美洽客服组链接，在美洽客服组内添加客服人员坐席。","lang")])]),validator:(t,e,i)=>{const{channel:a,common:s}=this.keFuForm;"single"!=a||s?i():i(new Error($t("1vo2hq8","客服链接不能为空","lang")))},isShow:()=>"single"==this.keFuForm.channel},{label:$t("tf07z45","微信小程序","lang"),key:"wxapp",type:"input",validator:i,isShow:()=>"multi"==this.keFuForm.channel},{label:$t("1q1v94","H5商城","lang"),key:"h5",type:"input",validator:i,isShow:()=>"multi"==this.keFuForm.channel},{label:$t("11mccp5","APP商城","lang"),key:"app",type:"input",validator:i,isShow:()=>"multi"==this.keFuForm.channel},{label:$t("c57ypr6","支付宝小程序","lang"),key:"aliapp",type:"input",validator:i,isShow:()=>"multi"==this.keFuForm.channel},{label:$t("1sk7u95","PC网页版","lang"),key:"pc",type:"input",validator:i,isShow:()=>"multi"==this.keFuForm.channel}]}},computed:{...(0,a.L8)(["wheight"]),isLoginTypeNormal(){return"admin"===this.$store.getters.login_type||"admin"===this.$store.getters.login_type}},mounted(){this.origin=window.location.origin,"distributor"===u.A.getters.login_type&&(this.is_distributor=!0),this.fetchList(),this.getAllTagList(),(0,r.getSetting)().then(t=>{let e=t.data.data;this.isOpen="true"==e.is_open})},methods:{uploadHandleChange(t,e){this.$router.push({path:this.matchRoutePath("storeupload")})},renderHeader(t,{column:e}){return t("span",null,[e.label,t("el-tooltip",{props:{placement:"bottom",effect:"dark"}},[t("i",{class:"el-icon-warning-outline",style:"margin-left: 4px; cursor: pointer;"}),t("div",{slot:"content"},[$t("6rfikpo","自动同步：开启自动同步后，总部添加编辑商品会自动","lang"),t("br"),$t("y9obl0j","同步上架到店铺，保留开启前的商品状态。","lang"),t("br"),$t("nq80t5g","关闭同步后将保留已同步的商品数据","lang")])])])},onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},getParams(){let t={...this.params};return t.is_valid="0"===this.params.is_valid?void 0:this.params.is_valid,t},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let i={page:t,pageSize:e,...this.getParams()};const{list:a,total_count:s,distributor_self:l,datapass_block:n}=await this.$api.marketing.getDistributorList(i);this.tableList=a.map(t=>(this.VERSION_PLATFORM()?t.link=`${{VUE_APP_IS_SAAS:"false",VUE_APP_SYSTEM_NAME:"Shopex Admin",VUE_APP_PUBLIC_PATH:"/",VUE_APP_WXIMG_URL:"",VUE_APP_WXAUTHCALL_Url:"https://demo-ecshopx.ishopex.cn",VUE_APP_PREFIXES:"",VUE_APP_QIANKUN_ENTRY:"/newpc",VUE_APP_OSS_CDN:"false",VUE_APP_FREE:"false",VUE_APP_ALIOSS_REGION:"",VUE_APP_ALIOSS_ACCESS_KEY_ID:"",VUE_APP_ALIOSS_ACCESS_KEY_SECRET:"",VUE_APP_ALIOSS_BUCKET:"",VUE_APP_LOCAL_DELIVERY_DIRVER:"dada",VUE_APP_CHUZHI:"true",NODE_ENV:"production",VUE_APP_BASE_API:"https://ecshopx82.shopex123.com/api",VUE_APP_MAP_KEY:"PSPBZ-KQ5CW-CSGRF-ON2S4-K2HQJ-XEBQG",VUE_APP_DEFAULT_LANG:"zhcn",BASE_URL:"/",VUE_APP_PLATFORM:"yd"}.VUE_APP_H5_HOST}/subpages/store/index?id=${t.distributor_id}`:t.link=`${{VUE_APP_IS_SAAS:"false",VUE_APP_SYSTEM_NAME:"Shopex Admin",VUE_APP_PUBLIC_PATH:"/",VUE_APP_WXIMG_URL:"",VUE_APP_WXAUTHCALL_Url:"https://demo-ecshopx.ishopex.cn",VUE_APP_PREFIXES:"",VUE_APP_QIANKUN_ENTRY:"/newpc",VUE_APP_OSS_CDN:"false",VUE_APP_FREE:"false",VUE_APP_ALIOSS_REGION:"",VUE_APP_ALIOSS_ACCESS_KEY_ID:"",VUE_APP_ALIOSS_ACCESS_KEY_SECRET:"",VUE_APP_ALIOSS_BUCKET:"",VUE_APP_LOCAL_DELIVERY_DIRVER:"dada",VUE_APP_CHUZHI:"true",NODE_ENV:"production",VUE_APP_BASE_API:"https://ecshopx82.shopex123.com/api",VUE_APP_MAP_KEY:"PSPBZ-KQ5CW-CSGRF-ON2S4-K2HQJ-XEBQG",VUE_APP_DEFAULT_LANG:"zhcn",BASE_URL:"/",VUE_APP_PLATFORM:"yd"}.VUE_APP_H5_HOST}/${t.link}`,t)),this.page.total=s,this.distributor_self=l,this.datapass_block=n,this.loading=!1},async handleClose(t,{distributor_id:e},{tag_id:i}){const a={distributor_ids:[e],tag_ids:[i]};await(0,s.NewdeleteTag)(a);this.$message.success($t("azeh8z4","删除成功","lang")),this.fetchList()},linkTemplates(t){const{distributor_id:e,address:i,name:a,distribution_type:s}=t;this.$store.dispatch("setTemplateName","yykweishop"),this.$router.push({path:this.matchRoutePath("template"),query:{distributor_id:e,address:i,name:a,distribution_type:s}})},linkWxpaysettting(t){const{distributor_id:e,name:i}=t;this.$router.push({path:this.matchRoutePath("wxpaysetting"),query:{distributor_id:e,name:i}})},linkAlipaysettting(t){const{distributor_id:e,name:i}=t;this.$router.push({path:this.matchRoutePath("alipaysetting"),query:{distributor_id:e,name:i}})},dialogShow(t,e){this.current=t,"pc"===e?this.pcDialogVisible=!0:this.dialogVisible=!0},closeDialog(){this.dialogVisible=!1,this.pcDialogVisible=!1},dialogOpen(t=null){this.$router.push({path:this.matchRoutePath("editor")})},handleDistance(){this.distanceForm.distance=""},addDistributorSelf(){this.$router.push({path:this.matchRoutePath("editor"),query:{distributor_type:"distributor_self"}})},editDistributorSelf(){this.$router.push({path:this.matchRoutePath("editor"),query:{distributor_type:"distributor_self",distributor_id:this.distributor_self}})},downDistributorCode(t,e){let i={distributor_id:t.distributor_id,codetype:this.codetype};e&&(i.template_name=e),(0,s.getWxaDristributorCodeStream)(i).then(e=>{var i=document.createElement("a"),a=$t("efi463","微商城","lang");i.href=e.data.data.base64Image,e.data.data.tempname&&(a=e.data.data.tempname),i.download=a+t.name+".png",i.click()})},storeSearch(t){this.params.page=1,t&&t.shop_id,this.params.distributor_id=t.shop_id,this.fetchList()},RegionChangeSearch(t){var e,i,a=(e=t,i=this.regions,e.map(function(t,e,a){for(var s of i)if(s.value===t)return i=s.children,s;return null}));1==a.length?(this.params.province=a[0].label,this.params.city="",this.params.area=""):2==a.length?(this.params.province=a[0].label,this.params.city=a[1].label,this.params.area=""):3==a.length&&(this.params.province=a[0].label,this.params.city=a[1].label,this.params.area=a[2].label),this.params.page=1},downDistributor(t,e){this.codetype=e,this.rowdata=t,this.downDistributorVal=!0},defaultSwitchChange(t){var e={distributor_id:t.distributor_id};(0,s.setDefaultDistributor)(e).then(e=>{if(e.data.data.status)for(var i=this.list.length-1;i>=0;i--)this.list[i].distributor_id!=t.distributor_id&&(this.list[i].is_default=!1);this.onSearch()})},switchChangeAuditGoods(t,e){var i={distributor_id:e.distributor_id,is_audit_goods:e.is_audit_goods};(0,s.saveDistributor)(i).then(t=>{this.detailDialog=!1,this.fetchList(),this.$message({type:"success",message:$t("aghf564","保存成功","lang")})})},switchChangeAutoSyncGoods(t,e){var i={distributor_id:e.distributor_id,auto_sync_goods:e.auto_sync_goods};(0,s.saveDistributor)(i).then(t=>{this.detailDialog=!1,this.fetchList(),this.$message({type:"success",message:$t("aghf564","保存成功","lang")})})},switchChangeOpen(t,e){var i={distributor_id:e.distributor_id,is_open:e.is_open};(0,s.saveOpen)(i).then(t=>{this.detailDialog=!1,this.fetchList(),this.$message({type:"success",message:$t("aghf564","保存成功","lang")})})},switchChange(t,e){var i={distributor_id:e.distributor_id,is_ziti:e.is_ziti,is_delivery:e.is_delivery,is_open_salesman:e.is_open_salesman,open_divided:e.open_divided};(0,s.saveDistributor)(i).then(t=>{this.detailDialog=!1,this.fetchList(),this.$message({type:"success",message:$t("aghf564","保存成功","lang")})})},handleSelectionChange(t){let e=[];for(let i in t)e.push(t[i].distributor_id);this.distributor_id=e},getAllTagList(){(0,s.getTagList)({page:1,pageSize:500}).then(t=>{this.tag.list=t.data.data.list})},handleCancelLabelsDialog(){this.editValidDialog=!1,this.tag.dialog=!1,this.fetchList()},tagUpdate(t){this.tag.editItem=[t.itemName],this.tag.currentTags=t.tagList||[],this.tag.form.distributor_id=t.distributor_id,this.showTags()},addDistributorTag(){if(this.tag.currentTags=[],this.distributor_id.length){let t=[];this.tableList.forEach(e=>{this.distributor_id.forEach(i=>{e.distributor_id==i&&(t=[...t,...e.tagList])})}),t=Array.from(new Map(t.map(t=>[t.tag_id,t])).values()),this.tag.currentTags=t,this.showTags(),this.tag.form.distributor_id=this.distributor_id}else this.$message({type:"error",message:$t("e8vev5a","请选择至少一个店铺!","lang")})},showTags(){this.tag.tags=[...this.tag.list],this.tag.tags.forEach((t,e)=>{-1!=this.tag.currentTags.findIndex(e=>e.tag_id==t.tag_id)&&this.tag.tags.splice(e,1)}),this.tag.dialog=!0},tagRemove(t){this.tag.tags.unshift(this.tag.currentTags[t]),this.tag.currentTags.splice(t,1)},tagAdd(t,e){-1==this.tag.currentTags.findIndex(e=>e.tag_id==t.tag_id)&&(this.tag.currentTags.push(t),this.tag.tags.splice(e,1))},submitItemTag(){if(this.tag.form.tag_ids=[],this.tag.currentTags.forEach(t=>{this.tag.form.tag_ids.push(t.tag_id)}),this.tag.form.tag_ids.length<=0)return this.$message({type:"error",message:$t("wcfkwh7","请选择店铺标签","lang")}),!1;this.tag.dialog=!1,(0,s.distributorRelTags)(this.tag.form).then(t=>{t.data.data.status&&(this.$message({type:"success",message:$t("s3r6he5","打标签完成","lang")}),this.fetchList())})},tagSearchUserChange(){this.currentPage=1,this.getParams(),this.getItemsList(this.params),this.loading=!1},editValid(t){this.editValidDialog=!0,this.editValidData=t},editValidSubmit(t){let e="";"true"===t?e=$t("ooglkx7","确定开启店铺？","lang"):"false"===t?e=$t("ewlbb1b","禁用后该店铺的订单将无法处理，同时如首页装修有该店铺或店铺商品将无法正常购买，请确认是否禁用？","lang"):"delete"===t&&(e=$t("f8man1n","废弃后该店铺的订单将无法处理，同时如首页装修有该店铺或店铺商品将无法正常购买，且该店铺废弃后不可找回，请确认是否废弃？","lang")),this.$confirm(e,$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{let t={distributor_id:this.editValidData.distributor_id,is_valid:this.editValidData.is_valid};(0,s.saveDistributor)(t).then(t=>{this.detailDialog=!1,this.fetchList(),this.$message({type:"success",message:$t("e5it93","已修改","lang")}),this.editValidDialog=!1})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},async showSettingMeiQia(t){this.keFuForm.distributor_id=t,this.keFuDialog=!0;const{channel:e,meiqia_url:{aliapp:i,app:a,common:s,h5:l,pc:n,wxapp:o}}=await this.$api.im.getDistributorMeiQia(t);this.keFuForm={...this.keFuForm,channel:e,common:s,wxapp:o,h5:l,app:a,aliapp:i,pc:n}},async onKeFuFormSubmit(){const{channel:t,common:e,wxapp:i,h5:a,app:s,aliapp:l,pc:n}=this.keFuForm,o={channel:t,common:e,wxapp:i,h5:a,app:s,aliapp:l,pc:n};await this.$api.im.setDistributorMeiQia(this.keFuForm.distributor_id,o),this.keFuDialog=!1,this.$message.success($t("aghf564","保存成功","lang"))},showSettingDistance(t){this.setDistanceVisible=!0;let e=this;e.distributorIds=t,e.distanceForm.distance=0,t&&(0,s.getDistance)({distributor_id:t}).then(t=>{e.distanceForm.distance=t.data.data.distance})},handleDistanceCancel(){this.setDistanceVisible=!1,this.distanceForm.distance=""},handleSubmitDistance(){let t={distance:this.distanceForm.distance,distributor_id:this.distributorIds};(0,s.setDistance)(t).then(t=>{this.$message({type:"success",message:$t("cx7dr74","提交成功","lang")}),this.handleDistanceCancel()})},showSettingChinaumspay(t){this.setChinaumspayVisible=!0;let e=this,i={pay_type:"chinaumspay",distributor_id:t};(0,d.getPaymentSetting)(i).then(t=>{e.chinaumspayForm=t.data.data,e.chinaumspayForm.distributor_id=i.distributor_id})},handleChinaumspayCancel(){this.setChinaumspayVisible=!1,this.chinaumspayForm.mid="",this.chinaumspayForm.tid=""},handleSubmitChinaumspay(){let t={pay_type:"chinaumspay",distributor_id:this.chinaumspayForm.distributor_id,mid:this.chinaumspayForm.mid,tid:this.chinaumspayForm.tid,enterpriseid:this.chinaumspayForm.enterpriseid};(0,d.setPaymentSetting)(t).then(t=>{this.$message({type:"success",message:$t("cx7dr74","提交成功","lang")}),this.handleChinaumspayCancel()})},handleSizeChange(t){this.params.page=1,this.params.pageSize=t,this.fetchList()},onCopy(){this.$notify.success({message:$t("bkv2mw4","复制成功","lang"),showClose:!0})}},beforeRouteUpdate(t,e,i){i(),-1===t.path.indexOf("editor")&&-1===t.path.indexOf("details")&&(this.fetchList(),this.getAllTagList())}},h=p,g=(0,i(81656).A)(h,function(){var t=this,e=t._self._c;return e("SpPage",[e("SpRouterView",[t.VERSION_SHUYUN()?t._e():e("SpPlatformTip",{attrs:{h5:"",app:"",alipay:""}}),t.IS_MERCHANT()?e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-alert",{attrs:{type:"info",title:"","show-icon":""}},[e("div",[t._v($t("ilfi0qp","可在设置-店铺管理员添加店铺端账号，登录地址 【 ","lang")+t._s(t.origin)+"/shopadmin/login 】")])])],1):t._e(),e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"distributor_id",label:$t("ek40n3","店铺:","lang")}},[e("SpSelectShop",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:t.params.distributor_id,callback:function(e){t.$set(t.params,"distributor_id",e)},expression:"params.distributor_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"distributor_id",label:$t("cjppd24","店铺号:","lang")}},[e("el-input",{attrs:{placeholder:$t("ekkk43","店铺号","lang")},model:{value:t.params.shop_code,callback:function(e){t.$set(t.params,"shop_code",e)},expression:"params.shop_code"}})],1),e("SpFilterFormItem",{attrs:{prop:"open_divided",label:$t("2toql86","开启白名单:","lang")}},[e("el-select",{attrs:{placeholder:$t("d8rhvq4","是否开启","lang")},model:{value:t.params.open_divided,callback:function(e){t.$set(t.params,"open_divided",e)},expression:"params.open_divided"}},t._l(t.isOpenList,function(t,i){return e("el-option",{key:i,attrs:{label:t.name,value:t.value}})}),1)],1),t.VERSION_PLATFORM()?e("SpFilterFormItem",{attrs:{prop:"tag_id",label:$t("ftjgj3","标签:","lang")}},[e("el-cascader",{attrs:{placeholder:$t("il08k74","选择标签","lang"),options:t.tag.list,props:{value:"tag_id",label:"tag_name"},clearable:""},model:{value:t.params.tag_id,callback:function(e){t.$set(t.params,"tag_id",e)},expression:"params.tag_id"}})],1):t._e(),e("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("kpy3ic5","联系手机:","lang")}},[e("el-input",{attrs:{placeholder:$t("la4hh6","联系人手机号","lang")},model:{value:t.params.mobile,callback:function(e){t.$set(t.params,"mobile",e)},expression:"params.mobile"}})],1),t.VERSION_STANDARD()?t._e():e("SpFilterFormItem",{attrs:{prop:"distribution_type",label:$t("xzx21z5","店铺类型:","lang")}},[e("el-select",{attrs:{clearable:"",placeholder:$t("sxk44z6","选择店铺类型","lang")},model:{value:t.params.distribution_type,callback:function(e){t.$set(t.params,"distribution_type",e)},expression:"params.distribution_type"}},[e("el-option",{attrs:{label:$t("epfj2","加盟","lang"),value:"1"}},[t._v($t("d8bz54"," 加盟 ","lang"))]),e("el-option",{attrs:{label:$t("mtmj2","自营","lang"),value:"0"}},[t._v($t("k7y054"," 自营 ","lang"))])],1)],1),t.VERSION_STANDARD()||"admin"!=t.$store.getters.login_type?t._e():e("SpFilterFormItem",{attrs:{prop:"merchant_name",label:$t("u0ravo5","所属商家:","lang")}},[e("el-input",{attrs:{placeholder:$t("cs285q4","所属商家","lang")},model:{value:t.params.merchant_name,callback:function(e){t.$set(t.params,"merchant_name",e)},expression:"params.merchant_name"}})],1)],1),e("div",{staticClass:"distributor-btn"},[t.IS_DISTRIBUTOR()?t._e():e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){return t.dialogOpen()}}},[t._v($t("tt95h46"," 添加店铺 ","lang"))]),t.VERSION_STANDARD()?e("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){return t.uploadHandleChange()}}},[t._v($t("ubnwyc6"," 导入店铺 ","lang"))]):t._e()],1),e("div",[!t.VERSION_PLATFORM()||t.is_distributor||t.IS_MERCHANT()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.addDistributorTag}},[t._v($t("dbv9925"," 打标签 ","lang"))]),t.IS_ADMIN()||t.IS_MERCHANT()?e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showSettingDistance("")}}},[t._v($t("a2kz26c"," 设置店铺默认可见范围 ","lang"))]):t._e(),t.IS_DISTRIBUTOR()||t.distributor_self?[t.IS_MERCHANT()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editDistributorSelf()}}},[t._v($t("pd2nh5b"," 编辑默认虚拟店信息 ","lang"))])]:e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addDistributorSelf()}}},[t._v($t("2itprab"," 新增默认虚拟店信息 ","lang"))])],2)]),e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.onSearch},model:{value:t.params.is_valid,callback:function(e){t.$set(t.params,"is_valid",e)},expression:"params.is_valid"}},t._l(t.isValidList,function(t,i){return e("el-tab-pane",{key:i,attrs:{label:t.name,name:t.value}})}),1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableList,border:"",width:"100%"},on:{"selection-change":t.handleSelectionChange}},[t.VERSION_PLATFORM()&&!t.is_distributor&&"merchant"!=t.$store.getters.login_type?e("el-table-column",{attrs:{type:"selection",align:"center",label:$t("emxt2","全选","lang")}}):t._e(),e("el-table-column",{attrs:{width:"50",prop:"distributor_id",label:"ID"}}),e("el-table-column",{attrs:{label:$t("gwn72","店铺","lang"),"min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"store-name"},[t._v(" "+t._s(i.row.name)+" ")]),i.row.store_address?e("div",{staticClass:"store-address"},[e("i",{staticClass:"el-icon-place"}),t._v(" "+t._s(i.row.store_address)+" ")]):t._e()]}}])}),e("el-table-column",{attrs:{width:"100",prop:"shop_code",label:$t("ekkk43","店铺号","lang")}}),t.VERSION_STANDARD()?e("el-table-column",{attrs:{width:"200",label:$t("s1ghjm6","自动同步商品","lang"),"render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(i){return"delete"!==i.row.is_valid?[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){return t.switchChangeAutoSyncGoods(i.$index,i.row)}},model:{value:i.row.auto_sync_goods,callback:function(e){t.$set(i.row,"auto_sync_goods",e)},expression:"scope.row.auto_sync_goods"}})]:void 0}}],null,!0)}):t._e(),e("el-table-column",{attrs:{width:"80",label:$t("d8xirh4","是否自提","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return"delete"!==i.row.is_valid?[i.row.lng||i.row.lat?e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){return t.switchChange(i.$index,i.row)}},model:{value:i.row.is_ziti,callback:function(e){t.$set(i.row,"is_ziti",e)},expression:"scope.row.is_ziti"}}):e("el-tooltip",{attrs:{effect:"dark",content:$t("9gkj518","请先设置店铺坐标","lang"),placement:"top-start"}},[e("el-switch",{attrs:{disabled:"","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:i.row.is_ziti,callback:function(e){t.$set(i.row,"is_ziti",e)},expression:"scope.row.is_ziti"}})],1)]:void 0}}],null,!0)}),e("el-table-column",{attrs:{width:"80",label:$t("cpc5jv4","快递配送","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return"delete"!==i.row.is_valid?[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){return t.switchChange(i.$index,i.row)}},model:{value:i.row.is_delivery,callback:function(e){t.$set(i.row,"is_delivery",e)},expression:"scope.row.is_delivery"}})]:void 0}}],null,!0)}),e("el-table-column",{attrs:{width:"100",label:$t("9mdraq5","商家自配送","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.is_self_delivery?$t("k6n1","是","lang"):$t("gme1","否","lang"))+" ")]}}])}),t.VERSION_STANDARD()&&"admin"==t.$store.getters.login_type?e("el-table-column",{attrs:{width:"100",label:$t("6nc6tl5","进店白名单","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return"delete"!==i.row.is_valid?[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){return t.switchChange(i.$index,i.row)}},model:{value:i.row.open_divided,callback:function(e){t.$set(i.row,"open_divided",e)},expression:"scope.row.open_divided"}})]:void 0}}],null,!0)}):t._e(),e("el-table-column",{attrs:{width:"100",label:$t("k1e32","状态","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return["delete"!==i.row.is_valid?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editValid(i.row)}}},["true"==i.row.is_valid?e("span",{staticClass:"green"},[e("el-button",{attrs:{type:"success",size:"mini",plain:""}},[t._v($t("eymx2","启用","lang")),e("i",{staticClass:"el-icon-edit"})])],1):e("span",{staticClass:"red"},[e("el-button",{attrs:{type:"danger",size:"mini",plain:""}},[t._v($t("lb5z2","禁用","lang")),e("i",{staticClass:"el-icon-edit"})])],1)]):e("span",{staticClass:"muted"},[e("el-button",{attrs:{type:"info",size:"mini",plain:""}},[t._v($t("gm6c2","废弃","lang"))])],1)]}}])}),t.VERSION_STANDARD()||"admin"!=t.$store.getters.login_type?t._e():e("el-table-column",{attrs:{label:$t("cjx2pf4","店铺类型","lang"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(i){return["1"==i.row.distribution_type?e("span",[t._v($t("epfj2","加盟","lang"))]):"0"==i.row.distribution_type?e("span",[t._v($t("mtmj2","自营","lang"))]):t._e()]}}],null,!1,3438539442)}),"admin"==t.$store.getters.login_type?e("el-table-column",{attrs:{width:"80",label:$t("d92ns34","是否默认","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return"delete"!==i.row.is_valid?[e("el-tooltip",{attrs:{effect:"dark",content:$t("xg1ax96","请先启用店铺","lang"),placement:"top-start"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc",disabled:!(!i.row.is_default&&"true"==i.row.is_valid)},on:{change:function(e){return t.defaultSwitchChange(i.row)}},model:{value:i.row.is_default,callback:function(e){t.$set(i.row,"is_default",e)},expression:"scope.row.is_default"}})],1)]:void 0}}],null,!0)}):t._e(),t.VERSION_PLATFORM()?e("el-table-column",{staticClass:"tab",attrs:{prop:"tagList",label:$t("idef2","标签","lang")},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(i.row.tagList,function(a){return e("el-tag",{key:a.index,staticStyle:{display:"inline-block","margin-right":"3px"},style:"color:"+a.font_color,attrs:{closable:"",color:a.tag_color,size:"mini"},on:{close:function(e){return t.handleClose(t.tag,i.row,a)}}},[t._v(" "+t._s(a.tag_name)+" ")])})}}],null,!1,4140447003)}):t._e(),t.VERSION_STANDARD()||"merchant"==t.$store.getters.login_type?t._e():e("el-table-column",{attrs:{label:$t("cs285q4","所属商家","lang"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.merchant_name||"-"))])]}}],null,!1,2014059705)}),e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text"}},["delete"!==i.row.is_valid&&"0"==t.datapass_block?e("router-link",{attrs:{to:{path:t.matchRoutePath("editor"),query:{distributor_id:i.row.distributor_id}}}},[t._v($t("juz394"," 编辑 ","lang"))]):t._e()],1),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.linkTemplates(i.row)}}},[t._v($t("ltzl586"," 店铺装修 ","lang"))]),e("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[e("div",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSettingMeiQia(i.row.distributor_id)}}},[t._v($t("eh5114"," 客服 ","lang"))]),t.VERSION_PLATFORM()?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downDistributor(i.row,"store")}}},[t._v($t("9rlfm47"," 下载店铺码 ","lang"))]):e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downDistributor(i.row,"index")}}},[t._v($t("9rlfm47"," 下载店铺码 ","lang"))]),e("el-button",{attrs:{type:"text"}},[e("router-link",{attrs:{to:{path:t.matchRoutePath("details"),query:{distributor_id:i.row.distributor_id}}}},[t._v($t("likox4"," 详情 ","lang"))])],1),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.link,expression:"scope.row.link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy-btn",attrs:{type:"text"}},[t._v($t("y3aazx8"," 复制店铺链接 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.linkWxpaysettting(i.row)}}},[t._v($t("snwp438"," 微信支付配置 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.linkAlipaysettting(i.row)}}},[t._v($t("f626tx7"," 支付宝配置 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSettingChinaumspay(i.row.distributor_id)}}},[t._v($t("8uv84ja"," 银联商务支付配置 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSettingDistance(i.row.distributor_id)}}},[t._v($t("mlnaq38"," 店铺范围配置 ","lang"))])],1),e("el-button",{staticClass:"!ml-1.5",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v($t("inra3"," 更多","lang")),e("i",{staticClass:"el-icon-arrow-down"})])],1)]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"","current-page":t.page.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1),e("el-dialog",{attrs:{title:$t("vi727o5","下载店铺码","lang"),visible:t.downDistributorVal,"close-on-click-modal":!1},on:{"update:visible":function(e){t.downDistributorVal=e}}},[e("el-row",[e("el-col",{attrs:{span:8}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downDistributorCode(t.rowdata,"yykweishop")}}},[t._v($t("7hn61p8"," 微商城小程序 ","lang"))])],1)],1)],1),e("el-dialog",{attrs:{visible:t.dialogVisible,width:"80%",title:$t("423axv6","编辑店铺首页","lang"),fullscreen:"","lock-scroll":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("shopDecoration",{attrs:{id:t.current},on:{saved:t.closeDialog}})],1),e("el-dialog",{attrs:{visible:t.pcDialogVisible,width:"80%",title:$t("541kkw8","编辑PC店铺首页","lang"),fullscreen:"","lock-scroll":""},on:{"update:visible":function(e){t.pcDialogVisible=e}}},[t.pcDialogVisible?e("pc-decoration",{attrs:{id:t.current,usage:"store"},on:{saved:t.closeDialog}}):t._e()],1),e("el-dialog",{staticClass:"right-dialog",attrs:{title:$t("2glagj6","为店铺打标签","lang"),visible:t.tag.dialog,"before-close":t.handleCancelLabelsDialog},on:{"update:visible":function(e){return t.$set(t.tag,"dialog",e)}}},[e("div",{staticClass:"tag-users view-flex view-flex-middle"},[e("i",{staticClass:"iconfont icon-user-circle1"}),e("div",{staticClass:"view-flex-item"},t._l(t.tag.editItem,function(i){return e("span",{key:i},[t._v(t._s(i)+"，")])}),0)]),e("div",{staticClass:"selected-tags view-flex"},[e("div",{staticClass:"label"},[t._v($t("rbsw8d6","已选中标签：","lang"))]),e("div",{staticClass:"view-flex-item"},t._l(t.tag.currentTags,function(i,a){return e("el-tag",{key:a,attrs:{closable:"",size:"small","disable-transitions":!1},on:{close:function(e){return t.tagRemove(a)}}},[t._v(" "+t._s(i.tag_name)+" ")])}),1)]),e("hr"),e("div",[e("div",{staticClass:"label"},[t._v($t("i528yl5","全部标签：","lang"))]),t._l(t.tag.tags,function(i,a){return e("el-tag",{key:a,staticClass:"tag-item",attrs:{size:"medium",color:"#ffffff","disable-transitions":!1},nativeOn:{click:function(e){return t.tagAdd(i,a)}}},[t._v(" "+t._s(i.tag_name)+" ")])})],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.tag.dialog=!1}}},[t._v($t("caoqm3","取 消","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitItemTag}},[t._v($t("hnjoo3","确 定","lang"))])],1)]),e("el-dialog",{attrs:{title:$t("aib9sm4","修改状态","lang"),width:"18%",visible:t.editValidDialog,"before-close":t.handleCancelLabelsDialog},on:{"update:visible":function(e){t.editValidDialog=e}}},[[e("el-radio-group",{on:{change:t.editValidSubmit},model:{value:t.editValidData.is_valid,callback:function(e){t.$set(t.editValidData,"is_valid",e)},expression:"editValidData.is_valid"}},[e("el-radio",{attrs:{label:"true"}},[t._v($t("dg9c74"," 启用 ","lang"))]),e("el-radio",{attrs:{label:"false"}},[t._v($t("ix1qx4"," 禁用 ","lang"))]),e("el-radio",{attrs:{label:"delete"}},[t._v($t("evj244"," 废弃 ","lang"))])],1)]],2),e("el-dialog",{attrs:{title:$t("aoy6az6","店铺范围配置","lang"),width:"35%",visible:t.setDistanceVisible,"before-close":t.handleDistanceCancel},on:{"update:visible":function(e){t.setDistanceVisible=e}}},[e("SpForm",{attrs:{"form-list":t.formList,submit:!0},on:{resetForm:t.handleDistanceCancel,onSubmit:t.handleSubmitDistance},model:{value:t.distanceForm,callback:function(e){t.distanceForm=e},expression:"distanceForm"}})],1),e("el-dialog",{attrs:{title:$t("judynx8","银联商务支付配置","lang"),width:"50%",visible:t.setChinaumspayVisible,"before-close":t.handleChinaumspayCancel},on:{"update:visible":function(e){t.setChinaumspayVisible=e}}},[[e("el-form",{ref:"chinaumspayForm",staticClass:"demo-ruleForm",attrs:{model:t.chinaumspayForm,"label-width":"90px"}},[e("el-form-item",{attrs:{label:$t("cyt7q3","商户号","lang")}},[e("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:$t("2jbrwj5","请输入内容","lang")},model:{value:t.chinaumspayForm.mid,callback:function(e){t.$set(t.chinaumspayForm,"mid",e)},expression:"chinaumspayForm.mid"}})],1),e("el-form-item",{attrs:{label:$t("j5vw03","终端号","lang")}},[e("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:$t("2jbrwj5","请输入内容","lang")},model:{value:t.chinaumspayForm.tid,callback:function(e){t.$set(t.chinaumspayForm,"tid",e)},expression:"chinaumspayForm.tid"}})],1),e("el-form-item",{attrs:{label:$t("z4ca275","企业用户号","lang")}},[e("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:$t("2jbrwj5","请输入内容","lang")},model:{value:t.chinaumspayForm.enterpriseid,callback:function(e){t.$set(t.chinaumspayForm,"enterpriseid",e)},expression:"chinaumspayForm.enterpriseid"}})],1)],1)],e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(e){return t.handleChinaumspayCancel.apply(null,arguments)}}},[t._v($t("dd4ni4"," 取消 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitChinaumspay}},[t._v($t("cp35x4"," 保存 ","lang"))])],1)],2),e("SpDialog",{ref:"kfRef",attrs:{title:$t("i5mntn4","设置客服","lang"),modal:!1,form:t.keFuForm,"form-list":t.keFuFormList},on:{onSubmit:t.onKeFuFormSubmit},model:{value:t.keFuDialog,callback:function(e){t.keFuDialog=e},expression:"keFuDialog"}})],1)],1)},[],!1,null,"e1e372be",null),m=g.exports}}]);