"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4805],{34805:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});a(44114),a(18111),a(22489),a(20116),a(61701);var i=a(95353),l=a(33318),s=a(26456),r=a(95093),n=a.n(r),o={data(){const e=this.$createElement;return{infoList:[{label:$t("vyu3bm5","下单时间:","lang"),field:"create_time",is_show:!0},{label:$t("b8wroa5","订单编号:","lang"),field:"order_id",is_show:!0},{label:$t("b99wcp5","订单类型:","lang"),field:"order_class",is_show:!0},{label:$t("banz2c5","订单状态:","lang"),field:"order_status_msg",is_show:!0},{label:$t("w32o875","开票状态:","lang"),field:"is_invoiced",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("ik14vq5","配送类型:","lang"),field:"receiptTypeTxt",is_show:!0},{label:$t("ysrt335","会员昵称:","lang"),field:"username",is_show:!0},{label:$t("dvdfww6","会员手机号:","lang"),field:"mobile",is_show:!0},{label:$t("ypnv0i5","会员等级:","lang"),field:"memberGrade",is_show:!0},{label:$t("ytev735","会员折扣:","lang"),field:"memberDiscount",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("3yxhdc5","货币类型:","lang"),field:"fee_type",is_show:!0},{label:$t("r9iq2u7","购物赠送积分:","lang"),field:"bonus_points",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("6fkfch7","订单获取积分:","lang"),field:"get_points",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("uq2vn97","额外获取积分:","lang"),field:"extra_points",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("9p5lm35","积分抵扣:","lang"),field:"point_use",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("q5qsh35","用户身份:","lang"),field:"purchaseRole",is_show:!0},{label:$t("ppe0zh5","销售门店:","lang"),field:"sale_salesman_distributor_id",is_show:!0},{label:$t("ph4j3v5","销售导购:","lang"),field:"salesman_mobile",is_show:!0},{label:$t("djxsw3","姓名:","lang"),field:"employee_name",is_show:!0},{label:$t("u1qocd5","所属企业:","lang"),field:"enterprise_name",is_show:!0},{label:$t("7kd5ck5","来源店铺:","lang"),field:"distributor_name",is_show:!0}],payList:[{label:$t("yg395j5","交易单号:","lang"),field:"tradeId",is_show:!0},{label:$t("zj8px6","交易流水号:","lang"),field:"transactionId",is_show:!0},{label:$t("amw4mb5","商品总额:","lang"),field:"goodsPrice",is_show:!0},{label:$t("lqcc13","运费:","lang"),field:"freightFee",is_show:!0},{label:$t("yw9y305","会员优惠:","lang"),field:"memberDiscountPrice",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("w2adrg6","优惠券减免:","lang"),field:"couponDiscount",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("y3met76","优惠总金额:","lang"),field:"totalDiscount",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("eup49j7","积分抵扣金额:","lang"),field:"pointFee",is_show:!this.VERSION_IN_PURCHASE()},{label:$t("6crgjt6","应付总金额:","lang"),field:"totalPrice",is_show:!0},{label:$t("a3cpjn6","实付总金额:","lang"),field:"realPrice",is_show:!0},{label:$t("k6t2ud5","支付方式:","lang"),field:"payTypeTxt",is_show:!0},{label:$t("k4wfiy5","支付状态:","lang"),field:"tradeStateTxt",is_show:!0},{label:$t("yd1ssz5","交易时间:","lang"),field:"timeStart",is_show:!0},{label:$t("rr1jk17","交易结束时间:","lang"),field:"timeExpire",is_show:!0}],profitList:[{label:$t("y2ozol7","分润门店类型:","lang"),field:"profit_type"},{label:$t("cypuz76","分润总金额:","lang"),field:"profit_totalPrice"}],communityInfoList:[{label:$t("bopooa5","活动名称:","lang"),field:"community_activity_name",is_show:!0},{label:$t("u08zj55","所属团长:","lang"),field:"community_chief_name",is_show:!0},{label:$t("i9azie4","跟团号:","lang"),field:"community_activity_trade_no",is_show:!0}],interrogationInfoList:[{label:$t("l8jt0t6","用药人姓名:","lang"),field:"user_family_name",is_show:!0},{label:$t("4g4oi5","身份证号:","lang"),field:"user_family_id_card",is_show:!0},{label:$t("cttsc24","手机号:","lang"),field:"user_family_phone",is_show:!0},{label:$t("l9l1tj6","用药人年龄:","lang"),field:"user_family_age",is_show:!0},{label:$t("l9guqr6","用药人性别:","lang"),field:"user_family_gender",is_show:!0},{label:$t("xlv2rc5","与您关系:","lang"),field:"relationship",is_show:!0},{label:$t("126k8u8","用药人是否孕妇:","lang"),field:"is_pregnant_woman",is_show:!0},{label:$t("w1nn4u9","用药人是否哺乳期:","lang"),field:"is_lactation",is_show:!0},{label:$t("ugin8ea","是否使用过此类药物:","lang"),field:"before_ai_result_used_medicine",is_show:!0},{label:$t("8yatss9","是否有药物过敏史:","lang"),field:"is_before_ai_result_allergy_history",is_show:!0},{label:$t("63zkri7","药物过敏说明:","lang"),field:"before_ai_result_allergy_history",is_show:!0},{label:$t("1wnesxa","肝肾功能是否有异常:","lang"),field:"before_ai_result_body_abnormal",is_show:!0}],prescriptionInfoList:[{label:$t("5q4ox65","处方ID:","lang"),field:"prescription_id",is_show:!0},{label:$t("uxez9d8","互联网医院名称:","lang"),field:"hospital_name",is_show:!0},{label:$t("cy1h7h8","580门店ID:","lang"),field:"kuaizhen_store_id",is_show:!0},{label:$t("cl735x8","580门店名称:","lang"),field:"kuaizhen_store_name",is_show:!0},{label:$t("693jok5","处方编号:","lang"),field:"serial_no",is_show:!0},{label:$t("jg6myk7","医生签署时间:","lang"),field:"doctor_sign_time",is_show:!0},{label:$t("eg163h5","医生科室:","lang"),field:"doctor_office",is_show:!0},{label:$t("ey9jk55","医生ID:","lang"),field:"doctor_id",is_show:!0},{label:$t("th6qsd5","开方医生:","lang"),field:"doctor_name",is_show:!0},{label:$t("8etcn45","诊断标签:","lang"),field:"tags",is_show:!0},{label:$t("67ccai5","处方状态:","lang"),field:"prescription_in_status",is_show:!0},{label:$t("lpkhnn5","创建时间:","lang"),field:"prescription_created",is_show:!0},{label:$t("aftktl5","更改时间:","lang"),field:"prescription_updated",is_show:!0},{label:$t("djyqh3","备注:","lang"),field:"prescription_memo",is_show:!0},{label:$t("o44fc05","补充说明:","lang"),field:"prescription_remarks",is_show:!0},{label:$t("madw9p7","处方审核状态:","lang"),field:"audit_status",is_show:!0},{label:$t("gdknb85","审方时间:","lang"),field:"audit_time",is_show:!0},{label:$t("a02x908","审核不通过理由:","lang"),field:"audit_reason",is_show:!0},{label:$t("6zjdmu7","审方药师名称:","lang"),field:"audit_apothecary_name",is_show:!0},{label:$t("m7buqi6","问诊单ID:","lang"),field:"diagnosis_id",is_show:!0},{label:$t("uaq8ka9","药品用法用量说明:","lang"),field:"drug_rsp_list",type:"cycle",special:!0,is_show:!0},{label:$t("dxencl6","电子处方单:","lang"),field:"dst_file_path",is_show:!0,special:!0}],memberRemark:$t("dcy2914","暂无留言","lang"),merchantRemark:$t("dct3334","暂无备注","lang"),loading:!1,addressInfo:"",orderInfo:null,is_community:!1,communityExtra:[],deliveryData:[],expressDialog:!1,expressFormList:[{label:$t("cp0yj74","快递公司","lang"),key:"delivery_corp",placeholder:$t("whmqve7","请选择快递公司","lang"),type:"select",options:[],required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("evwh164","物流单号","lang"),key:"delivery_code",type:"input",placeholder:$t("s5y24m6","物流公司单号","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],goodCategoryMap:l.g5,expressForm:{orders_delivery_id:"",delivery_corp:"",delivery_code:""},deliverGoodsDialog:!1,deliverGoodsFormList:[{label:$t("b5urmu4","发货类型","lang"),key:"delivery_type",type:"radio",disabled:!1,options:[{label:"batch",name:$t("d5a74n4","整单发货","lang")},{label:"sep",name:$t("csx9py4","拆分发货","lang")}],onChange:e=>{this.deliverGoodsFormList[1].options[4].isShow="sep"==e}},{label:"",key:"items",type:"table",options:[{title:$t("cwisy3","商品名","lang"),key:"item_name"},{title:$t("i1y72","数量","lang"),key:"num",width:60},{title:$t("nbuukn5","已发货数量","lang"),key:"delivery_item_num",width:100},{title:$t("mapop37","总支付价（¥）","lang"),key:"price",width:120},{title:$t("b5r61h4","发货数量","lang"),key:"item_num",width:160,render:(t,a,i)=>t.num-t.delivery_item_num==0?$t("e7hbq3","已完成","lang"):e("el-input-number",{attrs:{size:"mini",min:1,max:t.num-t.delivery_item_num},class:"cel-input-num",model:{value:t.delivery_num,callback:e=>{this.$set(t,"delivery_num",e)}}}),isShow:!1}]},{label:$t("cp0yj74","快递公司","lang"),key:"delivery_corp",placeholder:$t("whmqve7","请选择快递公司","lang"),type:"select",options:[],required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("evwh164","物流单号","lang"),key:"delivery_code",type:"input",placeholder:$t("s5y24m6","物流公司单号","lang"),required:!0,message:$t("adohlc4","不能为空","lang")}],deliverGoodsForm:{order_id:"",delivery_type:"batch",delivery_corp:"",delivery_code:"",type:"",items:[]},btnActions:[],invoice:null,invoiceList:[{label:$t("in9vu3","类型:","lang"),field:"invoiceType",is_show:!0},{label:$t("w32o875","开票状态:","lang"),field:"is_invoiced",is_show:!0},{label:$t("bpi0v95","发票抬头:","lang"),field:"invoiceContent",is_show:!0}],invoiceListUnit:[{label:$t("in9vu3","类型:","lang"),field:"invoiceType",is_show:!0},{label:$t("w32o875","开票状态:","lang"),field:"is_invoiced",is_show:!0},{label:$t("puj1x15","公司名称:","lang"),field:"invoicedCompanyName",is_show:!0},{label:$t("i9vht3","税号:","lang"),field:"invoiceRegistrationNumber",is_show:!0},{label:$t("kxw2wo5","电话号码:","lang"),field:"invoicedCompanyPhone",is_show:!0},{label:$t("taz7f15","开户银行:","lang"),field:"invoicedBankName",is_show:!0},{label:$t("vyntv75","银行账号:","lang"),field:"invoicedBankAccount",is_show:!0},{label:$t("pu8ew25","公司地址:","lang"),field:"invoiceCompanyAddress",is_show:!0}],isBindOMS:!1,deliveryLog:[],relationshipMap:{1:$t("hzbi2","本人","lang"),2:$t("k0nr2","父母","lang"),3:$t("p5mx2","配偶","lang"),4:$t("g0tf2","子女","lang"),5:$t("eae82","其他","lang")},auditStatusMap:{1:$t("fk50h3","未审核","lang"),2:$t("c00pno4","审核通过","lang"),3:$t("glednn5","审核不通过","lang"),4:$t("ucz5ru5","不需要审方","lang")}}},computed:{...(0,i.L8)(["login_type"])},async created(){const{result:e}=await this.$api.trade.isBindOMS();this.isBindOMS=e},mounted(){const{orderId:e,resource:t,user_id:a}=this.$route.query;e&&(this.order_id=e),t&&(this.resource=t),a&&(this.user_id=a),this.$api.third.getDmcrmSetting().then(e=>{e?.is_open&&(this.infoList=this.infoList.map(e=>(e.label==$t("72xkfd6","订单获取积分","lang")&&(e.is_show=!1),e)))}),this.getDetail(),this.getLogisticsList()},methods:{getFiledValue(e){const{orderInfo:t}=this;if(t)return t[e]},async getDetail(){this.loading=!0;const{orderInfo:e,distributor:t,profit:a,tradeInfo:i}=await this.$api.trade.getOrderDetail(this.order_id),{username:r,vipgrade:o,gradeInfo:_}=await this.$api.member.getMember({user_id:e.user_id}),d=await this.$api.trade.getDeliveryLists({order_id:this.order_id}),{create_time:c,order_class:p,discount_info:m,receiver_name:u,receiver_mobile:f,receiver_state:g,receiver_city:h,receiver_district:v,receiver_address:b,receipt_type:y,distributor_id:$,orders_purchase_info:w,order_status:k,delivery_status:C,community_info:I,invoice:x,is_invoiced:S,ziti_info:D,prescription_data:F={},diagnosis_data:z={}}=e;let N,L,E,R,P,A,q,Y,j,G,M;null!=e.invoice&&(this.invoice=e.invoice,N=this.invoice.title,L=this.invoice.content,E=this.invoice.content,R=this.invoice.registration_number,P=this.invoice.company_address,A=this.invoice.company_phone,q=this.invoice.bankname,Y=this.invoice.bankaccount),I&&(j=I.activity_name,G=I.chief_name,M=I.activity_trade_no,I.extra_data&&(this.communityExtra=JSON.parse(I.extra_data)),this.is_community=!0);const H=l.W4.find(e=>e.value==p);let O="";"normal"==p&&"1"==e.type&&(O=`${$t("c271mb6","（跨境订单）","lang")}`);const V=l.as.find(e=>e.value==y);let U=$t("dioc8j4","普通快递","lang");V&&(U=V.title);let T="";T=o&&o.is_vip?o.grade_name:_?_.grade_name:$t("k4g1","无","lang");let B="";if(_&&_.privileges&&(B=100-_.privileges.discount+"%"),this.orderInfo={...e,create_time:c?n()(1e3*c).format("YYYY-MM-DD HH:mm:ss"):"",order_class:`${H?H.title:$t("bwafqg4","实体订单","lang")}${O}`,_order_class:e.order_class,is_invoiced:e.is_invoiced?$t("e872y3","已开票","lang"):$t("fkt1u3","未开票","lang"),receiptTypeTxt:U,username:r,community_activity_name:j,community_chief_name:G,community_activity_trade_no:M,memberGrade:T,memberDiscount:B,discount_info:m?m.filter(e=>e.discount_fee>0).map(e=>({...e,discount_fee:e.discount_fee/100})):[],profit_type:l.C_[a.profit_type],profit_totalPrice:a.total_fee?"¥"+a.total_fee/100:"￥0.00",...i,mobile:e.mobile,goodsPrice:"bargain"!=e.order_type?e.item_fee?`¥${(e.item_fee/100).toFixed(2)}`:"￥0.00":e.item_price?`¥${(e.item_price/100).toFixed(2)}`:"￥0.00",freightFee:e.freight_fee||e.freight_point_fee?`¥${(((e.freight_fee||0)+(e.freight_point_fee||0))/100).toFixed(2)}`:"￥0.00",memberDiscountPrice:e.member_discount?`-¥${(e.member_discount/100).toFixed(2)}`:"￥0.00",couponDiscount:e.coupon_discount?`-¥${(e.coupon_discount/100).toFixed(2)}`:"￥0.00",totalDiscount:e.discount_fee?`-¥${(e.discount_fee/100).toFixed(2)}`:"￥0.00",totalPrice:e.total_fee?`¥${(e.total_fee/100).toFixed(2)}`:"￥0.00",pointFee:e.point_fee?`¥${(e.point_fee/100).toFixed(2)}`:"￥0.00",realPrice:(()=>{let t="";return t="point"===i.payType||"NOTPAY"===i.tradeState?"￥0":e.total_fee?`¥${(e.total_fee/100).toFixed(2)}`:"￥0.00",t})(),payTypeTxt:i.payChannel?l.CV[i.payChannel]:l.CV[i.payType],tradeStateTxt:l.UP[i.tradeState],timeStart:i.timeStart?n()(1e3*i.timeStart).format("YYYY-MM-DD HH:mm:ss"):"",timeExpire:i.timeExpire?n()(1e3*i.timeExpire).format("YYYY-MM-DD HH:mm:ss"):"",invoiceType:"individual"==N?$t("dq6o2","个人","lang"):$t("dv7d2","企业","lang"),invoiceContent:L,invoicedCompanyName:E,invoiceRegistrationNumber:R,invoiceCompanyAddress:P,invoicedCompanyPhone:A,invoicedBankName:q,invoicedBankAccount:Y,purchaseRole:w?"employee"==w.type?$t("ev0t2","员工","lang"):$t("duft2","亲友","lang"):"",employee_name:w?w.employee_name:"",enterprise_name:w?w.enterprise_name:"",user_family_name:z.user_family_name,user_family_id_card:z.user_family_id_card,user_family_phone:z.user_family_phone,user_family_age:z.user_family_age,user_family_gender:1==z.user_family_gender?$t("n5j1","男","lang"):$t("ho31","女","lang"),relationship:this.relationshipMap[z.relationship],is_pregnant_woman:1==z.is_pregnant_woman?$t("k6n1","是","lang"):$t("gme1","否","lang"),is_lactation:1==z.is_lactation?$t("k6n1","是","lang"):$t("gme1","否","lang"),before_ai_result_used_medicine:1==z?.before_ai_data_list?.before_ai_result_used_medicine?$t("k6n1","是","lang"):$t("gme1","否","lang"),is_before_ai_result_allergy_history:z?.before_ai_data_list?.before_ai_result_allergy_history?$t("k6n1","是","lang"):$t("gme1","否","lang"),before_ai_result_allergy_history:z?.before_ai_data_list?.before_ai_result_allergy_history,before_ai_result_body_abnormal:1==z?.before_ai_data_list?.before_ai_result_body_abnormal?$t("k6n1","是","lang"):$t("gme1","否","lang"),prescription_id:F.id,hospital_name:F.hospital_name,kuaizhen_store_id:F.kuaizhen_store_id,kuaizhen_store_name:F.kuaizhen_store_name,doctor_sign_time:F.doctor_sign_time?n()(1e3*F.doctor_sign_time).format("YYYY-MM-DD HH:mm:ss"):"",doctor_office:F.doctor_office,doctor_id:F.doctor_id,doctor_name:F.doctor_name,tags:F.tags,prescription_in_status:1==F.status?$t("is6t2","正常","lang"):$t("gm6c2","废弃","lang"),prescription_created:F.created?n()(1e3*F.created).format("YYYY-MM-DD HH:mm:ss"):"",prescription_updated:F.updated?n()(1e3*F.updated).format("YYYY-MM-DD HH:mm:ss"):"",prescription_remarks:F.remarks,drug_rsp_list:F.drug_rsp_list,audit_status:this.auditStatusMap[F.audit_status],audit_reason:F.audit_reason,audit_apothecary_name:F.audit_apothecary_name,diagnosis_id:F.diagnosis_id,serial_no:F.serial_no,audit_time:F.audit_time?n()(1e3*F.audit_time).format("YYYY-MM-DD HH:mm:ss"):"",dst_file_path:F.dst_file_path,sale_salesman_distributor_id:e?.sale_salesman_distributor_info?.name,salesman_mobile:e?.salespersonInfo?.work_userid},this.deliveryLog=this.orderInfo?.app_info?.delivery_log,this.memberRemark=e.remark||$t("dcy2914","暂无留言","lang"),this.merchantRemark=e.distributor_remark||$t("dct3334","暂无备注","lang"),"excard"==e.order_class)this.addressInfo=`${t.province}${t.city}${t.area}${t.address}`;else if("shopadmin"==e.order_class)this.addressInfo=`${t.store_address}（${t.store_name}）`;else{const{province:e,city:a,area:i,address:l,name:s}=D||{};this.addressInfo=t.store_address&&"ziti"==y?`${e}${a}${i}${l}（${s}）`:"ziti"!=y?`${u} ${f} ${g}${h}${v}${b}`:"-- --"}this.deliveryData=d;const J="dada"==y,K="logistics"==y;let W=[];((0,s.bz)()||0==$||"distributor"==this.login_type)&&K&&!J&&"PAYED"==k&&"DONE"!=C&&"ziti"!=y&&"supplier"==this.login_type&&W.push({name:$t("f14m2","发货","lang"),key:"deliverGoods"}),this.btnActions=W,this.loading=!1},modifyExpress({orders_delivery_id:e}){this.expressForm.orders_delivery_id=e,this.expressDialog=!0},async expressSubmit(){const{orders_delivery_id:e,delivery_corp:t,delivery_code:a}=this.expressForm,i={delivery_corp:t,delivery_code:a};await this.$api.trade.editLogisticsList(e,i),this.expressDialog=!1,this.getDetail(),this.$message.success($t("ai8d7e4","修改成功","lang"))},async getLogisticsList(){const{list:e}=await this.$api.trade.getLogisticsList(),t=e.map(e=>({title:e.name,value:e.value}));this.expressFormList[0].options=t,this.deliverGoodsFormList[2].options=t},handleAction({key:e}){const{order_id:t,items:a,delivery_type:i,delivery_status:l}=this.orderInfo;if("deliverGoods"==e){if(this.isBindOMS&&this.IS_ADMIN())return this.$message.warning($t("tckdokb","请至OMS处理订单发货","lang"));this.$refs.deliverGoodsDialogRef.resetForm(),this.deliverGoodsForm.order_id=t,this.deliverGoodsForm.items=a.map(e=>({...e,price:e.price/100})),this.deliverGoodsForm.type=i,"PARTAIL"==l?(this.deliverGoodsForm.delivery_type="sep",this.deliverGoodsFormList[0].disabled=!0,this.deliverGoodsFormList[1].options[4].isShow=!0):(this.deliverGoodsFormList[0].disabled=!1,this.deliverGoodsFormList[1].options[4].isShow=!1),this.deliverGoodsDialog=!0}},async deliverGoodsSubmit(){const{order_id:e,delivery_type:t,delivery_corp:a,delivery_code:i,type:l,items:s}=this.deliverGoodsForm,r={order_id:e,delivery_type:t,delivery_corp:a,delivery_code:i,type:l};"sep"==t&&(r.sepInfo=JSON.stringify(s.filter(e=>e.delivery_num)));const{delivery_status:n}=await this.$api.trade.delivery(r);this.deliverGoodsDialog=!1,this.getDetail(),n&&"PENDING"!=n?this.$message.success($t("97ym6c5","发货成功!","lang")):this.$message.error($t("98zfs95","发货失败!","lang"))}}},_=(0,a(81656).A)(o,function(){var e=this,t=e._self._c;return t("SpPage",{attrs:{title:$t("1myw436","订单基本信息","lang")}},[t("template",{slot:"page-footer"},[e.btnActions.length>0?t("div",{staticClass:"text-center"},e._l(e.btnActions,function(a,i){return t("el-button",{key:`btn-item__${i}`,attrs:{type:"primary",plain:""},on:{click:function(t){return e.handleAction(a)}}},[e._v(" "+e._s(a.name)+" ")])}),1):e._e()]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-order-index"},[t("el-card",{staticClass:"el-card--normal"},[t("el-row",{staticClass:"card-panel"},e._l(e.infoList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),1)],1),e.is_community?t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("i9atht4","跟团信息","lang"))]),t("el-row",{staticClass:"card-panel"},[e._l(e.communityInfoList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),e._l(e.communityExtra,function(a,i){return t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(i)+"：")]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(a))])])})],2)],1):e._e(),t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("bz13z04","客户留言","lang"))]),t("div",{staticClass:"card-panel"},[t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.memberRemark))])])]),t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("b52bjl4","商家备注","lang"))]),t("div",{staticClass:"card-panel"},[t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.merchantRemark))])])]),t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("b452ej4","商品清单","lang"))]),t("div",{staticClass:"card-panel"},[e.orderInfo?t("el-table",{attrs:{border:"",data:e.orderInfo.items}},[t("el-table-column",{attrs:{prop:"item_id",label:$t("b3ly1i4","商品ID","lang"),width:"80"}}),t("el-table-column",{attrs:{prop:"pic",label:$t("b41bic4","商品图片","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-image",{staticClass:"item-image",attrs:{fit:"fill",src:`${e.wximageurl}${a.row.pic}`}})]}}],null,!1,823936844)}),t("el-table-column",{attrs:{prop:"item_name",label:$t("b40v0e4","商品名称","lang"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"ell3"},[1==a.row.is_prescription?t("el-tag",{staticStyle:{"background-color":"#fff"},attrs:{type:"primary",size:"mini"}},[e._v($t("c5auna5"," 处方药 ","lang"))]):e._e(),e._v(" "+e._s(a.row.item_name)+" ")],1),"gift"==a.row.order_item_type?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v($t("loben4"," 赠品 ","lang"))]):e._e()]}}],null,!1,3499408184)}),t("el-table-column",{attrs:{prop:"item_holder",label:$t("b47jsb4","商品类型","lang"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"ell3"},[e._v(" "+e._s(e.goodCategoryMap[a.row.item_holder])+" ")])]}}],null,!1,959559226)}),t("el-table-column",{attrs:{prop:"item_spec_desc",label:$t("1bmu7c5","SKU编码","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.item_bn)+" ")]}}],null,!1,2139421787)}),t("el-table-column",{attrs:{prop:"item_spec_desc",label:$t("o06w2","规格","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.item_spec_desc?t.row.item_spec_desc:$t("cvevh3","单规格","lang"))+" ")]}}],null,!1,4128891573)}),e.orderInfo.prescription_status?t("el-table-column",{attrs:{prop:"medicine_symptom_set",label:$t("knv32","症状","lang"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return e._l(a.row.medicine_symptom_set,function(a){return t("div",{key:a.id},[e._v(" "+e._s(a)+" ")])})}}],null,!1,443712497)}):e._e(),t("el-table-column",{attrs:{prop:"supplier_name",label:$t("7msy3i5","来源供应商","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.supplier_name?t.row.supplier_name:$t("mtmj2","自营","lang"))+" ")]}}],null,!1,864260727)}),t("el-table-column",{attrs:{prop:"price",label:$t("ibv9me5","单价（¥）","lang"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.price/100).toFixed(2))+" ")]}}],null,!1,3413669823)}),t("el-table-column",{attrs:{prop:"cost_price",label:$t("qm3ye16","结算价（¥）","lang"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.cost_price/100).toFixed(2))+" ")]}}],null,!1,2016505451)}),t("el-table-column",{attrs:{prop:"cost_price",label:$t("c4yuhd6","成本价（¥）","lang"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.cost_price/100).toFixed(2))+" ")]}}],null,!1,2016505451)}),t("el-table-column",{attrs:{prop:"num",label:$t("i1y72","数量","lang"),width:"80"}}),"1"==e.orderInfo.type?t("el-table-column",{attrs:{prop:"price",label:$t("l3fmsd7","计税单价（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s((a.row.taxable_fee/100).toFixed(2)))])]}}],null,!1,1905199383)}):e._e(),t("el-table-column",{attrs:{label:$t("nfxe8q5","小计（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.item_fee/100).toFixed(2))+" ")]}}],null,!1,11882238)}),t("el-table-column",{attrs:{label:$t("ab7vzq7","结算小计（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.cost_fee/100).toFixed(2))+" ")]}}],null,!1,248723872)}),t("el-table-column",{attrs:{label:$t("c9i5aa7","成本小计（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.cost_fee/100).toFixed(2))+" ")]}}],null,!1,248723872)}),e.VERSION_IN_PURCHASE()?e._e():t("el-table-column",{attrs:{label:$t("7yzuka7","会员优惠（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.member_discount/100).toFixed(2))+" ")]}}],null,!1,2317875936)}),t("el-table-column",{attrs:{label:$t("efdok97","积分抵扣（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.point_fee/100).toFixed(2))+" ")]}}],null,!1,1244452871)}),t("el-table-column",{attrs:{label:$t("mapop37","总支付价（¥）","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.total_fee/100).toFixed(2))+" ")]}}],null,!1,518453929)}),t("el-table-column",{attrs:{label:$t("holv6f6","总优惠（¥）","lang"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((t.row.discount_fee/100).toFixed(2))+" ")]}}],null,!1,2356451318)}),e.VERSION_IN_PURCHASE()||e.VERSION_STANDARD()?e._e():t("el-table-column",{attrs:{label:$t("i77tcq4","货币汇率","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.fee_rate))])]}}],null,!1,3934255869)}),"DONE"==e.orderInfo.delivery_status&&e.orderInfo.delivery_corp?[t("el-table-column",{attrs:{label:$t("b5t5hd4","发货状态","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v($t("e6ei03","已发货","lang"))])]}}],null,!1,1882035535)})]:e._e()],2):e._e()],1)]),e.orderInfo&&"excard"!=e.orderInfo._order_class&&!e.IS_SUPPLIER()?t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("d3im2h4","支付清单","lang"))]),t("el-row",{staticClass:"card-panel"},e._l(e.payList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),1)],1):e._e(),e.VERSION_IN_PURCHASE()?e._e():t("el-card",{staticClass:"el-card--normal"},[e.invoice?t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("b2r3xh4","发票信息","lang"))]),"individual"==e.invoice.title?t("div",[t("el-row",{staticClass:"card-panel"},e._l(e.invoiceList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),1)],1):e._e(),"unit"==e.invoice.title?t("div",[t("el-row",{staticClass:"card-panel"},e._l(e.invoiceListUnit,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),1)],1):e._e()]):e._e(),e.IS_SUPPLIER()?e._e():t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("adtpvk4","优惠明细","lang"))]),e.IS_SUPPLIER()?e._e():t("div",{staticClass:"card-panel"},[e.orderInfo?t("el-table",{staticStyle:{"max-width":"1000px"},attrs:{border:"","show-summary":"","sum-text":$t("cpsaoe4","总计优惠","lang"),data:e.orderInfo.discount_info}},[t("el-table-column",{attrs:{prop:"info",label:$t("adqmob4","优惠名称","lang")}}),t("el-table-column",{attrs:{prop:"discount_fee",label:$t("qa5cfc7","优惠金额（¥）","lang")}}),t("el-table-column",{attrs:{prop:"rule",label:$t("ae012a4","优惠说明","lang")}})],1):e._e()],1)],1),e.orderInfo.prescription_status?[e.orderInfo.diagnosis_data&&Object.keys(e.orderInfo.diagnosis_data).length?t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("jhn2h64","问诊信息","lang"))]),t("div",{staticClass:"card-panel"},[t("el-row",e._l(e.interrogationInfoList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))])]):e._e()}),1)],1)]):e._e(),e.orderInfo.prescription_data&&Object.keys(e.orderInfo.prescription_data).length?t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("bnh6zn4","处方信息","lang"))]),t("div",{staticClass:"card-panel"},[t("el-row",e._l(e.prescriptionInfoList,function(a,i){return a.is_show?t("el-col",{key:`item__${i}`,staticClass:"card-panel-item",attrs:{span:6}},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(a.label))]),"cycle"==a.type?t("div",e._l(e.orderInfo.prescription_data[a.field],function(a,i){return t("div",{key:i,staticClass:"card-panel__value"},[t("div",[e._v(e._s(a.drugCommonName))]),t("div",[e._v($t("hpo993","用法：","lang")+e._s(a.instructions))])])}),0):e._e(),a.special?e._e():t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.getFiledValue(a.field)))]),a.special?t("span",{staticClass:"card-panel__value"},["dst_file_path"==a.field?t("span",[t("el-image",{staticClass:"img-item",attrs:{src:e.getFiledValue(a.field),"preview-src-list":[e.getFiledValue(a.field)]}})],1):e._e()]):e._e()]):e._e()}),1)],1)]):e._e()]:e._e(),t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("evvycm4","物流信息","lang"))]),e.orderInfo?t("div",{staticClass:"card-panel"},[t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v(e._s(`${"ziti"==e.orderInfo.receipt_type?$t("gsxnzq4","自提地址","lang"):$t("cbgq5l5","收货人信息","lang")}:`))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.addressInfo))])]),"ziti"==e.orderInfo.receipt_type&&e.orderInfo.ziti_info?t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v($t("d699hz4","提货人:","lang"))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.orderInfo.receiver_name))])]):e._e(),"ziti"==e.orderInfo.receipt_type&&e.orderInfo.ziti_info?t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v($t("hol5yz5","提货时间:","lang"))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(`${e.orderInfo.ziti_info.pickup_date} ${e.orderInfo.ziti_info.pickup_time.join("~")}`))])]):e._e(),"ziti"==e.orderInfo.receipt_type&&e.orderInfo.ziti_info?t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v($t("ksw2975","联系电话:","lang"))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.orderInfo.receiver_mobile))])]):e._e(),e.orderInfo.subdistrict_parent?t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v($t("kngta3","街道:","lang"))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.orderInfo.subdistrict_parent))])]):e._e(),e.orderInfo.subdistrict?t("div",{staticClass:"card-panel-item"},[t("span",{staticClass:"card-panel__label"},[e._v($t("i5gqm3","社区:","lang"))]),t("span",{staticClass:"card-panel__value"},[e._v(e._s(e.orderInfo.subdistrict))])]):e._e(),t("el-table",{attrs:{border:"",data:e.deliveryData}},[t("el-table-column",{attrs:{prop:"delivery_time",label:$t("b5ra2c4","发货时间","lang")}}),t("el-table-column",{attrs:{prop:"delivery_code",label:$t("evwh164","物流单号","lang")}}),t("el-table-column",{attrs:{prop:"delivery_corp_name",label:$t("cp0yj74","快递公司","lang")}}),t("el-table-column",{attrs:{prop:"supplier_name",label:$t("7msy3i5","来源供应商","lang")}}),t("el-table-column",{attrs:{prop:"delivery_corp",label:$t("ew442r4","物流编码","lang")}}),t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return[e.IS_ADMIN()&&"0"==a.row.supplier_id||!e.IS_ADMIN()?["logistics"===e.orderInfo.receipt_type&&"DONE"!==e.orderInfo.order_status?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.modifyExpress(a.row)}}},[e._v($t("juz394"," 编辑 ","lang"))]):e._e()]:e._e()]}}],null,!1,533724413)})],1)],1):e._e()]),t("el-card",{staticClass:"el-card--normal"},[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("hyxdkw4","订单追踪","lang"))]),e.orderInfo?.self_delivery_operator_name?t("div",{staticClass:"card-panel"},[t("div",{staticClass:"card-panel-item"},[t("span",[e._v($t("1ylm0s6","配送员姓名：","lang")+e._s(e.orderInfo.self_delivery_operator_name||"-"))]),t("span",{staticClass:"ml-16"},[e._v($t("940d7u7","配送员手机号：","lang")+e._s(e.orderInfo.self_delivery_operator_mobile||"-"))]),t("span",{staticClass:"ml-16"},[e._v($t("ixjy394","配送费：","lang")+e._s(e.orderInfo.self_delivery_fee/100)+$t("g1v1","元","lang"))])])]):e._e(),t("div",{staticClass:"delivery-log"},[e.deliveryLog?t("el-timeline",{attrs:{reverse:!1}},e._l(e.deliveryLog,function(a,i){return t("el-timeline-item",{key:i,attrs:{timestamp:e._f("datetime")(a.time,"YYYY-MM-DD HH:mm:ss"),placement:"top"}},[t("el-card",[t("p",[e._v($t("lgpn3o5","操作详情：","lang")+e._s(a.msg))]),a.delivery_remark?t("p",[e._v($t("iez82t5","配送备注：","lang")+e._s(a.delivery_remark))]):e._e(),a.pics?.length?t("div",[e._v($t("ls72bq7"," 配送照片： ","lang")),t("div",{staticClass:"img-box"},e._l(a.pics,function(e,i){return t("el-image",{key:i,staticClass:"img-item",attrs:{src:e,"preview-src-list":a.pics}})}),1)]):e._e()])],1)}),1):e._e()],1)]),e.btnActions.length>0?t("div",{staticClass:"footer-container"},e._l(e.btnActions,function(a,i){return t("el-button",{key:`btn-item__${i}`,attrs:{type:"primary",plain:""},on:{click:function(t){return e.handleAction(a)}}},[e._v(" "+e._s(a.name)+" ")])}),1):e._e(),t("SpDialog",{ref:"expressRef",attrs:{title:$t("chvho16","修改物流信息","lang"),form:e.expressForm,"form-list":e.expressFormList},on:{onSubmit:e.expressSubmit},model:{value:e.expressDialog,callback:function(t){e.expressDialog=t},expression:"expressDialog"}}),t("SpDialog",{ref:"deliverGoodsDialogRef",attrs:{width:"1000px",title:`${$t("7sn7qr6","发货【订单:","lang")}${e.deliverGoodsForm.order_id}】`,form:e.deliverGoodsForm,"form-list":e.deliverGoodsFormList},on:{onSubmit:e.deliverGoodsSubmit},model:{value:e.deliverGoodsDialog,callback:function(t){e.deliverGoodsDialog=t},expression:"deliverGoodsDialog"}})],2)],2)},[],!1,null,"e187168e",null).exports}}]);