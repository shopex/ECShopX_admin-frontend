"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6928],{86928:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=a(47499),i=a.n(s),r=(a(44114),a(18111),a(22489),a(20116),a(7588),a(61701),a(95093)),o=a.n(r),n=a(5748),l=a(26456),c=a(2038),m=a(33318),p=a(41472);const d=t=>(0,p.u)([{label:"",component(){const e=this.$createElement;return e("div",[e("div",{style:{marginBottom:"10px",display:"flex",gap:"10px"}},[e("el-button",{attrs:{type:"primary",plain:!0},on:{click:()=>{t.syncSpuToLocal()}}},[$t("ow62wh6","淘宝增量同步","lang")]),e("el-button",{attrs:{type:"primary",plain:!0},on:{click:()=>{t.selectedSpu.length>0?t.setCategory():t.$message.warning($t("u41fdg6","请先选择商品","lang"))}}},[$t("l86cra6","设置管理分类","lang")])]),e("SpFinder",i()([{ref:"finderDialog",attrs:{url:"/spulists",reserveSelection:!0,rowKey:"outer_id",setting:{search:[{key:"spu_code",name:$t("1bpu0p5","SPU编号","lang")},{key:"title",name:$t("b40v0e4","商品名称","lang")},{key:"is_set_cid",name:$t("d8xcjf6","配置管理分类","lang"),type:"select",options:[{label:$t("egsab3","已配置","lang"),value:1},{label:$t("fte973","未配置","lang"),value:0}]},{key:"list_time",name:$t("aa1h2i4","上架时间","lang"),slot:"list_time"}],columns:[{name:$t("1bq14z5","SPU编码","lang"),key:"outer_id",width:100},{name:$t("b40v0e4","商品名称","lang"),key:"title"},{name:$t("g2r33u4","管理分类","lang"),key:"category_name",width:180},{name:$t("m8lft3","销售价","lang"),key:"price",width:100},{name:$t("gl5x2","库存","lang"),key:"num",width:120},{name:$t("qe9wk16","淘宝上架时间","lang"),key:"list_time",width:180}]}}},{attrs:{hooks:{beforeSearch:e=>({...e,list_time_start:t.list_time&&t.list_time[0],list_time_end:t.list_time&&t.list_time[1]})}}},{on:{select:e=>{t.selectedSpu=e},reset:()=>{t?.$refs?.finderDialog?.refresh(!0)},"select-all":e=>{t.selectedSpu=e}}}]),[e("el-date-picker",{slot:"list_time",attrs:{type:"datetimerange","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0k3t4","开始时间","lang"),"end-placeholder":$t("gfi7qi4","结束时间","lang"),"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:t.list_time,callback:e=>{this.$set(t,"list_time",e)}}})]),e("div",{style:{display:"flex",justifyContent:"flex-end"}},[e("el-button",{attrs:{type:"primary",plain:!0},on:{click:()=>{t.onTbAddSubmit()}}},[$t("cmnd2s5","同步商品池","lang")])])])}}],t);var g={components:{SpPageUpload:a(53115).default},data(){const t=this.$createElement,e=this.$store.getters.login_type;let a,s=[{title:$t("en402","全部","lang"),value:""},{title:$t("meu01y5","前台可销售","lang"),value:"onsale"},{title:$t("mfygnl5","前台不展示","lang"),value:"offline_sale"},{title:$t("mfuo7t5","前台仅展示","lang"),value:"only_show"},{title:$t("a7er004","不可销售","lang"),value:"instock"}];return a="distributor"==e?[{title:$t("en402","全部","lang"),value:""},{title:$t("c025s24","审核驳回","lang"),value:"rejected"},{title:$t("fy8avn4","等待审核","lang"),value:"processing"},{title:$t("meu01y5","前台可销售","lang"),value:"onsale"},{title:$t("mfygnl5","前台不展示","lang"),value:"offline_sale"},{title:$t("mfuo7t5","前台仅展示","lang"),value:"only_show"},{title:$t("a7er004","不可销售","lang"),value:"instock"}]:s,{formLoading:!1,commissionDialog:!1,commissionForm:{goods_id:0,commission_ratio:""},show_profit_sideBar:!1,select_tags_value:[],current:"",currentId:"",currentPrice:"",activeName:"first",goodsName:"",isEdit:!1,ItemsList:[],item_id:[],goods_id:[],templates_new_id:"",category_id:[],show_sideBar:!1,loading:!1,submitLoading:!1,total_count:0,warning_store:5,templatesParams:{page:1,pageSize:1e3},goodsBranchList:[],appID:"",sunCode:!1,sunCodeTitle:"",appCodeUrl:"",curPageUrl:"",goodsBranchParams:{page:1,pageSize:1e3,attribute_type:"brand",attribute_name:""},page:{pageIndex:1,pageSize:20,total:0},searchParams:{is_market:"",item_type:"normal",templates_id:"",keywords:"",item_bn:"",supplier_goods_bn:"",approve_status:"",category:0,item_category:0,is_warning:!1,is_medicine:"",audit_status:"",delivery_data_type:"",tag_id:"",tax_rate_code:"",is_gift:void 0,is_prescription:"",type:0,barcode:"",distributor_id:0,regions_id:[],brand_id:"",goods_bn:"",operator_name:"",cat_id:""},auditStatusMap:{1:$t("fk50h3","未审核","lang"),2:$t("c00pno4","审核通过","lang"),3:$t("glednn5","审核不通过","lang")},start_date:"",end_date:"",addCategorydialogVisible:!1,form:{},isGiftsData:{},exportData:{},exportTagData:{},errMessage:"",errMessageVis:!1,tagList:[],grade:[],vipGrade:[],statusOption:a,itemstore:0,distributorVisible:!1,setDistributorStatus:!1,relDistributorIds:"",selections:[],xpGoodsVisible:!1,batchChangeStateDialog:!1,batchChangeStateFormList:[{label:$t("b45xmu4","商品状态","lang"),key:"status",type:"select",message:$t("adohlc4","不能为空","lang"),options:s}],batchChangeStateForm:{status:""},is_pharma_industry:!1,isBindWdtErp:!1,isBindJstErp:!1,categoryList:[],templatesList:[],templatesListavailable:[],itemCategoryList:[],regions:[],showMemberPriceDrawer:!1,showItemStoreDrawer:!1,specItems:[],storeItemsList:[],skuLoading:!1,showItemSkuDrawer:!1,itemSkuDrawerTitle:"",itemSkuList:[],labelDialog:!1,labelForm:{item_id:[]},labelFormList:[{label:$t("cg6dpq4","已选标签","lang"),key:"",component:({key:e},a)=>t("div",[this.tagList.filter(t=>!!t.selected).map(e=>t("el-tag",{attrs:{closable:!0},on:{close:()=>e.selected=!1},style:"margin: 0 10px 10px 0;"},[e.tag_name]))])},{label:$t("ctpucg4","所有标签","lang"),key:"",component:({key:e},a)=>t("div",[this.tagList.filter(t=>!t.selected).map(e=>t("el-button",{attrs:{plain:!0,size:"mini"},class:"tag-item",on:{click:()=>{e.selected=!0}}},[e.tag_name]))])}],selectionItems:[],saleCategoryDialog:!1,saleCategoryForm:{item_id:[],category_id:""},saleCategoryFormList:[{label:$t("j5fnxf4","销售分类","lang"),key:"category_id",component:({key:e},a)=>t("el-cascader",i()([{},{props:{props:{value:"category_id",label:"category_name",multiple:!0,checkStrictly:!0,children:"children"}}},{attrs:{options:this.categoryList},model:{value:a[e],callback:t=>{this.$set(a,e,t)}}}]))}],freightTemplateDialog:!1,freightTemplateForm:{item_id:[],templates_id:""},freightTemplateFormList:[{label:$t("iq77af4","运费模板","lang"),key:"templates_id",component:({key:e},a)=>t("el-select",{model:{value:a[e],callback:t=>{this.$set(a,e,t)}}},[this.templatesListavailable.map(e=>t("el-option",{attrs:{label:e.name,value:e.template_id}}))])}],storeItemDialog:!1,storeItemForm:{item_id:[],storeNum:void 0},storeItemFormList:[{label:$t("gl5x2","库存","lang"),key:"storeNum",component:({key:e},a)=>t("el-input-number",{attrs:{"controls-position":"right",min:0},style:"width: 120px",model:{value:a[e],callback:t=>{this.$set(a,e,t)}}})}],changePriceDialog:!1,changePriceForm:{},changePriceFormList:[],list_time:[],tableList:{actions:[{name:$t("mekb2","编辑","lang"),key:"edit",type:"button",buttonType:"text",visible:t=>(0,l.WZ)()||0==t.supplier_id||(0,l.JR)()||(0,l.Hr)()&&this.VERSION_STANDARD(),action:{type:"link",handler:([t])=>{this.$router.push({path:`${this.$route.path}/editor/${t.item_id}`,query:{some_param:"true"}})}}},{name:$t("ibpi2","查看","lang"),key:"edit",type:"button",buttonType:"text",visible:t=>(0,l.WZ)()||(0,l.Hr)(),action:{type:"link",handler:([t])=>{this.$router.push({path:`${this.$route.path}/editor/${t.item_id}`,query:{some_param:"true",detail:!0}})}}},{name:$t("pchn2","重推","lang"),key:"repush",type:"button",buttonType:"text",visible:t=>3==t.medicine_data?.audit_status,action:{type:"link",handler:async([t])=>{await this.$api.goods.medicineItemsSync({goods_id:t.goods_id}),this.$message.success($t("d1spvi4","操作成功","lang")),setTimeout(()=>{this.$refs.finder.refresh(!0)},200)}}},{name:$t("hbnt2","投放","lang"),key:"put",type:"button",buttonType:"text",action:{type:"link",handler:async([t])=>{this.handleShow(t)}}},{name:$t("e820ax4","添加相似","lang"),key:"similarity",type:"button",buttonType:"text",action:{type:"link",handler:([t])=>{this.$router.push({path:`${this.$route.path}/editor/${t.item_id}`,query:{some_param:"true",is_new:!0}})}}},{name:$t("eslg2","删除","lang"),key:"delete",type:"button",buttonType:"text",visible:t=>(0,l.Hr)()||(0,l.JR)()||(0,l.WZ)()&&0==t.is_market&&"processing"!=t.audit_status,action:{type:"link",handler:async([t])=>{await this.$confirm($t("13qc9xg","此操作将删除该商品, 是否继续?","lang"),$t("hn562","提示","lang"));try{await this.$api.goods.deleteItems(t.item_id)}catch(t){if(t.data)return void t.data.data.message}this.$message.success($t("u5jv766","删除商品成功","lang")),setTimeout(()=>{this.$refs.finder.refresh()},200)}}},{name:$t("bkswqs4","复制商品","lang"),key:"copy",type:"button",buttonType:"text",visible:t=>(0,l.WZ)(),action:{type:"link",handler:async([t])=>{this.$router.push({path:`${this.$route.path}/editor/${t.item_id}`,query:{some_param:"true",is_new:!0}})}}},{name:$t("i5kihh4","设置价格","lang"),key:"setup_price",type:"button",buttonType:"text",visible:t=>!(0,l.WZ)(),action:{type:"link",handler:async([t])=>{this.getMemberPriceByGoods(t.item_id)}}},{name:$t("idef2","标签","lang"),key:"label",type:"button",buttonType:"text",visible:t=>(0,l.Hr)()||(0,l.JR)(),action:{type:"link",handler:async([t])=>{this.tagList.forEach(e=>{t.tagList.map(t=>t.tag_id).includes(e.tag_id)?e.selected=!0:e.selected=!1}),this.labelForm.item_id=t.item_id,this.labelDialog=!0}}},{name:$t("dera964","更改库存","lang"),key:"change_store",type:"button",buttonType:"text",action:{type:"link",handler:async([t])=>{this.getSkuStoreByGoods(t.item_id)}}},{name:$t("bl3tv44","复制链接","lang"),key:"link",type:"button",buttonType:"text",action:{type:"link",handler:async([t])=>{this.$copyText(`${{VUE_APP_IS_SAAS:"false",VUE_APP_SYSTEM_NAME:"Shopex Admin",VUE_APP_PUBLIC_PATH:"/",VUE_APP_WXIMG_URL:"",VUE_APP_WXAUTHCALL_Url:"https://demo-ecshopx.ishopex.cn",VUE_APP_PREFIXES:"",VUE_APP_QIANKUN_ENTRY:"/newpc",VUE_APP_OSS_CDN:"false",VUE_APP_FREE:"false",VUE_APP_ALIOSS_REGION:"",VUE_APP_ALIOSS_ACCESS_KEY_ID:"",VUE_APP_ALIOSS_ACCESS_KEY_SECRET:"",VUE_APP_ALIOSS_BUCKET:"",VUE_APP_LOCAL_DELIVERY_DIRVER:"dada",VUE_APP_CHUZHI:"true",NODE_ENV:"production",VUE_APP_BASE_API:"https://ecshopx82.shopex123.com/api",VUE_APP_MAP_KEY:"PSPBZ-KQ5CW-CSGRF-ON2S4-K2HQJ-XEBQG",VUE_APP_DEFAULT_LANG:"zhcn",BASE_URL:"/",VUE_APP_PLATFORM:"yd"}.VUE_APP_H5_HOST}/pages/item/espier-detail?id=${t.item_id}`).then(()=>{this.$message.success($t("bkv2mw4","复制成功","lang"))})}}},{name:$t("dudn2","下架","lang"),key:"offline",type:"button",buttonType:"text",visible:t=>"onsale"==t.approve_status&&!(0,l.WZ)(),action:{type:"link",handler:async([t])=>{await this.$api.goods.updateItemsStatus({items:[{goods_id:t.item_id}],status:"instock",operate_source:(0,l.WZ)()?"supplier":"platform"}),this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()}}},{name:$t("ducs2","上架","lang"),key:"online",type:"button",buttonType:"text",visible:t=>"instock"==t.approve_status&&!(0,l.WZ)(),action:{type:"link",handler:async([t])=>{await this.$api.goods.updateItemsStatus({items:[{goods_id:t.item_id}],status:"onsale",operate_source:(0,l.WZ)()?"supplier":"platform"}),this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()}}}],columns:[{name:$t("b3ly1i4","商品ID","lang"),key:"goods_id",width:80},{name:$t("b44fe44","商品标题","lang"),key:"itemName",width:280,render:(t,e)=>t("div",[t("div",{style:"white-space: normal;"},[e.row.itemName,!e.row.nospec&&t("el-tag",{attrs:{size:"mini",effect:"plain",type:"primary"},style:"margin-left: 4px; cursor: default;",on:{click:()=>{this.handleViewSkuInfo(e.row)}}},[$t("hlm1","多","lang"),t("i",{class:"ecx-icon icon-sousuo",style:"font-size: 12px; margin-left: 2px;"})]),1==e.row.is_gift&&t("el-tag",{attrs:{size:"mini",effect:"plain",type:"primary"},style:"margin-left: 4px; cursor: default;"},[$t("rxc1","赠","lang")])]),t("div",{style:"color: #666;"},[`${$t("txnoax6","SPU编码：","lang")}${e.row.goods_bn}`,t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{on:{click:()=>{this.$copyText(e.row.goods_bn).then(()=>{this.$message.success($t("bkv2mw4","复制成功","lang"))})}},class:"el-icon-document-copy",style:"margin-left: 4px;"})])])])},{name:$t("1ttci05","sku编码","lang"),key:"item_bn",width:160,align:"right",headerAlign:"center"},{name:$t("idef2","标签","lang"),width:180,visible:!(0,l.WZ)(),key:"tagList",render:(t,e)=>t("div",{style:"white-space: normal;"},[e.row.tagList?.map(e=>t("span",{style:{color:e.font_color,"background-color":e.tag_color,"font-size":"12px",padding:"2px 5px","border-radius":"2px",margin:"0 8px 8px 0"}},[e.tag_name]))])},{name:$t("gl5x2","库存","lang"),key:"store",align:"right",headerAlign:"center"},{name:$t("789h436","销售价（¥）","lang"),key:"price",width:120,formatter:(t,e,a)=>(t/100).toFixed(2),align:"right",headerAlign:"center"},{name:$t("qknewd6","市场价（¥）","lang"),key:"market_price",width:120,formatter:(t,e,a)=>(t/100).toFixed(2),align:"right",headerAlign:"center"},{name:$t("c4yuhd6","成本价（¥）","lang"),key:"cost_price",width:120,formatter:(t,e,a)=>(t/100).toFixed(2),align:"right",headerAlign:"center"},{name:$t("ewhqj16","毛利率（%)","lang"),key:"gross_profit_rate",width:100,align:"right",headerAlign:"center"},{name:$t("afv8kk4","供应状态","lang"),key:"is_market",formatter:(t,e,a)=>"1"==t?$t("eqsf2","可售","lang"):$t("buay43","不可售","lang"),visible:(0,l.WZ)()},{name:$t("b45xmu4","商品状态","lang"),width:120,visible:!(0,l.WZ)(),key:"approve_status",formatter:(t,e,a)=>this.statusOption.find(e=>e.value===t)?.title},{name:$t("bzvg8y4","审核状态","lang"),key:"audit_status",width:200,visible:!(0,l.Hr)(),render:(t,a)=>t("div",[t("span",[m.Hl[a.row.audit_status]]),"rejected"==a.row.audit_status&&"supplier"==e&&t("div",{class:"physical-cell-reason"},[$t("ng2o0i5","拒绝原因：","lang"),a.row.audit_reason])])},{name:$t("j5fnxf4","销售分类","lang"),key:"itemCatName",minWidth:120},{name:$t("lehpg3","起订量","lang"),key:"start_num",minWidth:120},{name:$t("cyko7y4","排序编号","lang"),key:"sort",width:120,showType:"editable",componentProps:{class:"flex items-center",icon:"el-icon-plus",change:async(t,e)=>{await this.$api.goods.setItemsSort({sort:t,item_id:e.item_id,operate_source:this.IS_SUPPLIER()?"supplier":""}),this.$refs.finder.refresh()}}},{name:$t("d8qkp84","是否处方","lang"),key:"is_prescription",width:150,render:(t,{row:e})=>"1"==e.is_prescription?$t("k6n1","是","lang"):$t("gme1","否","lang"),visible:this.is_pharma_industry},{name:$t("x1hmiw6","医药错误信息","lang"),key:"audit_reason",width:150,render:(t,{row:e})=>t("div",[e.medicine_data?.audit_reason&&3==e.medicine_data?.audit_status&&t("div",{on:{click:()=>this.handleErrDetail(e.medicine_data)}},[this.handleAuditReason(e.medicine_data),t("i",{class:"el-icon-info"})])]),visible:this.is_pharma_industry},{name:$t("ar84e54","创建时间","lang"),key:"created",width:160,formatter:(t,e,a)=>o()(1e3*t).format("YYYY-MM-DD HH:mm:ss")},{name:$t("devbay4","更新时间","lang"),key:"updated",width:160,formatter:(t,e,a)=>o()(1e3*t).format("YYYY-MM-DD HH:mm:ss")}]}}},computed:{tabList(){let t=[];return t=(0,l.WZ)()?[{name:$t("av9wor4","全部商品","lang"),value:"all",activeName:"first"},{name:$t("eh2xl3","待提交","lang"),value:"submiting",activeName:"submiting"},{name:$t("eftvg3","待审核","lang"),value:"processing",activeName:"processing"},{name:$t("ego673","已通过","lang"),value:"approved",activeName:"approved"},{name:$t("e8vjx3","已拒绝","lang"),value:"rejected",activeName:"rejected"},{name:$t("lx3u4e6","库存预警商品","lang"),value:"true",activeName:"second"}]:[{name:$t("av9wor4","全部商品","lang"),value:"all",activeName:"first"},{name:$t("lx3u4e6","库存预警商品","lang"),value:"true",activeName:"second"}],this.is_pharma_industry&&t.splice(1,0,{name:$t("b1l2334","医药商品","lang"),value:"is_medicine",activeName:"third"}),t},tbAddFormList(){return d(this)}},mounted(){this.init(),this.getAddress(),this.getShippingTemplatesList(),this.searchParams.operator_name=this.$route.query.operator_name,this.fetchWechatList(),this.checkWdtErpBind(),this.checkJstErpBind(),this.getBaseSetting(),this.$activated=()=>{this.$refs.finder.refresh()}},methods:{async getBaseSetting(){const t=await this.$api.company.getGlobalSetting();this.is_pharma_industry="1"==t.medicine_setting?.is_pharma_industry},async fetchWechatList(){const{list:t}=await this.$api.minimanage.gettemplateweapplist();t.forEach((t,e)=>{"yykweishop"==t.key_name&&(this.appID=t.authorizer.authorizer_appid)})},beforeSearch(t){return t={...t,item_type:"normal",operate_source:(0,l.WZ)()?"supplier":"platform",...this.searchParams,item_source:"platform"}},onSearch(){this.$refs.finder.refresh(!0)},async getShippingTemplatesList(){const{list:t}=await this.$api.shipping.getShippingTemplatesList({page:1,pageSize:1e3});this.templatesList=t,this.templatesListavailable=t.filter(t=>t.status)},async getCategory(){const t=await this.$api.goods.getCategory({is_show:!1});this.categoryList=t;const e=await this.$api.goods.getCategory({is_main_category:!0});this.itemCategoryList=e},async getMemberPriceByGoods(t){this.currentId=t,this.skuLoading=!0,this.showMemberPriceDrawer=!0;const e=[],{list:a}=await this.$api.goods.getGoodsPrice(t);a.forEach(t=>{e.push({item_id:t.item_id,item_spec_desc:t.item_spec_desc||t.itemName,is_edit:!1,price:t.price/100,cost_price:t.cost_price/100,market_price:t.market_price/100,grade:this.generatePrice(t.memberGrade.grade),vipGrade:this.generatePrice(t.memberGrade.vipGrade)})}),this.grade=this.generatePrice(a[0].memberGrade.grade),this.vipGrade=this.generatePrice(a[0].memberGrade.vipGrade),this.specItems=e,this.skuLoading=!1},handleShow({goods_id:t,itemName:e}){const a="pages/item/espier-detail";this.curPageUrl=`${a}?id=${t}`;let s={wxaAppId:this.appID,page:a,id:t};(0,c.getPageCode)(s).then(t=>{this.appCodeUrl=t.data.data.base64Image,this.sunCodeTitle=e+$t("kp3kxc8","---商品太阳码","lang"),this.sunCode=!0})},handleErrDetail(t){t&&t.audit_reason&&(this.errMessage=t.audit_reason,this.errMessageVis=!0)},async getSkuStoreByGoods(t){this.skuLoading=!0;const{list:e}=await this.$api.goods.getItemsList({item_type:"normal",operate_source:(0,l.WZ)()?"supplier":"platform",item_id:t,is_sku:!0,page:1,pageSize:1e3});this.showItemStoreDrawer=!0,this.storeItemsList=e.map(t=>({item_id:t.item_id,store:t.store,item_spec_desc:t.item_spec_desc?t.item_spec_desc:t.item_name})),this.skuLoading=!1},async getAllTagLists(){const{list:t}=await this.$api.goods.getTagList({page:1,pageSize:500});this.tagList=t.map(t=>({...t,selected:!1}))},afterSearch(t){this.warning_store=t.data.data.warning_store},async onSaveMemberPrice(){const t={item_id:this.currentId,mprice:""};let e={};this.specItems.forEach(t=>{let a={};t.grade.forEach(t=>{Object.assign(a,{[t.vip_grade_id]:t.mprice>0?t.mprice:""})});let s={};t.vipGrade.forEach(t=>{Object.assign(s,{[t.vip_grade_id]:t.mprice>0?t.mprice:""})}),e[t.item_id]={grade:a,vipGrade:s}}),t.mprice=JSON.stringify(e),this.showMemberPriceDrawer=!1,await this.$api.goods.updateGoodsPrice(t),this.$message.success($t("deua4r4","更新成功","lang")),this.$refs.finder.refresh()},async onSaveItemStore(){const t={items:JSON.stringify(this.storeItemsList),operate_source:(0,l.WZ)()?"supplier":"platform"};await this.$api.goods.updateItemsStore(t),this.$message.success($t("ai8d7e4","修改成功","lang")),this.$refs.finder.refresh(),this.showItemStoreDrawer=!1},handleTabClick(){"first"==this.activeName?(this.searchParams.is_warning=!1,this.searchParams.audit_status=""):"second"==this.activeName?(this.searchParams.is_warning=!0,this.searchParams.audit_status=""):(this.searchParams.is_warning=!1,this.searchParams.audit_status=this.activeName),"third"==this.activeName?(this.searchParams.is_medicine=1,this.searchParams.audit_status=""):this.searchParams.is_medicine="","taobao"==this.activeName&&(this.searchParams.audit_status=""),this.searchParams.is_taobao="taobao"==this.activeName?1:"",this.$refs.finder.refresh()},onSelectionChange(t){this.selectionItems=t},changeCategory(){this.selectionItems.length>0?(this.saleCategoryForm.item_id=this.selectionItems.map(t=>t.item_id),this.saleCategoryDialog=!0):this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},async onSaleCategorySubmit(){const{item_id:t,category_id:e}=this.saleCategoryForm,a=e.map(t=>t[t.length-1]);await this.$api.goods.setItemsCategory({item_id:t,category_id:a}),this.$message.success($t("d1spvi4","操作成功","lang")),this.saleCategoryDialog=!1,this.$refs.finder.refresh()},changeFreightTemplate(){this.selectionItems.length>0?(this.freightTemplateForm.item_id=this.selectionItems.map(t=>t.item_id),this.freightTemplateDialog=!0):this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},handleAuditReason(t){const{audit_reason:e=""}=t||{};return e.length>8?e.slice(0,8)+"...":e},async onFreightTemplateSubmit(){const{item_id:t,templates_id:e}=this.freightTemplateForm;await this.$api.goods.setItemsTemplate({templates_id:e,item_id:t}),this.$message.success($t("d1spvi4","操作成功","lang")),this.freightTemplateDialog=!1,this.$refs.finder.refresh()},changeItemsStore(){this.selectionItems.length>0?(this.storeItemForm.item_id=this.selectionItems.map(t=>t.item_id),this.storeItemDialog=!0):this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},batchGifts(t){this.selectionItems.length?(this.isGiftsData.item_id=Object.assign({},this.selectionItems.map(t=>t.item_id)),this.isGiftsData.status=t,(0,n.saveIsGifts)(this.isGiftsData).then(t=>{1==t.data.data.status?this.$message({type:"success",message:$t("d1spvi4","操作成功","lang"),duration:2e3}):this.$message({type:"error",message:$t("d1rj434","操作失败","lang"),duration:2e3})})):this.$message({type:"error",message:$t("eajgmxa","请选择至少一个商品!","lang"),duration:2e3})},batchChangeStore(){if(0===this.selectionItems.length)return this.$message({type:"error",message:$t("gi0dra9","请选择至少一个商品","lang")}),!1;this.batchChangeStateDialog=!0},async onBatchChangeStateSubmit(){let t=[];this.selectionItems.map(e=>{t.push({goods_id:e.goods_id})}),await this.$api.goods.updateItemsStatus({distributor_id:this.shopId,items:JSON.stringify(t),status:this.batchChangeStateForm.status}),this.$message.success($t("ai8d7e4","修改成功","lang")),this.$refs.finder.refresh(),this.batchChangeStateDialog=!1},async onStoreItemSubmit(){const{item_id:t,storeNum:e}=this.storeItemForm,a=[];t.forEach(t=>{a.push({item_id:t,store:e,is_default:!0})}),await this.$api.goods.updateItemsStore({items:JSON.stringify(a),operate_source:(0,l.WZ)()?"supplier":"platform"}),this.$message.success($t("d1spvi4","操作成功","lang")),this.storeItemDialog=!1,this.$refs.finder.refresh()},async changeHaltTheSales(t){if(this.selectionItems.length>0){await this.$confirm(`${"stop"==t?$t("e4wi2","停售","lang"):$t("gmjy2","开售","lang")}${$t("hy2dm9b","选中商品, 是否继续?","lang")}`,$t("hn562","提示","lang"));const e={goods_id:this.selectionItems.map(t=>t.goods_id),is_market:"stop"==t?"0":"1",operate_source:(0,l.WZ)()?"supplier":"platform"};await this.$api.goods.updateGoodsInfo(e),this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()}else{await this.$confirm(`${"stop"==t?$t("e4wi2","停售","lang"):$t("gmjy2","开售","lang")}${$t("wr7kx6b","所有商品, 是否继续?","lang")}`,$t("hn562","提示","lang"));const e={is_market:"stop"==t?"0":"1",operate_source:(0,l.WZ)()?"supplier":"platform"};await this.$api.goods.updateGoodsInfo(e),this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()}},changeGoodsPrice(){this.selectionItems.length>0?this.changePriceDialog=!0:this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},async onChangePriceSubmit(){},changeGoodsLabel(){if(this.selectionItems.length>0){this.labelForm.item_id=this.selectionItems.map(t=>t.item_id);let t=[];this.selectionItems.forEach(e=>{t=[...t,...e.tagList]}),t.forEach(t=>{this.tagList.forEach(e=>{t.tag_id==e.tag_id&&(e.selected=!0)})}),this.labelDialog=!0}else this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},async commissionSubmit(){this.formLoading=!0;try{await this.$api.goods.setCommissionRatio(this.commissionForm),this.commissionDialog=!1,this.$refs.finder.refresh(),this.$message.success($t("d1spvi4","操作成功","lang"))}catch(t){}this.formLoading=!1},async onLabelFormSubmit(){const{item_id:t}=this.labelForm,e=this.tagList.filter(t=>!!t.selected).map(t=>t.tag_id);await this.$api.goods.itemsRelTags({item_ids:t,tag_ids:e}),this.labelDialog=!1,this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()},async getAddress(){const t=await this.$api.common.getAddress();this.regions=t},async syncToShop(t){let e="_all";if(!t){const{data:t}=await this.$picker.shop();e=t.map(t=>t.distributor_id)}0==this.selectionItems.length?(await this.$confirm($t("eb1gfif","是否将所有商品的都同步至店铺?","lang"),$t("hn562","提示","lang")),await this.$api.marketing.saveDistributorItems({distributor_ids:e,item_ids:"_all",is_can_sale:!1})):await this.$api.marketing.saveDistributorItems({distributor_ids:e,item_ids:this.selectionItems.map(t=>t.item_id),is_can_sale:!1}),this.$message.success($t("d1spvi4","操作成功","lang"))},async onBatchSubmitItems(){0!=this.selectionItems.length?(await this.$confirm($t("mu2fzc9","确认是否批量提交？","lang"),$t("d0ythm4","批量提交","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}),await this.$api.goods.updateGoodsInfo({goods_id:this.selectionItems.map(t=>t.item_id),operate_source:(0,l.WZ)()?"supplier":"platform",audit_status:"processing"}),this.$message.success($t("d1spvi4","操作成功","lang")),this.$refs.finder.refresh()):this.$message.error($t("gi0dra9","请选择至少一个商品","lang"))},handleDownload(t){var e=document.createElement("a"),a=t;this.appCodeUrl&&(e.href=this.appCodeUrl,e.download=a+".png",e.click())},handleImport(t){this.$router.push({path:`${this.$route.path}/${t}`})},async init(){const{category:t,item_category:e,main_cat_id:a,tab:s}=this.$route.query;if(t){const e=t.split(",");this.searchParams.category=e[e.length-1]}e&&(this.searchParams.item_category=e.split(",")),this.searchParams.main_cat_id=this.$route.query.main_cat_id,s&&(this.activeName=this.$route.query.tab,this.searchParams.is_warning=!0),this.getCategory(),this.getAllTagLists(),this.getGoodsBranchList()},handleExport(t){"product-info"===t?this.exportItemsData():"product-tag"===t?this.exportItemsTagData():"wxapp-qrcode"===t?this.exportItemsWxappCode("wxa"):"h5-qrcode"===t&&this.exportItemsWxappCode("h5")},async exportItemsData(){const t={...this.searchParams,item_source:"platform"};this.selectionItems.length>0&&(t.item_id=this.selectionItems.map(t=>t.item_id));const{status:e}=await this.$api.goods.exportItemsData(t);e?(this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),this.$export_open((0,l.WZ)()?"supplier_goods":"items")):this.$message.error($t("by46j64","导出失败","lang"))},async exportItemsTagData(){const t={...this.searchParams};this.selectionItems.length>0&&(t.item_id=this.selectionItems.map(t=>t.item_id));const{status:e}=await this.$api.goods.exportItemsTagData(t);e?(this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),this.$export_open("normal_items_tag")):this.$message.error($t("by46j64","导出失败","lang"))},async exportItemsWxappCode(t){const e={...this.searchParams};this.selectionItems.length>0&&(e.item_id=this.selectionItems.map(t=>t.item_id));const{status:a}=await this.$api.goods.exportGoodsCode({...e,source:"item",export_type:t});a?(this.$message.success($t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")),this.$export_open("itemcode")):this.$message.error($t("by46j64","导出失败","lang"))},async updateGoodsSkuPrice({item_id:t,price:e,cost_price:a,market_price:s},i){const r={price:e,cost_price:a,market_price:s};await this.$api.goods.updateGoodsInfo({item_id:t,[i]:r[i],operate_source:(0,l.WZ)()?"supplier":"platform"}),this.$message.success($t("d1spvi4","操作成功","lang"))},async setWarningStore(){await this.$api.goods.getItemWarningStore({store:this.warning_store}),this.$refs.finder.refresh()},addItems(){this.$router.push({path:`${this.$route.path}/editor`})},generatePrice(t){let e=[];for(let a in t)e.push({vip_grade_id:t[a].vip_grade_id,grade_name:t[a].grade_name,mprice:t[a].mprice/100||void 0});return e},async getGoodsBranchList(t=""){this.goodsBranchParams.attribute_name=t;const{list:e}=await this.$api.goods.getGoodsAttr(this.goodsBranchParams);this.goodsBranchList=e},async handleViewSkuInfo(t){this.skuLoading=!0;const{list:e}=await this.$api.goods.getItemsList({item_type:"normal",operate_source:(0,l.WZ)()?"supplier":"platform",item_id:t.item_id,is_sku:!0,page:1,pageSize:1e3});this.itemSkuDrawerTitle=`${$t("cwbp13","商品【","lang")}${t.item_name}】`,this.itemSkuList=e||[],this.showItemSkuDrawer=!0,this.itemSkuList=e,this.skuLoading=!1},checkWdtErpBind(){this.$api.third.getWdtErpSetting().then(t=>{this.isBindWdtErp=t.is_open})},uploadWdtErpItems(){if(0===this.selectionItems.length)return void this.$message({type:"error",message:$t("kvesema","请选择需要同步的商品","lang")});let t={};t={item_id:this.selectionItems.map(t=>t.item_id)},this.$api.goods.uploadWdtErpItems(t).then(t=>{1==t.status?this.$message({type:"success",message:$t("lgxi507","已加入执行队列","lang")}):this.$message({type:"error",message:$t("cz7pg94","执行失败","lang")})})},checkJstErpBind(){this.$api.third.getJstErpSetting().then(t=>{this.isBindJstErp=t.is_open})},uploadJstErpItems(){if(0===this.selectionItems.length)return void this.$message({type:"error",message:$t("kvesema","请选择需要同步的商品","lang")});let t={};t={item_id:this.selectionItems.map(t=>t.item_id)},this.$api.goods.uploadJstErpItems(t).then(t=>{1==t.status?this.$message({type:"success",message:$t("lgxi507","已加入执行队列","lang")}):this.$message({type:"error",message:$t("cz7pg94","执行失败","lang")})})}}},h=g,u=(0,a(81656).A)(h,function(){var t=this,e=t._self._c;return e("SpRouterView",[e("SpPage",[e("SpFilterForm",{attrs:{model:t.searchParams},on:{onSearch:t.onSearch,onReset:t.onSearch}},[e("SpFilterFormItem",{attrs:{prop:"keywords",label:$t("alr0oi5","商品标题:","lang")}},[e("el-input",{attrs:{placeholder:$t("zdpct8b","商品标题或副标题关键词","lang")},model:{value:t.searchParams.keywords,callback:function(e){t.$set(t.searchParams,"keywords",e)},expression:"searchParams.keywords"}})],1),t.IS_SUPPLIER()?t._e():e("SpFilterFormItem",{attrs:{prop:"approve_status",label:$t("akgb645","商品状态:","lang")}},[e("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:t.searchParams.approve_status,callback:function(e){t.$set(t.searchParams,"approve_status",e)},expression:"searchParams.approve_status"}},t._l(t.statusOption,function(t){return e("el-option",{key:t.value,attrs:{label:t.title,size:"mini",value:t.value}})}),1)],1),t.IS_SUPPLIER()?e("SpFilterFormItem",{attrs:{prop:"is_market",label:$t("vhnw4q5","供应状态:","lang")}},[e("el-select",{attrs:{clearable:"",placeholder:$t("l72nr3","请选择","lang")},model:{value:t.searchParams.is_market,callback:function(e){t.$set(t.searchParams,"is_market",e)},expression:"searchParams.is_market"}},[e("el-option",{key:1,attrs:{label:$t("eqsf2","可售","lang"),value:1}}),e("el-option",{key:0,attrs:{label:$t("buay43","不可售","lang"),value:0}})],1)],1):t._e(),e("SpFilterFormItem",{attrs:{prop:"main_cat_id",label:$t("15jaio5","管理分类:","lang")}},[e("el-cascader",{attrs:{placeholder:$t("l72nr3","请选择","lang"),clearable:"",options:t.itemCategoryList,props:{value:"category_id",label:"category_name",checkStrictly:!0}},model:{value:t.searchParams.main_cat_id,callback:function(e){t.$set(t.searchParams,"main_cat_id",e)},expression:"searchParams.main_cat_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"category",label:$t("pfl60n5","销售分类:","lang")}},[e("el-cascader",{attrs:{options:t.categoryList,props:{checkStrictly:!0,label:"category_name",value:"category_id",emitPath:!1},clearable:""},model:{value:t.searchParams.category,callback:function(e){t.$set(t.searchParams,"category",e)},expression:"searchParams.category"}})],1),e("SpFilterFormItem",{attrs:{prop:"templates_id",label:$t("cbau7n5","运费模板:","lang")}},[e("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang"),clearable:""},model:{value:t.searchParams.templates_id,callback:function(e){t.$set(t.searchParams,"templates_id",e)},expression:"searchParams.templates_id"}},t._l(t.templatesList,function(t){return e("el-option",{key:t.template_id,attrs:{label:t.name,value:t.template_id}})}),1)],1),e("SpFilterFormItem",{attrs:{prop:"brand_id",label:$t("cycj33","品牌:","lang")}},[e("el-select",{attrs:{placeholder:$t("eqebqb8","商品/商标关键词","lang"),remote:"",filterable:"",clearable:"","remote-method":t.getGoodsBranchList},model:{value:t.searchParams.brand_id,callback:function(e){t.$set(t.searchParams,"brand_id",e)},expression:"searchParams.brand_id"}},t._l(t.goodsBranchList,function(t){return e("el-option",{key:t.attribute_id,attrs:{label:t.attribute_name,value:t.attribute_id}})}),1)],1),e("SpFilterFormItem",{attrs:{prop:"item_bn",label:$t("u0g1m66","SKU编码:","lang")}},[e("el-input",{attrs:{placeholder:$t("rcpx9b8","请输入SKU编码","lang")},model:{value:t.searchParams.item_bn,callback:function(e){t.$set(t.searchParams,"item_bn",e)},expression:"searchParams.item_bn"}})],1),e("SpFilterFormItem",{attrs:{prop:"goods_bn",label:$t("txp2nd6","SPU编码:","lang")}},[e("el-input",{attrs:{placeholder:$t("rct46y8","请输入SPU编码","lang")},model:{value:t.searchParams.goods_bn,callback:function(e){t.$set(t.searchParams,"goods_bn",e)},expression:"searchParams.goods_bn"}})],1),e("SpFilterFormItem",{attrs:{prop:"regions_id",label:$t("apry225","商品产地:","lang")}},[e("el-cascader",{attrs:{placeholder:$t("l72nr3","请选择","lang"),clearable:"",options:t.regions},model:{value:t.searchParams.regions_id,callback:function(e){t.$set(t.searchParams,"regions_id",e)},expression:"searchParams.regions_id"}})],1),t.IS_SUPPLIER()?t._e():e("SpFilterFormItem",{attrs:{prop:"tag_id",label:$t("alvyvs5","商品标签:","lang")}},[e("el-cascader",{attrs:{size:"small",placeholder:$t("il08k74","选择标签","lang"),options:t.tagList,props:{value:"tag_id",label:"tag_name"},clearable:""},model:{value:t.searchParams.tag_id,callback:function(e){t.$set(t.searchParams,"tag_id",e)},expression:"searchParams.tag_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"is_gift",label:$t("l3vuh3","赠品:","lang")}},[e("el-select",{model:{value:t.searchParams.is_gift,callback:function(e){t.$set(t.searchParams,"is_gift",e)},expression:"searchParams.is_gift"}},[e("el-option",{attrs:{value:void 0,label:$t("en402","全部","lang")}}),e("el-option",{attrs:{value:!0,label:$t("k6n1","是","lang")}}),e("el-option",{attrs:{value:!1,label:$t("gme1","否","lang")}})],1)],1),t.is_pharma_industry?e("SpFilterFormItem",{attrs:{prop:"is_prescription",label:$t("bnpfog4","处方药:","lang")}},[e("el-select",{model:{value:t.searchParams.is_prescription,callback:function(e){t.$set(t.searchParams,"is_prescription",e)},expression:"searchParams.is_prescription"}},[e("el-option",{attrs:{value:"",label:$t("en402","全部","lang")}}),e("el-option",{attrs:{value:"1",label:$t("djefu3","处方药","lang")}}),e("el-option",{attrs:{value:"0",label:$t("jgu8584","非处方药","lang")}})],1)],1):t._e()],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addItems}},[t._v($t("trl3pc6"," 添加商品 ","lang"))]),t.IS_SUPPLIER()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.changeCategory}},[t._v($t("fz87h48"," 更改销售分类 ","lang"))]),t.IS_SUPPLIER()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.changeGoodsLabel}},[t._v($t("dbv9925"," 打标签 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.changeFreightTemplate}},[t._v($t("2uxvo48"," 更改运费模板 ","lang"))]),t.IS_ADMIN()||t.IS_DISTRIBUTOR()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.onBatchSubmitItems}},[t._v($t("u67c9t8"," 批量提交审核 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.changeItemsStore}},[t._v($t("o8dkuy6"," 统一库存 ","lang"))]),t.IS_SUPPLIER()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.batchChangeStore}},[t._v($t("4r8dps6"," 更改状态 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.batchGifts("true")}}},[t._v($t("3quayr6"," 设为赠品 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.batchGifts("false")}}},[t._v($t("og2d437"," 设为非赠品 ","lang"))]),t.IS_SUPPLIER()?e("el-button",{attrs:{type:"primary"},on:{click:()=>t.changeHaltTheSales("stop")}},[t._v($t("cqnla4"," 停售 ","lang"))]):t._e(),t.IS_SUPPLIER()?e("el-button",{attrs:{type:"primary"},on:{click:()=>t.changeHaltTheSales("start")}},[t._v($t("evus24"," 开售 ","lang"))]):t._e(),e("el-dropdown",{on:{command:t.handleImport}},[e("el-button",{attrs:{type:"primary",plain:"",icon:"iconfont icon-daorucaozuo-01"}},[t._v($t("gr2h3"," 导入","lang")),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["merchant"!=t.$store.getters.login_type?e("el-dropdown-item",{attrs:{command:"product-import"}},[t._v($t("4hl9uk6"," 商品导入 ","lang"))]):t._e(),e("el-dropdown-item",{attrs:{command:"stock-import"}},[t._v($t("tcfgge6"," 库存导入 ","lang"))])],1)],1),e("el-dropdown",{on:{command:t.handleExport}},[e("el-button",{attrs:{type:"primary"}},[t._v($t("gr6m3"," 导出","lang")),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"product-info"}},[t._v($t("4fvzzr6"," 商品信息 ","lang"))]),t.IS_SUPPLIER()?t._e():e("el-dropdown-item",{attrs:{command:"product-tag"}},[t._v($t("4jjxpq6"," 商品标签 ","lang"))]),t.IS_SUPPLIER()?t._e():e("el-dropdown-item",{attrs:{command:"wxapp-qrcode"}},[t._v($t("zaknla6"," 小程序码 ","lang"))]),t.VERSION_SHUYUN()||t.IS_SUPPLIER()?t._e():e("el-dropdown-item",{attrs:{command:"h5-qrcode"}},[t._v($t("ht3vec7"," H5二维码 ","lang"))])],1)],1),t.isBindJstErp?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.uploadJstErpItems()}}},[t._v($t("3x49dga"," 上传商品到聚水潭 ","lang"))]):t._e(),t.isBindWdtErp?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.uploadWdtErpItems()}}},[t._v($t("7apsvya"," 上传商品到旺店通 ","lang"))]):t._e(),t.VERSION_STANDARD()&&t.IS_ADMIN()?e("el-dropdown",[e("el-button",{attrs:{type:"primary"}},[t._v($t("bjd62c5"," 同步商品","lang")),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("span",{on:{click:()=>t.syncToShop()}},[t._v($t("cg1w5f5","同步至店铺","lang"))])]),e("el-dropdown-item",[e("span",{on:{click:function(e){return t.syncToShop("all")}}},[t._v($t("iukbnq9"," 同步至所有店铺 ","lang"))])])],1)],1):t._e()],1),e("SpPageUpload"),e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabList,function(a,s){return e("el-tab-pane",{key:s,attrs:{label:a.name,name:a.activeName}},["second"==t.activeName?e("div",{staticClass:"tab-tools"},[e("div",{staticClass:"warn-input"},[e("label",{staticClass:"label text-sm text-normary"},[t._v($t("oxjc2v5","预警数量:","lang"))]),e("el-input",{attrs:{size:"small",value:"warning_store"},model:{value:t.warning_store,callback:function(e){t.warning_store=e},expression:"warning_store"}}),e("el-button",{attrs:{type:"text"},on:{click:t.setWarningStore}},[t._v($t("cp35x4"," 保存 ","lang"))])],1)]):t._e()])}),1),e("SpFinder",{ref:"finder",attrs:{url:t.IS_DISTRIBUTOR()?"/distributor/items":"/goods/items","fixed-row-action":"","row-actions-align":"left","row-actions-width":"160px","other-config":{},setting:t.tableList,hooks:{beforeSearch:t.beforeSearch,afterSearch:t.afterSearch},"row-actions-fixed-align":"left"},on:{"selection-change":t.onSelectionChange}}),e("SpDrawer",{attrs:{title:$t("i5kihh4","设置价格","lang"),width:800,"confirm-text":$t("e32z2","保存","lang")},on:{confirm:t.onSaveMemberPrice},model:{value:t.showMemberPriceDrawer,callback:function(e){t.showMemberPriceDrawer=e},expression:"showMemberPriceDrawer"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.skuLoading,expression:"skuLoading"}],attrs:{border:"",data:t.specItems,height:"100%"}},[e("el-table-column",{attrs:{label:$t("o06w2","规格","lang"),prop:"item_spec_desc","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("e6yyn3","市场价","lang"),prop:"market_price",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,precision:2},on:{change:function(e){return t.updateGoodsSkuPrice(a.row,"market_price")}},model:{value:a.row.market_price,callback:function(e){t.$set(a.row,"market_price",e)},expression:"scope.row.market_price"}})]}}])}),e("el-table-column",{attrs:{label:$t("m8lft3","销售价","lang"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,precision:2},on:{change:function(e){return t.updateGoodsSkuPrice(a.row,"price")}},model:{value:a.row.price,callback:function(e){t.$set(a.row,"price",e)},expression:"scope.row.price"}})]}}])}),e("el-table-column",{attrs:{label:$t("ev2aj3","成本价","lang"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,precision:2},on:{change:function(e){return t.updateGoodsSkuPrice(a.row,"cost_price")}},model:{value:a.row.cost_price,callback:function(e){t.$set(a.row,"cost_price",e)},expression:"scope.row.cost_price"}})]}}])}),e("el-table-column",{attrs:{label:$t("dx1a2","会员","lang")}},t._l(t.grade,function(a,s){return e("el-table-column",{key:s,attrs:{label:a.grade_name},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,precision:2},model:{value:a.row.grade[s].mprice,callback:function(e){t.$set(a.row.grade[s],"mprice",e)},expression:"scope.row.grade[index].mprice"}})]}}],null,!0)})}),1),e("el-table-column",{attrs:{label:$t("aj2k674","付费会员","lang")}},t._l(t.vipGrade,function(a,s){return e("el-table-column",{key:s,attrs:{label:a.grade_name},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,precision:2},model:{value:a.row.vipGrade[s].mprice,callback:function(e){t.$set(a.row.vipGrade[s],"mprice",e)},expression:"scope.row.vipGrade[index].mprice"}})]}}],null,!0)})}),1)],1)],1),e("SpDrawer",{attrs:{title:$t("q6uygg6","设置商品库存","lang"),width:800},on:{confirm:t.onSaveItemStore},model:{value:t.showItemStoreDrawer,callback:function(e){t.showItemStoreDrawer=e},expression:"showItemStoreDrawer"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.skuLoading,expression:"skuLoading"}],attrs:{border:"",data:t.storeItemsList,height:"100%"}},[e("el-table-column",{attrs:{label:$t("o06w2","规格","lang"),prop:"item_spec_desc","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("gl5x2","库存","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",size:"small",min:0},model:{value:a.row.store,callback:function(e){t.$set(a.row,"store",e)},expression:"scope.row.store"}})]}}])})],1)],1),e("SpDialog",{ref:"saleCategoryDialogRef",attrs:{title:$t("xtijtk6","更改销售分类","lang"),form:t.saleCategoryForm,"form-list":t.saleCategoryFormList},on:{onSubmit:t.onSaleCategorySubmit},model:{value:t.saleCategoryDialog,callback:function(e){t.saleCategoryDialog=e},expression:"saleCategoryDialog"}}),e("SpDialog",{ref:"freightTemplateDialogRef",attrs:{title:$t("y8r0gk6","更改运费模板","lang"),form:t.freightTemplateForm,"form-list":t.freightTemplateFormList},on:{onSubmit:t.onFreightTemplateSubmit},model:{value:t.freightTemplateDialog,callback:function(e){t.freightTemplateDialog=e},expression:"freightTemplateDialog"}}),e("SpDialog",{ref:"storeItemDialogRef",attrs:{title:$t("ez542u6","批量修改库存","lang"),form:t.storeItemForm,"form-list":t.storeItemFormList},on:{onSubmit:t.onStoreItemSubmit},model:{value:t.storeItemDialog,callback:function(e){t.storeItemDialog=e},expression:"storeItemDialog"}}),e("SpDialog",{ref:"labelDialogRef",attrs:{title:$t("idef2","标签","lang"),modal:!1,form:t.labelForm,"form-list":t.labelFormList},on:{onSubmit:t.onLabelFormSubmit},model:{value:t.labelDialog,callback:function(e){t.labelDialog=e},expression:"labelDialog"}}),e("el-dialog",{attrs:{title:$t("q6x8p36","设置商品佣金","lang"),width:"600px",visible:t.commissionDialog},on:{"update:visible":function(e){t.commissionDialog=e}}},[e("el-form",{ref:"form",attrs:{model:t.commissionForm,"label-width":"150px"}},[e("el-form-item",{attrs:{label:$t("c355eg7","平台佣金比例:","lang")}},[e("el-input",{staticStyle:{width:"160px"},attrs:{maxlength:"5"},model:{value:t.commissionForm.commission_ratio,callback:function(e){t.$set(t.commissionForm,"commission_ratio",e)},expression:"commissionForm.commission_ratio"}},[e("template",{slot:"append"},[t._v("%")])],2),e("div",{staticClass:"frm-tips"},[t._v($t("m1q513g","* 0-100之间，最多两位小数","lang"))])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.formLoading},on:{click:t.commissionSubmit}},[t._v($t("fmsxgr6"," 保存设置 ","lang"))]),e("el-button",{on:{click:function(e){t.commissionDialog=!1}}},[t._v($t("ev022","取消","lang"))])],1)],1)],1),e("SpDialog",{ref:"sendNumDialogRef",attrs:{title:$t("t6bruz6","更改商品状态","lang"),width:"500px",form:t.batchChangeStateForm,"form-list":t.batchChangeStateFormList},on:{onSubmit:t.onBatchChangeStateSubmit},model:{value:t.batchChangeStateDialog,callback:function(e){t.batchChangeStateDialog=e},expression:"batchChangeStateDialog"}}),e("el-dialog",{attrs:{title:t.sunCodeTitle,visible:t.sunCode,width:"360px"},on:{"update:visible":function(e){t.sunCode=e}}},[e("div",{staticClass:"page-code"},[e("img",{staticClass:"page-code-img",attrs:{src:t.appCodeUrl}}),e("div",{staticClass:"page-btns"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.handleDownload(t.sunCodeTitle)}}},[t._v($t("axjir55"," 下载码 ","lang"))]),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.curPageUrl,expression:"curPageUrl",arg:"copy"}],attrs:{type:"primary",plain:""}},[t._v($t("j66ck06"," 复制链接 ","lang"))])],1)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sunCode=!1}}},[t._v($t("hnjoo3","确 定","lang"))])],1)]),e("el-dialog",{attrs:{title:$t("jdvtpg4","错误信息","lang"),visible:t.errMessageVis,width:"560px"},on:{"update:visible":function(e){t.errMessageVis=e}}},[e("div",{staticClass:"page-code"},[t._v(" "+t._s(t.errMessage)+" ")])]),e("SpDrawer",{attrs:{title:t.itemSkuDrawerTitle,width:800},on:{confirm:()=>{t.showItemSkuDrawer=!1}},model:{value:t.showItemSkuDrawer,callback:function(e){t.showItemSkuDrawer=e},expression:"showItemSkuDrawer"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.skuLoading,expression:"skuLoading"}],attrs:{border:"",data:t.itemSkuList,height:"100%"}},[e("el-table-column",{attrs:{label:$t("o06w2","规格","lang"),prop:"item_spec_desc","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("vlqz5v5","供应商货号","lang"),prop:"supplier_goods_bn","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("1ttci05","sku编码","lang"),prop:"item_bn","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("fvqs9w4","税率编码","lang"),prop:"tax_rate_code","min-width":"120"}}),e("el-table-column",{attrs:{label:$t("le7t2","税率","lang"),prop:"tax_rate","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(`${a.row.tax_rate}%`))])]}}])}),e("el-table-column",{attrs:{label:$t("gl5x2","库存","lang"),prop:"store","min-width":"120"}})],1)],1)],1)],1)},[],!1,null,"3258d700",null).exports}}]);