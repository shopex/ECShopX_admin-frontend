"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1118],{21118:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});a(18111),a(22489),a(61701);var s=a(67088),r=a(54028),l=a(97572),o=a(73306),n=a(79836),i={components:{ResultCpn:l.A,loadingBtn:n.default},data(){return{activeName:"corp",member_type:"",allShow:!0,AllArea:r,processed:"",currentStatus:{resultStatus:"",time:"",info:"",title:""},AllBank:[],area:"",form:{name:"",area:"",business_scope:"",social_credit_code:"",social_credit_code_expires:"",telphone:"",zip_code:"",email:"",legal_person:"",legal_cert_id:"",legal_cert_id_expires:"",legal_mp:"",address:"",attach_file:"",bank_code:"",bank_name:"",bank_acct_type:"1",card_no:"",card_name:"",submit_review:"",isUploadFile:!0,attach_file_name:"",confirm_letter_file:"",confirm_letter_file_name:""},rules:{name:(0,o.XU)($t("aaky9o4","企业名称","lang")),social_credit_code:[(0,o.XU)($t("tqcx9e5","营业执照号","lang")),(0,o.SO)(18)],social_credit_code_expires:{required:!0,message:$t("yk95e08","请选择商户有效期","lang"),trigger:"blur"},area:{type:"array",required:!0,message:$t("2ehoiw5","请选择省市","lang"),trigger:"change"},address:[(0,o.XU)($t("aalamh4","企业地址","lang")),(0,o.SO)(60)],business_scope:(0,o.XU)($t("gjrz7r4","经营范围","lang")),legal_person:[(0,o.XU)($t("e24sm74","法人姓名","lang")),(0,o.SO)(20)],legal_cert_id:[(0,o.XU)($t("lqgz2l6","法人身份证号","lang")),(0,o.SO)(18)],legal_cert_id_expires:{required:!0,message:$t("ozf6b3a","请选择法人证件有效期","lang"),trigger:"blur"},legal_mp:[(0,o.XU)($t("9osov75","法人手机号","lang")),(0,o.SO)(11)],bank_acct_type:[(0,o.XU)($t("fmcbi38","结算银行账户类型","lang"),"change")],bank_name:{required:!0,message:$t("7jvaj76","请输入并选择","lang"),trigger:"blur"},card_name:[(0,o.XU)($t("8bfqpb8","结算银行卡开户名","lang")),(0,o.SO)(20)],card_no:[(0,o.XU)($t("ili2cd7","结算银行卡卡号","lang")),(0,o.SO)(40)],attach_file:{required:!0,message:$t("kvqml3","请上传","lang"),trigger:"change"},confirm_letter_file:{required:!0,message:$t("kvqml3","请上传","lang"),trigger:"change"}},personForm:{user_name:"",tel_no:"",cert_id:"",bank_card_name:"",bank_tel_no:"",bank_card_id:"",bank_cert_id:""},personRules:{user_name:[(0,o.XU)($t("f6s92h4","用户姓名","lang")),(0,o.SO)(20)],tel_no:[(0,o.XU)($t("z3cuew6","用户手机号码","lang")),(0,o.SO)(11)],cert_id:[(0,o.XU)($t("66jz627","用户身份证号码","lang")),(0,o.SO)(18)],bank_card_name:[(0,o.XU)($t("t0hf0d5","开户人姓名","lang")),(0,o.SO)(20)],bank_tel_no:[(0,o.XU)($t("8ytrct7","银行预留手机号","lang")),(0,o.SO)(11)],bank_card_id:[(0,o.XU)($t("jd0njb4","银行账号","lang")),(0,o.SO)(40)],bank_cert_id:[(0,o.XU)($t("qxy5ni7","开户人证件号码","lang")),(0,o.SO)(18)]},isShow_corp:!1,isShow_person:!1,type:"",id:""}},mounted(){this.queryUserStatus()},methods:{async queryUserStatus(){const{audit_state:e,update_time:t,audit_desc:a,member_type:s}=await this.$api.dealerReInfo.userStatus();switch(e){case"D":this.processed=$t("i16p2","未填","lang");break;case"A":this.processed=$t("ggqh2","已填","lang");break;case"B":this.processed=$t("ggqh2","已填","lang"),this.currentStatus={resultStatus:"failed",time:t,info:a,title:$t("gp4n2","开户","lang")};break;case"C":this.processed=$t("ggqh2","已填","lang"),this.currentStatus={resultStatus:"netin",time:t,info:a,title:$t("gp4n2","开户","lang")}}"D"!=e&&(this.allShow=!1),this.member_type=s},submit(){"corp"==this.activeName?this.submitForm("Y","loadingBtn"):this.submitFormPerson("Y","loadingBtn")},submitForm(e,t){this.form.submit_review=e,this.form.isUploadFile=!0,this.$refs.ruleForm.validate(async e=>{if(e)if(this.form.member_id){const{status:e}=await this.$api.adapay.accountUpdateCorp(this.form);e?(this.$message.success($t("cx7dr74","提交成功","lang")),this.currentStatus={resultStatus:"pending",time:"",info:"",title:$t("gp4n2","开户","lang")},this.processed=$t("ggqh2","已填","lang")):this.$message.error($t("fy1g2","失败","lang"))}else try{const{status:e}=await(0,s.createCorp)(this.form);e&&(this.$message.success($t("cx7dr74","提交成功","lang")),this.currentStatus={resultStatus:"pending",time:"",info:"",title:$t("gp4n2","开户","lang")},this.processed=$t("ggqh2","已填","lang"),this.$refs[t].closeLoading())}catch(e){this.$refs[t].closeLoading()}else this.$message.error($t("jpzymz8","请完善您的信息~","lang")),this.$refs.loadingBtn.loading=!1})},submitFormPerson(e,t){this.personForm.submit_review=e,this.$refs.personForm.validate(async e=>{if(!e)return this.$message.error($t("rwg0y99","请完善您的信息哦~","lang")),this.$refs[t].closeLoading(),!1;if(this.personForm.member_id)try{const{status:e}=await this.$api.adapay.accountPersonUpdate(this.personForm);e&&(this.$message.success($t("cx7dr74","提交成功","lang")),this.currentStatus={resultStatus:"pending",time:"",info:"",title:$t("gp4n2","开户","lang")},this.processed=$t("ggqh2","已填","lang")),this.$refs[t].closeLoading()}catch(e){return void this.$refs[t].closeLoading()}else try{const{status:e}=await this.$api.adapay.accountCreatePerson(this.personForm);e&&(this.$message.success($t("cx7dr74","提交成功","lang")),this.currentStatus={resultStatus:"pending",time:"",info:"",title:$t("gp4n2","开户","lang")},this.processed=$t("ggqh2","已填","lang"),this.$refs[t].closeLoading())}catch(e){this.$refs[t].closeLoading()}})},handleAvatarSuccess(e){},handleUpload:function(e){this.form.attach_file_name=e.file.name,this.form.attach_file=e.file},beforeAvatarUpload(e){const t="application/zip"===e.type||"application/x-zip-compressed"===e.type,a=e.size/1024/1024<8;return t||this.$message.error($t("k396rg9","文件类型应为Zip","lang")),a||this.$message.error($t("bi88rhd","上传文件不能超过 8MB!","lang")),t&&a},goback(){this.$router.back(-1)},async processedHandle(){"corp"==this.member_type?(this.form=await this.$api.adapay.accountQueryCorp(),this.processed=$t("i16p2","未填","lang"),this.form.area=[this.form.prov_code,this.form.area_code]):(this.personForm=await this.$api.adapay.accountQueryCorp(),this.processed=$t("i16p2","未填","lang"),this.activeName="person")},async getResult(e,t,a){if(this.id=e,e&&"corp"==a){this.activeName=a,this.isShow_person=!0;const t=await(0,s.checkCorp)(e);this.form=t.data.data;const{area_code:r,prov_code:l,social_credit_code_expires:o,legal_cert_id_expires:n,attach_file_name:i,confirm_letter_file_name:c,bank_code:p,bank_name:m}=t.data.data;this.form.area=[l,r],this.form.attach_file_name=i,this.form.confirm_letter_file_name=c}else if(e&&"person"==a){this.isShow_corp=!0,this.activeName=a;const t=await(0,s.checkPerson)(e);this.personForm=t.data.data}else this.isShow_person=!0,this.isShow_corp=!0,this.activeName="corp"},async querySearch(e,t){this.AllBank=await this.$api.adapay.getBank({bank_name:this.form.bank_name});var a=this.AllBank.map(e=>({value:e.bank_name,bank_code:e.bank_code,id:e.id}));t(e?a.filter(this.createFilter(e)):a)},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},async get_bank(){const e=await(0,s.getBankList)();this.AllBank=e.data.data},handleSelectBank(e){this.form.bank_code=e.bank_code,this.form.bank_name=e.value}}},c=(0,a(81656).A)(i,function(){var e=this,t=e._self._c;return t("SpPage",[e.processed==$t("i16p2","未填","lang")?t("div",{staticClass:"zyk_page_register_Info_edit"},[t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["corp"==e.member_type||e.allShow?t("el-tab-pane",{attrs:{name:"corp",label:$t("dv7d2","企业","lang")}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("aak3on4","企业信息","lang"))])]),t("div",{staticClass:"content"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aaky9o4","企业名称","lang"),prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("tqcx9e5","营业执照号","lang"),prop:"social_credit_code"}},[t("el-input",{model:{value:e.form.social_credit_code,callback:function(t){e.$set(e.form,"social_credit_code",t)},expression:"form.social_credit_code"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("7perai6","商户有效日期","lang"),prop:"social_credit_code_expires"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyyMMdd",placeholder:$t("ikzrh64","选择日期","lang")},model:{value:e.form.social_credit_code_expires,callback:function(t){e.$set(e.form,"social_credit_code_expires",t)},expression:"form.social_credit_code_expires"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aaqou94","企业电话","lang"),prop:"telphone"}},[t("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aav9vg4","企业邮箱","lang"),prop:"email"}},[t("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("pb1k2","邮编","lang"),prop:"zip_code"}},[t("el-input",{model:{value:e.form.zip_code,callback:function(t){e.$set(e.form,"zip_code",t)},expression:"form.zip_code"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("crghzd4","所在省市","lang"),prop:"area"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.AllArea,clearable:"",props:{value:"value",label:"title",children:"cities"}},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aalamh4","企业地址","lang"),prop:"address"}},[t("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:$t("gjrz7r4","经营范围","lang"),prop:"business_scope"}},[t("el-input",{attrs:{maxlength:"500","show-word-limit":"",type:"textarea",placeholder:$t("2jbrwj5","请输入内容","lang"),rows:"7"},model:{value:e.form.business_scope,callback:function(t){e.$set(e.form,"business_scope",t)},expression:"form.business_scope"}})],1)],1)],1)],1)]),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("e2365v4","法人信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("e24sm74","法人姓名","lang"),prop:"legal_person"}},[t("el-input",{model:{value:e.form.legal_person,callback:function(t){e.$set(e.form,"legal_person",t)},expression:"form.legal_person"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("yimd5g7","法人身份证号码","lang"),prop:"legal_cert_id"}},[t("div",{staticClass:"flex"},[t("el-input",{model:{value:e.form.legal_cert_id,callback:function(t){e.$set(e.form,"legal_cert_id",t)},expression:"form.legal_cert_id"}}),t("el-tooltip",{attrs:{content:$t("5nmtrnb","身份证信息字母X需大写","lang"),placement:"top-end",effect:"light"}},[t("i",{staticClass:"el-icon-warning-outline"})])],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("g89uny6","法人手机号码","lang"),prop:"legal_mp"}},[t("el-input",{model:{value:e.form.legal_mp,callback:function(t){e.$set(e.form,"legal_mp",t)},expression:"form.legal_mp"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("mz0m2u7","法人证件有效期","lang"),prop:"legal_cert_id_expires"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyyMMdd",placeholder:$t("ikzrh64","选择日期","lang")},model:{value:e.form.legal_cert_id_expires,callback:function(t){e.$set(e.form,"legal_cert_id_expires",t)},expression:"form.legal_cert_id_expires"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("xtucf76","结算账户信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("fmcbi38","结算银行账户类型","lang"),prop:"bank_acct_type"}},[t("el-radio-group",{model:{value:e.form.bank_acct_type,callback:function(t){e.$set(e.form,"bank_acct_type",t)},expression:"form.bank_acct_type"}},[t("el-radio",{attrs:{label:"1"}},[e._v($t("g39v2","对公","lang"))]),t("el-radio",{attrs:{label:"2"}},[e._v($t("gb8o2","对私","lang"))])],1),t("el-tooltip",{style:{"margin-left":"30px"},attrs:{content:$t("8f0qh6b","提现到账银行卡账户类型","lang"),placement:"top-end",effect:"light"}},[t("i",{staticClass:"el-icon-warning-outline"})])],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("pvo0o59","结算银行卡所属银行","lang"),prop:"bank_name"}},[t("div",{staticClass:"flex"},[t("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-search","fetch-suggestions":e.querySearch,placeholder:$t("ey6seb7","请输入选择内容","lang")},on:{select:e.handleSelectBank},model:{value:e.form.bank_name,callback:function(t){e.$set(e.form,"bank_name",t)},expression:"form.bank_name"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("8bfqpb8","结算银行卡开户名","lang"),prop:"card_name"}},[t("el-input",{model:{value:e.form.card_name,callback:function(t){e.$set(e.form,"card_name",t)},expression:"form.card_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("yywq5s6","结算银行卡号","lang"),prop:"card_no"}},[t("el-input",{model:{value:e.form.card_no,callback:function(t){e.$set(e.form,"card_no",t)},expression:"form.card_no"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("altlu64","其他信息","lang"))])]),t("div",{staticClass:"other_content"},[t("el-form-item",{attrs:{label:$t("a6nnrc4","上传附件","lang"),prop:"attach_file"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"","show-file-list":!1,action:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"http-request":e.handleUpload,multiple:!1}},[t("i",{staticClass:"el-icon-upload"}),e.form.attach_file_name?t("div",[e._v(e._s(e.form.attach_file_name))]):t("div",{staticClass:"el-upload__text"},[e._v($t("39e3899","将文件拖到此处，或","lang")),t("em",[e._v($t("ek7w3c4","点击上传","lang"))])])])],1),t("el-form-item",[t("div",{staticClass:"opload_rules"},[t("p",[e._v($t("uowr8s6","内容须包括：","lang"))]),t("p",[e._v($t("tg5n26d","营业执照：三证合一证件照；","lang"))]),t("p",[e._v($t("a81endn","法人信息：法人身份证正面照、法人身份证反面照；","lang"))]),t("p",[e._v($t("el9mxtf","结算账户信息：开户银行许可证照","lang"))]),t("p",[e._v($t("3nz3gqk","请确保上传的图片信息清晰、准确、一致性；","lang"))]),t("p",[e._v($t("1l3tbpo","请压缩为Zip文件进行上传，整包最大限制为8M。","lang"))])])])],1)])],1)],1):e._e(),"person"==e.member_type||e.allShow?t("el-tab-pane",{attrs:{name:"person",label:$t("dq6o2","个人","lang")}},[t("el-form",{ref:"personForm",staticClass:"demo-ruleForm",attrs:{model:e.personForm,"label-width":"130px",rules:e.personRules}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("biyzkw4","基本信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("f6s92h4","用户姓名","lang"),prop:"user_name"}},[t("el-input",{model:{value:e.personForm.user_name,callback:function(t){e.$set(e.personForm,"user_name",t)},expression:"personForm.user_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("z3cuew6","用户手机号码","lang"),prop:"tel_no"}},[t("div",{staticClass:"flex"},[t("el-input",{model:{value:e.personForm.tel_no,callback:function(t){e.$set(e.personForm,"tel_no",t)},expression:"personForm.tel_no"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("66jz627","用户身份证号码","lang"),prop:"cert_id"}},[t("el-input",{model:{value:e.personForm.cert_id,callback:function(t){e.$set(e.personForm,"cert_id",t)},expression:"personForm.cert_id"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("xtucf76","结算账户信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("t0hf0d5","开户人姓名","lang"),prop:"bank_card_name"}},[t("el-input",{model:{value:e.personForm.bank_card_name,callback:function(t){e.$set(e.personForm,"bank_card_name",t)},expression:"personForm.bank_card_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("8ytrct7","银行预留手机号","lang"),prop:"bank_tel_no"}},[t("div",{staticClass:"flex"},[t("el-input",{model:{value:e.personForm.bank_tel_no,callback:function(t){e.$set(e.personForm,"bank_tel_no",t)},expression:"personForm.bank_tel_no"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("jd0njb4","银行账号","lang"),prop:"bank_card_id"}},[t("el-input",{model:{value:e.personForm.bank_card_id,callback:function(t){e.$set(e.personForm,"bank_card_id",t)},expression:"personForm.bank_card_id"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("qxy5ni7","开户人证件号码","lang"),prop:"bank_cert_id"}},[t("el-input",{model:{value:e.personForm.bank_cert_id,callback:function(t){e.$set(e.personForm,"bank_cert_id",t)},expression:"personForm.bank_cert_id"}})],1)],1)],1)],1),t("el-form-item",{staticStyle:{"text-align":"center",margin:"50px 0","margin-right":"130px"}})],1)],1):e._e(),t("div",{staticStyle:{"text-align":"center",margin:"50px 0"}},[t("loading-btn",{ref:"loadingBtn",attrs:{size:"medium",type:"primary",text:$t("cx6emj4","提交审核","lang")},on:{clickHandle:e.submit}})],1)],1)],1):e._e(),e.processed==$t("ggqh2","已填","lang")?t("Result-cpn",{attrs:{"current-status":e.currentStatus},on:{processedHandle:e.processedHandle}}):e._e()],1)},[],!1,null,"51913318",null).exports}}]);