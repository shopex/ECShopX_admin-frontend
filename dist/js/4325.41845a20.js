"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4325],{14325:function(t,a,e){e.r(a),e.d(a,{default:function(){return i}});var s=e(95353),l=e(5134),n={data(){return{statusList:[{name:$t("kxfehl5","提现待处理","lang"),value:"apply"},{name:$t("d2n3mz4","提现拒绝","lang"),value:"reject"},{name:$t("d2mq9b4","提现成功","lang"),value:"success"},{name:$t("ky9b795","提现处理中","lang"),value:"process"},{name:$t("d2ljhw4","提现失败","lang"),value:"failed"}],activeName:"first",total_count:0,textarea:"",dialog:!1,canceldialog:!1,applyText:"",pageLimit:10,detail:{},payDialog:!1,payList:[],cashWithdrawalRebate:0,loading:!1,params:{page:1,pageSize:20,mobile:"",status:""},list:[{}],count:{all:0,success:0,apply:0,userCount:0}}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.getList()},methods:{onSearch(){this.params.page=1,this.getList()},onReset(){this.params={page:1,pageSize:20,mobile:"",status:""},this.getList()},handleCurrentChange(t){this.params.page=t,this.getList()},dialogCancel(t){this.canceldialog=!0,this.detail=t},numberSearch(t){this.params.page=1,this.getList()},statusSelectHandle(){this.params.page=1,this.getList()},actionProcessCashWithdrawal(t){if("reject"!=t||this.textarea){if("reject"==t)var a={process_type:t,remarks:this.textarea};else a={process_type:t};(0,l.checkWithdrawal)(this.detail.id,a).then(a=>{this.canceldialog=!1,this.dialog=!1,this.getList(),"reject"==t?this.$message({type:"success",message:$t("5f262w8","拒绝佣金提现成功","lang")}):this.$message({type:"success",message:$t("cumx3u4","打款成功","lang")})})}else this.$message({type:"error",message:$t("b76tf99","请输入拒绝提现原因","lang")})},dialogOpen(t){this.dialog=!0,this.detail=t,this.applyText=$t("t3sbrh9","推广员申请提现佣金","lang")+t.money/100+$t("g1v1","元","lang"),(0,l.withdrawalStatistics)({user_id:t.user_id}).then(t=>{this.cashWithdrawalRebate=Number(t.data.data.cashWithdrawalRebate)+Number(t.data.data.freezeCashWithdrawalRebate)})},dialogPayInfo(t){this.payDialog=!0,this.detail=t,(0,l.withdrawalPayinfo)(t.id).then(t=>{this.payList=t.data.data.list})},getList(){this.loading=!0,(0,l.withdrawalApplications)(this.params).then(t=>{t.data.data.list&&(this.list=t.data.data.list,this.total_count=t.data.data.total_count,this.count=t.data.data.count),this.loading=!1})}}},i=(0,e(81656).A)(n,function(){var t=this,a=t._self._c;return a("SpPage",{staticClass:"page-withdraw"},[a("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onSearch}},[a("SpFilterFormItem",{attrs:{prop:"status",label:""}},[a("el-select",{attrs:{clearable:"",placeholder:$t("kulnjf5","提现状态 ","lang")},model:{value:t.params.status,callback:function(a){t.$set(t.params,"status",a)},expression:"params.status"}},t._l(t.statusList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1),a("SpFilterFormItem",{attrs:{prop:"mobile",label:""}},[a("el-input",{attrs:{placeholder:$t("ewbd43","手机号","lang")},model:{value:t.params.mobile,callback:function(a){t.$set(t.params,"mobile",a)},expression:"params.mobile"}})],1)],1),a("el-card",[a("div",{staticClass:"time-box basic"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[t._v($t("amatqo4","佣金总额","lang"))]),t._v("  "),a("span",[t._v("¥"+t._s(t.count.all/100))])]),a("el-col",{attrs:{span:6}},[a("div",[t._v($t("p8qhec5","已提现总额","lang"))]),t._v("  "),a("span",[t._v("¥"+t._s(t.count.success/100))])]),a("el-col",{attrs:{span:6}},[a("div",[t._v($t("u1kw6r5","待处理金额","lang"))]),t._v("  "),a("span",[t._v("¥"+t._s(t.count.apply/100))])]),a("el-col",{attrs:{span:6}},[a("div",[t._v($t("8goykm6","申请提现人数","lang"))]),t._v("  "),a("span",[t._v(t._s(t.count.userCount))])])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,height:t.wheight-150}},[a("el-table-column",{attrs:{prop:"created",label:$t("fd5ujm4","申请时间","lang"),"min-width":"84"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("datetime")(e.row.created,"YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{label:$t("cunlz54","打款方式","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["wechat"===e.row.pay_type?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v($t("gpo32","微信","lang"))]):t._e(),"alipay"===e.row.pay_type?a("el-tag",{attrs:{size:"mini"}},[t._v($t("f7gac3","支付宝","lang"))]):t._e(),"hfpay"===e.row.pay_type?a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v($t("iult2","汇付","lang"))]):t._e(),"bankcard"===e.row.pay_type?a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v($t("jubs7p5"," 银行卡 ","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"mobile",label:$t("tdurnr6","推广员手机号","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.mobile))])]}}])}),a("el-table-column",{attrs:{label:$t("8gd9n46","申请提现金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.money/100)+" ")]),t._v($t("ehct3"," 元 ","lang"))]}}])}),a("el-table-column",{attrs:{prop:"status",label:$t("d2pmuj4","提现状态","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["apply"==e.row.status?a("el-tag",{attrs:{type:"primary",size:"mini"}},[t._v($t("xzrry17"," 提现待处理 ","lang"))]):t._e(),"process"==e.row.status?a("el-tag",{attrs:{type:"warning",size:"mini"}},[t._v($t("xa0lud7"," 提现处理中 ","lang"))]):t._e(),"success"==e.row.status?a("el-tag",{attrs:{type:"success",size:"mini"}},[t._v($t("5sjjhg6"," 提现完成 ","lang"))]):t._e(),"reject"==e.row.status?a("el-tag",{attrs:{type:"info",size:"mini"}},[t._v($t("d2n3mz4","提现拒绝","lang"))]):t._e(),"failed"==e.row.status?a("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v($t("d2ljhw4","提现失败","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{label:$t("cuu2i84","打款记录","lang"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-document",type:"text"},on:{click:function(a){return t.dialogPayInfo(e.row)}}},[t._v($t("chc9io6"," 打款记录 ","lang"))])]}}])}),a("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return["reject"==e.row.status?a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{size:"mini",type:"text"}},[a("el-popover",{ref:"popover",attrs:{placement:"top",width:"400",trigger:"click"}},[a("el-input",{attrs:{type:"textarea",rows:6,disabled:!0,value:e.row.remarks}})],1),a("i",{staticClass:"el-icon-warning mark"}),t._v($t("8ao5rg6"," 拒绝原因 ","lang"))],1):t._e(),"failed"==e.row.status?a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{size:"mini",type:"text"}},[a("el-popover",{ref:"popover",attrs:{placement:"top",width:"400",trigger:"click"}},[a("el-input",{attrs:{type:"textarea",rows:6,disabled:!0,value:e.row.remarks}})],1),a("i",{staticClass:"el-icon-warning mark"}),t._v($t("qvxhm36"," 失败原因 ","lang"))],1):t._e(),"apply"==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.dialogOpen(e.row)}}},[t._v($t("fh4wl4"," 打款 ","lang"))]):t._e(),"apply"==e.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return t.dialogCancel(e.row)}}},[t._v($t("fn3854"," 拒绝 ","lang"))]):t._e()]}}])})],1),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.params.page,total:t.total_count,"page-size":t.params.pageSize},on:{"current-change":t.handleCurrentChange,"size-change":t.getList,"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"update:pageSize":function(a){return t.$set(t.params,"pageSize",a)},"update:page-size":function(a){return t.$set(t.params,"pageSize",a)}}})],1)],1),a("el-dialog",{attrs:{title:$t("cuu2i84","打款记录","lang"),visible:t.payDialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.payDialog=a}}},[a("el-table",{attrs:{data:t.payList}},[a("el-table-column",{attrs:{prop:"update_time",label:$t("hwbe2","日期","lang"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("datetime")(e.row.update_time,"YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"amount",label:$t("d2jwdq4","提现佣金","lang"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.amount/100)+" ")]),t._v($t("ehct3"," 元 ","lang"))]}}])}),a("el-table-column",{attrs:{prop:"status",label:$t("ae9i414","付款状态","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["NOT_PAY"==e.row.status?a("span",[t._v($t("du2tyo5"," 未付款 ","lang"))]):t._e(),"PAYING"==e.row.status?a("span",[t._v($t("dc4i0u5"," 打款中 ","lang"))]):t._e(),"SUCCESS"==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v($t("hsfu1h6"," 付款成功 ","lang"))]):t._e(),"FAIL"==e.row.status?a("span",[t._v($t("htgnne6"," 付款失败 ","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"error_desc",label:$t("rm206d6","付款失败原因","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.error_desc?a("span",[t._v(t._s(e.row.error_desc))]):a("span",[t._v(" - ")])]}}])})],1),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.payDialog=!1}}},[t._v($t("eod62","关闭","lang"))])],1)],1),a("el-dialog",{attrs:{title:$t("czryaz4","拒绝提现","lang"),visible:t.canceldialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.canceldialog=a}}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:$t("kjdze37","请输入拒绝原因","lang")},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}}),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.canceldialog=!1}}},[t._v($t("b175ep4","取消操作","lang"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.actionProcessCashWithdrawal("reject")}}},[t._v($t("6ud6xr6"," 确认拒绝 ","lang"))])],1)],1),a("el-dialog",{attrs:{title:$t("d2quhi4","提现确认","lang"),visible:t.dialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.dialog=a}}},[t.detail.money>t.cashWithdrawalRebate?a("el-alert",{attrs:{title:$t("m04527i","账户异常，申请提现金额大于可提现金额","lang"),description:$t("a1opmyk","不可进行打款操作，请联系服务商查看详情。","lang"),closable:!1,type:"error","show-icon":""}}):t._e(),"wechat"===t.detail.pay_type?a("el-alert",{attrs:{title:$t("cemj5q4","微信打款","lang"),description:$t("sql7ykm","微信打款方式，将直接通过微信账号打款到推广员","lang"),closable:!1,type:"info","show-icon":""}}):t._e(),"alipay"===t.detail.pay_type?a("el-alert",{attrs:{title:$t("pjdxnv7","支付宝线下打款","lang"),description:$t("jeip34m","请通过线下打款方式打款，此处不会进行实际打款","lang"),closable:!1,type:"info","show-icon":""}}):t._e(),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},["wechat"===t.detail.pay_type?a("el-tag",[t._v($t("cemj5q4","微信打款","lang"))]):t._e(),"alipay"===t.detail.pay_type?a("el-tag",[t._v($t("pjdxnv7","支付宝线下打款","lang"))]):t._e(),a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.detail.account_name)+" - "+t._s(t.detail.mobile))])],1),"alipay"===t.detail.pay_type?a("div",{staticClass:"text item"},[a("span",[t._v($t("rdltsv7","支付宝账号姓名","lang"))]),a("span",{staticStyle:{"font-size":"26px"}},[t._v(t._s(t.detail.account_name))])]):t._e(),"alipay"===t.detail.pay_type?a("div",{staticClass:"text item"},[a("span",[t._v($t("k8233v5","支付宝账号","lang"))]),a("span",{staticStyle:{"font-size":"26px"}},[t._v(t._s(t.detail.pay_account))])]):t._e(),a("div",{staticClass:"text item"},[a("span",[t._v($t("4vi0d96","可提现佣金 ","lang"))]),a("span",{staticStyle:{"font-size":"26px",color:"red"}},[t._v(t._s(t.cashWithdrawalRebate/100))]),t._v($t("ehct3"," 元 ","lang"))]),a("div",{staticClass:"text item"},[t._v($t("5qsbyc6"," 申请提现 ","lang")),a("span",{staticStyle:{"font-size":"26px",color:"red"}},[t._v(t._s(t.detail.money/100))]),t._v($t("ehct3"," 元 ","lang"))])]),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.dialog=!1}}},[t._v($t("b175ep4","取消操作","lang"))]),t.detail.money<=t.cashWithdrawalRebate?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.actionProcessCashWithdrawal("argee")}}},[t._v($t("1gtcos8"," 打款到推广员 ","lang"))]):t._e()],1)],1)],1)},[],!1,null,"ea47dc8e",null).exports}}]);