"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7119],{37119:function(t,a,i){i.r(a),i.d(a,{default:function(){return l}});var o=i(77944),n=(i(50002),i(87378)),e=i(43224),r={components:{imgPicker:n.default,imgBox:e.A},data(){return{activeName:"first",loading:!1,form:{logo:"",intro:"",brand_name:"",background:""},textarea:"",pic:"",remnant:0,fileList:[],imgDialog:!1,imgDialogLoginBg:!1,isGetImage:!1}},mounted(){(0,o.getSettingWxShops)().then(t=>{this.form.logo=t.data.data.logo,this.pic=this.wximageurl+t.data.data.logo,this.form.intro=t.data.data.intro,this.form.brand_name=t.data.data.brand_name,this.form.background=t.data.data.background,this.remnant=(t.data.data.intro||"").length})},methods:{onSubmit(){let t={};if(this.loading=!0,!this.form.brand_name||!this.form.brand_name.trim())return this.$message.error($t("mem2q47","请输入商城名称","lang")),void(this.loading=!1);t={intro:this.form.intro,logo:this.form.logo,brand_name:this.form.brand_name,background:this.form.background},(0,o.putSettingWxShops)(t).then(t=>{if(!t.data.data)return this.$message.error($t("umunspj","配置信息失败，请确认是否正确填写内容！","lang")),this.loading=!1,!1;this.$message({message:$t("elnrk89","保存配置信息成功！","lang"),type:"success"}),this.loading=!1,this.$store.dispatch("setSysLogo",this.form.logo)})},countInput(){this.remnant=this.form.intro.length},handleImgChange(t){this[t]=!0,this.isGetImage=!0},pickImg(t){this.form.logo=t.url,this.imgDialog=!1},pickImgLoginBg(t){this.form.background=t.url,this.imgDialogLoginBg=!1},closeImgDialog(t){this[t]=!1}}},l=(0,i(81656).A)(r,function(){var t=this,a=t._self._c;return a("SpPage",[t.VERSION_SHUYUN()?t._e():a("SpPlatformTip",{attrs:{h5:"",app:"",alipay:""}}),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"100px"}},[a("div",{staticClass:"section-body"},[a("el-form-item",{attrs:{label:$t("b4gy4r4","商城名称","lang")}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"text"},model:{value:t.form.brand_name,callback:function(a){t.$set(t.form,"brand_name",a)},expression:"form.brand_name"}}),t._v(" "+t._s(t.VERSION_SHUYUN()?$t("t6lm9lf","（注：商城名称展示到小程序端）","lang"):"")+" ")],1),a("el-form-item",{attrs:{label:$t("b4nf6b4","商城简介","lang")}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",maxlength:120,rows:6,placeholder:$t("meflok7","请输入商城简介","lang")},on:{input:t.countInput},model:{value:t.form.intro,callback:function(a){t.$set(t.form,"intro",a)},expression:"form.intro"}}),a("div",{staticClass:"content-right muted"},[t._v(t._s(t.remnant)+"/120")])],1)],1)],1),a("el-form-item",{attrs:{label:$t("onfok36","商城Logo","lang")}},[a("imgBox",{attrs:{"img-url":t.form.logo,inline:""},on:{click:function(a){return t.handleImgChange("imgDialog")}}}),a("imgPicker",{attrs:{"dialog-visible":t.imgDialog,"sc-status":t.isGetImage},on:{chooseImg:t.pickImg,closeImgDialog:function(a){return t.closeImgDialog("imgDialog")}}}),t._v($t("vu4kmzj"," （ 推荐尺寸:147*46px ） ","lang"))],1),a("el-form-item",{attrs:{label:$t("kzbnz46","登录页背景图","lang")}},[a("imgBox",{attrs:{"img-url":t.form.background,inline:""},on:{click:function(a){return t.handleImgChange("imgDialogLoginBg")}}}),a("imgPicker",{attrs:{"dialog-visible":t.imgDialogLoginBg,"sc-status":t.isGetImage},on:{chooseImg:t.pickImgLoginBg,closeImgDialog:function(a){return t.closeImgDialog("imgDialogLoginBg")}}}),t._v($t("qfvhpyl"," （ 推荐尺寸:1920*690px ） ","lang"))],1)],1),a("div",{staticClass:"section-footer content-center"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v($t("cp35x4"," 保存 ","lang"))])],1)])],1)},[],!1,null,null,null).exports}}]);