"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7461],{87461:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=[function(){var t=this._self._c;return t("div",[t("img",{attrs:{src:"/images/logo.png",alt:"logo",width:"140"}}),t("div",{staticClass:"text-[18px] mt-8 text-[#333]"},[this._v($t("l2pgx3","请登录","lang"))])])}],o=(s(64979),s(81125)),n=s(56510),a=s(26456);const[l,r]=(0,o.mN)({formItems:[{label:$t("hmxge3","用户名","lang"),component:"Input",componentProps:{placeholder:$t("7grhuz6","请输入用户名","lang")},fieldName:"account",rules:[{required:!0,message:$t("7grhuz6","请输入用户名","lang")}]},{label:$t("g9ob2","密码","lang"),component:"Input",componentProps:{type:"password",placeholder:$t("g9ob2","密码","lang")},fieldName:"pwd",rules:[{required:!0,message:$t("2j9vj05","请输入密码","lang")}]}],hideFieldRequiredMark:!0,showDefaultActions:!1,labelInline:!0});var c={name:"Login",components:{LoginForm:l},data(){return{formApi:r,loading:!1,recoderNumber:n.A.recoder_number}},computed:{systemTitle:()=>(0,a.KY)()},async mounted(){const{level:t}=await this.$api.login.getAuthorizeLeve();"img_code"===t&&await this.$api.login.getImageCode({type:"login"})},methods:{async handleLogin(){await this.formApi.validate();const t=this.formApi.getFieldsValue();this.loading=!0;try{const{token:e}=await this.$api.auth.login({username:t.account,password:t.pwd,logintype:"distributor"});if(e){const t=e.split("."),{menu_type:s}=JSON.parse(atob(t[1]));this.$store.commit("system/setVersionMode",{versionMode:s}),this.$store.commit("user/setToken",{token:e}),this.$store.commit("user/setLoginType",{login_type:"distributor"}),this.$message.success($t("fcewjt4","登录成功","lang")),await this.$store.dispatch("user/fetchAccessMenus"),await this.$store.dispatch("user/fetchAccountInfo"),setTimeout(()=>{window.location.href="/shopadmin/shoplist"},700)}}catch(t){}finally{this.loading=!1}},handleError(t){this.$message.error($t("x6g2vcc","表单验证失败，请检查输入","lang"))},handleReset(){this.$message.info($t("nzmd0a5","表单已重置","lang"))}}},d=(0,s(81656).A)(c,function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white relative flex flex-col justify-center"},[t._m(0),e("div",{staticClass:"mt-8"},[e("LoginForm",{ref:"formRef"})],1),e("div",{staticClass:"mt-8 text-right"},[e("el-button",{staticClass:"h-[40px] rounded-[16px] !bg-black !text-white",attrs:{round:"",loading:t.loading},on:{click:t.handleLogin}},[t._v($t("ide6e4"," 登录 ","lang"))])],1)])},i,!1,null,"b60b75fe",null).exports}}]);