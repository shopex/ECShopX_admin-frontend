"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1985],{61985:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var s=a(95353),o=(a(57270),a(5748)),l=a(71196),r=a(77825),n={components:{sideBar:l.A},mixins:[r.v8],data(){return{show_sideBar:!1,isEdit:!1,tagsList:[],loading:!1,total_count:0,params:{tag_name:"",tag_source:"all"},options:[{value:"all",label:$t("en402","全部","lang")},{value:"distributor",label:$t("cjtska4","店铺标签","lang")},{value:"platform",label:$t("c9nuus4","平台标签","lang")}],form:{tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:"",front_show:"0"},predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]}},computed:{...(0,s.L8)(["wheight"])},mounted(){"distributor"==this.$store.getters.login_type&&(this.params.tag_source=""),this.fetchList()},methods:{selectSearch(t){this.params.tag_source=t},addTemplate(){this.show_sideBar=!0,this.form={tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:"",front_show:"0"}},editAction(t,e){this.form=e,this.show_sideBar=!0},preview(t,e){this.dialogVisible=!0,this.dataInfo=e},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.params};const s=await(0,o.getTagList)(a);this.tagsList=s.data.data.list,this.total_count=s.data.data.total_count,this.loading=!1},deleteAction(t,e){this.$confirm($t("xvw7g9f","此操作将删除数据, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,o.deleteTag)(e.tag_id).then(e=>{this.tagsList.splice(t,1),this.$message({message:$t("azeh8z4","删除成功","lang"),type:"success",duration:5e3})}).catch(()=>{this.$message({type:"error",message:$t("azdahk4","删除失败","lang")})})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getTaskTime(t){let e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;let o=e.getDate();return o=o<10?"0"+o:o,a+"-"+s+"-"+o},getTimeStr(t){return this.getTaskTime(new Date(1e3*parseInt(t)))},saveTagData(){this.form.tag_id?(0,o.updateTag)(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.show_sideBar=!1,this.fetchList())}):(0,o.saveTag)(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.show_sideBar=!1,this.fetchList())})}}},i=(0,a(81656).A)(n,function(){var t=this,e=t._self._c;return e("SpPage",[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onSearch}},[e("SpFilterFormItem",{attrs:{prop:"tag_name",label:$t("dmu0kk4","标签名:","lang")}},[e("el-input",{attrs:{placeholder:$t("7ikfar6","请输入标签名","lang")},model:{value:t.params.tag_name,callback:function(e){t.$set(t.params,"tag_name",e)},expression:"params.tag_name"}})],1),"distributor"!=this.$store.getters.login_type?e("SpFilterFormItem",{attrs:{prop:"tag_source",label:$t("3chsrx5","标签类型:","lang")}},[e("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.selectSearch},model:{value:t.params.tag_source,callback:function(e){t.$set(t.params,"tag_source",e)},expression:"params.tag_source"}},t._l(t.options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1):t._e()],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addTemplate}},[t._v($t("jm9d2v8"," 添加商品标签 ","lang"))])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.tagsList,"element-loading-text":$t("go5gpa5","数据加载中","lang")}},[e("el-table-column",{attrs:{prop:"tag_id",label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editAction(a.$index,a.row)}}},[t._v($t("juz394"," 编辑 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteAction(a.$index,a.row)}}},[t._v($t("db22k4"," 删除 ","lang"))])]}}])}),e("el-table-column",{attrs:{prop:"tag_name",label:$t("dmuom24","标签名称","lang"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"tag",style:{color:a.row.font_color,background:a.row.tag_color}},[t._v(" "+t._s(a.row.tag_name)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"distributor_name",label:$t("cjqdxi4","店铺名称","lang")}}),e("el-table-column",{attrs:{prop:"description",label:$t("dmxhg84","标签描述","lang")}})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1),e("sideBar",{attrs:{visible:t.show_sideBar,title:$t("vgfeps6","新增商品标签","lang")},on:{"update:visible":function(e){t.show_sideBar=e}}},[e("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"100px"}},[e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dmuom24","标签名称","lang"),prop:"tag_name",rules:[{required:!0,message:$t("jw8c8t7","请输入标签名称","lang"),trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:$t("jw8c8t7","请输入标签名称","lang")},model:{value:t.form.tag_name,callback:function(e){t.$set(t.form,"tag_name",e)},expression:"form.tag_name"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn43014","标签说明","lang")}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:$t("jvyxuu7","请输入标签说明","lang")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn6e3x4","标签颜色","lang")}},[e("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.tag_color,callback:function(e){t.$set(t.form,"tag_color",e)},expression:"form.tag_color"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("bv3kfm4","字体颜色","lang")}},[e("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.font_color,callback:function(e){t.$set(t.form,"font_color",e)},expression:"form.font_color"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("aqhq9r4","前台显示","lang")}},[e("el-radio-group",{model:{value:t.form.front_show,callback:function(e){t.$set(t.form,"front_show",e)},expression:"form.front_show"}},[e("el-radio",{attrs:{label:"1"}},[t._v($t("g469w4"," 显示 ","lang"))]),e("el-radio",{attrs:{label:"0"}},[t._v($t("n93tt4"," 隐藏 ","lang"))])],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveTagData}},[t._v($t("pam6x6"," 确定保存 ","lang"))])],1)],1)],1)},[],!1,null,"5411881a",null).exports}}]);