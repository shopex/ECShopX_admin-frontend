"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2522],{92522:function(e,a,s){s.r(a),s.d(a,{default:function(){return n}});s(18111),s(61701);var t=s(33318),l=s(26456),r={data(){return{name:"",mobile:"",extraData:{},approve_status:0,btnActions:[{name:$t("past2","通过","lang"),key:"resolve"},{name:$t("qqx72","驳回","lang"),key:"reject"}],resloveDialog:!1,resloveForm:{approve_status:1,refuse_reason:""},resloveFormList:[{label:$t("czp1gs4","拒绝原因","lang"),key:"refuse_reason",type:"input",placeholder:$t("kjdze37","请输入拒绝原因","lang"),validator:(e,a,s)=>{2!=this.resloveForm.approve_status||a?s():s(new Error($t("adohlc4","不能为空","lang")))}}]}},created(){this.fetchDetail()},methods:{async fetchDetail(){const{apply_id:e}=this.$route.params,{chief_name:a,chief_mobile:s,approve_status:t,extra_data:l}=await this.$api.community.getChiefDetail(e);this.name=a,this.mobile=s,this.extraData=l,this.approve_status=t},renderComp({type:e,value:a}){const s=this.$createElement;return e==t.rI.IMAGE?(0,l.cy)(a)?s("div",{class:"imglist-wrap"},[a.map(e=>s("SpImage",{attrs:{src:e}}))]):s("SpImage",{attrs:{src:a}}):a},handleAction(e){"reject"===e.key?(this.$set(this.resloveForm,"approve_status",2),this.resloveDialog=!0):(this.$set(this.resloveForm,"approve_status",1),this.onResloveSubmit())},async onResloveSubmit(){const{apply_id:e}=this.$route.params,{approve_status:a,refuse_reason:s}=this.resloveForm;await this.$api.community.approveChief(e,{approve_status:a,refuse_reason:s}),this.resloveDialog=!1,this.fetchDetail()}},render(){const e=arguments[0],{name:a,mobile:s,extraData:t,btnActions:l,approve_status:r}=this;return e("SpPage",[e("el-card",{class:"el-card--normal"},[e("div",{slot:"header"},[$t("oslk3n6","团长基本信息","lang")]),e("el-row",{class:"card-panel"},[e("el-col",{class:"card-panel-item",attrs:{span:24}},[e("span",{class:"card-panel__label"},[$t("djxsw3","姓名:","lang")]),e("span",{class:"card-panel__value"},[a])]),e("el-col",{class:"card-panel-item",attrs:{span:24}},[e("span",{class:"card-panel__label"},[$t("evutn3","手机:","lang")]),e("span",{class:"card-panel__value"},[s])])])]),e("el-card",{class:"el-card--normal"},[e("div",{slot:"header"},[$t("ppqxud6","团长其他信息","lang")]),Object.keys(t).map(a=>e("el-row",{class:"card-panel",key:a},[e("el-col",{class:"card-panel-item",attrs:{span:24}},[e("span",{class:"card-panel__label"},[`${t[a].label}:`]),e("span",{class:"card-panel__value"},[this.renderComp(t[a])])])]))]),0==this.approve_status&&e("div",{class:"footer-container"},[l.map((a,s)=>e("el-button",{key:`btn-item__${s}`,attrs:{type:"primary",plain:!0},on:{click:this.handleAction.bind(this,a)}},[a.name]))]),e("SpDialog",{ref:"resloveDialogRef",attrs:{title:$t("g4jc2","审批","lang"),form:this.resloveForm,"form-list":this.resloveFormList},on:{onSubmit:this.onResloveSubmit},model:{value:this.resloveDialog,callback:e=>{this.resloveDialog=e}}})])}},o=r,n=(0,s(81656).A)(o,undefined,undefined,!1,null,"a09224b2",null).exports}}]);