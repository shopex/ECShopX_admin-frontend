"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1211],{31211:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=a(73602),s=a(87378),l=a(5134),r={components:{imgPicker:s.default,linkSetter:i.default},data(){return{dataForm:{article_cover:"",article_title:"",article_subtitle:"",article_content:"",directional_url:"",is_show:0,sort:0},picsDialog:!1,isGetPics:!1,coverList:[],buttonText:$t("e32z2","保存","lang"),showVisible:!1,buttonLinkText:$t("i5v6cl4","设置路径","lang")}},mounted(){let{id:t}=this.$route.query;t&&(this.buttonText=$t("e5fv2","修改","lang"),this._getActivearticle(t))},methods:{handleClickUpload(t){this.picsDialog=!0,this.isGetPics=!0},pickPics(t){this.picsDialog=!1,this.dataForm.article_cover=t.url,this.coverList=[t.url]},updateWithdrawDescContent(t){this.dataForm.article_content=t},handleClickSetLink(t,e){this.showVisible=!1,this.buttonLinkText=t.title,this.dataForm.directional_url=this.handleFilterLink(e,t.id)},async _getActivearticle(t){let{data:e}=await(0,l.getActivearticle)(t);this.dataForm=e.data,this.coverList=[e.data.article_cover]},async _setActivearticle(){let t=this.dataForm;try{this.$route.query.id?(delete t.created,delete t.updated,delete t.company_id,t.is_show=t.is_show?1:0,await(0,l.putActivearticle)(t)):await(0,l.setActivearticle)(t),this.$message({message:`${this.buttonText}${$t("h4sv2","成功","lang")}`,type:"success"}),this.refresh(),this.$router.go(-1)}catch(t){}},handleFilterLink(t,e){let a="";switch(t){case"goods":a="/pages/item/espier-detail?id="+e;break;case"category":a="/pages/item/list?cat_id="+e;break;case"article":a="/pages/article/index?id="+e;break;case"planting":a="/pages/recommend/detail?id="+e;break;case"custom_page":a="/pages/custom/custom-page?id="+e;break;case"marketing":a="/pages/item/group-list";break;case"seckill":a="/pages/item/seckill-goods-list?seckill_id="+e;break;case"link":a="vipgrades"===e?"/pages/vip/vipgrades":"";break;case"tag":a="/pages/item/list?tag_id="+e;break;case"regactivity":a="/marketing/pages/reservation/goods-reservate?activity_id="+e;break;case"custom":a=e}return a}}},c=(0,a(81656).A)(r,function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"80px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:""}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleClickUpload}},[t._v($t("ohxsvr6"," 上传封面 ","lang"))])],1)],1),e("el-col",{attrs:{span:18}},[e("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.dataForm.article_cover,"preview-src-list":t.coverList}})],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:$t("ij5d2","标题","lang")}},[e("el-input",{attrs:{maxlength:"20"},model:{value:t.dataForm.article_title,callback:function(e){t.$set(t.dataForm,"article_title",e)},expression:"dataForm.article_title"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:$t("hrlt2","描述","lang")}},[e("el-input",{attrs:{maxlength:"100"},model:{value:t.dataForm.article_subtitle,callback:function(e){t.$set(t.dataForm,"article_subtitle",e)},expression:"dataForm.article_subtitle"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:$t("edas2","内容","lang")}},[e("SpRichText",{model:{value:t.dataForm.article_content,callback:function(e){t.$set(t.dataForm,"article_content",e)},expression:"dataForm.article_content"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:$t("p0nb2","连接","lang")}},[e("el-button",{on:{click:function(e){t.showVisible=!0}}},[t._v(" "+t._s(t.buttonLinkText)+" ")])],1)],1),e("el-col",{staticClass:"center",attrs:{span:24}},[e("el-button",{attrs:{type:"primary"},on:{click:t._setActivearticle}},[t._v(" "+t._s(t.buttonText)+" ")])],1)],1)],1),e("imgPicker",{attrs:{"dialog-visible":t.picsDialog,"sc-status":t.isGetPics,"is-most":!1},on:{chooseImg:t.pickPics,closeImgDialog:function(e){t.picsDialog=!1}}}),e("linkSetter",{attrs:{visible:t.showVisible},on:{setLink:t.handleClickSetLink,closeDialog:function(e){t.showVisible=!1}}})],1)},[],!1,null,"3b4251f0",null).exports}}]);