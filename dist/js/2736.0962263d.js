"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2736],{22736:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});a(44114),a(18111),a(20116),a(61701);var s=a(95353),i=(a(26456),a(95564)),l=a(27810),n=a(13806),o=a(32169),c=a(87378),r=a(71196),m={props:{res:{type:Object,default:{}}},data(){return{name:"",config:{},current:"",data:[],iconColor:"",selectedIconColor:"",pathOptions:[{value:"/pages/index",name:"home",label:$t("qylb2","首页","lang")},{value:"/pages/cart/espier-index",name:"cart",label:$t("l8nwq3","购物车","lang")},{value:"/pages/category/index",name:"category",label:$t("emut2","分类","lang")},{value:"/pages/member/index",name:"member",label:$t("hbwz2","我的","lang")},{value:"/pages/recommend/list",name:"article",label:$t("oyd42","软文","lang")},{value:"/pages/liveroom/index",name:"liveroom",label:$t("ksah2","直播","lang")},{value:"/pages/item/list?isTabBar=true",name:"allGoods",label:$t("av9wor4","全部商品","lang")},{value:"/subpages/mdugc/index",name:"ugc",label:$t("l2v02","社区","lang")},{value:"customPage",name:"customPage",label:$t("mmy2sm5","自定义页面","lang")}]}},watch:{res:{deep:!0,handler(t){t&&this.setData(t)}}},mounted(){this.setData(this.res)},methods:{setData(t){this.name=t.name,this.config=t.config,this.data=t.data},addItem(){this.data||(this.data=[]);let t={pagePath:"",text:"",name:"",iconPath:"",selectedIconPath:""};this.data.length>4?this.$message({message:$t("bk859gb","轮播图最多添加5个图片","lang"),type:"error",duration:5e3}):this.data.push(t)},removeItem(t){this.data.splice(t,1)},handleClick(t){this.current=t},handleChange(t){let e=this.pathOptions.find(e=>e.value===t);e&&(this.data[this.current].name=e.name),"customPage"!=t&&this.data[this.current]?.customPage&&this.$delete(this.data[this.current],"customPage")},handleIconChange(t){this.$emit("bindImgs",t,"default")},handleSelectedIconChange(t){this.$emit("bindImgs",t,"selected")},handleSave(){if(this.data.findIndex(t=>"customPage"==t.name&&!t.customPage)>-1)return this.$message({message:$t("30b0hd8","请选择自定义页面","lang"),type:"error",duration:5e3});this.$emit("saveTab")},async handleCustomPageSelect(t){const{data:e}=await this.$picker.pages({multiple:!1,data:[t?.customPage?.id]});this.$set(t,"customPage",e[0])},getCustomPageName(t){return t?.customPage?.page_name??$t("30b0hd8","请选择自定义页面","lang")}}},d=a(81656),p=(0,d.A)(m,function(){var t=this,e=t._self._c;return"tabs"===t.name?e("section",{staticClass:"section"},[e("div",{staticClass:"section-body"},[e("el-row",[e("el-col",{staticClass:"row-col",attrs:{span:8}},[e("span",[t._v($t("jda5r3","背景色","lang"))]),e("el-color-picker",{model:{value:t.config.backgroundColor,callback:function(e){t.$set(t.config,"backgroundColor",e)},expression:"config.backgroundColor"}})],1),e("el-col",{staticClass:"row-col",attrs:{span:8}},[e("span",[t._v($t("kmfyg24","默认颜色","lang"))]),e("el-color-picker",{model:{value:t.config.color,callback:function(e){t.$set(t.config,"color",e)},expression:"config.color"}})],1),e("el-col",{staticClass:"row-col",attrs:{span:8}},[e("span",[t._v($t("ii77h64","选中颜色","lang"))]),e("el-color-picker",{model:{value:t.config.selectedColor,callback:function(e){t.$set(t.config,"selectedColor",e)},expression:"config.selectedColor"}})],1)],1),e("el-row",[t._v($t("7afdf28","设置tabBar","lang"))]),e("el-row",[t._l(t.data,function(a,s){return e("div",{key:s,staticClass:"setting-item"},[s>1?e("div",{staticClass:"setting-remove",on:{click:function(e){return t.removeItem(s)}}},[e("i",{staticClass:"iconfont icon-trash-alt"})]):t._e(),a.iconPath?e("img",{staticClass:"icon-setter",attrs:{src:a.iconPath},on:{click:function(e){return t.handleIconChange(s)}}}):e("div",{staticClass:"icon-setter",on:{click:function(e){return t.handleIconChange(s)}}},[e("i",{staticClass:"iconfont icon-image muted"})]),a.selectedIconPath?e("img",{staticClass:"icon-setter",attrs:{src:a.selectedIconPath},on:{click:function(e){return t.handleSelectedIconChange(s)}}}):e("div",{staticClass:"icon-setter",on:{click:function(e){return t.handleSelectedIconChange(s)}}},[e("i",{staticClass:"iconfont icon-image muted"})]),e("div",{staticClass:"uploader-setting"},[e("el-input",{attrs:{placeholder:$t("1tz1zs5","tab名称","lang"),maxlength:""},model:{value:a.text,callback:function(e){t.$set(a,"text",e)},expression:"item.text"}})],1),e("div",{staticClass:"uploader-setting"},[e("el-select",{attrs:{placeholder:$t("i2r0yu7","设置tab路径","lang")},on:{focus:function(e){return t.handleClick(s)},change:t.handleChange},model:{value:a.pagePath,callback:function(e){t.$set(a,"pagePath",e)},expression:"item.pagePath"}},t._l(t.pathOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),"customPage"==a.pagePath?e("div",{staticClass:"uploader-setting"},[e("div",{staticClass:"btn-linkpath",on:{click:()=>t.handleCustomPageSelect(a)}},[t._v(" "+t._s(t.getCustomPageName(a))+" ")])]):t._e()])}),e("div",{staticClass:"frm-tips"},[t._v($t("5dulzm13","只能上传jpg/png文件，且不超过2M （建议尺寸：50px * 50px）","lang"))]),e("el-button",{staticClass:"iconfont icon-plus-circle banner-button-uploader",attrs:{disabled:t.data.length>=5,type:"default"},on:{click:t.addItem}},[t._v($t("58qxph7"," 添加菜单项 ","lang"))])],2),e("el-row",{staticClass:"btn-row"},[e("el-button",{attrs:{type:"primary",round:""},on:{click:t.handleSave}},[t._v($t("cp35x4"," 保存 ","lang"))])],1)],1)]):t._e()},[],!1,null,"3e73755f",null).exports,h=a(83350),g=a(91992),u={components:{DistributorSelect:i.A,imgPicker:c.default,ShopDecoration:l.A,MallDecoration:n.A,TemplatePreview:o.A,sideBar:r.A,tabsEditor:p},props:{relStore:{type:Object,default:()=>({})}},data(){const t=this.$createElement;return{index_type:1,orgin_index_type:"platform",is_enforce_sync:2,is_open_recommend:2,is_open_wechatapp_location:1,is_open_scan_qrcode:2,is_open_official_account:2,templateList:[],form:{template_title:"",template_pic:""},rules:{template_title:[{required:!0,message:$t("jpm93q7","请输入模板名称","lang"),trigger:"blur"}]},distributorVisible:!1,isValid:!0,relDistributors:[],distributorStatus:!1,dialogVisible:!1,dialogType:"",dialogData:{},imgsVisible:!1,isGetImage:!1,isSynchronize:!1,templateVisible:!1,previewVisible:!1,currTemplateId:null,params:{page_no:1,page_size:10},total_count:0,navDrawerShow:!1,navForm:{pages_template_id:"",theme:{backgroundColor:"#ffffff",color:"#333333",selectedColor:"#1f82e0"},tabList:[{pagePath:"/pages/index",text:$t("qylb2","首页","lang"),name:"home",iconPath:"",selectedIconPath:""},{pagePath:"/pages/category/index",text:$t("emut2","分类","lang"),name:"category",iconPath:"",selectedIconPath:""},{pagePath:"/pages/cart/espier-index",text:$t("l8nwq3","购物车","lang"),name:"cart",iconPath:"",selectedIconPath:""},{pagePath:"/pages/member/index",text:$t("hbwz2","我的","lang"),name:"member",iconPath:"",selectedIconPath:""}]},navFormList:[{label:"",key:"name",component:()=>t("div",{class:"tablist"},[this.navForm?.tabList?.map((e,a)=>t("div",{class:"tab-item",style:{color:0==a?this.navForm.theme.selectedColor:this.navForm.theme.color},key:`tab-item__${a}`},[!e.iconPath&&!e.selectedIconPath&&t("i",{class:`icon-${e.name} iconfont`}),(e.iconPath||e.selectedIconPath)&&t("el-image",{class:"tab-image",attrs:{src:e.selectedIconPath||e.iconPath,fit:"cover"}}),t("div",{class:"tab-text"},[e.text])]))])},{label:"",key:"theme",component:()=>t("el-row",[t("el-col",{attrs:{span:8}},[t("div",{class:"theme-item"},[t("el-color-picker",{model:{value:this.navForm.theme.backgroundColor,callback:t=>{this.$set(this.navForm.theme,"backgroundColor",t)}}}),$t("jda5r3","背景色","lang")])]),t("el-col",{attrs:{span:8}},[t("div",{class:"theme-item"},[t("el-color-picker",{model:{value:this.navForm.theme.color,callback:t=>{this.$set(this.navForm.theme,"color",t)}}}),$t("kmfyg24","默认颜色","lang")])]),t("el-col",{attrs:{span:8}},[t("div",{class:"theme-item"},[t("el-color-picker",{model:{value:this.navForm.theme.selectedColor,callback:t=>{this.$set(this.navForm.theme,"selectedColor",t)}}}),$t("ii77h64","选中颜色","lang")])])])},{label:"",key:"tabList",component:()=>t("div",{class:"nav-list"},[t("div",{class:"nav-list-body"},[this.navForm?.tabList?.map((e,a)=>t("div",{class:"nav-item"},[t("div",{class:"nav-item-hd"},[t("SpImagePicker",{model:{value:e.iconPath,callback:t=>{this.$set(e,"iconPath",t)}}}),t("SpImagePicker",{model:{value:e.selectedIconPath,callback:t=>{this.$set(e,"selectedIconPath",t)}}}),t("SpInput",{attrs:{width:"120px",placeholder:$t("c55ak14","导航名称","lang")},model:{value:e.text,callback:t=>{this.$set(e,"text",t)}}}),t("el-select",{attrs:{placeholder:$t("2ebocc5","请选择页面","lang")},on:{change:this.onChangePagePath.bind(this,a)},model:{value:e.pagePath,callback:t=>{this.$set(e,"pagePath",t)}}},[g.NAVS.map((e,a)=>t("el-option",{attrs:{label:e.label,value:e.value}}))]),"customPage"==e.pagePath&&t("div",{class:"uploader-setting"},[t("div",{class:"btn-linkpath",on:{click:this.handleCustomPageSelect.bind(this,e)}},[e?.customPage?.page_name??$t("30b0hd8","请选择自定义页面","lang")])])]),t("div",{class:"nav-item-bd"},[a>1&&t("el-button",{attrs:{type:"text"},on:{click:this.removeTabItem.bind(this,a)}},[$t("eslg2","删除","lang")])])]))]),t("div")]),tip:$t("5dulzm13","只能上传jpg/png文件，且不超过2M （建议尺寸：50px * 50px）","lang"),validator:(t,e,a)=>{e.find(t=>!t.pagePath||!t.name)?a($t("yz0uw8d","请设置导航名称以及导航页面","lang")):a()}},{label:"",component:()=>t("el-button",{attrs:{type:"primary",disabled:this.navForm?.tabList?.length>=5,plain:!0},class:"iconfont icon-plus-circle",on:{click:this.addTabItem}},[$t("eszfqz5","添加菜单项","lang")])}],show_sideBar:!1,show_tab_sideBar:!1,tabIcon:"",currentTab:0,selectedTab:!1,tabs:{name:"tabs",config:{color:"#333333",selectedColor:"#1f82e0",backgroundColor:"#ffffff"},data:[{pagePath:"/pages/index",text:$t("qylb2","首页","lang"),name:"home",iconPath:"",selectedIconPath:""},{pagePath:"/pages/category/index",text:$t("emut2","分类","lang"),name:"category",iconPath:"",selectedIconPath:""},{pagePath:"/pages/cart/espier-index",text:$t("l8nwq3","购物车","lang"),name:"cart",iconPath:"",selectedIconPath:""},{pagePath:"/pages/member/index",text:$t("hbwz2","我的","lang"),name:"member",iconPath:"",selectedIconPath:""}]},editorData:{},editorDataIndex:null,app_page_type:{wechat:"wechat",alipay:"alipay"}}},mounted(){this.getTemplateSetInfo(),this.getList()},computed:{...(0,s.L8)(["app_type","template_name","ali_template_name"])},methods:{getTemplateSetInfo(){(0,h.getPagesTemplateSetInfo)().then(t=>{let e=t.data.data;this.index_type=e.index_type,this.is_enforce_sync=e.is_enforce_sync,this.is_open_recommend=e.is_open_recommend,this.is_open_wechatapp_location=e.is_open_wechatapp_location,this.is_open_scan_qrcode=e.is_open_scan_qrcode,this.is_open_official_account=e.is_open_official_account,1==this.index_type?this.orgin_index_type="platform":this.orgin_index_type="shop",e.tab_bar&&(this.tabs=JSON.parse(e.tab_bar))})},getList(t){let e={...this.params,distributor_id:this.relStore.id};(0,h.getPagesTemplateList)(e).then(t=>{let e=[];t.data.data.list.map(t=>{e.push({...t,element_edit_status:t.element_edit_status||2,status:t.status||2,timer_status:t.timer_status||2,showTime:!1,timer_time:t.timer_time?this.formatTimeStampToStr(t.timer_time):"",showTime:1==t.timer_status})}),this.templateList=e,this.total_count=t.data.data.total_count})},formatTimeStampToStr(t){var e=new Date;e.setTime(1e3*t);var a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var n=e.getMinutes(),o=e.getSeconds();return a+"-"+s+"-"+i+" "+l+":"+(n=n<10?"0"+n:n)+":"+(o=o<10?"0"+o:o)},handleImgChange(t){this.imgsVisible=!0,this.isGetImage=!0},pickImg(t){null!=this.editorDataIndex?"default"===this.tabIcon?(this.editorData.data[this.editorDataIndex].iconPath=t.url,this.tabs.data[this.editorDataIndex].iconPath=t.url):(this.editorData.data[this.editorDataIndex].selectedIconPath=t.url,this.tabs.data[this.editorDataIndex].selectedIconPath=t.url):this.form.template_pic=t.url,this.imgsVisible=!1},closeimgsVisible(){this.imgsVisible=!1},distributorChooseAction(t){if(null===t||t.length<=0)return this.distributorVisible=!1,void(this.distributorStatus=!1);this.relDistributors=t;let e=t.map(t=>t.distributor_id);this.syncTemplate(2,e)},allDistributorChooseAction(){this.syncTemplate(1)},syncTemplate(t,e){let a={pages_template_id:this.currTemplateId,is_all_distributor:t};2==t&&(a.distributor_ids=JSON.stringify(e)),(0,h.syncPagesTemplate)(a).then(t=>{this.distributorVisible=!1,this.distributorStatus=!1,this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},closeDialogAction(){this.distributorStatus=!1,this.distributorVisible=!1},changeShop(t){if(this.index_type="shop"==t?2:1,this.orgin_index_type==t)return;this.orgin_index_type=t;let e={index_type:this.index_type};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},toggleSynchronizeShop(t){let e={is_enforce_sync:t};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},handleInputChange(t){this.form.template_title=t},toggleOpenRecommend(t){let e={is_open_recommend:t};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},toggleOpenWechatappLocation(t){this.VERSION_PLATFORM()&&2==t?this.$confirm($t("4lf6ike","关闭后附件商家组件将无法使用","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{this.updateLocation(t)}).catch(()=>{this.is_open_wechatapp_location=1}):this.updateLocation(t)},updateLocation(t){let e={is_open_wechatapp_location:t};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},toggleOpenScanQrcode(t){let e={is_open_scan_qrcode:t};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},toggleOpenOfficialAccount(t){let e={is_open_official_account:t};(0,h.setPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},AddOrEditDialog(t,e){this.dialogVisible=!0,this.dialogType=t,this.dialogData=e,this.editorDataIndex=null,e&&(this.form.template_title=e.template_title,this.form.template_pic=e.template_pic)},closeAddDialog(){this.dialogVisible=!1,this.dialogType="",this.dialogData="",this.resetForm("form")},addTemplate(t){this.$refs[t].validate(e=>{if(e){let e,a=this.form;"add"==this.dialogType?(e=h.addPagesTemplate,a.template_name=this.template_name,a.distributor_id=this.relStore.id):(e=h.savePagesTemplate,a.pages_template_id=this.dialogData.pages_template_id),e(a).then(e=>{this.getList(),this.resetForm(t)})}})},resetForm(t){this.dialogVisible=!1,this.$refs[t].resetFields(),this.form={template_title:"",template_pic:""},this.dialogType="",this.dialogData={}},previewTemplate(t){this.previewVisible=!0,this.currTemplateId=t},async changeShopEdit(t){let e={distributor_id:this.relStore.id,pages_template_id:this.templateList[t].pages_template_id,template_content:this.templateList[t].template_content,element_edit_status:this.templateList[t].element_edit_status,template_name:this.template_name};await(0,h.savePagesTemplate)(e),this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})},useTemplate(t,e){this.currTemplateId=this.templateList[t].pages_template_id,1==e?(this.templateList[t].status=2,this.$confirm($t("175epcb","确认立即启用当前模板？","lang"),$t("b3x82f4","启用模板","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}).then(()=>{this.modifyTemplateStatus(t,"status",e)}).catch(()=>{})):(this.templateList[t].status=1,this.modifyTemplateStatus(t,"status",e))},useTimeTemplate(t,e){this.currTemplateId=this.templateList[t].pages_template_id,2==e?(this.templateList[t].timer_status=1,this.$confirm($t("alqfj8b","确认取消启用定时模板？","lang"),$t("ic59jg6","取消定时模板","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}).then(()=>{this.modifyTemplateStatus(t,e),this.templateList[t].timer_time="",this.templateList[t].showTime=!1,this.templateList[t].timer_status=e}).catch(()=>{})):(this.currTemplateId=this.templateList[t].pages_template_id,this.templateList[t].timer_status=e)},cancelTime(t){this.$confirm($t("alqfj8b","确认取消启用定时模板？","lang"),$t("ic59jg6","取消定时模板","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}).then(()=>{this.currTemplateId=this.templateList[t].pages_template_id,this.modifyTemplateStatus(t,"timer_status",2)}).catch(()=>{})},changeDate(t){this.currTemplateId=this.templateList[t].pages_template_id,this.modifyTemplateStatus(t,"timer_status",1)},async modifyTemplateStatus(t,e,a){let s={pages_template_id:this.currTemplateId,template_name:this.template_name};"status"==e?s.status=a:(s.timer_status=a,s.timer_time=1==a?this.templateList[t].timer_time:""),await(0,h.modifyPagesTemplateStatus)(s),this.getList(),this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})},editTemplate(t){const{distributor_id:e}=this.$route.query;e>0?this.$router.push(`/wxapp/manage/decorate?id=${t}&scene=1003&distributor_id=${e}`):this.$router.push(`/wxapp/manage/decorate?id=${t}`)},async handleClickNav(t){const{tab_bar:e}=await this.$api.template.getPagesTemplateSetInfo({pages_template_id:t});if(this.navForm=this.$options.data().navForm,this.navForm.pages_template_id=t,e){const{config:t,data:a}=JSON.parse(e);this.navForm.theme=t,this.navForm.tabList=a}this.navDrawerShow=!0},async onSubmitTabList(){const{pages_template_id:t,theme:e,tabList:a}=this.navForm;if(a.findIndex(t=>"customPage"==t.name&&!t.customPage)>-1)return this.$message({message:$t("30b0hd8","请选择自定义页面","lang"),type:"error",duration:5e3});let s={tab_bar:JSON.stringify({name:"tabs",config:e,data:a})};t&&(s={...s,pages_template_id:t}),await this.$api.template.setPagesTemplate(s),this.navDrawerShow=!1,this.$message.success($t("d1spvi4","操作成功","lang"))},onChangePagePath(t,e){const{label:a,name:s}=g.NAVS.find(t=>t.value==e);this.navForm.tabList[t].text=a,this.navForm.tabList[t].name=s,"customPage"!=e&&this.navForm.tabList[t]?.customPage&&this.$delete(this.navForm.tabList[t],"customPage")},async handleCustomPageSelect(t){const{data:e}=await this.$picker.pages({multiple:!1,data:[t?.customPage?.id]});this.$set(t,"customPage",e[0])},removeTabItem(t){this.navForm.tabList.splice(t,1)},addTabItem(){this.navForm.tabList.push({pagePath:"",text:"",name:"",iconPath:"",selectedIconPath:""})},copyTemplate(t){let e={pages_template_id:t};this.$confirm($t("1y2red9","确认拷贝当前模板？","lang"),$t("d2jq4k4","拷贝模板","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}).then(()=>{(0,h.copyPagesTemplate)(e).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"}),this.params.page_no=1,this.getList()})}).catch(()=>{})},abandonTemplate(t){this.$confirm($t("xyd8dv9","确认废弃当前模板？","lang"),$t("cc2ldu4","废弃模板","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang")}).then(()=>{(0,h.deletePagesTemplate)(t).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"}),this.params.page_no=1,this.getList()})}).catch(()=>{})},synchronizeTemplateToShop(t){this.distributorVisible=!0,this.distributorStatus=!0,this.isSynchronize=!0,this.relDistributors=[],this.currTemplateId=this.templateList[t].pages_template_id},closeDialog(){this.templateVisible=!1},closePreviewDialog(){this.previewVisible=!1},handleShowConfig(){this.show_sideBar=!0},handleShowTabConfig(){this.show_tab_sideBar=!0,this.editorData={...this.tabs}},handleCloseSidebar(t){this.show_tab_sideBar=t},showImgs(t,e){this.imgsVisible=!0,this.isGetImage=!0,this.editorDataIndex=t,e&&(this.tabIcon=e)},handelSaveTab(){let t={tab_bar:JSON.stringify(this.editorData)};(0,h.setPagesTemplate)(t).then(t=>{this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})}}},_={components:{MallList:(0,d.A)(u,function(){var t=this,e=t._self._c;return e("div",["0"==t.relStore.id?e("div",{staticClass:"shop-header"},[t.VERSION_B2C()||t.VERSION_IN_PURCHASE()?t._e():e("div",{staticClass:"shop-left"},[e("span",{staticClass:"text"},[t._v($t("t2uhtk8","小程序模版呈现：","lang"))]),e("div",{staticClass:"option-item"},[e("span",{staticClass:"option-item_text"},[t._v($t("cqx3l84","总部首页","lang"))]),e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:function(e){return t.changeShop("platform")}},model:{value:t.index_type,callback:function(e){t.index_type=e},expression:"index_type"}})],1),t.VERSION_STANDARD()?e("div",{staticClass:"option-item"},[e("span",{staticClass:"option-item_text"},[t._v($t("ck2dr64","店铺首页","lang"))]),e("el-switch",{attrs:{"active-value":2,"inactive-value":1,"active-color":"#13ce66"},on:{change:function(e){return t.changeShop("shop")}},model:{value:t.index_type,callback:function(e){t.index_type=e},expression:"index_type"}})],1):t._e(),t.VERSION_PLATFORM()?t._e():e("span",{staticClass:"text"},[t._v($t("vihti7","模版同步设置：","lang"))]),t.VERSION_PLATFORM()?t._e():e("div",{staticClass:"option-item"},[e("span",{staticClass:"option-item_text"},[t._v($t("claysq5","同步并启用","lang"))]),e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:t.toggleSynchronizeShop},model:{value:t.is_enforce_sync,callback:function(e){t.is_enforce_sync=e},expression:"is_enforce_sync"}})],1)]),"0"==t.relStore.id?e("div",{staticClass:"section-white mini-setting"},[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:t.handleShowConfig}},[e("i",{staticClass:"iconfont icon-cog",staticStyle:{color:"#8080ff"}}),t._v($t("sisg387"," 小程序配置 ","lang"))]),e("el-button",{attrs:{type:"text"},on:{click:t.handleShowTabConfig}},[e("i",{staticClass:"iconfont icon-cog",staticStyle:{color:"#8080ff"}}),t._v($t("dwy50e9"," 小程序导航配置 ","lang"))])],1):t._e()]):t._e(),e("el-row",{staticClass:"template-list",class:{"is-shop":"0"!=t.relStore.id||t.VERSION_B2C()},attrs:{gutter:20}},[t._l(t.templateList,function(s,i){return e("el-col",{key:i,attrs:{xs:12,sm:12,md:8,lg:6,xl:4}},[e("div",{staticClass:"template-item"},[e("div",{staticClass:"img-wrap"},[e("div",{staticClass:"preview-cover",on:{click:function(e){return t.previewTemplate(s.pages_template_id)}}},[e("img",{staticClass:"preview-cover_img",attrs:{src:a(25214),alt:$t("qp502","预览","lang")}}),e("span",{staticClass:"preview-cover_text"},[t._v($t("qp502","预览","lang"))])]),e("img",{staticClass:"template-pic",attrs:{src:s.template_pic}}),1==s.template_type?e("div",{staticClass:"tag"},[t._v($t("b1vehj4","同步模板","lang"))]):t._e()]),e("div",{staticClass:"template-name"},[e("span",[t._v(t._s(s.template_title))]),e("span",{staticClass:"el-icon-edit edit-css",on:{click:function(e){return t.AddOrEditDialog("edit",s)}}})]),"0"!=t.relStore.id||t.VERSION_B2C()?t._e():e("div",{staticClass:"template-common"},[e("span",{staticClass:"temp-label"},[t._v($t("dagtad7","店铺可编辑挂件","lang"))]),e("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":2},on:{change:function(e){return t.changeShopEdit(i)}},model:{value:s.element_edit_status,callback:function(e){t.$set(s,"element_edit_status",e)},expression:"item.element_edit_status"}})],1),e("div",{staticClass:"template-common"},[e("span",{staticClass:"temp-label"},[t._v($t("fu70814","立即启用","lang"))]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:$t("f3s4nf8","至少开启一套模版","lang"),placement:"top-start"}},[e("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":2},on:{change:function(e){return t.useTemplate(i,s.status)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"item.status"}})],1)],1),e("div",{staticClass:"time-wrap"},[s.showTime?t._e():e("div",{staticClass:"no-time"},[e("div",[t._v($t("bz9zzp4","定时启用","lang"))]),e("div",{staticClass:"picker-wrap"},[e("img",{staticClass:"time-img",attrs:{src:a(90341)}}),e("span",[t._v($t("ibubdz8","设置模板切换时间","lang"))]),e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime"},on:{change:function(e){return t.changeDate(i)}},model:{value:s.timer_time,callback:function(e){t.$set(s,"timer_time",e)},expression:"item.timer_time"}})],1)]),s.showTime?e("div",{staticClass:"has-time"},[e("span",{staticClass:"time"},[t._v(t._s(s.timer_time)+$t("eymx2","启用","lang"))]),e("span",{staticClass:"cancel-btn",on:{click:function(e){return t.cancelTime(i)}}},[t._v($t("ev022","取消","lang"))])]):t._e()]),e("div",{staticClass:"option-btns"},[e("span",{staticClass:"btn",on:{click:function(e){return t.editTemplate(s.pages_template_id)}}},[t._v($t("mekb2","编辑","lang"))]),e("span",{staticClass:"btn",on:{click:function(e){return t.copyTemplate(s.pages_template_id)}}},[t._v($t("fljd2","复制","lang"))]),e("span",{staticClass:"btn",on:{click:function(e){return t.handleClickNav(s.pages_template_id)}}},[t._v($t("gcz22","导航","lang"))]),e("span",{staticClass:"btn",on:{click:function(e){return t.abandonTemplate(s.pages_template_id)}}},[t._v($t("gm6c2","废弃","lang"))])]),"0"!=t.relStore.id||t.VERSION_B2C()||t.VERSION_IN_PURCHASE()?t._e():e("div",{staticClass:"synchronize-btn",on:{click:function(e){return t.synchronizeTemplateToShop(i)}}},[t._v($t("u2xpgh9"," 同步模板至店铺 ","lang"))])])])}),e("el-col",{attrs:{xs:12,sm:12,md:8,lg:6,xl:4}},[e("div",{class:{"template-item":!0,"add-btn":!0,"sync-template":"0"==t.relStore.id&&!t.VERSION_B2C()&&!t.VERSION_PLATFORM()&&!t.VERSION_IN_PURCHASE()},on:{click:function(e){return t.AddOrEditDialog("add")}}},[e("div",{staticClass:"template-wrap"},[e("img",{staticClass:"add-img",attrs:{src:a(45160),alt:$t("j5s52","添加","lang")}}),e("div",{staticClass:"add-text"},[t._v($t("e7zygz4","添加模板","lang"))])])])])],2),e("DistributorSelect",{attrs:{"store-visible":t.distributorVisible,"is-synchronize":t.isSynchronize,"is-valid":t.isValid,"rel-data-ids":t.relDistributors,"get-status":t.distributorStatus},on:{chooseStore:t.distributorChooseAction,chooseAllStore:t.allDistributorChooseAction,closeStoreDialog:t.closeDialogAction}}),e("imgPicker",{attrs:{"dialog-visible":t.imgsVisible,"sc-status":t.isGetImage},on:{chooseImg:t.pickImg,closeImgDialog:t.closeimgsVisible}}),e("MallDecoration",{attrs:{"dialog-visible":t.templateVisible,"template-name":t.template_name,"rel-store":t.relStore,"show-like":t.is_open_recommend,"template-id":t.currTemplateId},on:{saved:t.closeDialog,closeDialog:t.closeDialog}}),e("TemplatePreview",{attrs:{"dialog-visible":t.previewVisible,"rel-store":t.relStore,"show-like":t.is_open_recommend,"template-id":t.currTemplateId,tabs:t.tabs,usage:"page"},on:{saved:t.closePreviewDialog,closeDialog:t.closePreviewDialog}}),e("el-dialog",{attrs:{title:$t("d77yss4","新增模板","lang"),visible:t.dialogVisible,"close-on-click-modal":!1,width:"50%","before-close":t.closeAddDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:$t("dtgrr54","模板名称","lang"),prop:"template_title"}},[e("el-input",{staticStyle:{width:"55%"},attrs:{type:"text",maxlength:10},model:{value:t.form.template_title,callback:function(e){t.$set(t.form,"template_title",e)},expression:"form.template_title"}})],1),e("el-form-item",{attrs:{label:$t("dtia9r4","模板封面","lang")}},[e("div",{staticClass:"setting-item slider",staticStyle:{width:"55%"}},[t.form.template_pic?e("img",{staticClass:"banner-uploader",attrs:{src:t.form.template_pic},on:{click:t.handleImgChange}}):e("div",{staticClass:"banner-uploader",on:{click:t.handleImgChange}},[e("i",{staticClass:"iconfont icon-camera"})])])])],1),e("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addTemplate("form")}}},[t._v($t("fovd945"," 确 定 ","lang"))])],1)],1),e("sideBar",{attrs:{visible:t.show_sideBar,title:$t("kl8htg5","小程序配置","lang"),width:"20"},on:{"update:visible":function(e){t.show_sideBar=e}}},[e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{attrs:{label:$t("3978we6","开启热门推荐","lang")}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:t.toggleOpenRecommend},model:{value:t.is_open_recommend,callback:function(e){t.is_open_recommend=e},expression:"is_open_recommend"}})],1),t.VERSION_PLATFORM()||t.VERSION_STANDARD()?e("el-form-item",{attrs:{label:$t("r1ero77","开启小程序定位","lang")}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:t.toggleOpenWechatappLocation},model:{value:t.is_open_wechatapp_location,callback:function(e){t.is_open_wechatapp_location=e},expression:"is_open_wechatapp_location"}})],1):t._e(),e("el-form-item",{attrs:{label:$t("57jb8d6","开启扫码功能","lang")}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:t.toggleOpenScanQrcode},model:{value:t.is_open_scan_qrcode,callback:function(e){t.is_open_scan_qrcode=e},expression:"is_open_scan_qrcode"}})],1),e("el-form-item",{attrs:{label:$t("k083jl7","开启公众号组件","lang")}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66"},on:{change:t.toggleOpenOfficialAccount},model:{value:t.is_open_official_account,callback:function(e){t.is_open_official_account=e},expression:"is_open_official_account"}})],1)],1)],1),e("sideBar",{attrs:{visible:t.show_tab_sideBar,title:$t("xlgzvm7","小程序导航配置","lang"),width:"35"},on:{"update:visible":function(e){t.show_tab_sideBar=e}}},[e("div",{staticClass:"template-tabs",style:{background:t.tabs.config.backgroundColor,color:t.tabs.config.color}},[e("div",{staticClass:"current-active"}),t._l(t.tabs.data,function(a,s){return e("div",{key:s,staticClass:"tab",style:s===t.currentTab?`color:${t.tabs.config.selectedColor}`:""},[a.iconPath?[s===t.currentTab?e("img",{staticClass:"svg-icon",attrs:{src:a.selectedIconPath||"https://fakeimg.pl/60x60/EFEFEF/CCC/?text=icofont=lobster"}}):e("img",{staticClass:"svg-icon",attrs:{src:a.iconPath||"https://fakeimg.pl/60x60/EFEFEF/CCC/?text=icon&font=lobster"}})]:e("i",{class:`icon-${a.name} iconfont`}),e("div",{staticClass:"tab-text"},[t._v(" "+t._s(a.text)+" ")])],2)})],2),e("tabsEditor",{attrs:{res:t.editorData},on:{bindImgs:t.showImgs,saveTab:t.handelSaveTab}})],1),e("SpDrawer",{staticClass:"nav-drawer",attrs:{title:$t("c5esny4","导航设置","lang"),width:650},on:{confirm:()=>{this.$refs.navForm.handleSubmit()}},model:{value:t.navDrawerShow,callback:function(e){t.navDrawerShow=e},expression:"navDrawerShow"}},[e("SpForm",{ref:"navForm",staticClass:"nav-form",attrs:{"label-width":"0","form-list":t.navFormList,submit:!1},on:{onSubmit:t.onSubmitTabList},model:{value:t.navForm,callback:function(e){t.navForm=e},expression:"navForm"}})],1)],1)},[],!1,null,"f08cd1ac",null).exports},data(){return{store:null}},mounted(){const{distributor_id:t,address:e,name:a}=this.$route.query;this.store={id:t,address:e,name:a}}},v=(0,d.A)(_,function(){var t=this,e=t._self._c;return e("div",[t.store?e("MallList",{attrs:{"rel-store":t.store}}):t._e()],1)},[],!1,null,null,null).exports}}]);