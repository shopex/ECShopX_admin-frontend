"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[3019],{53019:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});i(44114),i(18111),i(61701);var a=i(5134),s={data(){return{paging:{page:1,pageSize:10,total:10},list:[]}},mounted(){this._getActivearticleList()},methods:{handleClickAddActivity(){this.$router.push({path:this.matchRoutePath("editor")})},handleChangeSize(t){},handleChangeCurrent(t){this.paging.page=t,this._getActivearticleList()},async _getActivearticleList(){let t={page:this.paging.page,page_size:this.paging.pageSize},{data:e}=await(0,a.getActivearticleList)(t);this.list=e.data.list.map(t=>(t.visible=!1,t))},handlePublish(){},async handleClickSort(t){let e=JSON.parse(JSON.stringify(t));delete e.created,delete e.updated,delete e.visible;let{data:i}=await(0,a.putActivearticle)(e);this._getActivearticleList()},handleClickDel(t){this.$confirm($t("k2msxe7","确认是否删除?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,a.delActivearticle)(t.id).then(t=>{this._getActivearticleList(),this.$message({message:$t("r52uu86","删除活动成功","lang"),type:"success",duration:5e3})})}).catch(()=>{})},async handleClikPublish(t){let e=JSON.parse(JSON.stringify(t));e.is_show="1"===e.is_show?0:1,delete e.created,delete e.updated,delete e.visible;let{data:i}=await(0,a.putActivearticle)(e);this._getActivearticleList()},timestampToTime(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+((e.getHours()<10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}}},n=(0,i(81656).A)(s,function(){var t=this,e=t._self._c;return e("div",[-1===t.$route.path.indexOf("editor")?e("div",[e("el-button",{attrs:{type:"primary"},on:{click:t.handleClickAddActivity}},[t._v($t("1t0na36"," 新增活动 ","lang"))]),e("div",{staticClass:"articles"},[e("el-row",{attrs:{gutter:10}},t._l(t.list,function(i,a){return e("el-col",{key:a,attrs:{xs:12,sm:8,md:6,lg:4}},[e("div",{staticClass:"article-item"},[e("router-link",{attrs:{to:{path:t.matchRoutePath("editor"),query:{id:i.id}}}},[e("div",{staticClass:"thumbnail",style:"background: url("+(i.article_cover||"https://fakeimg.pl/200x180/EFEFEF/CCC/?text=image&font=lobster")+") 0% 0% / cover no-repeat;"}),e("div",{staticClass:"caption"},[e("div",{staticClass:"title"},[t._v(" "+t._s(i.article_title)+" ")]),e("div",{staticClass:"update-time"},[t._v(" "+t._s(t.timestampToTime(i.updated))+" ")]),e("div",{staticClass:"view-flex"})])]),e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-item",on:{click:function(e){return t.handleClikPublish(i)}}},["1"===i.is_show?[e("i",{staticClass:"iconfont icon-undo-alt"}),t._v($t("f5g9y3","撤回 ","lang"))]:[e("i",{staticClass:"iconfont icon-broadcast-tower"}),t._v($t("cpyby3","发布 ","lang"))]],2),e("el-popover",{staticClass:"footer-item",attrs:{placement:"top",width:"160"},model:{value:i.visible,callback:function(e){t.$set(i,"visible",e)},expression:"item.visible"}},[e("div",{staticClass:"content-bottom-padded"},[e("el-input",{attrs:{size:"mini",placeholder:$t("2j8ot65","请输入排序","lang")},model:{value:i.sort,callback:function(e){t.$set(i,"sort",e)},expression:"item.sort"}})],1),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){i.visible=!1}}},[t._v($t("dd4ni4"," 取消 ","lang"))]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleClickSort(i)}}},[t._v($t("in1ck4"," 确定 ","lang"))])],1),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"iconfont icon-sort-amount-up"}),t._v($t("hge52","排序","lang"))])]),e("div",{staticClass:"footer-item",on:{click:function(e){return t.handleClickDel(i)}}},[e("i",{staticClass:"iconfont icon-trash-alt"}),t._v($t("cqmho3","删除 ","lang"))])],1)],1)])}),1),e("el-pagination",{staticClass:"center",attrs:{"current-page":t.paging.page,"page-size":t.paging.pageSize,layout:"prev, pager, next",total:t.paging.total},on:{"update:currentPage":function(e){return t.$set(t.paging,"page",e)},"update:current-page":function(e){return t.$set(t.paging,"page",e)},"size-change":t.handleChangeSize,"current-change":t.handleChangeCurrent}})],1)],1):t._e(),e("router-view")],1)},[],!1,null,"2f0225df",null).exports}}]);