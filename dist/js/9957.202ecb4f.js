"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9957],{49957:function(t,a,e){e.r(a),e.d(a,{default:function(){return n}});var o=e(95353),s=(e(57270),e(91142)),l={data(){return{isEdit:!1,tagsList:[],loading:!1,total_count:0,params:{page:1,page_size:10,tag_name:"",tag_status:""},form:{tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:""},memberTagDialog:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]}},computed:{...(0,o.L8)(["wheight"])},mounted(){this.getDataList(),this.getCategorylist()},methods:{handleCurrentChange(t){this.params.page=t,this.getDataList()},addAction(t){this.form.tag_name=t.tag_name,this.form.tag_color=t.tag_color?t.tag_color:"#ff1939",this.form.font_color=t.font_color?t.font_color:"#ffffff",this.form.tag_status="online",this.memberTagDialog=!0},addTemplate(){this.memberTagDialog=!0,this.form={tag_id:"",tag_name:"",tag_color:"#ff1939",description:""},this.form={tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:""}},editAction(t,a){this.form=a,this.memberTagDialog=!0},preview(t,a){this.dialogVisible=!0,this.dataInfo=a},searchData(){this.params.page=1,this.getDataList()},getDataList(){this.loading=!0,(0,s.getTagList)(this.params).then(t=>{this.tagsList=t.data.data.list,this.total_count=t.data.data.total_count,this.loading=!1}).catch(t=>{this.loading=!1,this.$message({type:"error",message:$t("65u1h98","获取列表信息出错","lang")})})},deleteAction(t,a){this.$confirm($t("xvw7g9f","此操作将删除数据, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,s.deleteTag)(a.tag_id).then(a=>{this.tagsList.splice(t,1),this.$message({message:$t("azeh8z4","删除成功","lang"),type:"success",duration:5e3})}).catch(()=>{this.$message({type:"error",message:$t("azdahk4","删除失败","lang")})})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getTaskTime(t){let a=new Date(t),e=a.getFullYear(),o=a.getMonth()+1;o=o<10?"0"+o:o;let s=a.getDate();return s=s<10?"0"+s:s,e+"-"+o+"-"+s},getTimeStr(t){return this.getTaskTime(new Date(1e3*parseInt(t)))},handleCancelLabelsDialog(){this.memberTagDialog=!1},saveTagData(){this.form.tag_id?(0,s.updateTag)(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.memberTagDialog=!1,this.getDataList())}):(0,s.saveTag)(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.memberTagDialog=!1,this.getDataList())})},getCategorylist(t){this.loading=!0;let a={};t&&(a.category_name=t),(0,s.getTagCategoryList)(a).then(t=>{this.loading=!1})}}},n=(0,e(81656).A)(l,function(){var t=this,a=t._self._c;return a("SpPage",[a("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.searchData,onReset:t.onSearch}},[a("SpFilterFormItem",{attrs:{prop:"tag_name",label:$t("dmu0kk4","标签名:","lang")}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:$t("fu00m3","标签名","lang")},model:{value:t.params.tag_name,callback:function(a){t.$set(t.params,"tag_name",a)},expression:"params.tag_name"}})],1)],1),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTemplate}},[t._v($t("tuikx06"," 添加标签 ","lang"))])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tagsList,height:t.wheight-200}},[a("el-table-column",{attrs:{prop:"tag_id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"tag_name",label:$t("dmuom24","标签名称","lang"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{style:"color:"+e.row.font_color,attrs:{color:e.row.tag_color,size:"mini"}},[t._v(" "+t._s(e.row.tag_name)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"self_tag_count",label:$t("c004y3","会员数","lang"),width:"100"}}),a("el-table-column",{attrs:{label:$t("hkxb2","操作","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operating-icons"},[a("i",{staticClass:"iconfont icon-edit1",on:{click:function(a){return t.editAction(e.$index,e.row)}}}),a("i",{staticClass:"mark iconfont icon-trash-alt1",on:{click:function(a){return t.deleteAction(e.$index,e.row)}}})])]}}])})],1),t.total_count>t.params.page_size?a("div",{staticClass:"content-center content-top-padded",staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.params.page,total:t.total_count,"page-size":t.params.page_size},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange}})],1):t._e(),a("el-dialog",{attrs:{title:$t("gpn72q7","添加、编辑标签","lang"),width:"40%",visible:t.memberTagDialog,"before-close":t.handleCancelLabelsDialog},on:{"update:visible":function(a){t.memberTagDialog=a}}},[[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:$t("29vk516","预览最终结果","lang")}},[a("el-tag",{style:"color:"+t.form.font_color,attrs:{color:t.form.tag_color,size:"mini"}},[t._v(" "+t._s(t.form.tag_name)+" ")])],1),a("el-form-item",{staticClass:"content-left",attrs:{label:$t("dmuom24","标签名称","lang"),prop:"tag_name",rules:[{required:!0,message:$t("jw8c8t7","请输入标签名称","lang"),trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:$t("jw8c8t7","请输入标签名称","lang")},model:{value:t.form.tag_name,callback:function(a){t.$set(t.form,"tag_name",a)},expression:"form.tag_name"}})],1),a("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn43014","标签说明","lang")}},[a("el-input",{attrs:{disabled:"staff"==t.form.source,type:"textarea",rows:3,placeholder:$t("jvyxuu7","请输入标签说明","lang")},model:{value:t.form.description,callback:function(a){t.$set(t.form,"description",a)},expression:"form.description"}})],1),a("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn6e3x4","标签颜色","lang")}},[a("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.tag_color,callback:function(a){t.$set(t.form,"tag_color",a)},expression:"form.tag_color"}})],1),a("el-form-item",{staticClass:"content-left",attrs:{label:$t("bv3kfm4","字体颜色","lang")}},[a("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.font_color,callback:function(a){t.$set(t.form,"font_color",a)},expression:"form.font_color"}})],1),a("el-form-item",{staticClass:"content-center"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveTagData}},[t._v($t("pam6x6"," 确定保存 ","lang"))])],1)],1)]],2)],1)},[],!1,null,"8dfb3b8c",null).exports}}]);