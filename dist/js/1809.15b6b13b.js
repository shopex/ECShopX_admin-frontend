"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[1809],{61809:function(t,e,i){i.r(e),i.d(e,{default:function(){return o}});i(44114);var a=i(78069),l=i(87378),s=i(79836),r=i(85135),n={components:{imgPicker:l.default,loadingBtn:s.default},data(){return{disabled:!1,disabled_edit:!1,imgDialog:!1,isGetImage:!1,pickerImgType:"",resultVisible:!1,form:{sign_name:"",sign_source:"",remark:"",sign_file:"",delegate_file:"",third_party:"false",qualification_id:""},rules:{sign_name:[(0,a.XU)($t("fxgh764","签名名称","lang")),(0,a.SO)(12),(0,a.gE)(2)],sign_source:[(0,a.XU)($t("fxjpei4","签名来源","lang"),"change")],remark:[(0,a.XU)($t("fdc1q64","申请说明","lang")),(0,a.SO)(200)],third_party:[(0,a.XU)($t("fxm1gp4","签名用涂","lang"),"change")],qualification_id:[(0,a.XU)($t("ie3ypr4","资质ID","lang"),"blur")]}}},mounted(){this.init()},methods:{async init(){const{type:t,id:e}=this.$route.query;if(t){const i=await(0,r.getTheSignature)({id:e});this.resultHandler(i),"detail"==t&&(this.disabled=!0),"edit"==t&&(this.disabled_edit=!0)}},resultHandler(t){const{sign_name:e,sign_source:i,remark:a,sign_file:l,delegate_file:s,third_party:r,qualification_id:n}=t.data.data;this.form={sign_name:e,sign_source:i+"",remark:a,sign_file:l,delegate_file:s,third_party:r,qualification_id:n}},submitForm(t){const{type:e,id:i}=this.$route.query;this.$refs[t].validate(async t=>{if(!t)return this.$refs.loadingBtn.closeLoading(),!1;try{if("edit"==e){const t=await(0,r.editTheSignature)({id:i,...this.form});this.submitFormResult(t)}else{const t=await(0,r.setTheNewSignature)(this.form);this.submitFormResult(t)}}catch(t){this.$refs.loadingBtn.closeLoading()}})},submitFormResult(t){t.data.data.status&&(this.resultVisible=!0),this.$refs.loadingBtn.closeLoading()},fnBack(){this.$router.push({path:"/setting/system-config/sms-service/ali_sms/sms_signatures"})},fnAgain(){this.resultVisible=!1,this.$refs.form.resetFields(),this.form.sign_file="",this.form.delegate_file=""},pickImg({url:t}){if(t&&this.pickerImgType){this.form[this.pickerImgType]=t,this.imgDialog=!1}},closeImgDialog(){this.imgDialog=!1,this.isGetImage=!1},handleImgPicker(t){this.disabled||(this.pickerImgType=t,this.imgDialog=!0,this.isGetImage=!0)},deleteUrl(t){this.form[t]=""}}},o=(0,i(81656).A)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"sms_signatures_edit"},[e("h4",[t._v($t("v90v3c6","添加短信签名","lang"))]),e("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"150px"}},[e("el-form-item",{attrs:{label:$t("fxgh764","签名名称","lang"),prop:"sign_name"}},[e("el-input",{attrs:{disabled:t.disabled||t.disabled_edit,minlength:"2",maxlength:"12","show-word-limit":"",placeholder:$t("x6uvd8t","长度限2-12个字符，建议为用户真是应用名/网站名/公司名","lang")},model:{value:t.form.sign_name,callback:function(e){t.$set(t.form,"sign_name",e)},expression:"form.sign_name"}}),e("ul",{staticClass:"tips"},[e("li",[t._v($t("wxmie9x","· 签名发送自带【】符号，无须添加【】、()、[] 符号，避免重复","lang"))]),e("li",[t._v($t("wkdsa817","· 不支持如 “客户服务”、“友情提醒” 等过于宽泛内容、不支持 “测试” 字样的签名","lang"))]),e("li",[t._v($t("y4ej87"," · 了解更多","lang")),e("a",{attrs:{target:"_blank",href:"https://help.aliyun.com/document_detail/55324.html?spm=5176.12212999.0.0.4b2b1cbe7AQAyL"}},[t._v($t("6ziwv1b","签名 / 模板申请规范","lang"))])])])],1),e("el-form-item",{attrs:{label:$t("fxjpei4","签名来源","lang"),prop:"sign_source"}},[e("el-radio-group",{attrs:{disabled:t.disabled},model:{value:t.form.sign_source,callback:function(e){t.$set(t.form,"sign_source",e)},expression:"form.sign_source"}},[e("el-radio",{attrs:{label:"0"}},[t._v($t("ixjrr6d"," 企事业单位的全称或简称 ","lang"))]),e("el-radio",{attrs:{label:"1"}},[t._v($t("ptdv69f"," 工信部备案网站的全称或简称 ","lang"))]),e("el-radio",{attrs:{label:"2"}},[t._v($t("25mpjne"," App 应用的全称或简称 ","lang"))]),e("el-radio",{attrs:{label:"3"}},[t._v($t("xpb6arf"," 公众号或小程序的全称或简称 ","lang"))]),e("el-radio",{attrs:{label:"4"}},[t._v($t("k1388af"," 电商平台店铺名的全称或简称 ","lang"))]),e("el-radio",{attrs:{label:"5"}},[t._v($t("15lf4qb"," 商标名的全称或简称 ","lang"))])],1)],1),e("el-form-item",{attrs:{label:$t("fdc1q64","申请说明","lang"),prop:"remark"}},[e("el-input",{attrs:{disabled:t.disabled,type:"textarea",rows:8,maxlength:"200","show-word-limit":"",placeholder:$t("dnojrw31","详细描述您的业务使用场景或签名用途，可填写企业官网链接，工信部备案网站域名，已上线应用在任一应用商店展示页链接，公众号或小程序全称，任一电商店铺展示页链接，已注册商标名等，可有效提升通过率，长度不超过 200 个字符。","lang")},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("el-form-item",{attrs:{label:$t("fxm8aj4","签名用途","lang"),prop:"third_party"}},[e("el-radio-group",{attrs:{disabled:t.disabled},model:{value:t.form.third_party,callback:function(e){t.$set(t.form,"third_party",e)},expression:"form.third_party"}},[e("el-radio",{attrs:{label:"false"}},[t._v($t("ewsc1oo"," 自用（签名为本账号实名认证的网站、App等） ","lang"))]),e("el-radio",{attrs:{label:"true"}},[t._v($t("fryuas"," 他用（签名为非本账号实名认证的企业、网站、产品名等） ","lang"))])],1)],1),e("el-form-item",{attrs:{label:$t("ie3ypr4","资质ID","lang"),prop:"qualification_id"}},[e("el-input",{attrs:{disabled:t.disabled,placeholder:$t("kd3wbd7","请输入整型数字","lang")},model:{value:t.form.qualification_id,callback:function(e){t.$set(t.form,"qualification_id",e)},expression:"form.qualification_id"}}),e("div",{staticClass:"form-tips"},[t._v($t("ecr98ze","已审核通过或审核中的资质ID","lang"))])],1),"detail"!==t.$route.query.type?e("el-form-item",[e("loadingBtn",{ref:"loadingBtn",on:{clickHandle:function(e){return t.submitForm("form")}}}),e("el-button",{on:{click:t.fnBack}},[t._v($t("dd4ni4"," 取消 ","lang"))]),e("ul",{staticClass:"tips"},[e("li",[t._v($t("udfn2lu","预计两小时完成审核，政企签名预计在 48 小时工作时间内审核","lang"))]),e("li",[t._v($t("52kl34v","审核工作时间：周一至周日 9:00-23:00（法定节日顺延）","lang"))])])],1):t._e()],1),e("imgPicker",{attrs:{"dialog-visible":t.imgDialog,"sc-status":t.isGetImage},on:{chooseImg:t.pickImg,closeImgDialog:t.closeImgDialog}}),e("el-dialog",{staticClass:"result",attrs:{visible:t.resultVisible,"show-close":!1}},[e("el-result",{attrs:{icon:"success",title:$t("cx7dr74","提交成功","lang"),"sub-title":$t("b3yngq9","请根据提示进行操作","lang")}},[e("template",{slot:"subTitle"},[e("h5",[t._v($t("lbv78mm","签名已提交审核，审核结果可在签名列表中查看。","lang"))]),e("ul",{staticClass:"tips"},[e("li",[t._v($t("udfn2lu","预计两小时完成审核，政企签名预计在 48 小时工作时间内审核","lang"))]),e("li",[t._v($t("52kl34v","审核工作时间：周一至周日 9:00-23:00（法定节日顺延）","lang"))])])]),e("template",{slot:"extra"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.fnBack}},[t._v($t("kkroyt6"," 返回列表 ","lang"))]),t.$route.query.type?t._e():e("el-button",{attrs:{size:"medium"},on:{click:t.fnAgain}},[t._v($t("my17it9"," 再添加一个签名 ","lang"))])],1)],2)],1)],1)},[],!1,null,"4c203fe8",null).exports}}]);