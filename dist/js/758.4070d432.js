"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[758],{20758:function(t,e,a){a.r(e),a.d(e,{default:function(){return n}});a(57270);var r=a(6919),i=(a(22541),a(65124)),s=a(98818),l={inject:["refresh"],data(){return{activity_date:[],memberLevelList:[],form:{record_id:"",status:!0,reason:""},recorddata:{},shopSetting:{columns:[{name:"ID",key:"distributor_id"},{name:$t("eyrn2","名称","lang"),key:"name"},{name:$t("fb4g2","地址","lang"),key:"address"}]},setting:{columns:[{name:$t("aa61as4","企业ID","lang"),key:"id"},{name:$t("aaky9o4","企业名称","lang"),key:"name"},{name:$t("fcjfai4","登录类型","lang"),key:"auth_type",formatter:(t,{auth_type:e},a)=>{const r=[{name:$t("en402","全部","lang"),value:""},{name:$t("ewbd43","手机号","lang"),value:"mobile"},{name:$t("i5ngi44","账号密码","lang"),value:"account"},{name:$t("padf2","邮箱","lang"),value:"email"},{name:$t("c4ffd3","二维码","lang"),value:"qr_code"}],i=r.find(t=>t.value==e)?.name;return i}},{name:$t("di507i4","来源店铺","lang"),key:"distributor_name"}]},vipGrade:[],memberGrade:[]}},mounted(){if(this.$route.query.id){this.form.record_id=this.$route.query.id;let t={record_id:this.$route.query.id};(0,r.regActivityRecordinfo)(t).then(t=>{this.getActivityDetail(t.data.data)}),this.getGradeLevelList()}},methods:{getActivityDetail(t){const e=this.$route.query.activity_id;let a={};(0,r.regActivityGet)({activity_id:e}).then(e=>{const r=e.data.data;a={activity_name:r.activity_name,activity_type:r.activity_type,activity_start_time:r.start_time,activity_end_time:r.end_time,address:r.address,is_allow_cancel:r.is_allow_cancel,is_allow_duplicate:r.is_allow_duplicate,is_need_check:r.is_need_check,is_offline_verify:r.is_offline_verify,is_allow_cancel:r.is_allow_cancel,group_no:r.group_no,is_white_list:r.is_white_list,area_name:r.area_name,place:r.place,get_points:r.get_points,distributor_list:r.distributor_list,enterprise_list:r.enterprise_list},this.memberLevelList=r.member_level.split(","),this.recorddata={...t,...a}})},getGradeLevelList(){(0,s.listVipGrade)().then(t=>{null!=t&&t.data.data&&t.data.data.length>0&&(this.vipGrade=t.data.data)}),(0,i.getGradeList)().then(t=>{null!=t&&t.data.data&&t.data.data.length>0&&(this.memberGrade=t.data.data)})},submitAction(){const t=this;(0,r.registrationReview)(this.form).then(e=>{e.data.data.status&&(t.refresh(),t.$router.go(-1))})},handleCancel(){this.$router.go(-1)}}},n=(0,a(81656).A)(l,function(){var t=this,e=t._self._c;return e("SpPage",{staticClass:"section section-whit page-registrationrecordetail",attrs:{"no-sticky":""}},[e("el-form",{ref:"recorddata",staticClass:"demo-ruleForm",attrs:{model:t.recorddata,"label-width":"150px","label-position":"right"}},[e("el-card",{attrs:{header:$t("8tnsw36","活动报名信息","lang"),shadow:"naver"}},[e("el-form-item",{attrs:{label:$t("bor30q5","活动名称：","lang")}},[t._v(" "+t._s(t.recorddata.activity_name)+" ")]),e("el-form-item",{attrs:{label:$t("9g8eqy6","活动有效时间","lang"),prop:"activity_time"}},[t._v(" "+t._s(t._f("datetime")(t.recorddata.activity_start_time,"YYYY-MM-DD HH:mm:ss"))+" ~ "+t._s(t._f("datetime")(t.recorddata.activity_end_time,"YYYY-MM-DD HH:mm:ss"))+" ")]),e("el-form-item",{attrs:{label:$t("bt4cci5","活动状态：","lang")}},[t._v(" "+t._s(t.recorddata.status_name)+" ")]),e("el-form-item",{attrs:{label:$t("fd5ujm4","申请时间","lang"),prop:"created"}},[t._v(" "+t._s(t._f("datetime")(t.recorddata.created,"YYYY-MM-DD HH:mm:ss"))+" ")]),e("el-form-item",{attrs:{label:$t("bp1q1p5","活动地址：","lang")}},[t._v(" "+t._s(t.recorddata.place)+" ")]),e("el-form-item",{attrs:{label:$t("8oansl5","详情地址：","lang")}},[t._v(" "+t._s(t.recorddata.address)+" ")]),e("el-form-item",{attrs:{label:$t("ctv6oi4","手机号：","lang")}},[t._v(" "+t._s(t.recorddata.mobile)+" ")]),e("el-form-item",{attrs:{label:$t("sv8l9g5","获取积分：","lang")}},[t._v(" "+t._s(t.recorddata.get_points)+" ")]),e("el-form-item",{attrs:{label:$t("xov6wk7","活动群组编号：","lang")}},[t._v(" "+t._s(t.recorddata.group_no)+" ")]),e("el-form-item",{attrs:{label:$t("k7y7pr9","进内购企业白名单：","lang")}},[t._v(" "+t._s(1==t.recorddata.is_white_list?$t("k6n1","是","lang"):$t("gme1","否","lang"))+" ")]),0==t.recorddata.is_white_list?e("el-form-item",{attrs:{label:$t("infiw44","适用会员","lang")}},[e("el-checkbox-group",{model:{value:t.memberLevelList,callback:function(e){t.memberLevelList=e},expression:"memberLevelList"}},[t._l(t.memberGrade,function(a){return e("el-checkbox",{key:a.grade_id,attrs:{label:a.grade_id+""}},[t._v(" "+t._s(a.grade_name)+" ")])}),t._l(t.vipGrade,function(a){return e("el-checkbox",{key:a.lv_type,attrs:{label:a.lv_type+""}},[t._v($t("euf53"," 付费","lang")+t._s(a.grade_name)+" ")])})],2)],1):t._e(),0==t.recorddata.is_white_list?e("el-form-item",{attrs:{label:$t("a02w415","适用店铺：","lang")}},[e("SpFinder",{staticStyle:{width:"80%"},attrs:{"no-selection":!0,setting:t.shopSetting,data:t.recorddata.distributor_list,"show-pager":!1}})],1):t._e(),1==t.recorddata.is_white_list?e("el-form-item",{attrs:{label:$t("bz9q93","企业：","lang")}},[e("SpFinder",{staticStyle:{width:"80%"},attrs:{"no-selection":!0,setting:t.setting,data:t.recorddata.enterprise_list,"show-pager":!1}})],1):t._e()],1),e("el-card",{attrs:{header:$t("cg3ci36","报名登记信息","lang"),shadow:"naver"}},[e("el-form-item",{attrs:{label:$t("gsda7u5","审核结果：","lang"),prop:"status"}},["pending"==t.recorddata.status?e("el-tag",{attrs:{type:"warning",size:"mini"}},[t._v($t("cx85385"," 待审核 ","lang"))]):t._e(),"passed"==t.recorddata.status?e("el-tag",{attrs:{type:"success",size:"mini"}},[t._v($t("cxy8ch5"," 已通过 ","lang"))]):t._e(),"rejected"==t.recorddata.status?e("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v($t("cr8l5v5"," 已拒绝 ","lang"))]):t._e()],1),e("el-form-item",{attrs:{label:$t("t9iknr5","报名问卷：","lang")}},t._l(t.recorddata.content,function(a,r){return e("el-card",{key:r,staticClass:"box-card",staticStyle:{width:"90%"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(a.title))])]),t._l(a.formdata,function(a,r){return e("div",{key:r,staticClass:"text item"},[e("el-col",{staticStyle:{display:"flex"}},[e("div",[t._v(t._s(a.field_title)+":")]),"Attendance IDCard"!=a.field_name&&"Attachment upload"!=a.field_name||"idcard"!=a.form_element&&"otherfile"!=a.form_element||Array.isArray(a.answer)?e("div",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.answer))]):e("div",{staticStyle:{display:"flex"}},t._l(a.answer?a.answer?.split(","):[],function(t,r){return e("div",{key:r},[e("el-image",{staticStyle:{width:"100px",height:"100px","border-radius":"5px",margin:"10px"},attrs:{src:t,"preview-src-list":a.answer?a.answer.split(","):[]}})],1)}),0)])],1)})],2)}),1)],1),"pending"!=t.recorddata.status||t.IS_DISTRIBUTOR()?t._e():e("el-card",{attrs:{header:$t("8tpudo6","活动报名审核","lang"),shadow:"naver"}},["pending"==t.recorddata.status?e("el-form-item",{attrs:{label:$t("foi3i85","是否同意：","lang")}},[e("el-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1):t._e(),!1===t.form.status&&"pending"==t.recorddata.status?e("el-form-item",{attrs:{label:$t("ng2o0i5","拒绝原因：","lang")}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1):t._e()],1)],1),e("template",{slot:"page-footer"},[e("div",{staticClass:"text-center"},["pending"!=t.recorddata.status||t.IS_DISTRIBUTOR()?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.submitAction}},[t._v($t("agptt76"," 提交审核 ","lang"))]),e("el-button",{on:{click:t.handleCancel}},[t._v($t("dd4ni4"," 取消 ","lang"))])],1)])],2)},[],!1,null,"2e84f6f1",null).exports}}]);