"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7384],{87384:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});a(44114);var n=a(94644),s=a(85135),l={data(){return{task_name:"",failVisible:!1,search_options:[{label:$t("cyvvh3","发送中","lang"),value:"1"},{label:$t("b65a734","发送成功","lang"),value:"3"},{label:$t("b643fo4","发送失败","lang"),value:"2"}],smeType_options:[{label:$t("nbcoc3","验证码","lang"),value:"0"},{label:$t("fgxpjz4","短信通知","lang"),value:"1"},{label:$t("cyx5ez4","推广短信","lang"),value:"2"}]}},computed:{setting(){return e=this,(0,n.createSetting)({search:[{key:"time_start",name:$t("b66bda4","发送时间","lang"),type:"date-range",defaultTime:["00:00:00","23:59:59"],startPlaceholder:$t("cd0ag54","开始日期","lang"),endPlaceholder:$t("gfhy2u4","结束日期","lang")},{key:"template_type",name:$t("fgu70k4","短信类型","lang"),type:"select",options:e.smeType_options},{key:"status",name:$t("b686sb4","发送状态","lang"),type:"select",options:e.search_options},{key:"template_code",name:$t("e9n1cl6","模板CODE","lang")},{key:"mobile",name:$t("ewbd43","手机号","lang")},{key:"sms_content",name:$t("fgmwrs4","短信内容","lang")},{key:"task_name",name:$t("ab4zrd4","任务名称","lang"),slot:"task_name"}],columns:[{name:$t("puq6i28","接受短信的手机号","lang"),key:"mobile",width:"140px"},{name:$t("e9n1cl6","模板CODE","lang"),key:"template_code",width:"120px"},{name:$t("fgmwrs4","短信内容","lang"),key:"sms_content"},{name:$t("fgu70k4","短信类型","lang"),key:"template_type",formatter:e=>{switch(e){case"0":return`${$t("nbcoc3","验证码","lang")}`;case"1":return`${$t("fgxpjz4","短信通知","lang")}`;case"2":return`${$t("cyx5ez4","推广短信","lang")}`}},width:"100px"},{name:$t("fgnxu14","短信场景","lang"),key:"scene_name"},{name:$t("b66bda4","发送时间","lang"),key:"created",formatter:e=>{var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},width:"170px"},{name:$t("b686sb4","发送状态","lang"),key:"status",width:"100px",render:(e,{row:t})=>e("div",{class:"yahh"},[e("div",{class:`status-icon ${"3"==t.status&&"success"} ${"2"==t.status&&"fail"}`}),e("span",{},"1"==t.status&&$t("cyvvh3","发送中","lang")||"3"==t.status&&$t("b65a734","发送成功","lang")||"2"==t.status&&$t("8w1bd05","发送失败 ","lang")),2==t.status&&t.reason&&e("el-tooltip",{class:"tips",props:{effect:"dark",content:t.reason,placement:"top"}},[e("i",{class:"el-icon-warning-outline"},"")])])}]});var e}},mounted(){const{task_name:e}=this.$route.query;this.task_name=e},methods:{addTemplate(){this.$router.push({path:this.matchRoutePath("edit")})},beforeSearch(e){return{...e,task_name:this.task_name}},afterSearch(){},async deleteTemplateHandle(e){await(0,s.deleteSmsTemplate)(e);this.$message.success($t("azeh8z4","删除成功","lang")),this.$refs.finder.refresh(!0)}}},r=(0,a(81656).A)(l,function(){var e=this,t=e._self._c;return t("div",[-1===e.$route.path.indexOf("edit")?t("div",{staticClass:"sms_signatures"},[t("SpFinder",{ref:"finder",attrs:{"split-count":4,"search-row-count":2,"fixed-row-action":!0,setting:e.setting,"no-selection":"",hooks:{beforeSearch:e.beforeSearch,afterSearch:e.afterSearch},url:"/aliyunsms/record/list"},scopedSlots:e._u([{key:"task_name",fn:function(){return[t("el-input",{attrs:{placeholder:$t("n7y13i7","请输入任务名称","lang"),clearable:""},model:{value:e.task_name,callback:function(t){e.task_name=t},expression:"task_name"}})]},proxy:!0}],null,!1,1380866970)})],1):e._e(),t("router-view")],1)},[],!1,null,null,null).exports}}]);