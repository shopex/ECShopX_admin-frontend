"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2345],{52345:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});r(44114);var a=r(94644),o=r(95093),n=r.n(o),l=r(95353),s={name:"",data(){return{formQuery:{name:"",mobile:""},setting:(0,a.createSetting)({actions:[{name:$t("ibpi2","查看","lang"),key:"detail",type:"button",buttonType:"text",action:{handler:([e])=>{const{path:t}=this.$route;this.$router.push({path:`${t}/info/${e.chief_id}/${e.distributor_id}`})}}}],columns:[{name:$t("fljx2","团长","lang"),key:"chief_name"},{name:$t("ewbd43","手机号","lang"),key:"chief_mobile"},{name:$t("i6yz2","来源","lang"),key:"chief_mobile",render:(e,{row:t})=>e("span",{},this.getSource(t.source))},{name:$t("fd5ujm4","申请时间","lang"),key:"created_at",render:(e,{row:t})=>e("span",{},n()(1e3*t.created_at).format("YYYY-MM-DD HH:mm:ss"))}]}),resloveDialog:!1,resloveForm:{apply_id:"",approve_status:1,refuse_reason:""},resloveFormList:[{label:$t("g4jc2","审批","lang"),key:"approve_status",type:"radio",options:[{label:1,name:$t("ettv2","同意","lang")},{label:2,name:$t("budzk3","不同意","lang")}],onChange:e=>{this.resloveFormList[1].isShow=2==e}},{label:$t("czp1gs4","拒绝原因","lang"),key:"refuse_reason",type:"input",placeholder:$t("kjdze37","请输入拒绝原因","lang"),isShow:!1,validator:(e,t,r)=>{2!=this.resloveForm.approve_status||t?r():r(new Error($t("adohlc4","不能为空","lang")))}}]}},created(){},methods:{onSearch(){this.$refs.finder.refresh(!0)},beforeSearch(e){const t=JSON.parse(JSON.stringify(this.formQuery));return"-1"==t.approve_status&&delete t.approve_status,{...e,...t}},afterSearch(){},async onResloveSubmit(){const{apply_id:e,approve_status:t,refuse_reason:r}=this.resloveForm;await this.$api.community.approveChief(e,{approve_status:t,refuse_reason:r}),this.resloveDialog=!1,this.$refs.finder.refresh(!0)},getSource(e){return"0"==e?$t("cqv4o64","手动导入","lang"):"1"==e?$t("a7wa0h4","主动申请","lang"):void 0},handleApprove(){const{path:e}=this.$route;this.$router.push({path:`${e}/approve`})},async chiefupload(){await this.$dialog.open({title:$t("bkug064","团长导入","lang"),content:()=>r.e(5311).then(r.bind(r,85311)),buttonCancel:{text:$t("eod62","关闭","lang")},buttonConfirm:{visible:!1}})}},computed:{...(0,l.L8)(["login_type"])}},i=(0,r(81656).A)(s,function(){var e=this,t=e._self._c;return t("SpRouterView",[t("SpPage",[t("SpFilterForm",{attrs:{model:e.formQuery},on:{onSearch:e.onSearch,onReset:e.onSearch}},[t("SpFilterFormItem",{attrs:{prop:"name",label:$t("3sckir5","团长姓名:","lang")}},[t("el-input",{attrs:{placeholder:$t("ly8xk07","请输入团长姓名","lang")},model:{value:e.formQuery.name,callback:function(t){e.$set(e.formQuery,"name",t)},expression:"formQuery.name"}})],1),t("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("cttsc24","手机号:","lang")}},[t("el-input",{attrs:{placeholder:$t("tus14y8","请输入团长手机号","lang")},model:{value:e.formQuery.mobile,callback:function(t){e.$set(e.formQuery,"mobile",t)},expression:"formQuery.mobile"}})],1)],1),t("div",{staticClass:"action-container"},[t("el-button",{attrs:{type:"primary",icon:"el-plus-circle"},on:{click:e.chiefupload}},[e._v($t("iy3ewq6"," 团长导入 ","lang"))]),t("el-button",{attrs:{type:"primary",icon:"el-plus-circle"},on:{click:e.handleApprove}},[e._v($t("iy4g0b6"," 团长审批 ","lang"))])],1),t("SpFinder",{ref:"finder",attrs:{"no-selection":"",setting:e.setting,hooks:{beforeSearch:e.beforeSearch,afterSearch:e.afterSearch},url:"/community/chief/list"}}),t("SpDialog",{ref:"resloveDialogRef",attrs:{title:`${$t("g4jc2","审批","lang")}`,form:e.resloveForm,"form-list":e.resloveFormList},on:{onSubmit:e.onResloveSubmit},model:{value:e.resloveDialog,callback:function(t){e.resloveDialog=t},expression:"resloveDialog"}})],1)],1)},[],!1,null,"46c5b288",null).exports}}]);