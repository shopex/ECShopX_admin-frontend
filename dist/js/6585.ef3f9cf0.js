"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6585],{36585:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});e(44114);var s=[function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("div",{staticClass:"section-title"},[this._v($t("dbadio4","昨日概况","lang"))])])}],i=e(62477),r=e.n(i),n=e(38025),l=(e(47003),e(5947)),d=e.n(l),v={props:{wxapp:{type:String,default:""}},data(){return{wxAppId:"",value:"",chartObj:"",date:[{label:$t("hv5t2","昨天","lang"),value:"yesterday"},{label:$t("dkrhb74","最近7天","lang"),value:"weekly"},{label:$t("5bf5dx5","最近30天","lang"),value:"monthly"}],pickerOptions:{shortcuts:[{text:$t("dw2n2","今天","lang"),onClick(t){t.$emit("pick",new Date)}},{text:$t("hv5t2","昨天","lang"),onClick(t){const a=new Date;a.setTime(a.getTime()-864e5),t.$emit("pick",a)}},{text:$t("bu3mt3","一周前","lang"),onClick(t){const a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",a)}}]},surveyLoading:!1,survey:{},share:{},chart:{tabCon:[{label:$t("pqgssg7","累计访问用户数","lang"),value:"visit_total"},{label:$t("csw0fw4","打开次数","lang"),value:"session_cnt"},{label:$t("i90khq4","访问次数","lang"),value:"visit_pv"},{label:$t("i8vqkl4","访问人数","lang"),value:"visit_uv"},{label:$t("yoi5nm6","新访问用户数","lang"),value:"visit_uv_new"},{label:$t("aohbx04","分享次数","lang"),value:"share_pv"},{label:$t("aochzv4","分享人数","lang"),value:"share_uv"},{label:$t("kz39ar6","人均停留时长","lang"),value:"stay_time_uv"},{label:$t("gwtelw6","次均停留时长","lang"),value:"stay_time_session"}],currentTabName:$t("pqgssg7","累计访问用户数","lang"),currentTab:"visit_total",tabPop:!1,chartLoading:!1,date:"weekly",ref_date:[],data:{visit_total:[],session_cnt:[],visit_pv:[],visit_uv:[],visit_uv_new:[],share_pv:[],share_uv:[],stay_time_uv:[],stay_time_session:[]}},visitPage:{tabCon:[{label:$t("to4oce6","TOP入口页","lang"),value:"entrypage_pv"},{label:$t("tnia3s6","TOP受访页","lang"),value:"page_visit_pv"}],currentTabName:$t("tnia3s6","TOP受访页","lang"),currentTab:"page_visit_pv",visitLoading:!1,tabPop:!1,date:"weekly",data:{entrypage_pv:[],page_visit_pv:[]},list:[]}}},watch:{wxapp(t){t&&(this.setAppId(t),this.wxAppId&&(this.updateSurvey(),this.fetchChartData(),this.updateVisitPage()))}},mounted(){d().start(),this.setAppId(this.wxapp),this.wxAppId&&(this.updateSurvey(),this.fetchChartData(),this.updateVisitPage(),d().done())},methods:{chartInit(){var t={type:"line",data:{labels:this.chart.ref_date,datasets:[{label:this.chart.currentTabName,backgroundColor:this.chartColors.red,borderColor:this.chartColors.red,data:this.chart.data[this.chart.currentTab],fill:!1}]},options:{responsive:!0,tooltips:{mode:"index",intersect:!0},hover:{mode:"nearest",intersect:!0}}},a=document.getElementById("canvas").getContext("2d");this.chartObj=new(r())(a,t)},updateSurvey(){this.surveyLoading=!0,(0,n.summarybydate)({wxaAppId:this.wxAppId,date:"",queryType:""}).then(t=>{this.survey=t.data.data,this.surveyLoading=!1})},chartHandle(t){this.chart.date=t,this.fetchChartData()},tabChartHandle(t){this.chart.currentTabName=this.chart.tabCon[t].label,this.chart.currentTab=this.chart.tabCon[t].value,this.chart.tabPop=!1,this.updateChart()},tabVisitHandle(t){this.visitPage.currentTabName=this.chart.tabCon[t].label,this.visitPage.currentTab=this.chart.tabCon[t].value,this.visitPage.tabPop=!1,this.updateChart()},updateChart(){this.chartObj.chart.data.labels=this.chart.ref_date,this.chartObj.chart.data.datasets[0].data=this.chart.data[this.chart.currentTab],this.chartObj.chart.data.datasets[0].label=this.chart.currentTabName,this.chartObj.update()},fetchChartData(){this.chart.chartLoading=!0,(0,n.getSummaryTrend)({wxaAppId:this.wxAppId,queryType:this.chart.date}).then(t=>{for(var a=[],e=[],s=[],i=[],r=0;r<t.data.data.length;r++)i.push(t.data.data[r].ref_date),a.push(t.data.data[r].visit_total),e.push(t.data.data[r].share_pv),s.push(t.data.data[r].share_uv);this.chart.ref_date=i,this.chart.data.visit_total=a,this.chart.data.share_pv=e,this.chart.data.share_uv=s,this.chartObj?this.updateChart():this.chartInit(),this.chart.chartLoading=!1}),(0,n.getVisitTrend)({wxaAppId:this.wxAppId,queryType:this.chart.date}).then(t=>{for(var a=[],e=[],s=[],i=[],r=[],n=[],l=0;l<t.data.data.length;l++)a.push(t.data.data[l].session_cnt),e.push(t.data.data[l].visit_pv),s.push(t.data.data[l].visit_uv),i.push(t.data.data[l].visit_uv_new),r.push(t.data.data[l].stay_time_uv),n.push(t.data.data[l].stay_time_session);this.chart.data.session_cnt=a,this.chart.data.visit_pv=e,this.chart.data.visit_uv=s,this.chart.data.visit_uv_new=i,this.chart.data.stay_time_uv=r,this.chart.data.stay_time_session=n,this.chartObj?this.updateChart():this.chartInit(),this.chart.chartLoading=!1})},tabVisitHandle(t){this.visitPage.currentTabName=this.visitPage.tabCon[t].label,this.visitPage.currentTab=this.visitPage.tabCon[t].value,this.visitPage.tabPop=!1,this.visitPage.list=this.visitPage.data[this.visitPage.currentTab]},visitPageHandle(t){this.visitPage.date=t,this.updateVisitPage()},updateVisitPage(){this.visitPage.visitLoading=!0,(0,n.getVisitPage)({wxaAppId:this.wxAppId,queryType:this.visitPage.date}).then(a=>{for(var e=[],s=[],i=a.data.data.total.page_visit_pv,r=a.data.data.total.entrypage_pv,n=a.data.data.list,l=0;l<n.length;l++){var d={},v={};d.page_path=n[l].page_path,d.pv_num=n[l].page_visit_pv,d.percent=Math.floor(n[l].page_visit_pv/i*100*100)/100+"%",e.push(d),v.page_path=n[l].page_path,v.pv_num=n[l].entrypage_pv,v.percent=Math.floor(n[l].entrypage_pv/r*100*100)/100+"%",s.push(v)}this.visitPage.data.page_visit_pv=e.sort(t("pv_num")),this.visitPage.data.entrypage_pv=s.sort(t("pv_num")),this.visitPage.list=this.visitPage.data[this.visitPage.currentTab],this.visitPage.visitLoading=!1});var t=function(t){return function(a,e){var s=a[t],i=e[t];return isNaN(Number(s))||isNaN(Number(i))||(s=Number(s),i=Number(i)),s>i?-1:s<i?1:0}}},setAppId(t){this.wxAppId=t}}},c=e(81656),o=(0,c.A)(v,function(){var t=this,a=t._self._c;return a("div",[a("section",{staticClass:"section section-white app_detail_overview"},[t._m(0),a("div",{staticClass:"section-body"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.surveyLoading,expression:"surveyLoading"}],staticClass:"data_overview_list_wrp"},[a("div",{staticClass:"data_overview_list js_YO_dataBox"},[a("div",{staticClass:"data_overview_item"},[a("p",{staticClass:"data_overview_title"},[t._v($t("csw0fw4","打开次数","lang"))]),a("p",{staticClass:"data_overview_desc"},[t._v(" "+t._s(t.survey.session_cnt?t.survey.session_cnt:"0")+" ")]),a("ul",{staticClass:"data_overview_percent"},[a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("k4l1","日","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.session_cnt_dayRate?t.survey.session_cnt_dayRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("go81","周","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.session_cnt_weekRate?t.survey.session_cnt_weekRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("kco1","月","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.session_cnt_monthRate?t.survey.session_cnt_monthRate+"%":"-"))])])])])])]),a("div",{staticClass:"data_overview_item"},[a("p",{staticClass:"data_overview_title"},[t._v($t("o7vi0z8","访问次数 /人数","lang"))]),a("p",{staticClass:"data_overview_desc"},[t._v(" "+t._s(t.survey.visit_pv?t.survey.visit_pv:"0")+" / "+t._s(t.survey.visit_uv?t.survey.visit_uv:"0")+" ")]),a("ul",{staticClass:"data_overview_percent"},[a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("k4l1","日","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_pv_dayRate?t.survey.visit_pv_dayRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_dayRate?t.survey.visit_uv_dayRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("go81","周","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_pv_weekRate?t.survey.visit_pv_weekRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_weekRate?t.survey.visit_uv_weekRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("kco1","月","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_pv_monthRate?t.survey.visit_pv_monthRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_monthRate?t.survey.visit_uv_monthRate+"%":"-"))])])])])])]),a("div",{staticClass:"data_overview_item"},[a("p",{staticClass:"data_overview_title"},[t._v($t("yoi5nm6","新访问用户数","lang"))]),a("p",{staticClass:"data_overview_desc"},[t._v(" "+t._s(t.survey.visit_uv_new?t.survey.visit_uv_new:"0")+" ")]),a("ul",{staticClass:"data_overview_percent"},[a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("k4l1","日","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_new_dayRate?t.survey.visit_uv_new_dayRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("go81","周","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_new_weekRate?t.survey.visit_uv_new_weekRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("kco1","月","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.visit_uv_new_monthRate?t.survey.visit_uv_new_monthRate+"%":"-"))])])])])])]),a("div",{staticClass:"data_overview_item"},[a("p",{staticClass:"data_overview_title"},[t._v($t("v1jt218","分享次数 /人数","lang"))]),a("p",{staticClass:"data_overview_desc"},[t._v(" "+t._s(t.share.share_pv?t.share.share_pv:"0")+" / "+t._s(t.share.share_uv?t.share.share_uv:"0")+" ")]),a("ul",{staticClass:"data_overview_percent"},[a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("k4l1","日","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_pv_dayRate?t.survey.share_pv_dayRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_uv_dayRate?t.survey.share_uv_dayRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("go81","周","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_pv_weekRate?t.survey.share_pv_weekRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_uv_weekRate?t.survey.share_uv_weekRate+"%":"-"))])])])]),a("li",{staticClass:"data_overview_percent_item"},[a("div",{staticClass:"data_overview_percent_item_inner"},[a("label",[t._v($t("kco1","月","lang"))]),a("p",{staticClass:"tips_global"},[a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_pv_monthRate?t.survey.share_pv_monthRate+"%":"-"))]),t._v(" / "),a("span",{staticClass:"mini_tips"},[t._v(t._s(t.survey.share_uv_monthRate?t.survey.share_uv_monthRate+"%":"-"))])])])])])])])])])]),a("section",{staticClass:"section section-white"},[a("div",{staticClass:"section-header"},[a("div",{staticClass:"section-title"},[t._v(" "+t._s(t.chart.currentTabName)+" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.chart.tabPop,callback:function(a){t.$set(t.chart,"tabPop",a)},expression:"chart.tabPop"}},[a("ul",{staticClass:"tab-list"},t._l(t.chart.tabCon,function(e,s){return a("li",{key:s,on:{click:function(a){return t.tabChartHandle(s)}}},[t._v(" "+t._s(e.label)+" ")])}),0),a("i",{staticClass:"iconfont icon-chevron-down tab-handle",attrs:{slot:"reference"},slot:"reference"})])],1)]),a("div",{staticClass:"section-header"},[a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.chartHandle},model:{value:t.chart.date,callback:function(a){t.$set(t.chart,"date",a)},expression:"chart.date"}},t._l(t.date,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chart.chartLoading,expression:"chart.chartLoading"}],staticClass:"section-body"},[a("canvas",{attrs:{id:"canvas",height:"100"}})])]),a("section",{staticClass:"section section-white"},[a("div",{staticClass:"section-header"},[a("div",{staticClass:"section-title"},[t._v(" "+t._s(t.visitPage.currentTabName)+" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.visitPage.tabPop,callback:function(a){t.$set(t.visitPage,"tabPop",a)},expression:"visitPage.tabPop"}},[a("ul",{staticClass:"tab-list"},t._l(t.visitPage.tabCon,function(e,s){return a("li",{key:s,on:{click:function(a){return t.tabVisitHandle(s)}}},[t._v(" "+t._s(e.label)+" ")])}),0),a("i",{staticClass:"iconfont icon-chevron-down tab-handle",attrs:{slot:"reference"},slot:"reference"})])],1)]),a("div",{staticClass:"section-header"},[a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.visitPageHandle},model:{value:t.visitPage.date,callback:function(a){t.$set(t.visitPage,"date",a)},expression:"visitPage.date"}},t._l(t.date,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("div",{staticClass:"section-body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.visitPage.visitLoading,expression:"visitPage.visitLoading"}],attrs:{data:t.visitPage.list}},[a("el-table-column",{attrs:{prop:"page_path",label:$t("jv3vlu4","页面路径","lang")}}),a("el-table-column",{attrs:{prop:"pv_num",label:$t("i90khq4","访问次数","lang"),width:"180"}}),a("el-table-column",{attrs:{prop:"percent",label:$t("eruc2","占比","lang"),width:"180"}})],1)],1)])])},s,!1,null,"bb1834a4",null).exports,h=[function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("div",{staticClass:"section-title"},[this._v($t("sbz1rn7","性别及年龄分布","lang"))])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("div",{staticClass:"section-title"},[this._v($t("bch6pz4","地区分布","lang"))])])},function(){var t=this._self._c;return t("div",{staticClass:"section-body"},[t("canvas",{attrs:{id:"area-bar"}})])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("div",{staticClass:"section-title"},[this._v($t("fu9ez57","终端及机型分布","lang"))])])}],p={props:{wxapp:{type:String,default:""}},data(){return{user:[{label:$t("j9ua8p5","活跃用户数","lang"),value:"visit_uv"},{label:$t("gx7k315","新增用户数","lang"),value:"visit_uv_new"}],date:[{label:$t("hv5t2","昨天","lang"),value:"yesterday"},{label:$t("dkrhb74","最近7天","lang"),value:"weekly"},{label:$t("5bf5dx5","最近30天","lang"),value:"monthly"}],gender:{currentUserType:"visit_uv",date:"weekly",chart:{gender:"",age:""},data:""},area:{currentUserType:"visit_uv",date:"weekly",chart:"",data:""},terminal:{currentUserType:"visit_uv",date:"weekly",chart:{terminal:"",model:""},data:""}}},watch:{wxapp(t){t&&(this.setAppId(t),this.wxAppId&&this.fetchUserData())}},mounted(){this.setAppId(this.wxapp),this.wxAppId&&this.fetchUserData()},methods:{initGenderChart(){if(this.gender.data){for(var t=[],a=[],e=[],s=[],i=this.gender.data.visit_uv.genders,n=this.gender.data.visit_uv.ages,l=0;l<i.length;l++)t.push(i[l].name),a.push(i[l].value);for(l=0;l<n.length;l++)e.push(n[l].name),s.push(n[l].value);var d={type:"doughnut",data:{datasets:[{data:a,backgroundColor:[this.chartColors.red,this.chartColors.orange,this.chartColors.yellow]}],labels:t},options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:$t("ch10o14","性别分布","lang")},animation:{animateScale:!0,animateRotate:!0}}},v={labels:e,datasets:[{label:"",backgroundColor:(0,r().helpers.color)(this.chartColors.red).alpha(.5).rgbString(),borderColor:this.chartColors.red,borderWidth:1,data:s}]},c=document.getElementById("gender-doughnut").getContext("2d"),o=document.getElementById("gender-bar").getContext("2d");this.gender.chart.gender=new(r())(c,d),this.gender.chart.age=new(r())(o,{type:"bar",data:v,options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:$t("ckn4254","年龄分布","lang")}}})}},initAreaChart(){if(this.area.data){for(var t=[],a=[],e=this.gender.data.visit_uv.city,s=0;s<e.length;s++)t.push(e[s].name),a.push(e[s].value);var i={labels:t,datasets:[{label:"",backgroundColor:(0,r().helpers.color)(this.chartColors.red).alpha(.5).rgbString(),borderColor:this.chartColors.red,borderWidth:0,data:a}]},n=document.getElementById("area-bar").getContext("2d");this.area.chart=new(r())(n,{type:"horizontalBar",data:i,options:{responsive:!0,legend:{position:"top"},title:{display:!1}}})}},initTerminal(){if(this.terminal.data){for(var t=[],a=[],e=[],s=[],i=this.gender.data.visit_uv.platforms,n=this.gender.data.visit_uv.devices,l=0;l<i.length;l++)t.push(i[l].name),a.push(i[l].value);for(l=0;l<n.length;l++)e.push(n[l].name),s.push(n[l].value);var d={type:"doughnut",data:{datasets:[{data:a,backgroundColor:[this.chartColors.red,this.chartColors.orange,this.chartColors.yellow],label:$t("gi2n8k4","终端分布","lang")}],labels:t},options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:$t("gi2n8k4","终端分布","lang")},animation:{animateScale:!0,animateRotate:!0}}},v={type:"doughnut",data:{datasets:[{data:s,backgroundColor:[this.chartColors.red,this.chartColors.orange,this.chartColors.yellow,this.chartColors.green,this.chartColors.blue,this.chartColors.purple,this.chartColors.grey,this.chartColors.red,this.chartColors.orange,this.chartColors.yellow],label:$t("ddxq8e4","机型分布","lang")}],labels:e},options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:$t("ddxq8e4","机型分布","lang")},animation:{animateScale:!0,animateRotate:!0}}},c=document.getElementById("terminal-doughnut").getContext("2d"),o=document.getElementById("model-doughnut").getContext("2d");this.terminal.chart.terminal=new(r())(c,d),this.terminal.chart.model=new(r())(o,v)}},handleGenderUser(t){this.gender.currentUserType=t,this.updateGender()},handleGenderDate(t){this.gender.date=t,this.fetchUserData(t,"gender")},handleAreaUser(t){this.area.currentUserType=t,this.updateArea()},handleAreaDate(t){this.area.date=t,this.fetchUserData(t,"area")},handleTerminalUser(t){this.terminal.currentUserType=t,this.updateTerminal()},handleTerminalDate(t){this.terminal.date=t,this.fetchUserData(t,"terminal")},updateGender(){for(var t=[],a=[],e=[],s=[],i=this.gender.data[this.gender.currentUserType].genders,r=this.gender.data[this.gender.currentUserType].ages,n=0;n<i.length;n++)t.push(i[n].name),a.push(i[n].value);for(n=0;n<r.length;n++)e.push(r[n].name),s.push(r[n].value);this.gender.chart.gender.data.labels=t,this.gender.chart.gender.data.datasets[0].data=a,this.gender.chart.gender.update(),this.gender.chart.age.data.labels=e,this.gender.chart.age.data.datasets[0].data=s,this.gender.chart.age.update()},updateArea(){for(var t=[],a=[],e=this.area.data[this.area.currentUserType].city,s=0;s<e.length;s++)t.push(e[s].name),a.push(e[s].value);this.area.chart.data.labels=t,this.area.chart.data.datasets[0].data=a,this.area.chart.update()},updateTerminal(){for(var t=[],a=[],e=[],s=[],i=this.terminal.data[this.terminal.currentUserType].platforms,r=this.terminal.data[this.terminal.currentUserType].devices,n=0;n<i.length;n++)t.push(i[n].name),a.push(i[n].value);for(n=0;n<r.length;n++)e.push(r[n].name),s.push(r[n].value);this.terminal.chart.terminal.data.labels=t,this.terminal.chart.terminal.data.datasets[0].data=a,this.terminal.chart.terminal.update(),this.terminal.chart.model.data.labels=e,this.terminal.chart.model.data.datasets[0].data=s,this.terminal.chart.model.update()},fetchUserData(t,a){(0,n.getUserPortrait)({wxaAppId:this.wxAppId,queryType:t||"weekly"}).then(t=>{a?(this[a].data=t.data.data,"gender"===a&&this.updateGender(),"area"===a&&this.updateArea(),"terminal"===a&&this.updateTerminal(),this[a].chart.update()):(this.gender.data=t.data.data,this.area.data=t.data.data,this.terminal.data=t.data.data,this.gender.chart.gender?this.updateGender():this.initGenderChart(),this.area.chart?this.updateArea():this.initAreaChart(),this.terminal.chart.terminal?this.updateTerminal():this.initTerminal())})},setAppId(t){this.wxAppId=t}}},_={components:{survey:o,user:(0,c.A)(p,function(){var t=this,a=t._self._c;return a("div",[a("section",{staticClass:"section section-white"},[t._m(0),a("div",{staticClass:"section-header"},[a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleGenderUser},model:{value:t.gender.currentUserType,callback:function(a){t.$set(t.gender,"currentUserType",a)},expression:"gender.currentUserType"}},t._l(t.user,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleGenderDate},model:{value:t.gender.date,callback:function(a){t.$set(t.gender,"date",a)},expression:"gender.date"}},t._l(t.date,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("div",{staticClass:"section-body"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"content-padded-b"},[a("canvas",{attrs:{id:"gender-doughnut"}})])]),a("el-col",{attrs:{span:12}},[a("canvas",{attrs:{id:"gender-bar"}})])],1)],1)]),a("section",{staticClass:"section section-white"},[t._m(1),a("div",{staticClass:"section-header"},[a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleAreaUser},model:{value:t.area.currentUserType,callback:function(a){t.$set(t.area,"currentUserType",a)},expression:"area.currentUserType"}},t._l(t.user,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleAreaDate},model:{value:t.area.date,callback:function(a){t.$set(t.area,"date",a)},expression:"area.date"}},t._l(t.date,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._m(2)]),a("section",{staticClass:"section section-white"},[t._m(3),a("div",{staticClass:"section-header"},[a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleTerminalUser},model:{value:t.terminal.currentUserType,callback:function(a){t.$set(t.terminal,"currentUserType",a)},expression:"terminal.currentUserType"}},t._l(t.user,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:t.handleTerminalDate},model:{value:t.terminal.date,callback:function(a){t.$set(t.terminal,"date",a)},expression:"terminal.date"}},t._l(t.date,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("div",{staticClass:"section-body"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"content-padded-b"},[a("canvas",{attrs:{id:"terminal-doughnut"}})])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"content-padded-b"},[a("canvas",{attrs:{id:"model-doughnut"}})])])],1)],1)])])},h,!1,null,null,null).exports},data(){return{wxapp_id:"",activeName:"survey",currentApp:"",loaded:!1,wxapps:[]}},mounted(){this.$route.query&&this.$route.query.app_id&&(this.wxapp_id=this.$route.query.app_id,this.currentApp=this.$route.query.app_id),this.wxapps&&(this.currentApp=this.wxapp_id,this.loaded=!0)},methods:{wxaHandle(t){this.currentApp=t},handleClick(t,a){},toBind(){this.$router.push({path:this.matchInternalRoute("editauthorize")})}}},u=(0,c.A)(_,function(){var t=this,a=t._self._c;return t.loaded?a("SpPage",[t.currentApp?a("div",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:$t("ie7n2","概况","lang"),name:"survey"}},[a("survey",{attrs:{wxapp:t.currentApp}})],1),a("el-tab-pane",{attrs:{label:$t("f6ww8z4","用户画像","lang"),name:"user"}},[a("user",{attrs:{wxapp:t.currentApp}})],1)],1)],1):a("div",[a("div",{staticClass:"section section-white"},[a("div",{staticClass:"section-body content-center no-bind"},[a("div",[a("i",{staticClass:"iconfont icon-info-circle",staticStyle:{"font-size":"70px"}})]),a("div",{staticClass:"content-padded"},[t._v($t("dkxeww6","未绑定小程序","lang"))]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.toBind}},[t._v($t("bksgyk5"," 去绑定 ","lang"))])],1)])])])]):t._e()},[],!1,null,null,null).exports}}]);