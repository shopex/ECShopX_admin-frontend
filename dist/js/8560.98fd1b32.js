"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[8560],{88560:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var l=a(95353),i=a(5134),n={data(){return{editSuperiorVisible:!1,modalLoading:!1,paramsModal:{page:1,pageSize:14,mobile:""},identifierModal:"",modalList:[],modal_total_count:0,params:{page:1,pageSize:20,promoter_id:0},list:[],loading:!1,total_count:0}},mounted(){this.$route.query.promoter_id&&(this.params.promoter_id=this.$route.query.promoter_id),this.getPopularizeChildrenFun()},methods:{handleCurrentChange(e){this.params.page=e,this.getPopularizeChildrenFun()},editSuperior(e){this.editSuperiorVisible=!0,this.row=e,this.identifierModal="",this.numberSearchModal()},submitSuperiorAction(){this.editPopularizeRemoveFun(),this.editSuperiorVisible=!1},handleCancelSuperior(){this.editSuperiorVisible=!1},numberSearchModal(e){this.paramsModal.page=1,this.paramsModal.mobile=this.identifierModal,this.getPopularizeListModalFun(this.paramsModal)},getPopularizeListModalFun(e){this.modalLoading=!0,(0,i.getPopularizeList)(e).then(e=>{this.modalList=e.data.data.list,this.modal_total_count=Number(e.data.data.total_count),this.modalLoading=!1})},handleCurrentChangeUpLV(e){e&&e.user_id&&(this.currentRow=e.user_id)},editPopularizeRemoveFun(){(0,i.editPopularizeRemove)({user_id:this.row.user_id,new_user_id:this.currentRow}).then(e=>{this.message=$t("btgue3","上下级","lang"),this.loading=!1,this.$message({message:$t("ode92","调整","lang")+this.message+$t("h4sv2","成功","lang"),type:"success",duration:5e3}),this.fetchList()})},getPopularizeChildrenFun(){(0,i.getPopularizeChildren)(this.params).then(e=>{this.list=e.data.data.list,this.total_count=e.data.data.total_count,this.loading=!1})}},computed:{...(0,l.L8)(["wheight"])}},r=(0,a(81656).A)(n,function(){var e=this,t=e._self._c;return t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,height:e.wheight-140,"element-loading-text":$t("sw87imb","数据加载中......","lang")}},[t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{icon:"edit",type:"text"},on:{click:function(t){return e.editSuperior(a.row)}}},[e._v($t("7h5xle6"," 调整上级 ","lang"))])]}}])}),t("el-table-column",{attrs:{prop:"username",label:$t("fqmy2","姓名","lang")}}),t("el-table-column",{attrs:{prop:"mobile",label:$t("ewbd43","手机号","lang")}}),t("el-table-column",{attrs:{prop:"bind_date",label:$t("arlfer4","加入时间","lang")}}),t("el-table-column",{attrs:{label:$t("edmdy3","已结算","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥"+e._s((t.row.rebateTotal-t.row.noCloseRebate)/100)+" ")]}}])}),t("el-table-column",{attrs:{label:$t("fq8cu3","未结算","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥"+e._s(t.row.noCloseRebate/100)+" ")]}}])}),t("el-table-column",{attrs:{prop:"disabled",label:$t("k1e32","状态","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return["0"==a.row.disabled?t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v($t("g4yo14"," 有效 ","lang"))]):t("el-tag",{attrs:{type:"info",size:"mini"}},[e._v($t("fyufs4"," 无效 ","lang"))])]}}])})],1),e.total_count>e.params.pageSize?t("div",{staticClass:"mt-4 text-right"},[t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","page-sizes":[e.params.pageSize],"current-page":e.params.page,total:e.total_count,"page-size":e.params.pageSize},on:{"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)},"current-change":e.handleCurrentChange}})],1):e._e(),t("el-dialog",{attrs:{title:$t("i2zka64","调整上级","lang"),visible:e.editSuperiorVisible,"before-close":e.handleCancelSuperior},on:{"update:visible":function(t){e.editSuperiorVisible=t}}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{md:8,lg:10}},[t("el-input",{attrs:{placeholder:$t("7ji3y96","请输入手机号","lang")},model:{value:e.identifierModal,callback:function(t){e.identifierModal=t},expression:"identifierModal"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.numberSearchModal},slot:"append"})],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.modalLoading,expression:"modalLoading"}],staticStyle:{width:"100%"},attrs:{data:e.modalList,height:400,"element-loading-text":$t("5u04jg8","数据加载中...","lang"),"highlight-current-row":""},on:{"current-change":e.handleCurrentChangeUpLV}},[t("el-table-column",{attrs:{type:"index",width:"50"}}),t("el-table-column",{attrs:{prop:"username",label:$t("fqmy2","姓名","lang")}}),t("el-table-column",{attrs:{prop:"mobile",label:$t("ewbd43","手机号","lang")}}),t("el-table-column",{attrs:{prop:"disabled",label:$t("k1e32","状态","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return["0"==a.row.disabled?t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v($t("g4yo14"," 有效 ","lang"))]):t("el-tag",{attrs:{type:"info",size:"mini"}},[e._v($t("fyufs4"," 无效 ","lang"))])]}}])})],1),e.modal_total_count>e.paramsModal.pageSize?t("div",{staticClass:"mt-4 text-right"},[t("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.paramsModal.page,total:e.modal_total_count,"page-size":e.paramsModal.pageSize},on:{"update:currentPage":function(t){return e.$set(e.paramsModal,"page",t)},"update:current-page":function(t){return e.$set(e.paramsModal,"page",t)},"current-change":e.handleModalPage}})],1):e._e(),t("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){return e.handleCancelSuperior.apply(null,arguments)}}},[e._v($t("dd4ni4"," 取消 ","lang"))]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitSuperiorAction}},[e._v($t("in1ck4"," 确定 ","lang"))])],1)],1)],1)},[],!1,null,null,null),o=r.exports}}]);