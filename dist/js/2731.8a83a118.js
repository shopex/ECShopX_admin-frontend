"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[2731],{2731:function(e,t,l){l.r(t),l.d(t,{default:function(){return r}});var i=l(2212),a={data(){return{timeIntervals:[{value:15,label:$t("1b5a54","15分钟","lang")},{value:30,label:$t("1cbjq4","30分钟","lang")},{value:60,label:$t("1e8ib4","60分钟","lang")},{value:90,label:$t("1g5gw4","90分钟","lang")}],conditions:[{value:1,label:$t("aukwtq4","免费预约","lang")}],reservationModes:[{value:1,label:$t("z7dq3oe","门店＋时间+资源位＋服务项目","lang")}],form:{reservationMode:1,interval:30,maxLimitDay:10,minLimitHour:30,condition:1,resourceName:$t("l84qp3","资源位","lang"),cancelMinute:60,limitType:"not_open",sms_delay:1,limit:1},rules:{modelSetting:[{required:!0,validator:(e,t,l)=>{if(t.length<=0)return l(new Error($t("vgxbtl7","请选择预约模式","lang")));l()},trigger:"blur"}],interval:[{required:!0,message:$t("er3568a","预约时间间隔不能为空","lang"),trigger:"blur"}],resourceName:[{required:!0,message:$t("z0pup89","资源位名称不能为空","lang"),trigger:"blur"}],maxLimitDay:[{required:!0,validator:(e,t,l)=>{/^\d*$/.test(t)?l():l(new Error($t("cwrh7ib","最多提前天数必须为整数","lang")))},trigger:"blur"}],minLimitHour:[{required:!0,validator:(e,t,l)=>{/^\d*$/.test(t)?l():l(new Error($t("82hrx3c","最少提前分钟数必须为整数","lang")))},trigger:"blur"}],cancelMinute:[{required:!0,validator:(e,t,l)=>{/^\d*$/.test(t)?l():l(new Error($t("7ca2dlb","取消预约条件必须为整数","lang")))},trigger:"blur"}],condition:[{required:!0,message:$t("fjes9l8","预约条件不能为空","lang"),trigger:"blur"}],sms_delay:[{required:!0,validator:(e,t,l)=>{/^\d*$/.test(t)?l():l(new Error($t("bf36bnd","预约短信通知提醒必须为整数","lang")))},trigger:"blur"}],limitType:[{required:!0,validator:(e,t,l)=>{let i=/^\d*$/,a=this.form.limit;"limit_nums"===t?i.test(a)?l():l(new Error($t("rb34o9b","预约次数限制必须是数字","lang"))):"limit_days"===t&&(i.test(a)?l():l(new Error($t("emxrhtb","预约天数限制必须是数字","lang"))))},trigger:"blur"}]},limitType:[{value:"not_open",label:$t("xebq3m5","不开启限制","lang")},{value:"limit_days",label:$t("bof7v14","天数限制","lang")},{value:"limit_nums",label:$t("dy0fit4","次数限制","lang")}]}},mounted(){this.getData()},methods:{save(){(0,i.saveSetting)(this.form).then(e=>{e.data.data&&this.$message({type:"success",message:$t("mh9t9v8","保存预约配置成功","lang")}),this.getData()})},getData(){this.loading=!0,(0,i.getSetting)().then(e=>{if(e.data.data){var t=e.data.data;this.form.reservationMode=t.reservationMode,this.form.maxLimitDay=t.maxLimitDay,this.form.minLimitHour=t.minLimitHour,this.form.condition=t.reservationCondition,this.form.resourceName=t.resourceName,this.form.interval=t.timeInterval,this.form.cancelMinute=t.cancelMinute,this.form.sms_delay=t.smsDelay?t.smsDelay:1,t.limitType?this.form.limitType=t.limitType:this.form.limitType="not_open",t.limit?this.form.limit=t.limit:this.form.limit=1}this.loading=!1})},limitChange(){this.form.limit=0}}},r=(0,l(81656).A)(a,function(){var e=this,t=e._self._c;return t("div",{staticClass:"section section-white"},[t("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"160px"}},[t("div",{staticClass:"section-body"},[t("el-form-item",{attrs:{label:$t("u1khi86","预约模式设置","lang"),prop:"modelSetting"}},[t("el-radio-group",{model:{value:e.form.reservationMode,callback:function(t){e.$set(e.form,"reservationMode",t)},expression:"form.reservationMode"}},e._l(e.reservationModes,function(l){return t("el-radio",{key:l.value,attrs:{label:l.value}},[e._v(" "+e._s(l.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:$t("tqqi2o6","预约时间间隔","lang"),prop:"interval"}},[t("el-select",{model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",t)},expression:"form.interval"}},e._l(e.timeIntervals,function(l){return t("el-option",{key:l.value,attrs:{label:l.label,value:l.value}},[e._v(" "+e._s(l.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:$t("1mewfw5","资源位名称","lang"),prop:"resourceName"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:$t("o9l32","计师","lang")},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName",t)},expression:"form.resourceName"}})],1),t("el-form-item",{attrs:{label:$t("jrhae14","预约周期","lang"),prop:"maxLimitDay"}},[e._v($t("3cjoi16"," 最多提前 ","lang")),t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.maxLimitDay,callback:function(t){e.$set(e.form,"maxLimitDay",t)},expression:"form.maxLimitDay"}}),e._v($t("ju1cl46"," 天可预约 ","lang"))],1),t("el-form-item",{attrs:{label:"",prop:"minLimitHour"}},[e._v($t("3q0bjm6"," 最少提前 ","lang")),t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.minLimitHour,callback:function(t){e.$set(e.form,"minLimitHour",t)},expression:"form.minLimitHour"}}),e._v($t("5rtdp47"," 分钟可预约 ","lang"))],1),t("el-form-item",{attrs:{label:$t("q4bznt6","取消预约条件","lang"),prop:"cancelMinute"}},[e._v($t("b90qpm5"," 到店前 ","lang")),t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.cancelMinute,callback:function(t){e.$set(e.form,"cancelMinute",t)},expression:"form.cancelMinute"}}),e._v($t("6jhutqm"," 分钟可取消预约 (必须大于最小预约周期) ","lang"))],1),t("el-form-item",{attrs:{label:$t("jrkdsn4","预约条件","lang"),prop:"condition"}},[t("el-select",{model:{value:e.form.condition,callback:function(t){e.$set(e.form,"condition",t)},expression:"form.condition"}},e._l(e.conditions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t("el-form-item",{attrs:{label:$t("vpt0qg6","预约短信提醒","lang"),prop:"sms_delay"}},[e._v($t("fkqoz4"," 提前 ","lang")),t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.sms_delay,callback:function(t){e.$set(e.form,"sms_delay",t)},expression:"form.sms_delay"}}),e._v($t("esb631a"," 小时发送短信提醒 ","lang"))],1),t("el-form-item",{attrs:{label:$t("jrsdu04","预约限制","lang"),prop:"limitType"}},[t("el-radio-group",{on:{change:e.limitChange},model:{value:e.form.limitType,callback:function(t){e.$set(e.form,"limitType",t)},expression:"form.limitType"}},e._l(e.limitType,function(l){return t("el-radio",{key:l.value,attrs:{label:l.value}},[e._v(" "+e._s(l.label)+" ")])}),1),t("br"),"limit_days"==e.form.limitType?t("span",[t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.limit,callback:function(t){e.$set(e.form,"limit",t)},expression:"form.limit"}}),e._v($t("qzf06jh","天内可预约1次(从预约日开始算) ","lang"))],1):e._e(),"limit_nums"==e.form.limitType?t("span",[e._v($t("70r1s48"," 1天内可预约 ","lang")),t("el-input",{staticStyle:{width:"80px"},model:{value:e.form.limit,callback:function(t){e.$set(e.form,"limit",t)},expression:"form.limit"}}),e._v($t("i80v2","次 ","lang"))],1):e._e()],1)],1),t("div",{staticClass:"section-footer with-border content-center"},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v($t("cp35x4"," 保存 ","lang"))])],1)])],1)},[],!1,null,null,null).exports}}]);