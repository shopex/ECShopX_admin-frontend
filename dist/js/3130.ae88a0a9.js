"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[3130],{13130:function(t,a,e){e.r(a),e.d(a,{default:function(){return c}});var s=e(82997),l=e(62109),i=e(1811),o=e(95093),n=e.n(o),r={components:{shopSelect:i.default},data(){return{dateRange:[],loginType:this.$store.getters.login_type,rangeData:"",loading:!0,performInit:!1,dataSource:{total_count:0,loading:!1},topforms:{withdrawal_amount:""},topformsrules:{withdrawal_amount:[{type:"string",message:$t("2j0i5n5","请输入金额","lang"),required:!0,trigger:"blur"},{pattern:/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,message:$t("n6qqwgf","请输入正确格式,可保留两位小数","lang")},{validator:this.validator}]},params:{page:1,page_size:10},formData:{start_date:"",end_date:"",cash_status:"",order_id:"",distributor_id:""},options:[{label:$t("en402","全部","lang"),value:""},{label:$t("f6ez13","提现中","lang"),value:1},{label:$t("d2mq9b4","提现成功","lang"),value:2},{label:$t("d2ljhw4","提现失败","lang"),value:3}],allListData:[],allAccountList:{},distributormoneyList:{},withdrawal_balance:0,pickerOptions:{onPick:({maxDate:t,minDate:a})=>{a&&!t&&(this.dateRange[0]=a),t&&(this.dateRange[1]=t)},disabledDate:t=>{if(this.dateRange){let a=this.dateRange[0],e=7776e6;if(a)return t.getTime()>a.getTime()+e||t.getTime()<a.getTime()-e}},shortcuts:[{text:$t("4znkgj5","最近一个月","lang"),onClick(t){const a=new Date,e=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:$t("4zndsa5","最近三个月","lang"),onClick(t){const a=new Date,e=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},mounted(){this.initDate(),this.getCompanyDataList()},methods:{validator(t,a,e){Number(a)>Number(this.withdrawal_balance)?e(new Error($t("irre1uf","提现金额不能大于当前可提现金额","lang"))):e()},onSumbit(){if(Number(this.withdrawal_balance)<Number(this.distributormoneyList.distributor_money))return void this.$message.error($t("1utcr87","不满足提现条件","lang"));const{withdrawal_amount:t}=this.topforms;this.$refs.topforms.validate(a=>{if(!a)return!1;this.$confirm(`${$t("p9rz6v45",'<div style="margin-left:45px">\n              <p><i class="el-icon-warning" style="color:#E6A23C; font-size: 20px;margin-right:5px"></i>请确认您的提现金额: ¥ ',"lang")}${t}${$t("79r12d39",'</p>\n              <p style="font-size:12px;margin-left:30px;color:#ccc">操作后无法撤销，请再次确认您的提现金额</p>\n            </div>',"lang")}`,$t("d2n8lm4","提现提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),dangerouslyUseHTMLString:!0}).then(()=>{(0,s.onSumbitsData)({withdrawal_amount:t}).then(t=>{this.$message({type:"success",message:$t("kx3pta5","提现成功!","lang")})})})})},oninput(t){t&&t.replace(/[^0-9.]/g,"")},getCompanyDataList(){this.dataSource.loading=!0,(0,s.withdrawgetList)({...this.formData,...this.params}).then(t=>{this.allListData=t.data.data.list.data,this.allAccountList=t.data.data.total;let a=t.data.data.list.total_count;this.dataSource={total_count:Number(a),loading:!1},this.loading=!1}),(0,l.getStoreAccount)({...this.formData,...this.params}).then(t=>{this.withdrawal_balance=t.data.data.totle.withdrawal_balance}),(0,l.getWithdrawset)().then(t=>{this.distributormoneyList=t.data.data})},performInitChange(){this.performInit=!1},handleReset(){this.formData={start_date:"",end_date:"",cash_status:"",order_id:"",distributor_id:""},this.performInit=!0,this.initDate()},dateChange(t){t&&(this.formData.start_date=t[0],this.formData.end_date=t[1])},storeSearch(t){this.formData.distributor_id=t.shop_id},handleSizeChange(t){this.params.page=1,this.params.page_size=t,this.getCompanyDataList()},handleCurrentChange(t){this.params.page=t,this.getCompanyDataList()},onExportExcel(){(0,s.onCashExportData)(this.formData).then(t=>{const{status:a,url:e,filename:s}=t.data.data;return a?void this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}):void this.$message({type:"error",message:$t("d17rj2j","无内容可导出 或 执行失败，请检查重试","lang")})})},initDate(){var t=new Date,a=new Date;t.setTime(t.getTime()-2592e6),this.rangeData=[t,a],this.formData.start_date=n()(t).format("YYYY-MM-DD"),this.formData.end_date=n()(a).format("YYYY-MM-DD")}}},c=(0,e(81656).A)(r,function(){var t=this,a=t._self._c;return a("div",["distributor"===t.loginType?a("el-card",[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-form",{ref:"topforms",attrs:{model:t.topforms,rules:t.topformsrules}},[a("el-row",{staticStyle:{marginbottom:"0px"},attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"left-cols-css",attrs:{span:5}},[a("p",{staticClass:"title-fonts"},[t._v($t("bu74rj7","当前可提现金额","lang"))]),a("p",{staticClass:"title-fonts title-fonts-fs"},[t._v("¥ "+t._s(t.withdrawal_balance))]),2===t.distributormoneyList.withdraw_method?a("el-form-item",{attrs:{prop:"withdrawal_amount"}},[t._v($t("fqf4w4"," 提现 ","lang")),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",precision:2},on:{input:t.oninput},model:{value:t.topforms.withdrawal_amount,callback:function(a){t.$set(t.topforms,"withdrawal_amount",a)},expression:"topforms.withdrawal_amount"}}),t._v($t("ehct3"," 元 ","lang"))],1):t._e(),2===t.distributormoneyList.withdraw_method?a("p",{staticStyle:{"margin-bottom":"15px"}},[t._v($t("1wtto48"," 提现限额：满 ","lang")),a("span",{staticStyle:{color:"red"}},[t._v("¥ "+t._s(t.distributormoneyList.distributor_money)),a("span",{staticStyle:{color:"#000"}},[t._v($t("a92cyu6"," 元，可提现","lang"))])])]):t._e(),2===t.distributormoneyList.withdraw_method?a("el-button",{attrs:{type:"primary"},on:{click:t.onSumbit}},[t._v($t("fqf4w4"," 提现 ","lang"))]):t._e()],1),a("el-col",{staticClass:"right-cols-css",attrs:{span:16}},[a("p",[t._v($t("vul1pmq","1、当前可提现金额需大于或等于提现限额才可进行提现；","lang"))]),a("p",[t._v($t("yggl2y19","2、提现操作请在10:00:00-23:59:59进行(仅可提现金额大于或等于提现限额)；","lang"))]),a("p",[t._v($t("e1r76919"," 3、根据支付公司逻辑，申请提现后一个工作日到账，节假日顺延具体提现信息请查询提现记录。 ","lang"))])])],1)],1)],1)],1):t._e(),a("el-card",[a("el-form",{attrs:{model:t.formData,"label-width":"100px"}},[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:$t("daeffv4","日期范围","lang")}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"daterange","alue-format":"yyyy-MM-dd",align:"right","unlink-panels":"","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.dateChange},model:{value:t.rangeData,callback:function(a){t.rangeData=a},expression:"rangeData"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("d2pmuj4","提现状态","lang")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.formData.cash_status,callback:function(a){t.$set(t.formData,"cash_status",a)},expression:"formData.cash_status"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:$t("kqzxq45","提现订单号","lang")}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:$t("5a35bv8","请输入提现订单号","lang")},model:{value:t.formData.order_id,callback:function(a){t.$set(t.formData,"order_id",a)},expression:"formData.order_id"}})],1)],1),"distributor"!==t.loginType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:$t("ikyrsz4","选择店铺","lang")}},[a("shop-select",{ref:"shopSelect",attrs:{size:"small",distributors:"","perform-init":t.performInit},on:{update:t.storeSearch,performInitChange:t.performInitChange}})],1)],1):t._e(),"distributor"!==t.loginType?a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:4,push:8}},[a("div",{staticClass:"flex-right"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleReset}},[t._v($t("miwv34"," 重置 ","lang"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.getCompanyDataList()}}},[t._v($t("ftlbu4"," 搜索 ","lang"))])],1)]):t._e()],1),"distributor"===t.loginType?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,push:20}},[a("div",{staticClass:"flex-right"},[a("el-button",{on:{click:t.handleReset}},[t._v($t("miwv34"," 重置 ","lang"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.getCompanyDataList()}}},[t._v($t("ftlbu4"," 搜索 ","lang"))])],1)])],1):t._e()],1)],1),a("el-card",[a("el-row",{staticStyle:{marginbottom:"0px"}},[a("el-col",{staticClass:"total-num-box",attrs:{span:4}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" "+t._s(t.allAccountList.count)+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("d2r35o4","提现笔数","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:4}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s((t.allAccountList.total_amt/100).toFixed(2)))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("kx1shl5","提现总金额","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:4}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" ¥ "+t._s((t.allAccountList.finish_total_amt/100).toFixed(2))+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("97h46d6","提现成功金额","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:4}},[a("p",{staticClass:"total-num-top-fonts"},[t._v("¥ "+t._s((t.allAccountList.total_amting/100).toFixed(2)))]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("kzozrb5","提现中金额","lang"))])]),a("el-col",{staticClass:"total-num-box",attrs:{span:4}},[a("p",{staticClass:"total-num-top-fonts"},[t._v(" ¥ "+t._s((t.allAccountList.fail_total_amt/100).toFixed(2))+" ")]),a("p",{staticClass:"total-num-bot-fonts"},[t._v($t("a36m1s6","提现失败金额","lang"))])])],1)],1),a("el-card",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.onExportExcel()}}},[t._v($t("efepu4"," 导出 ","lang"))])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.allListData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"created_at",label:$t("hwbe2","日期","lang"),width:"170"}}),a("el-table-column",{attrs:{prop:"order_id",label:$t("kqzxq45","提现订单号","lang"),width:"180"}}),a("el-table-column",{attrs:{prop:"bind_card_id",label:$t("kk0pxe6","到账银行卡号","lang"),width:"180"}}),a("el-table-column",{attrs:{label:$t("d2v8i44","提现金额","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" ￥"+t._s((a.row.trans_amt/100).toFixed(2))+" ")]}}])}),"distributor"!==t.loginType?a("el-table-column",{attrs:{prop:"distributor_name",label:$t("cjqdxi4","店铺名称","lang"),width:"180"}}):t._e(),a("el-table-column",{attrs:{prop:"login_name",label:$t("f5g8b3","操作人","lang"),width:"160"}}),a("el-table-column",{attrs:{prop:"cash_status",label:$t("d2pmuj4","提现状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s("0"===a.row.cash_status&&$t("f6ez13","提现中","lang")||"1"===a.row.cash_status&&$t("f6ez13","提现中","lang")||"2"===a.row.cash_status&&$t("d2mq9b4","提现成功","lang")||"3"===a.row.cash_status&&$t("d2ljhw4","提现失败","lang"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"resp_desc",label:$t("fqo12","备注","lang"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{color:"#027db4"}},[t._v(" "+t._s(e.row.resp_desc)+" ")])]}}])})],1),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.params.page,"page-sizes":[10,20,50],total:t.dataSource.total_count,"page-size":t.params.page_size},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},[],!1,null,"2229daaf",null).exports}}]);