"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[798],{798:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(41776),r={data(){return{loading:!1,name:"",form:{distributors:0,app_id:"",app_app_id:"",merchant_id:"",key:"",is_servicer:!1,servicer_merchant_id:"",servicer_app_id:"",cert:"",cert_key:"",is_open:!0}}},mounted(){this.getConfig()},methods:{handleClick(){this.getConfig()},certHandleChange(e,t){this.form.cert=e.raw},keyHandleChange(e,t){this.form.cert_key=e.raw},getConfig(){const{distributor_id:e,name:t}=this.$route.query;this.name=t,this.form.distributor_id=e;let a={};a={pay_type:"wxpay",distributor_id:e},(0,i.getPaymentSetting)(a).then(e=>{let t=Array.isArray(e.data.data)&&!e.data.data.length?{}:e.data.data;t.is_servicer="true"==e.data.data.is_servicer,t.is_open="true"==e.data.data.is_open;for(let e of Object.keys(t))this.$set(this.form,e,t[e])})},onSubmit(){this.loading=!0;let e={};e={distributor_id:this.form.distributor_id,isUploadFile:!0,pay_type:"wxpay",app_id:this.form.app_id,app_app_id:this.form.app_app_id,merchant_id:this.form.merchant_id,key:this.form.key,is_servicer:this.form.is_servicer,servicer_merchant_id:this.form.servicer_merchant_id,servicer_app_id:this.form.servicer_app_id,is_open:!0,cert:this.form.cert,cert_key:this.form.cert_key},(0,i.setPaymentSetting)(e).then(e=>{this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.loading=!1}).catch(e=>{this.loading=!1})}}},s=(0,a(81656).A)(r,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"wapay-setting"},[t("el-form",{ref:"form",attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:$t("qd1pi86","当前店铺名称","lang")}},[t("span",[e._v(e._s(e.name))])]),t("el-form-item",{attrs:{label:$t("vz7ze16","公众账号ID","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.app_id,callback:function(t){e.$set(e.form,"app_id",t)},expression:"form.app_id"}}),t("br"),t("span",{staticClass:"frm-tips"},[e._v($t("akddyhw","微信支付分配的公众账号ID（企业号corpid即为此appId）","lang"))])],1),t("el-form-item",{attrs:{label:$t("b4erhs7","APP应用ID","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.app_app_id,callback:function(t){e.$set(e.form,"app_app_id",t)},expression:"form.app_app_id"}}),t("br"),t("span",{staticClass:"frm-tips"},[e._v($t("m7mdkv1m","微信开放平台审核通过的应用APPID（请登录open.weixin.qq.com查看，注意与公众号的APPID不同）","lang"))])],1),t("el-form-item",{attrs:{label:$t("cyt7q3","商户号","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.merchant_id,callback:function(t){e.$set(e.form,"merchant_id",t)},expression:"form.merchant_id"}})],1),t("el-form-item",{attrs:{label:$t("11nmzd5","API密钥","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1),t("el-form-item",{attrs:{label:$t("f1widx6","是否特约商户","lang")}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.is_servicer,callback:function(t){e.$set(e.form,"is_servicer",t)},expression:"form.is_servicer"}}),t("span",{staticClass:"frm-tips"},[e._v($t("p9licrn","如是特约商户，请联系您的服务商获取如下两个参数","lang"))])],1),t("el-form-item",{attrs:{label:$t("tif3wq8","服务商APPID","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.servicer_app_id,callback:function(t){e.$set(e.form,"servicer_app_id",t)},expression:"form.servicer_app_id"}})],1),t("el-form-item",{attrs:{label:$t("voshgs6","服务商商户号","lang")}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.form.servicer_merchant_id,callback:function(t){e.$set(e.form,"servicer_merchant_id",t)},expression:"form.servicer_merchant_id"}})],1),t("el-form-item",{attrs:{label:$t("b692ra4","商户证书","lang")}},[e.form.cert_name?t("span",[e._v(" "+e._s(e.form.cert_name))]):e._e(),t("el-upload",{attrs:{action:"","on-change":e.certHandleChange,"auto-upload":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v($t("unjubc6"," 点击上传 ","lang"))])],1),t("span",{staticClass:"frm-tips"},[e._v("微信商户平台(pay.weixin.qq.com)--\x3e账户设置--\x3eAPI安全--\x3e证书下载 apiclient_cert.pem")])],1),t("el-form-item",{attrs:{label:$t("c8vvcz6","商户证书秘钥","lang")}},[e.form.cert_key_url?t("span",[e._v(" "+e._s(e.form.cert_key_name))]):e._e(),t("el-upload",{attrs:{action:"","on-change":e.keyHandleChange,"auto-upload":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v($t("unjubc6"," 点击上传 ","lang"))])],1),t("span",{staticClass:"frm-tips"},[e._v("微信商户平台(pay.weixin.qq.com)--\x3e账户设置--\x3eAPI安全--\x3e证书下载 apiclient_key.pem")])],1),t("div",{staticClass:"section-footer with-border content-center"},[t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v($t("cp35x4"," 保存 ","lang"))])],1)],1)],1)},[],!1,null,"33b30d75",null).exports}}]);