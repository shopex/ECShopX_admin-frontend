"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4320],{24320:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});a(44114);var l=a(95353),n=a(6919),i={mixins:[a(77825).v8],provide(){return{refresh:this.fetchList}},data(){const e={form_element:void 0,field_title:void 0,is_valid:"1"};return{initialParams:e,params:{...e},isEdit:!1,imageUrl:"",tabList:[{name:$t("df2x984","有效元素","lang"),activeName:"1"},{name:$t("cgz3pe4","弃用元素","lang"),activeName:"2"}],ItemsDetailVisible:!1,itemsDetailData:{},loading:!1,dialogVisible:!1,dataInfo:{},formElement:[{name:$t("fdh0h3","文本框","lang"),value:"text"},{name:$t("fddru3","文本域","lang"),value:"textarea"},{name:$t("b3ysrd4","单选按钮","lang"),value:"radio"},{name:$t("dqmui3","复选框","lang"),value:"checkbox"},{name:$t("y2xu945","下拉选择框","lang"),value:"select"},{name:$t("dagpju4","日期选择","lang"),value:"date"},{name:$t("y1ei926","地区地址选择","lang"),value:"area"},{name:$t("hr6v2","数字","lang"),value:"number"},{name:$t("vkty615","上传身份证","lang"),value:"idcard"},{name:$t("n7nyvs6","上传其他附件","lang"),value:"otherfile"}],options:[{value:"ziyuan",label:$t("omvg2","资源","lang"),children:[{value:"axure",label:"Axure Components"},{value:"sketch",label:"Sketch Templates"},{value:"jiaohu",label:$t("do4tr86","组件交互文档","lang")}]}]}},computed:{...(0,l.L8)(["wheight"])},watch:{getStatus(e){e&&this.fetchList()}},mounted(){this.fetchList()},methods:{onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},addElement(){this.$router.push({path:this.matchRoutePath("editor")})},editAction(e,t){this.$router.push({path:"/member/selfservice/formsettingadd/"+t.id})},preview(e,t){this.dialogVisible=!0,this.dataInfo=t},getParams(){return{...this.params}},async fetchList(){this.loading=!0;const{pageIndex:e,pageSize:t}=this.page;let a={page:e,pageSize:t,...this.getParams()};const{list:l,total_count:n}=await this.$api.selfhelpform.getSettingList(a);this.tableList=l,this.page.total=n,this.loading=!1},deleteAction(e,t){this.$confirm($t("s1czuve","此操废弃该元素, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,n.deleteSetting)(t.id).then(t=>{this.tableList.splice(e,1),this.$message({message:$t("cc13v74","废弃成功","lang"),type:"success",duration:5e3})}).catch(()=>{this.$message({type:"error",message:$t("cbzx3s4","废弃失败","lang")})})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getTaskTime(e){let t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1;l=l<10?"0"+l:l;let n=t.getDate();return n=n<10?"0"+n:n,a+"-"+l+"-"+n},getTimeStr(e){return this.getTaskTime(new Date(1e3*parseInt(e)))},handleTabClick(e,t){this.onSearch()}}},r=(0,a(81656).A)(i,function(){var e=this,t=e._self._c;return t("SpPage",[-1===e.$route.path.indexOf("detail")&&-1===e.$route.path.indexOf("editor")?[t("SpFilterForm",{attrs:{model:e.params},on:{onSearch:e.onSearch,onReset:e.onReset}},[t("SpFilterFormItem",{attrs:{prop:"form_element",label:$t("o1lgfk5","表单元素:","lang")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:$t("xoj2ov7","请选择表单元素","lang")},model:{value:e.params.form_element,callback:function(t){e.$set(e.params,"form_element",t)},expression:"params.form_element"}},e._l(e.formElement,function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),t("SpFilterFormItem",{attrs:{prop:"field_title",label:$t("fyhnt3","标题:","lang")}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:$t("ij5d2","标题","lang")},model:{value:e.params.field_title,callback:function(t){e.$set(e.params,"field_title",t)},expression:"params.field_title"}})],1)],1),t("div",{staticClass:"action-container"},[t("el-button",{attrs:{type:"primary",icon:"iconfont icon-xinzengcaozuo-01"},on:{click:e.addElement}},[e._v($t("m66kr38"," 表单元素添加 ","lang"))])],1),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.params.is_valid,callback:function(t){e.$set(e.params,"is_valid",t)},expression:"params.is_valid"}},e._l(e.tabList,function(a,l){return t("el-tab-pane",{key:l,attrs:{label:a.name,name:a.activeName}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableList,height:e.wheight-280}},[t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{staticClass:"el-icon-edit",attrs:{to:{path:e.matchRoutePath("editor"),query:{id:a.row.id}}}}),t("i",{staticClass:"el-icon-zoom-in",staticStyle:{margin:"0px 10px"},on:{click:function(t){return e.preview(a.$index,a.row)}}}),1==a.row.status?t("i",{staticClass:"mark el-icon-delete",staticStyle:{color:"#ff5000"},on:{click:function(t){return e.deleteAction(a.$index,a.row)}}}):e._e()]}}],null,!0)}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),t("el-table-column",{attrs:{prop:"field_title",label:$t("ij5d2","标题","lang"),width:"250"}}),t("el-table-column",{attrs:{prop:"field_name",label:$t("q2y2jc9","唯一标示(纯字母)","lang"),width:"200"}}),t("el-table-column",{attrs:{prop:"form_element",label:$t("arwnsd4","元素类型","lang"),width:"100"}}),t("el-table-column",{attrs:{label:$t("l1hwpw5","元素选择项","lang")},scopedSlots:e._u([{key:"default",fn:function(a){return e._l(a.row.options,function(a,l){return t("span",{key:l},[e._v(" "+e._s(a.value))])})}}],null,!0)})],1),t("div",{staticClass:"content-center content-top-padded"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageIndex,"page-sizes":[10,20,50],total:e.page.total,"page-size":e.page.pageSize},on:{"update:currentPage":function(t){return e.$set(e.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.page,"pageIndex",t)},"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)],1)}),1),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"dataInfo",staticClass:"demo-ruleForm",attrs:{"label-width":"200px","label-position":"left"}},[t("el-form-item",{attrs:{label:e.dataInfo.field_title}},["text"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:$t("eheyq76","text预览","lang")}})],1):e._e(),"textarea"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{type:"textarea",placeholder:$t("xsiv0ia","textarea预览","lang")}})],1):e._e(),"number"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-input-number",{attrs:{type:"textarea",placeholder:"55.55"}})],1):e._e(),"image"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):e._e(),"radio"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-radio-group",e._l(e.dataInfo.options,function(a,l){return t("el-radio",{key:l,attrs:{label:3}},[e._v(" "+e._s(a.value)+" ")])}),1)],1):e._e(),"checkbox"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-checkbox-group",e._l(e.dataInfo.options,function(a,l){return t("el-checkbox",{key:l,attrs:{label:"item.value"}},[e._v(" "+e._s(a.value)+" ")])}),1)],1):e._e(),"select"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")}},e._l(e.dataInfo.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)],1):e._e(),"date"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-date-picker",{attrs:{type:"date",placeholder:$t("ikzrh64","选择日期","lang")},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1):e._e(),"time"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-time-picker",{attrs:{"arrow-control":"","picker-options":{selectableRange:"18:30:00 - 20:30:00"},placeholder:$t("xnyy495","任意时间点","lang")},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1):e._e(),"area"==e.dataInfo.form_element?t("el-col",{attrs:{span:12}},[t("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()],1)],1)],1)]:e._e(),t("router-view")],2)},[],!1,null,"848fbc08",null).exports}}]);