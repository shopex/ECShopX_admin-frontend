"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[17],{50017:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});a(57270);var l=a(21255),r={provide(){return{refresh:this.getFetch}},components:{},data(){const e=(e,t,a)=>{var{ruleForm:l}=this.$data,r=parseInt(t,10)!=t;if(l.enable){if(null==t||""==t)return a(new Error(e.msg));if(t<0)return a(new Error($t("xbnnq75","不能小于0","lang")));if(r)return a(new Error($t("w2f0vf5","必须是整数","lang")));a()}else a()};return{formLoad:!1,ruleForm:{enable:!1,max_day:null,like_get_once:null,like_get_max_times_day:null,comment_get_once:null,comment_get_max_times_day:null,share_get_once:null,share_get_max_times_day:null,favorite_get_once:null,favorite_get_max_times_day:null,create_get_once:null,create_get_max_times_day:null},rules:{max_day:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"},{validator:(e,t,a)=>{var{ruleForm:l}=this.$data,r=[l.like_get_once,l.comment_get_once,l.share_get_once,l.favorite_get_once,l.create_get_once];if(r=r.sort((e,t)=>parseInt(t)-parseInt(e)),t<parseInt(r[0]))return a(new Error(e.msg));a()},msg:$t("mvqk2oj","每日积分不可小于任一行为所获得的积分值","lang"),trigger:"blur"}],like_get_once:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"}],like_get_max_times_day:[{validator:e,msg:$t("9hm9e45","请填写次数","lang"),trigger:"blur"}],comment_get_once:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"}],comment_get_max_times_day:[{validator:e,msg:$t("9hm9e45","请填写次数","lang"),trigger:"blur"}],share_get_once:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"}],share_get_max_times_day:[{validator:e,msg:$t("9hm9e45","请填写次数","lang"),trigger:"blur"}],favorite_get_once:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"}],favorite_get_max_times_day:[{validator:e,msg:$t("9hm9e45","请填写次数","lang"),trigger:"blur"}],create_get_once:[{validator:e,msg:$t("9hjukk5","请填写积分","lang"),trigger:"blur"}],create_get_max_times_day:[{validator:e,msg:$t("9hm9e45","请填写次数","lang"),trigger:"blur"}]}}},mounted(){this.getFetch()},methods:{getFetch(){this.$data.formLoad=!0,(0,l.getUGCSetting)({type:"point"}).then(e=>{this.transForm(e.data.data),this.$data.formLoad=!1},e=>{this.$data.formLoad=!1})},transForm(e){var t={enable:"1"==e.point_enable,max_day:e.point_max_day,like_get_once:e.point_post_like_get_once,like_get_max_times_day:e.point_post_like_get_max_times_day,share_get_once:e.point_post_share_get_once,share_get_max_times_day:e.point_post_share_get_max_times_day,comment_get_once:e.point_post_comment_get_once,comment_get_max_times_day:e.point_post_comment_get_max_times_day,favorite_get_once:e.point_post_favorite_get_once,favorite_get_max_times_day:e.point_post_favorite_get_max_times_day,create_get_once:e.point_post_create_get_once,create_get_max_times_day:e.point_post_create_get_max_times_day};this.$data.ruleForm=t},formTrans(){const{ruleForm:e}=this.$data;var t={type:"point",setting:null},a={point_enable:e.enable?"1":"0",point_max_day:e.max_day,point_post_like_get_once:e.like_get_once,point_post_like_get_max_times_day:e.like_get_max_times_day,point_post_share_get_once:e.share_get_once,point_post_share_get_max_times_day:e.share_get_max_times_day,point_post_comment_get_once:e.comment_get_once,point_post_comment_get_max_times_day:e.comment_get_max_times_day,point_post_favorite_get_once:e.favorite_get_once,point_post_favorite_get_max_times_day:e.favorite_get_max_times_day,point_post_create_get_once:e.create_get_once,point_post_create_get_max_times_day:e.create_get_max_times_day};return t.setting=JSON.stringify(a),t},confirmHandle(){const e=this,{ruleForm:t}=this.$data;this.$refs.dataForm.validate(t=>{if(!t)return!1;var a=e.formTrans();(0,l.setUGCSetting)(a).then(e=>{var{message:t}=e.data.data;this.$message({type:"success",message:t})})})}}},s=(0,a(81656).A)(r,function(){var e=this,t=e._self._c;return t("SpPage",{attrs:{title:$t("i7rnfq4","评论设置","lang")}},[t("template",{slot:"page-footer"},[t("div",{staticClass:"text-center"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirmHandle}},[e._v($t("iv7ii4"," 确认 ","lang"))])],1)]),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoad,expression:"formLoad"}],ref:"dataForm",staticClass:"point-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[t("el-row",[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"p-title"},[e._v($t("f65o5b6","全局积分设置","lang"))])])],1),t("el-card",{attrs:{shadow:"never"}},[t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:$t("7go03m6","开启全局积分","lang"),prop:"enable","label-width":"110px"}},[t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.ruleForm.enable,callback:function(t){e.$set(e.ruleForm,"enable",t)},expression:"ruleForm.enable"}}),t("div",{staticClass:"tips unit"},[e._v($t("nf14s8i"," 开启后用户可通过特定行为获得积分，","lang")),t("br"),e._v($t("7at75yb","下方所有设置将生效。 ","lang"))])],1)],1),t("el-col",[t("el-form-item",{staticClass:"last-ipt",attrs:{label:$t("rwyxdpb","每位会员每日最多可获得","lang"),prop:"max_day","label-width":"180px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",min:"0",max:"10"},model:{value:e.ruleForm.max_day,callback:function(t){e.$set(e.ruleForm,"max_day",t)},expression:"ruleForm.max_day"}}),t("span",{staticClass:"unit"},[e._v($t("i96233","积分。","lang"))])],1)],1)],1)],1),t("el-row",{staticClass:"row-mar"},[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"p-title"},[e._v($t("lq4zvh6","社区积分设置","lang"))])]),t("el-col",{attrs:{span:19}},[t("div",{staticClass:"tips"},[e._v($t("db4vyij","用户在社区内产生行为所能获得积分的设置","lang"))])])],1),t("el-card",{attrs:{shadow:"never"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{label:$t("zi8n0k9","点赞笔记每次可获得","lang"),prop:"like_get_once"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.like_get_once,callback:function(t){e.$set(e.ruleForm,"like_get_once",t)},expression:"ruleForm.like_get_once"}}),t("span",{staticClass:"unit"},[e._v($t("i8wlx3","积分,","lang"))])],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:$t("i0be2","最多","lang"),prop:"like_get_max_times_day","label-width":"60px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.like_get_max_times_day,callback:function(t){e.$set(e.ruleForm,"like_get_max_times_day",e._n(t))},expression:"ruleForm.like_get_max_times_day"}}),t("span",{staticClass:"unit"},[e._v($t("ihhd2","次。","lang"))])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{label:$t("o2i9g59","评论笔记每次可获得","lang"),prop:"comment_get_once"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.comment_get_once,callback:function(t){e.$set(e.ruleForm,"comment_get_once",t)},expression:"ruleForm.comment_get_once"}}),t("span",{staticClass:"unit"},[e._v($t("i8wlx3","积分,","lang"))])],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:$t("i0be2","最多","lang"),prop:"comment_get_max_times_day","label-width":"60px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.comment_get_max_times_day,callback:function(t){e.$set(e.ruleForm,"comment_get_max_times_day",e._n(t))},expression:"ruleForm.comment_get_max_times_day"}}),t("span",{staticClass:"unit"},[e._v($t("ihhd2","次。","lang"))])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{label:$t("pkd82s9","分享笔记每次可获得","lang"),prop:"share_get_once"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.share_get_once,callback:function(t){e.$set(e.ruleForm,"share_get_once",t)},expression:"ruleForm.share_get_once"}}),t("span",{staticClass:"unit"},[e._v($t("i8wlx3","积分,","lang"))])],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:$t("i0be2","最多","lang"),prop:"share_get_max_times_day","label-width":"60px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.share_get_max_times_day,callback:function(t){e.$set(e.ruleForm,"share_get_max_times_day",e._n(t))},expression:"ruleForm.share_get_max_times_day"}}),t("span",{staticClass:"unit"},[e._v($t("ihhd2","次。","lang"))])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{label:$t("z680ig9","收藏笔记每次可获得","lang"),prop:"favorite_get_once"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.favorite_get_once,callback:function(t){e.$set(e.ruleForm,"favorite_get_once",t)},expression:"ruleForm.favorite_get_once"}}),t("span",{staticClass:"unit"},[e._v($t("i8wlx3","积分,","lang"))])],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:$t("i0be2","最多","lang"),prop:"favorite_get_max_times_day","label-width":"60px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.favorite_get_max_times_day,callback:function(t){e.$set(e.ruleForm,"favorite_get_max_times_day",e._n(t))},expression:"ruleForm.favorite_get_max_times_day"}}),t("span",{staticClass:"unit"},[e._v($t("ihhd2","次。","lang"))])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{label:$t("r2tfm79","发布笔记每次可获得","lang"),prop:"create_get_once"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.create_get_once,callback:function(t){e.$set(e.ruleForm,"create_get_once",t)},expression:"ruleForm.create_get_once"}}),t("span",{staticClass:"unit"},[e._v($t("i8wlx3","积分,","lang"))])],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:$t("i0be2","最多","lang"),prop:"create_get_max_times_day","label-width":"60px"}},[t("el-input",{staticClass:"mipt",attrs:{disabled:!e.ruleForm.enable,type:"number",size:"small",max:"10"},model:{value:e.ruleForm.create_get_max_times_day,callback:function(t){e.$set(e.ruleForm,"create_get_max_times_day",e._n(t))},expression:"ruleForm.create_get_max_times_day"}}),t("span",{staticClass:"unit"},[e._v($t("ihhd2","次。","lang"))])],1)],1)],1)],1)],1)],2)},[],!1,null,"d7366122",null).exports}}]);