"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7187],{97187:function(e,a,r){r.r(a),r.d(a,{default:function(){return i}});var l={data(){return{searchParams:{login_name:"",mobile:"",username:"",supplier_name:""},finderSetting:{columns:[{name:$t("ogwh2","账号","lang"),key:"login_name"},{name:$t("vm0hbk5","供应商名称","lang"),key:"supplier_name"},{name:$t("ewbd43","手机号","lang"),key:"mobile"},{name:$t("fqmy2","姓名","lang"),key:"username"},{name:$t("lb5z2","禁用","lang"),key:"is_disable",render:(e,{row:a})=>e("el-switch",{props:{value:a.is_disable,"active-value":!0,"inactive-value":!1},on:{change:async e=>{await this.$api.login.changeOperatorStatus({operator_id:a.operator_id,is_disable:e?1:0}),a.is_disable=e}}})}],actions:[{name:$t("mekb2","编辑","lang"),key:"edit",type:"button",buttonType:"text",action:{type:"link",handler:([e])=>{this.supplierForm.id=e.operator_id,this.supplierForm.mobile=e.mobile,this.supplierForm.login_name=e.login_name,this.supplierForm.username=e.username,this.supplierForm.password="",this.supplierFormList[1].disabled=!0,this.supplierFormList[2].disabled=!0,this.supplierDialog=!0}}}]},supplierDialog:!1,supplierForm:{id:"",operator_type:"supplier",mobile:"",login_name:"",username:"",password:""},supplierFormList:[{label:$t("ogwh2","账号","lang"),key:"login_name",type:"input",required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("ewbd43","手机号","lang"),key:"mobile",type:"input",required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("fqmy2","姓名","lang"),key:"username",type:"input",required:!0,message:$t("adohlc4","不能为空","lang")},{label:$t("g9ob2","密码","lang"),key:"password",type:"input",message:$t("adohlc4","不能为空","lang"),validator:(e,a,r)=>{a?a.length<6?r(new Error($t("heelnp9","密码长度不能小于6","lang"))):r():r(new Error($t("adohlc4","不能为空","lang")))}}]}},methods:{onSearch(){this.$refs.finder.refresh(!0)},beforeSearch(e){return e={...e,operator_type:"supplier"}},addSupplier(){this.id="",this.supplierDialog=!0,this.supplierFormList[1].disabled=!1,this.supplierFormList[2].disabled=!1,this.supplierForm={id:"",operator_type:"supplier",mobile:"",login_name:"",username:"",password:""}},onInputChange(){},async onSupplierFormSubmit(){const{id:e}=this.supplierForm;delete this.supplierForm.id,e?(await this.$api.company.updateAccountInfo(e,this.supplierForm),this.$message.success($t("deua4r4","更新成功","lang"))):(await this.$api.company.createAccount({...this.supplierForm}),this.$message.success($t("e7ygyc4","添加成功","lang"))),this.supplierDialog=!1,this.$refs.finder.refresh(!0)}}},i=(0,r(81656).A)(l,function(){var e=this,a=e._self._c;return a("SpPage",[a("SpFilterForm",{attrs:{model:e.searchParams},on:{onSearch:e.onSearch,onReset:e.onSearch}},[a("SpFilterFormItem",{attrs:{label:$t("ogwh2","账号","lang"),prop:"login_name"}},[a("el-input",{attrs:{placeholder:$t("2j1oau5","请输入账号","lang"),clearable:""},model:{value:e.searchParams.login_name,callback:function(a){e.$set(e.searchParams,"login_name",a)},expression:"searchParams.login_name"}})],1),a("SpFilterFormItem",{attrs:{label:$t("ewbd43","手机号","lang"),prop:"mobile"}},[a("el-input",{attrs:{placeholder:$t("7ji3y96","请输入手机号","lang"),clearable:""},model:{value:e.searchParams.mobile,callback:function(a){e.$set(e.searchParams,"mobile",a)},expression:"searchParams.mobile"}})],1),a("SpFilterFormItem",{attrs:{label:$t("fqmy2","姓名","lang"),prop:"username"}},[a("el-input",{attrs:{placeholder:$t("2jaekd5","请输入姓名","lang"),clearable:""},model:{value:e.searchParams.username,callback:function(a){e.$set(e.searchParams,"username",a)},expression:"searchParams.username"}})],1),a("SpFilterFormItem",{attrs:{label:$t("vm0hbk5","供应商名称","lang"),prop:"supplier_name"}},[a("el-input",{attrs:{placeholder:$t("5kxe9l8","请输入供应商名称","lang"),clearable:""},model:{value:e.searchParams.supplier_name,callback:function(a){e.$set(e.searchParams,"supplier_name",a)},expression:"searchParams.supplier_name"}})],1)],1),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"plus"},on:{click:e.addSupplier}},[e._v($t("1b6qi07"," 添加供应商 ","lang"))])],1),a("SpFinder",{ref:"finder",attrs:{"no-selection":"",url:"/account/management","fixed-row-action":!0,setting:e.finderSetting,"row-actions-fixed-align":"left",hooks:{beforeSearch:e.beforeSearch}}}),a("SpDialog",{ref:"supplierDialogRef",attrs:{title:this.supplierForm.id?$t("i4q2uq5","编辑供应商","lang"):$t("eldg4o5","添加供应商","lang"),form:e.supplierForm,"form-list":e.supplierFormList},on:{onSubmit:e.onSupplierFormSubmit,input:e.onInputChange},model:{value:e.supplierDialog,callback:function(a){e.supplierDialog=a},expression:"supplierDialog"}})],1)},[],!1,null,"486aea74",null).exports}}]);