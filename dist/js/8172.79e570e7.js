"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[8172],{8172:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i=n(41472),a=n(49986),o=n(95093),l=n.n(o);const r=e=>(0,i.u)([{type:"group",label:$t("blh1h04","基础信息","lang")},{key:"create_time",label:$t("pyrm26","开票申请时间","lang"),display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",l()(1e3*t.create_time).format("yyyy-MM-DD HH:mm:ss")," "])}},{key:"invoice_status",label:$t("chp4kz4","开票状态","lang"),display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",a.Lp[t.invoice_status]," "])}},{key:"invoice_method",label:$t("chom1n4","开票渠道","lang"),display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",a.sk[t.invoice_method]," "])}},{key:"invoice_source",label:$t("i6yz2","来源","lang"),display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",a.Bi[t.invoice_source]," "])}},{key:"update_time",label:$t("devbay4","更新时间","lang"),display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",l()(1e3*t.update_time).format("yyyy-MM-DD HH:mm:ss")," "])}},{key:"user_card_code",label:$t("ac4xwf4","会员编号","lang"),type:"text",display:"inline"},{key:"user_mobile",label:$t("ac05e54","会员手机","lang"),type:"text",display:"inline"},{key:"order_id",label:$t("hyu6l04","订单编号","lang"),type:"text",display:"inline"},{key:"invoice_amount",label:$t("b32msj4","发票金额","lang"),type:"text",display:"inline",component(e,t){return(0,this.$createElement)("span",[" ",t.invoice_amount/100," "])}},{key:"remark",label:$t("fqo12","备注","lang"),type:"text",display:"inline"},{type:"group",label:$t("chj7di4","开票信息","lang")},{key:"invoice_type",label:$t("ctp5dk4","抬头类型","lang"),type:"text",component(e,t){return(0,this.$createElement)("span",[" ",{enterprise:$t("dv7d2","企业","lang"),individual:$t("dq6o2","个人","lang")}[t.invoice_type]," "])}},{key:"company_title",label:$t("b2u9kv4","发票抬头","lang"),type:"text",display:"inline"},{key:"invoice_type_code",label:$t("chqqqg4","开票类型","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type},component(e,t){return a.W1[t.invoice_type_code]}},{key:"mobile",label:$t("w0psf45","开票手机号","lang"),type:"text",isShow(){return"individual"===e.form.invoice_type}},{key:"email",label:$t("chudkb4","开票邮箱","lang"),type:"text",isShow(){return"individual"===e.form.invoice_type}},{key:"company_tax_number",label:$t("4yz4qb6","纳税人识别号","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"company_address",label:$t("amfh984","公司地址","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"company_telephone",label:$t("amkvh04","公司电话","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"bank_name",label:$t("cegvwt4","开户银行","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"bank_account",label:$t("jd0qcn4","银行账户","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"mobile",label:$t("w0psf45","开票手机号","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{key:"email",label:$t("chudkb4","开票邮箱","lang"),type:"text",isShow(){return"enterprise"===e.form.invoice_type}},{type:"group",label:$t("3j34px6","开票商品明细","lang")},{key:"invoice_items",component(e,t){return(0,this.$createElement)("SpFinder",{ref:"finder",attrs:{setting:m,data:t.invoice_items,"no-selection":!0,"show-pager":!1}})}},{type:"group",label:$t("b31biu4","发票详情","lang")},{key:"invoices",component(){const t=this.$createElement;return t("SpFinder",{ref:"finder",attrs:{"fixed-row-action":!0,setting:s,data:e.form.invoices,"no-selection":!0,"show-pager":!1}},[t("div",{slot:"tableTop"},[t("div",{class:"action-container"},[t("div",{style:"height: 20px"}),t("el-button",{attrs:{type:"primary",plain:!0},on:{click:()=>this.showPdHandle()}},[$t("5o1b2j7","查看发票PDF","lang")]),("success"==e.form.invoice_status&&"online"==e.form.invoice_method||"failed"==e.form.invoice_status&&"online"!=e.form.invoice_method)&&t("el-button",{attrs:{type:"primary",plain:!0},on:{click:()=>this.sendEmailHandle()}},[$t("cy7nbm5","重发至邮箱","lang")])])])])}}],e),s={columns:[{name:$t("b2rxlt4","发票号码","lang"),key:"invoice_no",width:180},{name:$t("b2r2id4","发票代码","lang"),key:"invoice_code",width:100},{name:$t("chqqqg4","开票类型","lang"),key:"invoice_type",width:100,render(e,{row:t}){return(0,arguments[0])("span",[" ",{blue:$t("n9kb2","蓝票","lang"),red:$t("m7eu2","红票","lang")}[t.invoice_type]," "])}},{name:$t("chmzia4","开票日期","lang"),key:"create_time",width:190,render(e,{row:t}){return(0,arguments[0])("span",[" ",l()(1e3*t.create_time).format("yyyy-MM-DD HH:mm:ss")," "])}}]},m={columns:[{key:"item_bn",name:$t("1bmn325","SKU编号","lang"),width:180},{key:"item_name",name:$t("b40v0e4","商品名称","lang"),width:180},{key:"spec_info",name:$t("o06w2","规格","lang"),width:80},{key:"num",name:$t("i1y72","数量","lang"),width:80},{key:"amount",name:$t("chuq8k4","开票金额","lang"),width:120,render(e,{row:t}){return(0,arguments[0])("span",[" ",t.amount/100," "])}},{key:"invoice_tax_rate",name:$t("le7t2","税率","lang"),width:100,render(e,{row:t}){return(0,arguments[0])("span",[" ",t.invoice_tax_rate,"% "])}},{key:"item_spec_desc",name:$t("o06w2","规格","lang"),width:180},{key:"order_id",name:$t("hyu6l04","订单编号","lang"),width:220}]};var c=n(89886),p={data(){return{form:{...(0,i.C)(r(this))},confirmDialogShow:!1,confirmForm:{email:""},confirmStatus:!1,confirmRuleForm:[{key:"email",label:$t("padf2","邮箱","lang"),type:"input",defaultValue:"",required:!0,tip:$t("ik95emp","电子发票需要一定时间才能发送到您的邮箱,请耐心等待","lang")}]}},computed:{formList(){return r(this)}},mounted(){this.id=this.$route.query.id,this.id&&this.getInvoice()},methods:{showPdHandle(){window.open(this.form.invoice_file_url,"_blank")},sendEmailHandle(){this.confirmDialogShow=!0,this.confirmForm={email:""}},getInvoice(){c.default.financial.getInvoiceDetail(this.id).then(e=>{this.form={...(0,i.C)(r(this),e),invoice_file_url:e.invoice_file_url}})},onConfirmFormSubmit(){this.confirmStatus=!0,c.default.financial.resendInvoiceEmail({id:this.id,confirm_email:this.confirmForm.email}).then(e=>{this.$message.success($t("b65a734","发送成功","lang")),this.confirmDialogShow=!1}).finally(()=>{this.confirmStatus=!1})}}},y=(0,n(81656).A)(p,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"invoice-detail-page"},[t("SpForm",{attrs:{size:"min","form-list":e.formList,submit:!1},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("SpDialog",{ref:"dialogRef2",staticClass:"base-form",attrs:{title:$t("z9bdv07","请确认重发邮箱","lang"),"confirm-btn-text":$t("o18mi07","邮箱正确并发送","lang"),modal:!1,form:e.confirmForm,"form-list":e.confirmRuleForm,"confirm-status":e.confirmStatus},on:{onSubmit:e.onConfirmFormSubmit},model:{value:e.confirmDialogShow,callback:function(t){e.confirmDialogShow=t},expression:"confirmDialogShow"}})],1)},[],!1,null,null,null).exports}}]);