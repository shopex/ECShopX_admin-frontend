"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9947],{29947:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var a=s(79296),i={data(){return{wxapp_id:"",template_name:"",detailDialog:!1,temlateList:[],currentTemplate:{is_open:!1,content:"",send_time_desc:{title:""}}}},mounted(){this.$route.query&&this.$route.query.app_id&&(this.wxapp_id=this.$route.query.app_id),this.$route.query&&this.$route.query.tmp_name&&(this.template_name=this.$route.query.tmp_name),(0,a.getWxaMessageTemplateList)({wxapp_appid:this.wxapp_id,template_name:this.template_name}).then(e=>{this.temlateList=e.data.data.list})},methods:{closeDialog(){this.detailDialog=!1},openChange(){let e={template_name:this.template_name,wxapp_appid:this.wxapp_id,scenes_name:this.currentTemplate.scenes_name,is_open:this.currentTemplate.is_open};this.currentTemplate.send_time_desc.value&&(e.send_time=this.currentTemplate.send_time_desc.value),(0,a.openWxaMessageTemplate)(e).then(e=>{this.$message({message:$t("aghf564","保存成功","lang"),type:"success"})})},toDetail(e){this.detailDialog=!0,this.currentTemplate=e}}},l=(0,s(81656).A)(i,function(){var e=this,t=e._self._c;return t("SpPage",[t("el-dialog",{attrs:{title:$t("vra0e89","小程序消息模版详情","lang"),size:"tiny",visible:e.detailDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailDialog=t}}},[t("div",{staticClass:"section-body"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:$t("d8rhvq4","是否开启","lang")}},[t("el-switch",{attrs:{"active-text":" ","inactive-text":" ","active-color":"#13ce66"},on:{change:e.openChange},model:{value:e.currentTemplate.is_open,callback:function(t){e.$set(e.currentTemplate,"is_open",t)},expression:"currentTemplate.is_open"}})],1),t("el-form-item",{attrs:{label:$t("dumqw24","模版id","lang")}},[e._v(" "+e._s(e.currentTemplate.template_id)+" ")]),t("el-form-item",{attrs:{label:$t("8u3v6d5","发送时间点","lang")}},[e._v(" "+e._s(e.currentTemplate.send_time_desc.title)+" "),e.currentTemplate.send_time_desc.time_list?t("span",[t("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:$t("l72nr3","请选择","lang")},on:{change:e.openChange},model:{value:e.currentTemplate.send_time_desc.value,callback:function(t){e.$set(e.currentTemplate.send_time_desc,"value",t)},expression:"currentTemplate.send_time_desc.value"}},e._l(e.currentTemplate.send_time_desc.time_list,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "+e._s(e.currentTemplate?.send_time_desc?.time_unit||$t("ermh2","分钟","lang"))+" "+e._s(e.currentTemplate.send_time_desc.end_title)+" ")],1):e._e()]),t("el-form-item",{attrs:{label:$t("edas2","内容","lang")}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},e._l(e.currentTemplate.content,function(s){return t("div",{key:s.column},[e._v(" "+e._s(s.title)+" ")])}),0)],1)],1)],1)]),t("div",{staticClass:"message-template"},[t("div",{staticClass:"section-body"},e._l(e.temlateList,function(s){return t("div",{staticClass:"item",class:s.is_open?"succ-open-sms":"not-open-sms",on:{click:function(t){return e.toDetail(s)}}},[t("div",{staticClass:"item-title clearfix"},[e._v(e._s(s.title)+" "),t("i",{staticClass:"el-icon-arrow-right"})]),s.send_time_desc.value?t("div",{staticClass:"item-content"},[e._v(" "+e._s(s.send_time_desc.title)+e._s(s.send_time_desc.value)+e._s(s?.send_time_desc?.time_unit||$t("ermh2","分钟","lang"))+e._s(s.send_time_desc.end_title)+" ")]):t("div",{staticClass:"item-content"},[e._v(" "+e._s(s.send_time_desc.title)+" ")]),t("div",{staticClass:"item-footer"},[s.is_open?t("el-button",{attrs:{type:"default",size:"small"}},[e._v($t("bldbgs5"," 启用中 ","lang"))]):t("el-button",{attrs:{type:"default",size:"small"}},[e._v($t("duwobh5"," 未启用 ","lang"))])],1)])}),0)])],1)},[],!1,null,"51841f2e",null).exports}}]);