"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[304],{27923:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});a(44114);var s=a(2038),l=a(69472),i=a(37798),r={props:["content","handleClick","visible","info"],data(){return{form:{headquarters_proportion:""},rules:{headquarters_proportion:[{validator:this.validateNumber,trigger:"change",required:!0}]}}},methods:{handleDialogChange(){const{audit_state:e}=this.info;"3"==e?this.$refs.form.validate(e=>{e&&this.onPush()}):this.onPush()},onPush(){const{operator_id:e,distributor_id:t,name:a}=this.info;(0,s.dealerRelStore)({...this.form,operator_id:e,distributor_id:t,name:a,is_rel:0}).then(e=>{this.$emit("handleClick",!1),this.form={},this.$message({message:$t("d1spvi4","操作成功","lang"),type:"success"})})},handleDialogClose(){this.form={},this.$emit("handleClick",!1)},validateNumber(e,t,a){t?/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)?Number(t)>100?a(new Error($t("jl383cb","分账比例不能超过100","lang"))):a():a(new Error($t("hyozmtg","请输入正确格式，最多保留两位小数","lang"))):a(new Error($t("l6wdl3","请输入","lang")))}}},n=a(81656),o=(0,n.A)(r,function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"cus-shop-modal",attrs:{title:$t("ioej3m4","通知消息","lang"),visible:e.visible,width:"33%","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleDialogClose}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[e._v(" "+e._s(e.content)+" ")]),"3"==e.info.audit_state?t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"140px"}},[t("el-form-item",{attrs:{label:$t("o80r8h6","总部分账占比","lang"),prop:"headquarters_proportion"}},[t("el-input",{staticStyle:{width:"70%"},model:{value:e.form.headquarters_proportion,callback:function(t){e.$set(e.form,"headquarters_proportion",t)},expression:"form.headquarters_proportion"}},[t("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1):e._e(),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleDialogClose}},[e._v($t("b2spxe5"," 取 消 ","lang"))]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogChange}},[e._v($t("fovd945"," 确 定 ","lang"))])],1)],1)},[],!1,null,null,null).exports,c=(a(18111),a(22489),a(61701),a(67088)),d=a(54028),p=(a(97572),a(73306)),m={components:{loadingBtn:a(79836).default},props:["activeName","info"],data(){return{member_type:"",allShow:!0,AllArea:d,processed:"",currentStatus:{resultStatus:"",time:"",info:"",title:""},AllBank:[],area:"",form:{name:"",area:"",business_scope:"",social_credit_code:"",social_credit_code_expires:"",telphone:"",zip_code:"",email:"",legal_person:"",legal_cert_id:"",legal_cert_id_expires:"",legal_mp:"",address:"",attach_file:"",bank_code:"",bank_name:"",bank_acct_type:"1",card_no:"",card_name:"",submit_review:"",isUploadFile:!0,attach_file_name:"",confirm_letter_file:"",confirm_letter_file_name:""},rules:{name:(0,p.XU)($t("aaky9o4","企业名称","lang")),social_credit_code:[(0,p.XU)($t("tqcx9e5","营业执照号","lang")),(0,p.SO)(18)],social_credit_code_expires:{required:!0,message:$t("yk95e08","请选择商户有效期","lang"),trigger:"blur"},area:{type:"array",required:!0,message:$t("2ehoiw5","请选择省市","lang"),trigger:"change"},address:[(0,p.XU)($t("aalamh4","企业地址","lang")),(0,p.SO)(60)],business_scope:(0,p.XU)($t("gjrz7r4","经营范围","lang")),legal_person:[(0,p.XU)($t("e24sm74","法人姓名","lang")),(0,p.SO)(20)],legal_cert_id:[(0,p.XU)($t("lqgz2l6","法人身份证号","lang")),(0,p.SO)(18)],legal_cert_id_expires:{required:!0,message:$t("ozf6b3a","请选择法人证件有效期","lang"),trigger:"blur"},legal_mp:[(0,p.XU)($t("9osov75","法人手机号","lang")),(0,p.SO)(11)],bank_acct_type:[(0,p.XU)($t("fmcbi38","结算银行账户类型","lang"),"change")],bank_name:{required:!0,message:$t("7jvaj76","请输入并选择","lang"),trigger:"blur"},card_name:[(0,p.XU)($t("8bfqpb8","结算银行卡开户名","lang")),(0,p.SO)(20)],card_no:[(0,p.XU)($t("ili2cd7","结算银行卡卡号","lang")),(0,p.SO)(40)],attach_file:{required:!0,message:$t("kvqml3","请上传","lang"),trigger:"change"},confirm_letter_file:{required:!0,message:$t("kvqml3","请上传","lang"),trigger:"change"}},personForm:{user_name:"",tel_no:"",cert_id:"",bank_card_name:"",bank_tel_no:"",bank_card_id:"",bank_cert_id:""},personRules:{user_name:[(0,p.XU)($t("f6s92h4","用户姓名","lang")),(0,p.SO)(20)],tel_no:[(0,p.XU)($t("z3cuew6","用户手机号码","lang")),(0,p.SO)(11)],cert_id:[(0,p.XU)($t("66jz627","用户身份证号码","lang")),(0,p.SO)(18)],bank_card_name:[(0,p.XU)($t("t0hf0d5","开户人姓名","lang")),(0,p.SO)(20)],bank_tel_no:[(0,p.XU)($t("8ytrct7","银行预留手机号","lang")),(0,p.SO)(11)],bank_card_id:[(0,p.XU)($t("jd0njb4","银行账号","lang")),(0,p.SO)(40)],bank_cert_id:[(0,p.XU)($t("qxy5ni7","开户人证件号码","lang")),(0,p.SO)(18)]},isShow_corp:!1,isShow_person:!1,type:"",id:""}},mounted(){"corp"==this.activeName?(this.form=this.info,this.form.area=[this.form.prov_code,this.form.area_code]):this.personForm=this.info},methods:{submitHandle(e,t){this.$refs[e].validate(async a=>{a?"ruleForm"==e?this.$confirm($t("tt3ad915","未避免影响提现，请确认结算卡持卡人姓名与法人一致，信息更改需审核，请确认是否提交。","lang"),$t("d3hyoh4","提示消息","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),type:"warning",showCancelButton:!1}).then(()=>{this.submitForm(e,t)}):this.$confirm($t("3lacz3l","结算账户信息更改需提交审核，请确认是否提交","lang"),$t("d3hyoh4","提示消息","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),type:"warning",showCancelButton:!1}).then(()=>{this.submitFormPerson(e,t)}):this.$message.error($t("atj8hl7","请完善您的信息","lang"))})},async submitForm(e,t){this.form.submit_review=t,this.form.isUploadFile=!0;(await this.$api.adapay.accountUpdate(this.form)).data.data.status?(this.$message.success($t("cx7dr74","提交成功","lang")),this.$emit("back")):this.$message.error($t("fy1g2","失败","lang"))},async submitFormPerson(e,t){this.personForm.submit_review=t;(await this.$api.adapay.accountUpdatePerson(this.personForm)).data.data.status?(this.$message.success($t("cx7dr74","提交成功","lang")),this.$emit("back")):this.$message.error($t("fy1g2","失败","lang"))},handleAvatarSuccess(e){},handleUpload:function(e){this.form.attach_file_name=e.file.name,this.form.attach_file=e.file},beforeAvatarUpload(e){const t="application/zip"===e.type||"application/x-zip-compressed"===e.type,a=e.size/1024/1024<8;return t||this.$message.error($t("k396rg9","文件类型应为Zip","lang")),a||this.$message.error($t("bi88rhd","上传文件不能超过 8MB!","lang")),t&&a},goback(){this.$router.back(-1)},async processedHandle(){if("corp"==this.member_type){const e=await this.$api.adapay.accountQueryCorp();this.processed=$t("i16p2","未填","lang"),this.form=e.data.data,this.form.area=[this.form.prov_code,this.form.area_code]}else{const e=await this.$api.adapay.accountQueryCorp();this.processed=$t("i16p2","未填","lang"),this.personForm=e.data.data,this.activeName="person"}},async getResult(e,t,a){if(this.id=e,e&&"corp"==a){this.activeName=a,this.isShow_person=!0;const t=await(0,c.checkCorp)(e);this.form=t.data.data;const{area_code:s,prov_code:l,social_credit_code_expires:i,legal_cert_id_expires:r,attach_file_name:n,confirm_letter_file_name:o,bank_code:d,bank_name:p}=t.data.data;this.form.area=[l,s],this.form.attach_file_name=n,this.form.confirm_letter_file_name=o}else if(e&&"person"==a){this.isShow_corp=!0,this.activeName=a;const t=await(0,c.checkPerson)(e);this.personForm=t.data.data}else this.isShow_person=!0,this.isShow_corp=!0,this.activeName="corp"},async querySearch(e,t){const a=await this.$api.adapay.getBank({bank_name:this.form.bank_name});this.AllBank=a.data.data;var s=this.AllBank.map(e=>({value:e.bank_name,bank_code:e.bank_code,id:e.id}));t(e?s.filter(this.createFilter(e)):s)},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},async get_bank(){const e=await(0,c.getBankList)();this.AllBank=e.data.data},handleSelectBank(e){this.form.bank_code=e.bank_code,this.form.bank_name=e.value}}},_=m,u=(0,n.A)(_,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"zyk_page_register_Info_edit"},[t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["corp"==e.info.member_type?t("el-tab-pane",{attrs:{name:"corp",label:$t("dv7d2","企业","lang")}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("aak3on4","企业信息","lang"))])]),t("div",{staticClass:"content"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aaky9o4","企业名称","lang"),prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("tqcx9e5","营业执照号","lang"),prop:"social_credit_code"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.social_credit_code,callback:function(t){e.$set(e.form,"social_credit_code",t)},expression:"form.social_credit_code"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("7perai6","商户有效日期","lang"),prop:"social_credit_code_expires"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyyMMdd",placeholder:$t("ikzrh64","选择日期","lang")},model:{value:e.form.social_credit_code_expires,callback:function(t){e.$set(e.form,"social_credit_code_expires",t)},expression:"form.social_credit_code_expires"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aaqou94","企业电话","lang"),prop:"telphone"}},[t("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aav9vg4","企业邮箱","lang"),prop:"email"}},[t("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("pb1k2","邮编","lang"),prop:"zip_code"}},[t("el-input",{model:{value:e.form.zip_code,callback:function(t){e.$set(e.form,"zip_code",t)},expression:"form.zip_code"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("crghzd4","所在省市","lang"),prop:"area"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.AllArea,clearable:"",props:{value:"value",label:"title",children:"cities"}},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("aalamh4","企业地址","lang"),prop:"address"}},[t("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:$t("gjrz7r4","经营范围","lang"),prop:"business_scope"}},[t("el-input",{attrs:{maxlength:"500","show-word-limit":"",type:"textarea",placeholder:$t("2jbrwj5","请输入内容","lang"),rows:"7"},model:{value:e.form.business_scope,callback:function(t){e.$set(e.form,"business_scope",t)},expression:"form.business_scope"}})],1)],1)],1)],1)]),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("e2365v4","法人信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("e24sm74","法人姓名","lang"),prop:"legal_person"}},[t("el-input",{model:{value:e.form.legal_person,callback:function(t){e.$set(e.form,"legal_person",t)},expression:"form.legal_person"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("yimd5g7","法人身份证号码","lang"),prop:"legal_cert_id"}},[t("div",{staticClass:"flex"},[t("el-input",{model:{value:e.form.legal_cert_id,callback:function(t){e.$set(e.form,"legal_cert_id",t)},expression:"form.legal_cert_id"}}),t("el-tooltip",{attrs:{content:$t("5nmtrnb","身份证信息字母X需大写","lang"),placement:"top-end",effect:"light"}},[t("i",{staticClass:"el-icon-warning-outline"})])],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("g89uny6","法人手机号码","lang"),prop:"legal_mp"}},[t("el-input",{model:{value:e.form.legal_mp,callback:function(t){e.$set(e.form,"legal_mp",t)},expression:"form.legal_mp"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("mz0m2u7","法人证件有效期","lang"),prop:"legal_cert_id_expires"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyyMMdd",placeholder:$t("ikzrh64","选择日期","lang")},model:{value:e.form.legal_cert_id_expires,callback:function(t){e.$set(e.form,"legal_cert_id_expires",t)},expression:"form.legal_cert_id_expires"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("xtucf76","结算账户信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("fmcbi38","结算银行账户类型","lang"),prop:"bank_acct_type"}},[t("el-radio-group",{model:{value:e.form.bank_acct_type,callback:function(t){e.$set(e.form,"bank_acct_type",t)},expression:"form.bank_acct_type"}},[t("el-radio",{attrs:{label:"1"}},[e._v($t("g39v2","对公","lang"))]),t("el-radio",{attrs:{label:"2"}},[e._v($t("gb8o2","对私","lang"))])],1),t("el-tooltip",{style:{"margin-left":"30px"},attrs:{content:$t("8f0qh6b","提现到账银行卡账户类型","lang"),placement:"top-end",effect:"light"}},[t("i",{staticClass:"el-icon-warning-outline"})])],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("pvo0o59","结算银行卡所属银行","lang"),prop:"bank_name"}},[t("div",{staticClass:"flex"},[t("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-search","fetch-suggestions":e.querySearch,placeholder:$t("ey6seb7","请输入选择内容","lang")},on:{select:e.handleSelectBank},model:{value:e.form.bank_name,callback:function(t){e.$set(e.form,"bank_name",t)},expression:"form.bank_name"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("8bfqpb8","结算银行卡开户名","lang"),prop:"card_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.card_name,callback:function(t){e.$set(e.form,"card_name",t)},expression:"form.card_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("yywq5s6","结算银行卡号","lang"),prop:"card_no"}},[t("el-input",{model:{value:e.form.card_no,callback:function(t){e.$set(e.form,"card_no",t)},expression:"form.card_no"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("altlu64","其他信息","lang"))])]),t("div",{staticClass:"other_content"},[t("el-form-item",{attrs:{label:$t("a6nnrc4","上传附件","lang"),prop:"attach_file"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"","show-file-list":!1,action:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"http-request":e.handleUpload,multiple:!1}},[t("i",{staticClass:"el-icon-upload"}),e.form.attach_file_name?t("div",[e._v(e._s(e.form.attach_file_name))]):t("div",{staticClass:"el-upload__text"},[e._v($t("39e3899","将文件拖到此处，或","lang")),t("em",[e._v($t("ek7w3c4","点击上传","lang"))])])])],1),t("el-form-item",[t("div",{staticClass:"opload_rules"},[t("p",[e._v($t("uowr8s6","内容须包括：","lang"))]),t("p",[e._v($t("tg5n26d","营业执照：三证合一证件照；","lang"))]),t("p",[e._v($t("a81endn","法人信息：法人身份证正面照、法人身份证反面照；","lang"))]),t("p",[e._v($t("el9mxtf","结算账户信息：开户银行许可证照","lang"))]),t("p",[e._v($t("3nz3gqk","请确保上传的图片信息清晰、准确、一致性；","lang"))]),t("p",[e._v($t("1l3tbpo","请压缩为Zip文件进行上传，整包最大限制为8M。","lang"))])])])],1)]),t("el-form-item",{staticStyle:{"text-align":"center",margin:"50px 0","margin-right":"130px"}},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitHandle("ruleForm","Y")}}},[e._v($t("fk4a44"," 提交 ","lang"))])],1)],1)],1):e._e(),"person"==e.info.member_type?t("el-tab-pane",{attrs:{name:"person",label:$t("dq6o2","个人","lang")}},[t("el-form",{ref:"personForm",staticClass:"demo-ruleForm",attrs:{model:e.personForm,"label-width":"130px",rules:e.personRules}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("biyzkw4","基本信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("f6s92h4","用户姓名","lang"),prop:"user_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.personForm.user_name,callback:function(t){e.$set(e.personForm,"user_name",t)},expression:"personForm.user_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("z3cuew6","用户手机号码","lang"),prop:"tel_no"}},[t("div",{staticClass:"flex"},[t("el-input",{attrs:{disabled:""},model:{value:e.personForm.tel_no,callback:function(t){e.$set(e.personForm,"tel_no",t)},expression:"personForm.tel_no"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("66jz627","用户身份证号码","lang"),prop:"cert_id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.personForm.cert_id,callback:function(t){e.$set(e.personForm,"cert_id",t)},expression:"personForm.cert_id"}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v($t("xtucf76","结算账户信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("t0hf0d5","开户人姓名","lang"),prop:"bank_card_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.personForm.bank_card_name,callback:function(t){e.$set(e.personForm,"bank_card_name",t)},expression:"personForm.bank_card_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("8ytrct7","银行预留手机号","lang"),prop:"bank_tel_no"}},[t("div",{staticClass:"flex"},[t("el-input",{model:{value:e.personForm.bank_tel_no,callback:function(t){e.$set(e.personForm,"bank_tel_no",t)},expression:"personForm.bank_tel_no"}})],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("jd0njb4","银行账号","lang"),prop:"bank_card_id"}},[t("el-input",{model:{value:e.personForm.bank_card_id,callback:function(t){e.$set(e.personForm,"bank_card_id",t)},expression:"personForm.bank_card_id"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("qxy5ni7","开户人证件号码","lang"),prop:"bank_cert_id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.personForm.bank_cert_id,callback:function(t){e.$set(e.personForm,"bank_cert_id",t)},expression:"personForm.bank_cert_id"}})],1)],1)],1)],1),t("el-form-item",{staticStyle:{"text-align":"center",margin:"50px 0","margin-right":"130px"}},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitHandle("personForm","Y")}}},[e._v($t("fk4a44"," 提交 ","lang"))])],1)],1)],1):e._e()],1)],1)])},[],!1,null,"b57acda4",null).exports,g={components:{BaseModal:i.A,RemoveShipModal:o,editAccount:u},data(){return{datapass_block:null,isEdit:!1,activeName:"first",distributor_id:0,infoList:{},loginType:"",accountInfo:{},split_ledger_info:{},dealerList:{},member_type:"corp",is_openAccount:!0,is_rel_dealer:!0,visible:!1,modalContent:"",tagsList:[],logList:[],total_count:0,params:{page:1,page_size:10},baseInfo:[{name:$t("bh9udz4","地理位置","lang"),field:"store_address"},{name:$t("bd2la94","地图定位","lang"),field:"qqmapimg",type:"pic"},{name:$t("y0gi925","店铺经纬度","lang"),field:"",filter:this.addressFilter}],otherInfo:[{name:$t("jyuvm45","关联经销商","lang"),field:"username"}],enterPriseList:[{name:$t("e24sm74","法人姓名","lang"),field:"legal_person"},{name:$t("yimd5g7","法人身份证号码","lang"),field:"legal_cert_id"},{name:$t("mz0m2u7","法人证件有效期","lang"),field:"legal_cert_id_expires"},{name:$t("tqcx9e5","营业执照号","lang"),field:"social_credit_code"},{name:$t("7perai6","商户有效日期","lang"),field:"social_credit_code_expires"},{name:$t("gjrz7r4","经营范围","lang"),field:"business_scope"},{name:$t("irirsn6","法人电话号码","lang"),field:"tel_no"},{name:$t("aalamh4","企业地址","lang"),field:"address"},{name:$t("pb1k2","邮编","lang"),field:"zip_code"}],enterAccountInfo:[{name:$t("yywq5s6","结算银行卡号","lang"),field:"card_no"},{name:$t("q9us5k9","结算银行卡开户姓名","lang"),field:"card_name"},{name:$t("pvo0o59","结算银行卡所属银行","lang"),field:"bank_name"},{name:$t("fmcbi38","结算银行账户类型","lang"),field:"bank_acct_type",filter:this.bankFilter}],enterSplitAccountList:[{name:$t("csikv77","手续费扣费方式","lang"),field:"adapay_fee_mode",filter:this.adapayFilter},{name:$t("o80r8h6","总部分账占比","lang"),field:"headquarters_proportion",filter:this.headquartersFilter},{name:$t("e01s897","经销商分账占比","lang"),field:"dealer_proportion",filter:this.dealerFilter}],personInfo:[{name:$t("f6s92h4","用户姓名","lang"),field:"user_name"},{name:$t("z3cuew6","用户手机号码","lang"),field:"tel_no"},{name:$t("yimd5g7","法人身份证号码","lang"),field:"cert_id"}],accountList:[{name:$t("t0hf0d5","开户人姓名","lang"),field:"bank_card_name"},{name:$t("8ytrct7","银行预留手机号","lang"),field:"bank_tel_no"},{name:$t("jd0njb4","银行账号","lang"),field:"bank_card_id"},{name:$t("qxy5ni7","开户人证件号码","lang"),field:"bank_cert_id"}],splitAccountList:[{name:$t("csikv77","手续费扣费方式","lang"),field:"adapay_fee_mode",filter:this.adapayFilter},{name:$t("o80r8h6","总部分账占比","lang"),field:"headquarters_proportion",filter:this.headquartersFilter}]}},mounted(){(this.$route.query.distributor_id||"distributor"===this.$store.getters.login_type)&&(this.distributor_id=this.$route.query.distributor_id?this.$route.query.distributor_id:0,this.loginType=this.$store.getters.login_type,("distributor"===this.$store.getters.login_type||this.is_openAccount)&&(this.activeName="second"),this.getTabDetail())},methods:{handleCurrentChange(e){this.params.page=e,this.getLogList()},handleSizeChange(e){this.params.page=1,this.params.page_size=e,this.getLogList()},tabChange(e){this.activeName=e.name,"third"==e.name&&(this.params.page=1,this.getLogList())},editHandle(){this.isEdit=!0},addressFilter(){const{lat:e,lng:t}=this.infoList;return e&&t?t+" - "+e:"-"},getTabDetail(){(0,s.getDistributorInfo)({distributor_id:this.distributor_id}).then(e=>{const{is_openAccount:t,is_rel_dealer:a,adapayMemberInfo:s,dealer:l,datapass_block:i}=e.data.data||{},{basicInfo:{auto_sync_goods:r,is_ziti:n,is_delivery:o,is_local_delivery:c}}=s||{};this.infoList=e.data.data,this.datapass_block=i,this.split_ledger_info=s.split_ledger_info||{},this.is_openAccount=t,this.is_rel_dealer=a,this.dealerList=l||{},this.accountInfo=s||{},this.member_type=s.member_type,r&&this.tagsList.push({name:$t("r9n0h16","自动上架商品","lang"),type:"danger"}),n&&this.tagsList.push({name:$t("d6ke3c4","支持自提","lang"),type:""}),o&&this.tagsList.push({name:$t("d6eunt4","支持快递","lang"),type:"success"}),c&&this.tagsList.push({name:$t("cqwqz3","同城配","lang"),type:"warning"})}).catch(e=>{this.loading=!1,this.$message({type:"error",message:$t("q74pc36","获取详情出错","lang")})})},getLogList(){(0,l.getAdapayLogList)({log_type:"distributor",...this.params,distributor_id:this.distributor_id}).then(e=>{this.logList=e.data.data.list||{},this.total_count=e.data.data.total_count||0}).catch(e=>{this.loading=!1,this.$message({type:"error",message:$t("uztt746","获取日志出错","lang")})})},handleModalClick(e,t){const{username:a}=this.dealerList;this.visible=e,e&&!t?this.modalContent=`${$t("amrvmjc","请确认是否解除该店铺与【","lang")}${a}${$t("6k0j6c4","】的关联","lang")}`:e&&t&&(this.infoList={...this.infoList,audit_state:"3"},this.modalContent=$t("qdin8qi","如解除关联，需重新设置总部分账占比。","lang"))},bankFilter(){let{bank_acct_type:e}=this.infoList,t="";switch(e){case"1":case"2":t=$t("g39v2","对公","lang")}return t},adapayFilter(){let{adapay_fee_mode:e}=this.split_ledger_info,t="";switch(e){case"I":t=$t("eem62","内扣","lang");break;case"O":t=$t("foy52","外扣","lang")}return t},headquartersFilter(){let{headquarters_proportion:e}=this.split_ledger_info,t=this.split_ledger_info.headquarters_proportion;return t?t+"%":"-"},dealerFilter(){let{dealer_proportion:e}=this.split_ledger_info,t=this.split_ledger_info.dealer_proportion;return t?t+"%":"-"},dowloadFile(e){let t=document.createElement("a");t.style.display="none",t.href=e,document.body.appendChild(t),t.click(),this.$message({type:"success",message:$t("afutpd4","下载成功","lang")})},back(){this.isEdit=!1}}},f=(0,n.A)(g,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"cus-details"},[0==e.isEdit?[t("el-card",[t("el-row",[t("el-col",{attrs:{span:3}},[t("img",{staticClass:"cus-details-img",attrs:{src:a(40940),alt:""}})]),t("el-col",{attrs:{span:20}},[t("div",{staticClass:"cus-details-flex"},[t("p",{staticClass:"cus-details-row"},[e._v(e._s(e.infoList.name))]),t("div",{staticClass:"cus-details-pfonts cus-margin-40"},[t("i",{staticClass:"el-icon-location-outline cus-icon"}),t("span",[e._v(e._s(e.infoList.province+e.infoList.city||"-"))])])]),t("p",{staticClass:"cus-details-pfonts"},[t("i",{staticClass:"el-icon-s-custom cus-icon"}),t("span",[e._v(e._s(e.infoList.contact||"-"))])]),t("p",{staticClass:"cus-details-pfonts"},[t("i",{staticClass:"el-icon-time cus-icon"}),t("span",[e._v(e._s(e.infoList.hour||"-"))])]),t("div",{staticClass:"cus-details-flex"},[t("div",{staticClass:"cus-details-pfonts"},[t("i",{staticClass:"el-icon-phone cus-icon"}),t("span",[e._v(e._s(e.infoList.mobile||"-"))]),e._v($t("lcr0v48"," （企业电话） ","lang"))]),t("div",{staticClass:"cus-details-pfonts cus-margin-50"},[t("i",{staticClass:"el-icon-message cus-icon"}),t("span",[e._v(e._s(e.infoList.email))]),e._v($t("or4hqz8"," （企业邮箱） ","lang"))])])])],1),t("el-row",{staticStyle:{"margin-top":"10px"}},e._l(e.tagsList,function(a){return t("el-tag",{key:a.name,staticClass:"cus-details-tags",attrs:{type:a.type,size:"small"}},[e._v(" "+e._s(a.name)+" ")])}),1)],1),t("el-card",[t("el-tabs",{staticClass:"cus-details-tabs",on:{"tab-click":e.tabChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["admin"===e.loginType?t("el-tab-pane",{attrs:{label:$t("biyzkw4","基本信息","lang"),name:"first"}},[t("BaseModal",{attrs:{span:20,"label-list":e.baseInfo,info:e.infoList,title:$t("bh9udz4","地理位置","lang")}}),e.is_rel_dealer?t("BaseModal",{attrs:{span:20,"label-list":e.otherInfo,info:e.dealerList,title:$t("altlu64","其他信息","lang")}}):e._e()],1):e._e(),e.is_openAccount?t("el-tab-pane",{attrs:{label:$t("ce4x0l4","开户信息","lang"),name:"second"}},[t("BaseModal",{attrs:{span:7,"label-list":"corp"===e.member_type?e.enterPriseList:e.personInfo,info:e.accountInfo,title:"corp"===e.member_type?`${$t("yyuyc95","企业信息 ","lang")}${e.accountInfo.audit_desc_1||""}`:$t("vrhco25","个人信息 ","lang")+`${e.accountInfo.audit_desc_1||""}`}}),t("BaseModal",{attrs:{span:7,"label-list":"corp"===e.member_type?e.enterAccountInfo:e.accountList,info:e.accountInfo,title:$t("xtucf76","结算账户信息","lang")+`${e.accountInfo.audit_desc_2||""}`}}),"admin"===e.loginType?t("BaseModal",{attrs:{span:7,"label-list":e.is_rel_dealer&&e.is_openAccount&&"corp"===e.member_type?e.enterSplitAccountList:e.splitAccountList,info:e.split_ledger_info,title:$t("axi4jy4","分账信息","lang")}}):e._e(),"corp"===e.member_type?t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v($t("altlu64","其他信息","lang"))]),t("div",{staticClass:"body"},[t("el-row",{staticClass:"load-btn"},[t("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:4}},[e._v($t("xrpttm7"," 附件信息： ","lang"))]),"corp"===e.member_type?t("el-col",{staticClass:"cus-btn",attrs:{span:20}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dowloadFile(e.infoList.attach_file)}}},[e._v($t("my7m64"," 附件 ","lang"))])],1):t("span",[e._v("-")])],1)],1)]):e._e(),1!=e.datapass_block&&"admin"!=e.loginType?t("div",{staticClass:"btn"},["A"!=e.accountInfo.audit_state?t("el-button",{attrs:{type:"primary"},on:{click:e.editHandle}},[e._v($t("juz394"," 编辑 ","lang"))]):e._e(),"A"==e.accountInfo.audit_state?t("el-button",[e._v($t("dxb9y3","审核中","lang"))]):e._e()],1):e._e()],1):e._e(),e.is_openAccount||"distributor"!==e.loginType?e._e():t("el-tab-pane",{attrs:{label:$t("ce4x0l4","开户信息","lang"),name:"second"}},[t("el-row",{staticStyle:{height:"350px"},attrs:{type:"flex",justify:"center",align:"middle"}},[t("span",{staticStyle:{color:"#ccc"}},[e._v($t("ickdhfa","--暂无开户信息--","lang"))])])],1),"admin"===e.loginType?t("el-tab-pane",{attrs:{label:$t("d1zv9w4","操作记录","lang"),name:"third"}},[t("el-timeline",{staticClass:"cus-timeline",attrs:{reverse:!1}},e._l(e.logList,function(a,s){return t("el-timeline-item",{key:s,attrs:{timestamp:a.create_date}},[e._v(" "+e._s(a.content)+" ")])}),1),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","current-page":e.params.page,"page-sizes":[10,20,50],"page-size":e.params.page_size,total:e.total_count},on:{"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1):e._e()],1)],1),e.is_rel_dealer&&"admin"===e.loginType?t("el-row",{staticClass:"cus-details-bot"},[t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.handleModalClick(!0,e.is_openAccount)}}},[e._v($t("5crk2m6"," 解除关联 ","lang"))])],1):e._e(),t("RemoveShipModal",{attrs:{visible:e.visible,info:e.infoList,content:e.modalContent},on:{handleClick:e.handleModalClick}})]:[t("editAccount",{attrs:{"active-name":e.accountInfo.member_type,info:e.accountInfo},on:{back:e.back}})]],2)},[],!1,null,"77ad38aa",null).exports}}]);