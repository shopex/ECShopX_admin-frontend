"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5166],{45166:function(a,t,i){i.r(t),i.d(t,{default:function(){return d}});var e=i(73602),l=i(87378),s=i(9146),o=i(95353),r=i(29181),n={components:{linkSetter:e.default,imgPicker:l.default,videoPicker:s.default},data(){return{linksArr:[],linksVisible:!1,itemVideo:{},imgDialog:!1,isGetImage:!1,loading:!1,ad_pic:"",video:{videos:"",videos_url:""},is_app:["wapp"],form:{ad_material:"",material_type:1,is_enable:0,show_time:"first",position:"right_top",is_jump:0,waiting_time:0,ad_url:{},app:""}}},mounted(){this.getInfo()},methods:{clear_ad_url(){this.form.ad_url={}},input_waiting_time(){this.form.waiting_time=Number(this.form.waiting_time.replace(/\D+/,""))},handleGoodsChange(){this.linksVisible=!0},setLink(a,t){let i=Object.assign(a,{linkPage:t});this.form.ad_url=i},closeDialog(){this.linksVisible=!1},handleImgChange(){this.imgDialog=!0,this.isGetImage=!0},closeImgDialog(){this.imgDialog=!1},pickImg(a){this.ad_pic=a.url,this.imgDialog=!1},pickVideo(a){this.video.videos=a.media_id,this.video.videos_url=a.url},deleteVideo(){this.itemVideo={},this.form.ad_material=""},getInfo(){this.loading=!0,(0,r.getOpenScreenADSet)(this.params).then(a=>{0!==a.data.data.length&&(this.form.ad_material=a.data.data.ad_material,this.form.is_enable=a.data.data.is_enable,this.form.show_time=a.data.data.show_time,this.form.position=a.data.data.position,this.form.is_jump=1,this.form.material_type=a.data.data.material_type,this.form.waiting_time=a.data.data.waiting_time,a.data.data.ad_url?this.form.ad_url=a.data.data.ad_url:this.form.ad_url={},this.form.app=a.data.data.app,this.is_app=a.data.data.app.split(","),1===a.data.data.material_type?this.ad_pic=a.data.data.ad_material:2===a.data.data.material_type&&(this.video.videos=a.data.data.ad_material,this.video.videos_url=a.data.data.ad_material,this.itemVideo={media_id:a.data.data.ad_material,url:a.data.data.ad_material})),this.loading=!1})},save(){1===this.form.material_type?this.form.ad_material=this.ad_pic:2===this.form.material_type&&(this.form.ad_material=this.video.videos_url),this.form.waiting_time<=0||this.form.waiting_time>999999999?this.$message({type:"warning",message:$t("8b13i4j","等待时间区间：0-999999999秒","lang")}):""!==this.form.ad_material?this.is_app.length<=0?this.$message({type:"warning",message:$t("3jk8xo6","请选择应用端","lang")}):(this.form.app=this.is_app.join(","),(0,r.saveOpenScreenADSet)(this.form).then(a=>{this.$message({type:"success",message:$t("d1spvi4","操作成功","lang")}),this.getInfo()})):this.$message({type:"warning",message:$t("2egl7d5","请选择素材","lang")})}},computed:{...(0,o.L8)(["wheight"])}},d=(0,i(81656).A)(n,function(){var a=this,t=a._self._c;return t("SpPage",[a.VERSION_SHUYUN()?a._e():t("SpPlatformTip"),t("el-card",[t("div",{staticStyle:{width:"70%"}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{"label-width":"180px",model:a.form}},[t("el-form-item",{attrs:{label:$t("ca0umz4","广告素材","lang"),prop:"ad_pic"}},[t("el-radio-group",{model:{value:a.form.material_type,callback:function(t){a.$set(a.form,"material_type",t)},expression:"form.material_type"}},[t("el-radio",{attrs:{label:1}},[a._v($t("dukuv4"," 图片 ","lang"))])],1),1===a.form.material_type?t("div",[t("p",{staticClass:"frm-tips"},[a._v($t("7dcl6y13","点击图片可更换，图片大小不能超过 2MB（建议尺寸：750px*1334px）","lang"))]),t("div",[t("div",{staticClass:"upload-box",on:{click:a.handleImgChange}},[a.ad_pic?t("img",{staticClass:"avatar",attrs:{src:a.wximageurl+a.ad_pic}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]),t("imgPicker",{attrs:{"dialog-visible":a.imgDialog,"sc-status":a.isGetImage},on:{chooseImg:a.pickImg,closeImgDialog:a.closeImgDialog}})],1):a._e(),2===a.form.material_type?t("div",[t("videoPicker",{attrs:{data:a.itemVideo},on:{change:a.pickVideo}}),a.itemVideo.media_id?t("el-button",{attrs:{type:"text"},on:{click:a.deleteVideo}},[a._v($t("db22k4"," 删除 ","lang"))]):a._e()],1):a._e()],1),t("el-form-item",{attrs:{label:$t("d8rhvq4","是否开启","lang")}},[t("el-radio-group",{model:{value:a.form.is_enable,callback:function(t){a.$set(a.form,"is_enable",t)},expression:"form.is_enable"}},[t("el-radio",{attrs:{label:1}},[a._v($t("evooh4"," 开启 ","lang"))]),t("el-radio",{attrs:{label:0}},[a._v($t("d7exy4"," 关闭 ","lang"))])],1)],1),t("el-form-item",{attrs:{label:$t("dbncl84","曝光设置","lang")}},[t("el-radio-group",{model:{value:a.form.show_time,callback:function(t){a.$set(a.form,"show_time",t)},expression:"form.show_time"}},[t("el-radio",{attrs:{label:"first"}},[a._v($t("apziog8"," 第一次启动时 ","lang"))]),t("el-radio",{attrs:{label:"always"}},[a._v($t("q5qrvv7"," 每次启动时 ","lang"))])],1)],1),t("el-form-item",{attrs:{label:$t("itkd187","倒计时显示位置","lang")}},[t("el-radio-group",{model:{value:a.form.position,callback:function(t){a.$set(a.form,"position",t)},expression:"form.position"}},[t("el-radio",{attrs:{label:"right_top"}},[a._v($t("d8dbd4"," 右上 ","lang"))]),t("el-radio",{attrs:{label:"right_bottom"}},[a._v($t("d8dc84"," 右下 ","lang"))])],1)],1),t("el-form-item",{attrs:{label:$t("fyab6i4","等待时间","lang")}},[t("el-input",{attrs:{type:"number",min:0,max:999999999,placeholder:$t("2j8bx75","请输入整数","lang")},on:{input:a.input_waiting_time},model:{value:a.form.waiting_time,callback:function(t){a.$set(a.form,"waiting_time",t)},expression:"form.waiting_time"}},[t("template",{slot:"append"},[a._v($t("ldpq3"," 秒 ","lang"))])],2)],1),t("el-form-item",{attrs:{label:$t("aqz1o96","广告跳转路径","lang")}},[t("div",{staticClass:"uploader-setting"},[t("div",{staticClass:"goods-select"},["{}"!==JSON.stringify(a.form.ad_url)?t("div",{staticClass:"link-content"},[t("span",{on:{click:function(t){return a.handleGoodsChange()}}},["goods"===a.form.ad_url.linkPage?[a._v($t("cxglb3","商品：","lang"))]:a._e(),"category"===a.form.ad_url.linkPage?[a._v($t("cn2x13","分类：","lang"))]:a._e(),"article"===a.form.ad_url.linkPage?[a._v($t("fhngh3","文章：","lang"))]:a._e(),"planting"===a.form.ad_url.linkPage?[a._v($t("lizoi3","软文：","lang"))]:a._e(),"link"===a.form.ad_url.linkPage?[a._v($t("n31v13","页面：","lang"))]:a._e(),"marketing"===a.form.ad_url.linkPage?[a._v($t("k3jen3","营销：","lang"))]:a._e(),"custom_page"===a.form.ad_url.linkPage?[a._v($t("mmyna65","自定义页：","lang"))]:a._e(),a._v(" "+a._s(a.form.ad_url.title)+" ")],2),t("span",{staticStyle:{"margin-left":"10px"}},["{}"!==JSON.stringify(a.form.ad_url)?t("i",{staticClass:"el-icon-delete",staticStyle:{color:"#f56c6c"},on:{click:a.clear_ad_url}}):a._e()])]):t("div",{staticClass:"content-center",on:{click:function(t){return a.handleGoodsChange()}}},[t("i",{staticClass:"iconfont icon-link"}),a._v($t("571yxx5","设置路径 ","lang"))])])])]),t("el-form-item",{attrs:{size:"large"}},[t("el-button",[a._v($t("ev022","取消","lang"))]),t("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v($t("cp35x4"," 保存 ","lang"))])],1)],1)],1),t("linkSetter",{attrs:{links:a.linksArr,visible:a.linksVisible,show_article:!1,show_planting:!1,show_page:!1,show_marketing:!1,show_store:!1},on:{setLink:a.setLink,closeDialog:a.closeDialog}})],1)],1)},[],!1,null,"82f0dcc0",null).exports}}]);