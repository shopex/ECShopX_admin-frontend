"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9396],{89396:function(t,e,a){a.r(e),a.d(e,{default:function(){return r}});var s=a(95353),l=a(91142),i={mixins:[a(77825).v8],data(){return{loading:!1,create_time:"",form:{rate_id:"",content:""},params:{create_time:"",rel_id:"",sub_status:"",time_start_begin:"",time_start_end:""},noticeStatusList:[{name:$t("ft5f93","未通知","lang"),value:"NO"},{name:$t("egjgd3","已通知","lang"),value:"SUCCESS"}],total_count:0,list:[],order_id:"",Dialogpic:"",details:{rateInfo:[],itemInfo:[],userReply:[]},imgVisible:!1,detailsDialogVisible:!1}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.fetchList()},methods:{onCopy(){this.$notify({message:$t("bkv2mw4","复制成功","lang"),type:"success"})},noticeDelete(t){const e=this;this.$confirm($t("nlf96ha","确认删除当前通知吗？","lang")).then(a=>{deleteRate(t).then(t=>{t.data.data.status&&(this.$message({message:$t("azeh8z4","删除成功","lang"),type:"success"}),e.fetchList())})})},showImg(t){this.imgVisible=!0,this.Dialogpic=t},handleClose(){this.detailsDialogVisible=!1},replyDialog(t){this.form.rate_id=t.rate_id},detailsDialog(t){getTradeRateDetails(t.rate_id).then(t=>{this.details=t.data.data}),this.detailsDialogVisible=!0},onReset(){this.dateChange(),this.onSearch()},dateChange(t){null!=t&&t.length>0?(this.params.time_start_begin=this.dateStrToTimeStamp(t[0]+" 00:00:00"),this.params.time_start_end=this.dateStrToTimeStamp(t[1]+" 23:59:59")):(this.params.time_start_begin="",this.params.time_start_end="")},dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.params};(0,l.getSubscribeList)(a).then(t=>{this.list=t.data.data.list,this.total_count=Number(t.data.data.total_count),this.loading=!1})}}},r=(0,a(81656).A)(i,function(){var t=this,e=t._self._c;return e("SpPage",[t.VERSION_SHUYUN()?t._e():e("SpPlatformTip"),e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("e8915d5","日期范围:","lang")}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy/MM/dd","start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang")},on:{change:t.dateChange},model:{value:t.params.create_time,callback:function(e){t.$set(t.params,"create_time",e)},expression:"params.create_time"}})],1),e("SpFilterFormItem",{attrs:{prop:"rel_id",label:$t("b1nyjg5","商品ID:","lang")}},[e("el-input",{attrs:{placeholder:$t("mfh2td7","请输入商品ID","lang")},model:{value:t.params.rel_id,callback:function(e){t.$set(t.params,"rel_id",e)},expression:"params.rel_id"}})],1),e("SpFilterFormItem",{attrs:{prop:"sub_status",label:$t("fggrps5","是否评价:","lang")}},[e("el-select",{attrs:{clearable:"",placeholder:$t("x1kvb57","请选择是否评价","lang")},model:{value:t.params.sub_status,callback:function(e){t.$set(t.params,"sub_status",e)},expression:"params.sub_status"}},t._l(t.noticeStatusList,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.value}})}),1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.list,height:t.wheight-140,"element-loading-text":$t("go5gpa5","数据加载中","lang")}},[e("el-table-column",{attrs:{prop:"star","min-width":"150",label:$t("kgsv2","用户","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"order-time",staticStyle:{padding:"8px 0 2px 0"}},[e("span",{staticClass:"content-right-margin"},[e("router-link",{attrs:{target:"_blank",to:{path:"/member/member/memberlist/detail",query:{user_id:a.row.user_id}}}},[t._v(t._s(a.row.username))])],1)])]}}])}),e("el-table-column",{attrs:{prop:"order_id",width:"200",label:$t("i8hwv54","订阅时间","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"order-time"},[t._v(" "+t._s(t._f("datetime")(a.row.created,"YYYY-MM-DD HH:mm:ss"))+" ")])]}}])}),e("el-table-column",{attrs:{prop:"order_id",width:"400",label:$t("eywr2","商品","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"order-time"},[t._v(" "+t._s(a.row.item_name)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"is_reply",width:"160",label:$t("iofeqe4","通知状态","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",["SUCCESS"==a.row.sub_status?e("el-tag",{attrs:{type:"success",size:"mini"}},[t._v($t("egjgd3","已通知","lang"))]):e("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v($t("ft5f93","未通知","lang"))])],1),a.row.disabled?e("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v($t("cowk0a5"," 已删除 ","lang"))]):t._e()]}}])})],1),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1),e("el-dialog",{attrs:{title:$t("hyv4424","评价详情","lang"),width:"45%",visible:t.detailsDialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[e("el-dialog",{attrs:{width:"45%",visible:t.imgVisible,"append-to-body":""},on:{"update:visible":function(e){t.imgVisible=e}}},[e("img",{attrs:{width:"100%",src:t.Dialogpic}})]),e("div",{staticClass:"section-white"},[e("div",{staticClass:"section-header with-border"},[e("h3",[t._v($t("8t2zg6","评价商品信息","lang"))])]),e("div",{staticClass:"section-body"},[e("el-row",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.details.itemInfo}},[e("el-table-column",{staticClass:"goods-img",attrs:{prop:"pic",label:$t("b41bic4","商品图片","lang")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{src:t.row.pics[0],alt:t.row.item_name,width:"100"}})]}}])}),e("el-table-column",{attrs:{prop:"item_name",label:$t("b40v0e4","商品名称","lang"),width:"180"}}),e("el-table-column",{attrs:{label:$t("bylzit7","成交价格(元)","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("￥"+t._s(a.row.total_fee/100))])]}}])})],1)],1)],1),e("div",{staticClass:"section-header with-border"},[e("h3",[t._v($t("hykwip4","评价信息","lang"))])]),e("div",{staticClass:"section-body"},[e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("oyu1vj7"," 评价星级： ","lang"))]),e("el-col",{attrs:{span:20}},[e("el-rate",{attrs:{disabled:""},model:{value:t.details.rateInfo.star,callback:function(e){t.$set(t.details.rateInfo,"star",e)},expression:"details.rateInfo.star"}})],1)],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("rphtar7"," 评价内容： ","lang"))]),e("el-col",{attrs:{span:20}},[t._v(" "+t._s(t.details.rateInfo.content)+" ")])],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("3qbytt6"," 评价图： ","lang"))]),t.details.rateInfo.rate_pic?e("el-col",{attrs:{span:20}},t._l(t.details.rateInfo.rate_pic,function(a){return e("img",{attrs:{src:a,width:"100"},on:{click:function(e){return t.showImg(a)}}})}),0):t._e()],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("3p4dsd6"," 评价人： ","lang"))]),e("el-col",{attrs:{span:20}},[e("router-link",{attrs:{target:"_blank",to:{path:t.matchInternalRoute("member_detail"),query:{user_id:t.details.rateInfo.user_id}}}},[t._v(" "+t._s(t.details.rateInfo.username)+" ")])],1)],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("ow5d7t7"," 评价时间： ","lang"))]),e("el-col",{attrs:{span:20}},[t._v(" "+t._s(t._f("datetime")(t.details.rateInfo.created,"YYYY-MM-DD HH:mm:ss"))+" ")])],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("g3953o7"," 是否回复： ","lang"))]),e("el-col",{attrs:{span:20}},[t.details.rateInfo.is_reply?e("el-tag",{attrs:{type:"success",size:"mini"}},[t._v($t("cpb4lb5"," 已回复 ","lang"))]):e("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v($t("dv61mv5"," 未回复 ","lang"))])],1)],1)],1),e("div",{staticClass:"section-header with-border"},[e("h3",[t._v($t("n0l6407","管理员回复信息","lang"))])]),t.details.replyInfo?e("div",{staticClass:"section-body"},[e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("79u2xj7"," 回复内容： ","lang"))]),e("el-col",{attrs:{span:20}},[e("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(t.details.replyInfo.content)+" ")])],1)],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("b8bci96"," 回复人： ","lang"))]),e("el-col",{attrs:{span:20}},[t._v(" "+t._s(t.details.replyInfo.operator_name)+" ")])],1),e("el-row",[e("el-col",{staticClass:"col-3 content-right",attrs:{span:4}},[t._v($t("4ghmul7"," 回复时间： ","lang"))]),e("el-col",{attrs:{span:20}},[t._v(" "+t._s(t._f("datetime")(t.details.replyInfo.created,"YYYY-MM-DD HH:mm:ss"))+" ")])],1)],1):t._e(),e("div",{staticClass:"section-header with-border"},[e("h3",[t._v($t("aa9pa44","买家评论","lang"))])]),e("div",{staticClass:"section-body"},[e("el-row",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.details.userReply}},[e("el-table-column",{attrs:{prop:"username",label:$t("l56h03","评论人","lang"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{target:"_blank",to:{path:t.matchInternalRoute("member_detail"),query:{user_id:a.row.user_id}}}},[t._v(" "+t._s(a.row.username)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"content",label:$t("i7hjuy4","评论内容","lang")}}),e("el-table-column",{attrs:{prop:"created",label:$t("i7lcj84","评论时间","lang"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("datetime")(a.row.created,"YYYY-MM-DD HH:mm:ss")))])]}}])})],1)],1)],1)])],1)],1)},[],!1,null,"07d5230b",null).exports}}]);