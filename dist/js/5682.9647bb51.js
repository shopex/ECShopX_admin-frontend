"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5682],{45682:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var l=a(95353),s=a(5134),n=a(77825),o={components:{shopSelect:a(25159).default},mixins:[n.v8],data(){return{params:{mobile:"",username:"",pathSource:""},list:[],loading:!1,row:{},username:"",total_count:0,created:"",pickerOptions:{shortcuts:[{text:$t("dl4oop4","最近一周","lang"),onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:$t("4znkgj5","最近一个月","lang"),onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:$t("4zndsa5","最近三个月","lang"),onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},datapass_block:1}},mounted(){this.loginType=this.$store.getters.login_type,this.params.pathSource=this.$route.path,this.fetchList()},methods:{onSearch(){this.fetchList()},onReset(){this.params={mobile:"",username:"",pathSource:""},this.fetchList()},exportPopularizeData(){const{pageIndex:e,pageSize:t}=this.page;let a={page:e,pageSize:t,...this.params};(0,s.exportPopularizeData)(a).then(e=>{1==e.data.data.status?(this.$export_open("popularize"),this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")})):this.$message({type:"error",message:$t("by46j64","导出失败","lang")})})},storeChange(e){e&&e.shop_id,this.params.distributor_id=e.shop_id,this.params.page=1,this.getList()},initChange(){this.shopId=""},exportPopularizeStatic(){let e=this.created[0],t=this.created[1];const{pageIndex:a,pageSize:l}=this.page;let n={page:a,pageSize:l,date_start:e,date_end:t,...this.params};(0,s.exportPopularizeStatic)(n).then(e=>{1==e.data.data.status?(this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}),this.$export_open("popularizeStatic")):this.$message({type:"error",message:$t("by46j64","导出失败","lang")})})},exportPopularizeOrder(){let e=this.created[0],t=this.created[1];const{pageIndex:a,pageSize:l}=this.page;let n={page:a,pageSize:l,date_start:e,date_end:t,...this.params};(0,s.exportPopularizeOrder)(n).then(e=>{1==e.data.data.status?(this.$message({type:"success",message:$t("xdh90kk","已加入执行队列，请在设置-导出列表中下载","lang")}),this.$export_open("popularizeOrder")):this.$message({type:"error",message:$t("by46j64","导出失败","lang")})})},onCopy(){this.$notify.success({message:$t("bkv2mw4","复制成功","lang"),showClose:!0})},detail(e){let t=this.$router.resolve({path:this.matchRoutePath("detail"),query:{user_id:e.user_id,distributor_id:e.distributor_id}});window.open(t.href,"_blank")},fetchList(){this.loading=!0;const{pageIndex:e,pageSize:t}=this.page;let a={page:e,pageSize:t,...this.params};(0,s.getPopularizeList)(a).then(e=>{this.list=e.data.data.list,this.total_count=Number(e.data.data.total_count),this.datapass_block=e.data.data.datapass_block,this.loading=!1})}},computed:{...(0,l.L8)(["wheight"])}},r=(0,a(81656).A)(o,function(){var e=this,t=e._self._c;return t("SpPage",[-1===e.$route.path.indexOf("_child")&&-1===e.$route.path.indexOf("detail")?t("div",[t("SpFilterForm",{attrs:{model:e.params},on:{onSearch:e.onSearch,onReset:e.onReset}},[t("SpFilterFormItem",{attrs:{prop:"mobile",label:$t("dvdfww6","会员手机号:","lang")}},[t("el-input",{staticClass:"input-m",attrs:{placeholder:$t("8sc3278","请输入会员手机号","lang")},model:{value:e.params.mobile,callback:function(t){e.$set(e.params,"mobile",t)},expression:"params.mobile"}})],1),t("shop-select",{attrs:{distributors:""},on:{update:e.storeChange,init:e.initChange}})],1),t("div",{staticClass:"action-container",staticStyle:{"margin-bottom":"0px"}},[t("div",["distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.exportPopularizeData}},[e._v($t("mj3cs18"," 导出业绩统计 ","lang"))]):e._e()],1),t("div",["distributor"==e.loginType||-1!==e.$route.path.indexOf("sellers")?t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.exportPopularizeStatic}},[e._v($t("ul4w66a"," 导出业绩订单统计 ","lang"))]):e._e(),t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.exportPopularizeOrder}},[e._v($t("umzee8a"," 导出业绩订单详细 ","lang"))]),e._v($t("lp9v0rb","* 下载订单详细日期 ","lang"))],1),t("SpFilterFormItem",{attrs:{prop:"tag_id",label:$t("vhd01e5","下载日期:","lang")}},[t("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange",align:"right",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":$t("po31","至","lang"),"start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang"),"prefix-icon":"null","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.created,callback:function(t){e.created=t},expression:"created"}})],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.list,height:e.wheight-170,"element-loading-text":$t("go5gpa5","数据加载中","lang"),"default-sort":{prop:"bind_date",order:"descending"}}},[t("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"btn-gap",attrs:{icon:"edit",type:"text"},on:{click:function(t){return e.detail(a.row)}}},[e._v($t("8p5m9o6"," 分佣详情 ","lang"))])]}}],null,!1,298087940)}),t("el-table-column",{attrs:{prop:"username",label:$t("fqmy2","姓名","lang")}}),t("el-table-column",{attrs:{prop:"mobile",label:$t("ewbd43","手机号","lang"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.mobile?t("i",{staticClass:"el-icon-mobile"}):e._e(),e._v(" "+e._s(a.row.mobile)+" "),a.row.mobile&&0==e.datapass_block?t("el-tooltip",{attrs:{effect:"dark",content:$t("fljd2","复制","lang"),placement:"top-start"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.row.mobile,expression:"scope.row.mobile",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"el-icon-document-copy"})]):e._e()]}}],null,!1,2046652697)}),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("cs6xb3","可提现","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cashWithdrawalRebate/100)+$t("dtml2","元 ","lang"))]}}],null,!1,184230803)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("e8zf63","已提现","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.payedRebate/100)+$t("dtml2","元 ","lang"))]}}],null,!1,1880849036)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("fd5amc4","申请提现","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.freezeCashWithdrawalRebate/100)+$t("dtml2","元 ","lang"))]}}],null,!1,3744471032)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("fq8cu3","未结算","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.noCloseRebate/100)+$t("dtml2","元 ","lang"))]}}],null,!1,3296130546)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("6au2ez5","未结算积分","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.noClosePoint||0)+$t("i8wll3","积分 ","lang"))]}}],null,!1,3579232479)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("amatqo4","佣金总额","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rebateTotal/100)+$t("dtml2","元 ","lang"))]}}],null,!1,4201054759)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("fq59894","积分总额","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pointTotal||0)+$t("i8wll3","积分 ","lang"))]}}],null,!1,1913694122)}):e._e(),"distributor"!==e.loginType&&-1===e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("b433nh4","商品总额","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.itemTotalPrice/100)+$t("dtml2","元 ","lang"))]}}],null,!1,1528253114)}):e._e(),"distributor"==e.loginType||-1!==e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("gwn72","店铺","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.store_name)+" ")]}}],null,!1,890576282)}):e._e(),"distributor"==e.loginType||-1!==e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("fq8cu3","未结算","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rebate_sum_noclose/100)+$t("dtml2","元 ","lang"))]}}],null,!1,4179156441)}):e._e(),"distributor"==e.loginType||-1!==e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("amatqo4","佣金总额","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rebate_sum/100)+$t("dtml2","元 ","lang"))]}}],null,!1,1453822289)}):e._e(),"distributor"==e.loginType||-1!==e.$route.path.indexOf("sellers")?t("el-table-column",{attrs:{label:$t("b433nh4","商品总额","lang")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price_sum/100)+$t("dtml2","元 ","lang"))]}}],null,!1,3286348473)}):e._e()],1),t("div",{staticClass:"mt-4 text-right"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.page.pageIndex,"page-sizes":[10,20,50],total:e.total_count,"page-size":e.page.pageSize},on:{"update:currentPage":function(t){return e.$set(e.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.page,"pageIndex",t)},"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})],1)],1):e._e(),t("router-view")],1)},[],!1,null,"c66acfe6",null).exports}}]);