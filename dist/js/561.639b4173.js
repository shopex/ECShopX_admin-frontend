"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[561],{50561:function(t,a,e){e.r(a),e.d(a,{default:function(){return n}});var l=e(2038),s={data(){return{statusList:[{name:$t("kxfehl5","提现待处理","lang"),value:"apply"},{name:$t("d2n3mz4","提现拒绝","lang"),value:"reject"},{name:$t("d2mq9b4","提现成功","lang"),value:"success"},{name:$t("d2m9ue4","提现异常","lang"),value:"process"}],activeName:"first",total_count:0,textarea:"",dialog:!1,canceldialog:!1,finishdialog:!1,applyText:"",pageLimit:10,detail:{},payDialog:!1,payList:[],cashWithdrawalRebate:0,loading:!1,params:{page:1,pageSize:20,mobile:"",status:""},list:[{}]}},mounted(){this.getList()},methods:{handleCurrentChange(t){this.params.page=t,this.getList()},dialogfinish(t){this.finishdialog=!0,this.detail=t},dialogCancel(t){this.canceldialog=!0,this.detail=t},numberSearch(t){this.params.page=1,this.getList()},statusSelectHandle(){this.params.page=1,this.getList()},actionProcessCashWithdrawal(t){if("reject"!=t||this.textarea){if("reject"==t)var a={process_type:t,remarks:this.textarea};else a={process_type:t};if("success"==t)a={process_type:t,remarks:this.textarea};(0,l.processCashWithdrawal)(this.detail.id,a).then(a=>{this.canceldialog=!1,this.dialog=!1,this.getList(),"reject"==t?this.$message({type:"success",message:$t("5f262w8","拒绝佣金提现成功","lang")}):this.$message({type:"success",message:$t("cumx3u4","打款成功","lang")})})}else this.$message({type:"error",message:$t("b76tf99","请输入拒绝提现原因","lang")})},dialogOpen(t){this.dialog=!0,this.detail=t,this.applyText=$t("hbb7vi9","分销商申请提现佣金","lang")+t.money/100+$t("g1v1","元","lang"),(0,l.getDistributorCount)(t.distributor_id).then(t=>{this.cashWithdrawalRebate=t.data.data.cashWithdrawalRebate})},dialogPayInfo(t){this.payDialog=!0,this.detail=t,(0,l.getCashWithdrawalPayInfo)(t.id).then(t=>{this.payList=t.data.data.list})},getList(){this.loading=!0,(0,l.getCashWithdrawals)(this.params).then(t=>{t.data.data.list&&(this.list=t.data.data.list,this.total_count=t.data.data.total_count),this.loading=!1})}}},n=(0,e(81656).A)(s,function(){var t=this,a=t._self._c;return a("SpPage",[a("el-row",{staticClass:"content-bottom-padded",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:$t("d2pmuj4","提现状态","lang")},on:{change:t.statusSelectHandle},model:{value:t.params.status,callback:function(a){t.$set(t.params,"status",a)},expression:"params.status"}},t._l(t.statusList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:$t("ewbd43","手机号","lang")},model:{value:t.params.mobile,callback:function(a){t.$set(t.params,"mobile",a)},expression:"params.mobile"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.numberSearch},slot:"append"})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,height:"550",border:""}},[a("el-table-column",{attrs:{prop:"created",label:$t("fd5ujm4","申请时间","lang"),"min-width":"84"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("datetime")(e.row.created,"YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"distributor_name",label:$t("ekkkq3","店铺名","lang")}}),a("el-table-column",{attrs:{prop:"distributor_mobile",label:$t("cjspg24","店铺手机","lang")}}),a("el-table-column",{attrs:{prop:"user_id",label:$t("m075e27","业务员会员ID","lang")}}),a("el-table-column",{attrs:{prop:"alipay_name",label:$t("kqru4k5","提现账号名","lang")}}),a("el-table-column",{attrs:{prop:"alipay_account",label:$t("d2u2cx4","提现账号","lang")}}),a("el-table-column",{attrs:{label:$t("8gd9n46","申请提现金额","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.money/100)+" ")]),t._v($t("ehct3"," 元 ","lang"))]}}])}),a("el-table-column",{attrs:{prop:"status",label:$t("d2pmuj4","提现状态","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["apply"==e.row.status?a("el-tag",{attrs:{type:"primary"}},[t._v($t("cwwdax5"," 待处理 ","lang"))]):t._e(),"process"==e.row.status?a("el-tag",{attrs:{type:"danger"}},[t._v($t("hstyvw6"," 付款异常 ","lang"))]):t._e(),"success"==e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v($t("5sjjhg6"," 提现完成 ","lang"))]):t._e(),"reject"==e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v($t("cr8l5v5"," 已拒绝 ","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return["apply"!==e.row.status?a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{size:"mini",type:"info"}},[a("el-popover",{ref:"popover",attrs:{placement:"top",width:"400",trigger:"click"}},[a("el-input",{attrs:{type:"textarea",rows:6,disabled:!0,value:e.row.remarks}})],1),t._v($t("6ipb8w6"," 操作备注 ","lang"))],1):t._e(),"apply"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.dialogfinish(e.row)}}},[t._v($t("codn736"," 打款完成 ","lang"))]):t._e(),"apply"==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.dialogCancel(e.row)}}},[t._v($t("fn3854"," 拒绝 ","lang"))]):t._e()]}}])})],1),t.total_count>t.params.pageSize?a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.params.page,total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange}})],1):t._e(),a("el-dialog",{attrs:{title:$t("cuu2i84","打款记录","lang"),visible:t.payDialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.payDialog=a}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.payList,border:""}},[a("el-table-column",{attrs:{prop:"update_time",label:$t("hwbe2","日期","lang"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("datetime")(e.row.update_time,"YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"amount",label:$t("d2jwdq4","提现佣金","lang"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.amount/100)+" ")]),t._v($t("ehct3"," 元 ","lang"))]}}])}),a("el-table-column",{attrs:{prop:"status",label:$t("ae9i414","付款状态","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return["NOT_PAY"==e.row.status?a("span",[t._v($t("du2tyo5"," 未付款 ","lang"))]):t._e(),"SUCCESS"==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v($t("hsfu1h6"," 付款成功 ","lang"))]):t._e(),"FAIL"==e.row.status?a("span",[t._v($t("htgnne6"," 付款失败 ","lang"))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"error_desc",label:$t("rm206d6","付款失败原因","lang")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.error_desc?a("span",[t._v(t._s(e.row.error_desc))]):a("span",[t._v(" - ")])]}}])})],1),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.payDialog=!1}}},[t._v($t("d7exy4"," 关闭 ","lang"))])],1)],1),a("el-dialog",{attrs:{title:$t("czryaz4","拒绝提现","lang"),visible:t.canceldialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.canceldialog=a}}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:$t("kjdze37","请输入拒绝原因","lang")},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}}),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.canceldialog=!1}}},[t._v($t("211af36"," 取消操作 ","lang"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.actionProcessCashWithdrawal("reject")}}},[t._v($t("6ud6xr6"," 确认拒绝 ","lang"))])],1)],1),a("el-dialog",{attrs:{title:$t("i9rbdy6","输入转账信息","lang"),visible:t.finishdialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.finishdialog=a}}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:$t("suwwmde","请输入转账信息（账号 金额）","lang")},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}}),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.finishdialog=!1}}},[t._v($t("211af36"," 取消操作 ","lang"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.actionProcessCashWithdrawal("success")}}},[t._v($t("6t5xvq6"," 确认完成 ","lang"))])],1)],1),a("el-dialog",{attrs:{title:$t("d2quhi4","提现确认","lang"),visible:t.dialog,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(a){t.dialog=a}}},[t.detail.money>t.cashWithdrawalRebate?a("el-alert",{attrs:{title:$t("m04527i","账户异常，申请提现金额大于可提现金额","lang"),description:$t("a1opmyk","不可进行打款操作，请联系服务商查看详情。","lang"),closable:!1,type:"error","show-icon":""}}):t._e(),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.detail.distributor_name)+" "+t._s(t.detail.distributor_mobile))])]),a("div",{staticClass:"text item"},[a("span",[t._v($t("4vi0d96","可提现佣金 ","lang"))]),a("span",{staticStyle:{"font-size":"26px",color:"red"}},[t._v(t._s(t.cashWithdrawalRebate/100))]),t._v($t("ehct3"," 元 ","lang"))]),a("div",{staticClass:"text item"},[t._v($t("5qsbyc6"," 申请提现 ","lang")),a("span",{staticStyle:{"font-size":"26px",color:"red"}},[t._v(t._s(t.detail.money/100))]),t._v($t("ehct3"," 元 ","lang"))])]),a("div",{staticClass:"dialog-footer content-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(a){t.dialog=!1}}},[t._v($t("211af36"," 取消操作 ","lang"))]),t.detail.money<=t.cashWithdrawalRebate?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.actionProcessCashWithdrawal("argee")}}},[t._v($t("3gw3gn8"," 打款到分销商 ","lang"))]):t._e()],1)],1)],1)},[],!1,null,null,null).exports}}]);