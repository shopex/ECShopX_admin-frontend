"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9491],{89491:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var a=s(87378),i=(s(74456),s(44114),s(18111),s(7588),{props:{list:{type:Array,default:()=>[]},hasLabel:{type:Boolean,default:!1}},components:{imgPicker:a.default},data(){return{isGetPics:!1,picsDialog:!1,picsCurrent:-1,picsOldLen:0}},methods:{handlePicsChange:function(){this.picsDialog=!0,this.isGetPics=!0},pickPics(e){if(this.picsOldLen+e.length>=2)return this.$message.error($t("f0dyqv9","最多上传1张图片!","lang")),!1;0!=e.length&&e.forEach(e=>{e&&""!==e.url&&(this.picsDialog=!1,this.list.push(e.url),this.changeImg(this.list),this.picsOldLen=this.list.length)})},closePicsDialog(){this.picsDialog=!1},picsEnter(e){this.picsCurrent=e},picsLeave(){this.picsCurrent=-1},removePicsImg:function(e){this.list.splice(e,1),this.changeImg(this.list),this.picsOldLen=this.list.length},changeImg(e){this.$emit("changeImg",e)}}}),l=s(81656),c=(0,l.A)(i,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"pics-box"},[t("ul",{staticClass:"goodspic-wrap"},e._l(e.list,function(s,a){return t("li",{key:a,staticClass:"goodspic",on:{mouseenter:function(t){return e.picsEnter(a)},mouseleave:e.picsLeave}},[t("img",{attrs:{src:e.wximageurl+s}}),t("div",{staticClass:"goodspic-mask",class:e.picsCurrent==a?"on":"",on:{click:function(t){return e.removePicsImg(a)}}},[t("i",{staticClass:"iconfont icon-trash-alt1 icon1"})])])}),0),e.list<1?t("div",{staticClass:"upload-box",on:{click:e.handlePicsChange}},[t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t("span",{staticClass:"placeholder"},[e._v($t("at77oq5","请上传图片","lang"))])]):e._e(),e.hasLabel?t("span",{staticClass:"label-note"},[e._v($t("81vcy2m","客服企业微信二维码，用户长按可加企微好友沟通","lang"))]):e._e()]),t("imgPicker",{attrs:{"dialog-visible":e.picsDialog,"sc-status":e.isGetPics,"is-most":!0},on:{chooseImg:e.pickPics,closeImgDialog:e.closePicsDialog}})],1)},[],!1,null,"0b331ed3",null).exports;const n={0:$t("eftvg3","待审核","lang"),1:$t("c00pno4","审核通过","lang"),2:$t("bzrcwb4","审核失败","lang")};var r={components:{imgPicker:a.default,uploadImg:c},data(){return{form:{audit_remark:"",supplier_name:"",contact:"",mobile:"",business_license:[],wechat_qrcode:[],service_tel:"",bank_name:"",bank_account:""},isGetPics:!1,picsDialog:!1,picsCurrent:-1,picsOldLen:0,is_check:"-1",certify_status:""}},mounted(){this.getList()},methods:{async getList(){const e=await this.$api.supplier.getSupplierInfo();if(e.supplier_info&&e.supplier_info.id){const{supplier_name:t="",contact:s="",mobile:a="",business_license:i="",wechat_qrcode:l="",service_tel:c="",bank_account:r="",bank_name:o="",is_check:p,audit_remark:u=""}=e.supplier_info;this.$nextTick(()=>{this.form={...this.form,supplier_name:t,contact:s,mobile:a,business_license:[i],wechat_qrcode:[l],service_tel:c,bank_name:o,bank_account:r,audit_remark:u},this.is_check=p,p&&(this.certify_status=n[p]||"")})}},async createSupplier(){const{supplier_name:e,contact:t,mobile:s,business_license:a,wechat_qrcode:i,service_tel:l,bank_name:c,bank_account:n}=this.form,r={supplier_name:e,contact:t,mobile:s,business_license:a[0]||"",wechat_qrcode:i[0]||"",service_tel:l,bank_name:c,bank_account:n},o=await this.$api.supplier.createSupplier(r);o&&o.id&&(this.$message({message:$t("cx7dr74","提交成功","lang"),type:"success"}),this.getList())},changeBusinessImg(e){this.form.business_license=e},changeQRImg(e){this.form.wechat_qrcode=e}}},o=(0,l.A)(r,function(){var e=this,t=e._self._c;return t("SpPage",[["1"==e.is_check?t("el-alert",{attrs:{title:e.certify_status,type:"success",closable:!1,center:"","show-icon":""}}):e._e(),"0"==e.is_check?t("el-alert",{attrs:{title:$t("lmbw6g6","审核状态: ","lang")+e.certify_status,type:"warning",closable:!1,center:"","show-icon":""}}):e._e(),"2"==e.is_check?t("el-alert",{attrs:{title:e.certify_status+" : "+e.form.audit_remark,type:"error",closable:!1,center:"","show-icon":""}}):e._e()],t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[t("el-col",{staticClass:"group-label",attrs:{span:24}},[t("span",{staticClass:"label-title"},[e._v($t("n3c1mp7","供应商基础信息","lang"))])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("vm0hbk5","供应商名称","lang"),required:""}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.supplier_name,callback:function(t){e.$set(e.form,"supplier_name",t)},expression:"form.supplier_name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("kn13rh5","联系人姓名","lang")}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("ewbd43","手机号","lang"),required:""}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:$t("gzxu0l4","营业执照","lang"),required:""}},[t("upload-img",{attrs:{list:e.form.business_license},on:{changeImg:e.changeBusinessImg}})],1)],1),t("el-col",{staticClass:"group-label",attrs:{span:24}},[t("span",{staticClass:"label-title"},[e._v($t("bzvb1o4","客服配置","lang"))]),t("span",{staticClass:"label-note"},[t("i",{staticClass:"el-icon-warning icon-wr"}),e._v($t("xhgzea8","配道订单客服信息","lang"))])]),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:$t("421tub7","企业微信二维码","lang"),required:""}},[t("upload-img",{attrs:{list:e.form.wechat_qrcode},on:{changeImg:e.changeQRImg}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("bzqlgz4","客服电话","lang"),required:""}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.service_tel,callback:function(t){e.$set(e.form,"service_tel",t)},expression:"form.service_tel"}})],1)],1),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"label-note"},[e._v($t("msovhde","客服电话，点击可拨打电话咨询","lang"))])]),t("el-col",{staticClass:"group-label",attrs:{span:24}},[t("span",{staticClass:"label-title"},[e._v($t("4k9gbla","线下对公支付收款账号","lang"))]),t("span",{staticClass:"label-note"},[t("i",{staticClass:"el-icon-warning icon-wr"}),e._v($t("ikwtjpv","配置线下对公支付收欢很行账号信息，用户平台转账使用确保填写正确","lang"))])]),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:$t("d7zqou4","收款银行","lang"),required:""}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.bank_name,callback:function(t){e.$set(e.form,"bank_name",t)},expression:"form.bank_name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:$t("jcqtsc4","银行卡号","lang"),required:""}},[t("el-input",{attrs:{id:"keyword"},model:{value:e.form.bank_account,callback:function(t){e.$set(e.form,"bank_account",t)},expression:"form.bank_account"}})],1)],1)],1),"2"==e.is_check||"-1"==e.is_check?t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.createSupplier}},[e._v($t("agptt76"," 提交审核 ","lang"))])],1):e._e()],1)],2)},[],!1,null,"2f61936a",null).exports}}]);