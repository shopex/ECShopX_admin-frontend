"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[5453],{75453:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});a(18111),a(61701);var s=a(95353),r=a(95093),l=a.n(r),n=a(27671),i=a(77825),o={mixins:[i.Ay,i.v8],data(){const t={audit_status:void 0,merchant_name:void 0,regions_value:[],settled_type:void 0,time_start:void 0};return{initialParams:t,params:{...t},regions:n,loading:!0,approveStatusList:[{name:$t("efsql3","待审批","lang"),value:"1"},{name:$t("past2","通过","lang"),value:"2"},{name:$t("qqx72","驳回","lang"),value:"3"}]}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.fetchList()},methods:{onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},regionChangeSearch(t){var e=this.getCascaderObj(t,this.regions);let a={};return 1==e.length?a.province=e[0].label:2==e.length?(a.province=e[0].label,a.city=e[1].label):3==e.length&&(a.province=e[0].label,a.city=e[1].label,a.area=e[2].label),a},getCascaderObj(t,e){return t.map(function(t,a,s){for(var r of e)if(r.value===t)return e=r.children,r;return null})},getParams(){let t={};return this.params.regions_value.length>0&&(t=this.regionChangeSearch(this.params.regions_value)),{...this.params,regions_value:[],...t}},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,page_size:e,...this.getParams()};const{list:s,count:r}=await this.$api.mall_marketing.getApplicationListForMerchantEntry(a);this.tableList=s,this.page.total=r,this.loading=!1},createTimeFilter(t){return l()(1e3*t).format("YYYY-MM-DD HH:mm:ss")}},beforeRouteUpdate(t,e,a){a(),-1===t.path.indexOf("verify")&&this.fetchList()}},p=(0,a(81656).A)(o,function(){var t=this,e=t._self._c;return e("SpPage",{staticClass:"merchantVerify"},[-1===t.$route.path.indexOf("verify")?e("div",[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"audit_status",label:$t("g0fg5z5","审批状态:","lang")}},[e("el-select",{staticClass:"input-m",attrs:{placeholder:$t("vrmxtm7","请选择审批状态","lang")},model:{value:t.params.audit_status,callback:function(e){t.$set(t.params,"audit_status",e)},expression:"params.audit_status"}},t._l(t.approveStatusList,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.value}})}),1)],1),e("SpFilterFormItem",{attrs:{prop:"merchant_name",label:$t("8zp7p65","商户名称:","lang")}},[e("el-input",{attrs:{placeholder:$t("l6wdl3","请输入","lang"),clearable:""},model:{value:t.params.merchant_name,callback:function(e){t.$set(t.params,"merchant_name",e)},expression:"params.merchant_name"}})],1),e("SpFilterFormItem",{attrs:{prop:"regions_value",label:$t("u0inhq5","所属地区:","lang")}},[e("el-cascader",{attrs:{placeholder:$t("y7vtrh6","根据地区筛选","lang"),options:t.regions,filterable:"",clearable:"",props:{checkStrictly:!0}},model:{value:t.params.regions_value,callback:function(e){t.$set(t.params,"regions_value",e)},expression:"params.regions_value"}})],1),e("SpFilterFormItem",{attrs:{prop:"settled_type",label:$t("gwg9t85","入驻类型:","lang")}},[e("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:t.params.settled_type,callback:function(e){t.$set(t.params,"settled_type",e)},expression:"params.settled_type"}},[e("el-option",{attrs:{label:$t("dv7d2","企业","lang"),value:"enterprise"}}),e("el-option",{attrs:{label:$t("bu6su3","个体户","lang"),value:"soletrader"}})],1)],1),e("SpFilterFormItem",{attrs:{prop:"time_start",label:$t("kvze9w5","申请日期:","lang")}},[e("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":$t("cd0ag54","开始日期","lang"),"end-placeholder":$t("gfhy2u4","结束日期","lang")},model:{value:t.params.time_start,callback:function(e){t.$set(t.params,"time_start",e)},expression:"params.time_start"}})],1)],1),t.tableList.length>0?e("el-card",{attrs:{shadow:"never"}},[t._l(t.tableList,function(s){return e("div",{key:s.id,staticClass:"cus-list"},[e("el-row",{staticClass:"cus-row"},[e("el-col",{attrs:{span:13}},[e("router-link",{attrs:{to:{path:t.matchRoutePath("verify"),query:{type:"verify",merchantId:s.id}}}},[e("span",{staticClass:"cus-row-name"},[t._v(t._s(s.merchant_name))])]),e("div",{staticClass:"cus-row-time"},[e("span",[t._v($t("kvpojs5","申请时间：","lang")+t._s(s.created?t.createTimeFilter(s.created):"-"))]),e("span",[t._v($t("u0h95a5","所属地区：","lang")+t._s(s.province+"-"+s.city+"-"+s.area||"-"))])])],1),e("el-col",{attrs:{span:5}},["2"===s.audit_status?e("img",{staticStyle:{width:"85px",height:"85px"},attrs:{src:a(19348),alt:""}}):t._e(),"3"===s.audit_status?e("img",{staticStyle:{width:"92px",height:"92px"},attrs:{src:a(43878),alt:""}}):t._e()]),e("el-col",{staticClass:"cus-row-btn",attrs:{span:3,offset:"1"!==s.audit_status?0:5}},["1"===s.audit_status?e("router-link",{attrs:{to:{path:t.matchRoutePath("verify"),query:{type:"verify",merchantId:s.id}}}},[e("el-button",{attrs:{type:"primary"}},[t._v($t("egc944"," 审批 ","lang"))])],1):e("el-button",{attrs:{type:"info",plain:"",disabled:""}},[t._v($t("cq1u6u5"," 已审批 ","lang"))])],1)],1)],1)}),e("div",{staticClass:"mt-4 text-right"},[e("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.pageIndex,"page-sizes":[10,20,50],total:t.page.total,"page-size":t.page.pageSize},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1)],2):t._e()],1):t._e(),e("router-view")],1)},[],!1,null,"0b3eedb4",null).exports}}]);