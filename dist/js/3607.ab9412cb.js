"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[3607],{23607:function(t,s,e){e.r(s),e.d(s,{default:function(){return c}});e(44114);var a=e(50709),n=e(85135),i=e(78069),l={components:{tips:a.default},data(){return{form:{accesskey_id:"",accesskey_secret:""},cardData:[{title:$t("s5xq026","自动发送短信","lang"),info:$t("a0ojb8d","自动发送短信场景 (个)：","lang"),btn:$t("g2xae14","管理短信","lang"),label:"scene_num",tabName:"send_sms"},{title:$t("fgu09v4","短信签名","lang"),info:$t("5a4ptzb","已有短信签名 (个)：","lang"),btn:$t("g2xx1w4","管理签名","lang"),label:"sign_num",tabName:"sms_signatures"},{title:$t("fgr5si4","短信模板","lang"),info:$t("sats46b","已有短信模板 (个)：","lang"),btn:$t("g2v2kj4","管理模板","lang"),label:"template_num",tabName:"sms_template"}],info:{scene_num:"",sign_num:"",status:"",template_num:""},visible:!1,rules:{accesskey_id:[(0,i.XU)("Accesskey ID","change")],accesskey_secret:[(0,i.XU)("Accesskey secret"),"change"]}}},mounted(){this.init()},methods:{async init(){const t=await(0,n.getSmsConfig)(),{accesskey_id:s,accesskey_secret:e,template_num:a,status:i,sign_num:l,scene_num:c}=t.data.data;this.info={scene_num:c,sign_num:l,status:i,template_num:a},this.form={accesskey_id:s,accesskey_secret:e}},fnEdit(){this.visible=!0},fnPass(t){this.$refs[t].validate(async t=>{if(t){await(0,n.setSmsConfig)(this.form);this.$message.success($t("h4sv2","成功","lang")),this.handleClose(),this.init()}})},async fnSwitch(t){let s=$t("5koehlk","关闭阿里云短信后，商派短信将会自动开启。","lang");t?(s=$t("217qalk","开启阿里云短信后，商派短信将会自动关闭。","lang"),this.$confirm(s,"",{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await(0,n.setAlisms)({status:t});this.$message.success($t("h4sv2","成功","lang")),this.init()}).catch(()=>{this.info.status=!t})):this.$confirm(s,"",{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(async()=>{await(0,n.setAlisms)({status:t});this.$message.success($t("h4sv2","成功","lang")),this.init()}).catch(()=>{this.info.status=!t})},handleClose(){this.visible=!1,this.init()},fnGo(t){this.$router.push({path:`/setting/system-config/sms-service/ali_sms/${t}`})}}},c=(0,e(81656).A)(l,function(){var t=this,s=t._self._c;return s("SpPage",[s("div",{staticClass:"alisms_baseConfig"},[s("tips",[s("p",[t._v($t("f98u5p1w"," 短信服务由阿里云提供，是广大企业客户快速触达手机用户所优选使用的通信能力，国内验证短信秒级触达，到达率最高可达99%。开始使用前您需要","lang")),s("a",{attrs:{href:"https://www.aliyun.com/product/sms?spm=a2c4g.11186623.0.0.659712cdoHMKdV",target:"_blank"}},[t._v($t("u3h0bqa","前往阿里云购买服务。","lang"))])])]),s("el-form",{attrs:{"label-width":"200px",model:t.form}},[s("section",{staticClass:"card"},[s("nav",[s("el-form-item",{attrs:{label:$t("cvts13","启用:","lang"),"label-width":"60px"}},[s("el-switch",{staticStyle:{"margin-left":"40px","margin-right":"20px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.fnSwitch},model:{value:t.info.status,callback:function(s){t.$set(t.info,"status",s)},expression:"info.status"}}),t.info.status?s("span",[t._v($t("e6c0b3","已启用","lang"))]):s("span",[t._v($t("fixz73","未启用","lang"))])],1)],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[t._v($t("blsc7b4","基础配置","lang"))]),s("div",{staticClass:"info"},[s("div",{staticClass:"left"},[s("el-form-item",{attrs:{label:"AccessKey ID："}},[s("span",[t._v(t._s(t.form.accesskey_id))])]),s("el-form-item",{attrs:{label:"AccessKey Secret："}},[s("span",[t._v(t._s(t.form.accesskey_secret))])]),s("a",{attrs:{href:"https://help.aliyun.com/document_detail/53045.html",target:"_blank"}},[t._v($t("5jl8hl11","如何获取 AccessKey ID 和 AccessKey Secret。","lang"))])],1),s("div",{staticClass:"right"},[s("el-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:t.fnEdit}},[t._v($t("juz394"," 编辑 ","lang"))])],1)])])]),t._l(t.cardData,function(e){return s("section",{key:e.title,staticClass:"card"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"info"},[s("div",{staticClass:"left"},[s("el-form-item",{attrs:{label:e.info}},[s("span",[t._v(t._s(t.info[e.label]||0))])])],1),s("div",{staticClass:"right"},[s("el-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:function(s){return t.fnGo(e.tabName)}}},[t._v(" "+t._s(e.btn)+" ")])],1)])])])})],2),s("el-dialog",{attrs:{title:$t("mjxxnxb","阿里云短信服务基础配置","lang"),visible:t.visible,width:"30%","before-close":t.handleClose}},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"AccessKey ID",prop:"accesskey_id"}},[s("el-input",{attrs:{placeholder:$t("9r0sajm","阿里云RAM用户的 AccessKey ID","lang")},model:{value:t.form.accesskey_id,callback:function(s){t.$set(t.form,"accesskey_id",s)},expression:"form.accesskey_id"}})],1),s("el-form-item",{attrs:{label:"Accesskey Secret",prop:"accesskey_secret"}},[s("el-input",{attrs:{placeholder:$t("ppw5sqq","阿里云RAM用户的 Accesskey Secret","lang")},model:{value:t.form.accesskey_secret,callback:function(s){t.$set(t.form,"accesskey_secret",s)},expression:"form.accesskey_secret"}})],1),s("a",{attrs:{href:"https://help.aliyun.com/document_detail/53045.html",target:"_blank"}},[t._v($t("5jl8hl11","如何获取 AccessKey ID 和 AccessKey Secret。","lang"))])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.handleClose}},[t._v($t("caoqm3","取 消","lang"))]),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.fnPass("form")}}},[t._v($t("hnjoo3","确 定","lang"))])],1)],1)],1)])},[],!1,null,"5c7bfabc",null).exports}}]);