"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[8235],{78235:function(t,e,a){a.r(e),a.d(e,{default:function(){return s}});var o=a(95353),n=a(2038),l=a(77825),r={mixins:[l.Ay,l.v8],data(){return{isEdit:!1,loading:!1,params:{tag_name:""},form:{tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:"",front_show:"0"},memberTagDialog:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]}},computed:{...(0,o.L8)(["wheight"])},mounted(){this.fetchList()},methods:{addTemplate(){this.memberTagDialog=!0,this.form={tag_id:"",tag_name:"",tag_color:"#ff1939",font_color:"#ffffff",description:"",front_show:"0"}},onSearch(){this.page.pageIndex=1,this.$nextTick(()=>{this.fetchList()})},onReset(){this.params={...this.initialParams},this.onSearch()},editAction(t,e){this.form=e,this.memberTagDialog=!0},async fetchList(){this.loading=!0;const{pageIndex:t,pageSize:e}=this.page;let a={page:t,pageSize:e,...this.params};const{list:o,total_count:n}=await this.$api.marketing.getTagList(a);this.tableList=o,this.page.total=n,this.loading=!1},deleteAction(t,e){this.$confirm($t("xvw7g9f","此操作将删除数据, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{(0,n.deleteTag)(e.tag_id).then(t=>{this.$message({message:$t("azeh8z4","删除成功","lang"),type:"success",duration:5e3}),this.onSearch()}).catch(()=>{this.$message({type:"error",message:$t("azdahk4","删除失败","lang")})})}).catch(()=>{this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},getTaskTime(t){let e=new Date(t),a=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;let n=e.getDate();return n=n<10?"0"+n:n,a+"-"+o+"-"+n},getTimeStr(t){return this.getTaskTime(new Date(1e3*parseInt(t)))},handleCancelLabelsDialog(){this.memberTagDialog=!1},saveTagData(){this.form.tag_id?(0,n.updateTag)(this.form.tag_id,this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.memberTagDialog=!1,this.onSearch())}):(0,n.saveTag)(this.form).then(t=>{t.data.data&&(this.$message({type:"success",message:$t("aghf564","保存成功","lang")}),this.memberTagDialog=!1,this.onSearch())})}}},s=(0,a(81656).A)(r,function(){var t=this,e=t._self._c;return e("SpPage",{staticClass:"page-body"},[e("SpFilterForm",{attrs:{model:t.params},on:{onSearch:t.onSearch,onReset:t.onReset}},[e("SpFilterFormItem",{attrs:{prop:"tag_name",label:$t("dmu0kk4","标签名:","lang")}},[e("el-input",{attrs:{placeholder:$t("fu00m3","标签名","lang")},model:{value:t.params.tag_name,callback:function(e){t.$set(t.params,"tag_name",e)},expression:"params.tag_name"}})],1)],1),e("div",{staticClass:"action-container"},[e("el-button",{attrs:{type:"primary",icon:"iconfont icon-xinzengcaozuo-01"},on:{click:t.addTemplate}},[t._v($t("tuikx06"," 添加标签 ","lang"))])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.tableList,height:t.wheight-130}},[e("el-table-column",{attrs:{prop:"tag_id",label:"ID",width:"100"}}),e("el-table-column",{attrs:{prop:"tag_name",label:$t("dmuom24","标签名称","lang"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{style:{color:a.row.font_color,backgroundColor:a.row.tag_color},attrs:{size:"mini"}},[t._v(" "+t._s(a.row.tag_name)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"description",label:$t("dmxhg84","标签描述","lang"),width:"250"}}),e("el-table-column",{attrs:{label:$t("hkxb2","操作","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"operating-icons"},[e("i",{staticClass:"iconfont icon-edit1",on:{click:function(e){return t.editAction(a.$index,a.row)}}}),e("i",{staticClass:"mark iconfont icon-trash-alt1",on:{click:function(e){return t.deleteAction(a.$index,a.row)}}})])]}}])})],1),t.params.total_count>t.params.page_size?e("div",{staticClass:"content-center content-top-padded"},[e("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.page.pageIndex,total:t.page.total,"page-size":t.page.page_size},on:{"update:currentPage":function(e){return t.$set(t.page,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.page,"pageIndex",e)},"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})],1):t._e(),e("el-dialog",{attrs:{title:$t("gpn72q7","添加、编辑标签","lang"),width:"40%",visible:t.memberTagDialog,"before-close":t.handleCancelLabelsDialog},on:{"update:visible":function(e){t.memberTagDialog=e}}},[[e("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"100px"}},[e("el-form-item",{attrs:{label:$t("29vk516","预览最终结果","lang")}},[e("el-tag",{style:"color:"+t.form.font_color,attrs:{color:t.form.tag_color,size:"mini"}},[t._v(" "+t._s(t.form.tag_name)+" ")])],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dmuom24","标签名称","lang"),prop:"tag_name",rules:[{required:!0,message:$t("jw8c8t7","请输入标签名称","lang"),trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:$t("jw8c8t7","请输入标签名称","lang")},model:{value:t.form.tag_name,callback:function(e){t.$set(t.form,"tag_name",e)},expression:"form.tag_name"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn43014","标签说明","lang")}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:$t("jvyxuu7","请输入标签说明","lang")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("dn6e3x4","标签颜色","lang")}},[e("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.tag_color,callback:function(e){t.$set(t.form,"tag_color",e)},expression:"form.tag_color"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("bv3kfm4","字体颜色","lang")}},[e("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},model:{value:t.form.font_color,callback:function(e){t.$set(t.form,"font_color",e)},expression:"form.font_color"}})],1),e("el-form-item",{staticClass:"content-left",attrs:{label:$t("aqhq9r4","前台显示","lang")}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.front_show,callback:function(e){t.$set(t.form,"front_show",e)},expression:"form.front_show"}},[e("el-radio",{attrs:{label:"1",border:""}},[t._v($t("g469w4"," 显示 ","lang"))]),e("el-radio",{attrs:{label:"0",border:""}},[t._v($t("arjil35"," 不显示 ","lang"))])],1)],1),e("el-form-item",{staticClass:"content-center"},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveTagData}},[t._v($t("pam6x6"," 确定保存 ","lang"))])],1)],1)]],2)],1)},[],!1,null,"6f278f09",null).exports}}]);