"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[4317],{4317:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});a(18111),a(7588);var l=a(79836),i=a(73306),s=a(68180),o={props:["seletedBusiness"],methods:{deleteRow(t,e){this.$emit("deleteRowHandle",t)}}},r=a(81656),n=(0,r.A)(o,function(){var t=this,e=t._self._c;return e("el-table",{ref:"Table",staticStyle:{width:"100%"},attrs:{data:t.seletedBusiness,"tooltip-effect":"dark",border:""}},[e("el-table-column",{attrs:{prop:"user_name",label:$t("b5zu9g4","商户名称","lang"),width:"220"}}),e("el-table-column",{attrs:{prop:"location",label:$t("fb4g2","地址","lang")}}),e("el-table-column",{attrs:{label:$t("da4rhh4","暂冻金额","lang")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",min:"1"},model:{value:a.row.draw_limit,callback:function(e){t.$set(a.row,"draw_limit",t._n(e))},expression:"scope.row.draw_limit"}},[e("template",{slot:"append"},[t._v($t("g1v1","元","lang"))])],2)]}}])}),e("el-table-column",{attrs:{fixed:"right",label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"#409eff"},attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a.$index)}}},[t._v($t("j57pz4"," 移除 ","lang"))])]}}])})],1)},[],!1,null,null,null).exports,d={components:{loadingBtn:l.default,withdrawShop:s.default,selectorTable:n},data(){return{visible:!1,cash_type_options:[],isAllShop:"N",form:{auto_draw_cash:"Y",auto_type:"",auto_day:"",auto_time:"",min_cash:"",draw_limit:"",cash_type:"",draw_limit_list:[]},rules:{auto_draw_cash:[(0,i.XU)($t("gtn73p6","是否自动提现","lang"))],auto_type:[(0,i.XU)($t("u2fzgu6","自动提现类型","lang"),"change")],auto_day:[(0,i.XU)($t("u2c88o6","自动提现日期","lang"))],auto_time:[(0,i.XU)($t("u2chwc6","自动提现时间","lang"))],min_cash:[(0,i.XU)($t("d2v8i44","提现金额","lang"))],cash_type:[(0,i.XU)($t("b27one4","取现类型","lang"),"change")],draw_limit:(0,i.XU)($t("7kd7iu6","商户暂冻金额","lang")),isAllShop:[(0,i.XU)($t("vbqifw5","不适用商户","lang"))]}}},mounted(){this.getConfig()},methods:{async getConfig(){const{cash_type_options:t,auto_config:e,draw_limit_list:a,draw_limit:l}=await this.$api.adapay.withDrawSetting();this.cash_type_options=t,0!=e.length&&(delete e.draw_limit,delete e.draw_limit_list,delete e.next_time,this.form={...this.form,...e},this.form.draw_limit_list=a,this.form.draw_limit_list.length>0?this.isAllShop="N":this.isAllShop="Y",this.form.draw_limit=l)},seletedShopHandle(){this.visible=!this.visible},deleteRowHandle(t){this.form.draw_limit_list.splice(t,1)},saveSeletedBusinessHandle(t){this.form.draw_limit_list.forEach((e,a)=>{t.forEach((a,l)=>{e.id==a.id&&t.splice(l,1)})}),this.form.draw_limit_list=[...this.form.draw_limit_list,...t],this.seletedShopHandle()},confirm(t,e){this.$refs[t].validate(async t=>{if(!t)return this.$refs[e].closeLoading(),!1;try{"Y"==this.isAllShop&&(this.form.draw_limit_list=[]);const t={...this.form,draw_limit_list:JSON.stringify(this.form.draw_limit_list)},{status:a}=await this.$api.adapay.saveDrawSetting(t);a&&(this.$message.success($t("i5nn5r4","设置成功","lang")),this.$refs[e].closeLoading(),this.getConfig())}catch{this.$refs[e].closeLoading()}})},tabHandle(t){"month"==t?this.form.auto_time="":this.form.auto_day=""}}},m=(0,r.A)(d,function(){var t=this,e=t._self._c;return e("SpPage",{attrs:{title:$t("d2u2c04","提现设置","lang")}},[e("template",{slot:"page-footer"},[e("div",{staticClass:"text-center"},[e("el-button",{attrs:{type:"info",size:"medium"},on:{click:t.getConfig}},[t._v($t("ev022","取消","lang"))]),e("loading-btn",{ref:"loadingBtn",attrs:{size:"medium",type:"primary",text:$t("e32z2","保存","lang")},on:{clickHandle:function(e){return t.confirm("ruleForm","loadingBtn")}}})],1)]),e("div",{staticClass:"zyk_adapay_withdraw_setting"},[e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("div",{staticClass:"content"},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"140px",rules:t.rules}},[e("el-form-item",{attrs:{label:$t("d2r9004","提现类型","lang"),prop:"auto_draw_cash","label-width":"100px"}},[e("el-radio-group",{model:{value:t.form.auto_draw_cash,callback:function(e){t.$set(t.form,"auto_draw_cash",e)},expression:"form.auto_draw_cash"}},[e("el-radio",{attrs:{label:"Y"}},[t._v($t("gqhi724","自动提现","lang"))]),e("el-radio",{attrs:{label:"N"}},[t._v($t("cqwndp4","手动提现","lang"))])],1)],1),e("div",{staticClass:"rules"},["Y"==t.form.auto_draw_cash?[e("el-form-item",{staticClass:"noBottom",attrs:{label:$t("d2th9x4","提现规则","lang"),prop:"auto_type"}},[e("el-radio-group",{on:{change:t.tabHandle},model:{value:t.form.auto_type,callback:function(e){t.$set(t.form,"auto_type",e)},expression:"form.auto_type"}},[e("el-radio",{attrs:{label:"month"}},[t._v($t("co9vkz6","每月提取时间","lang"))]),e("el-radio",{attrs:{label:"day"}},[t._v($t("h4a0926","每日提取时间","lang"))])],1)],1),"month"==t.form.auto_type?e("el-form-item",{staticClass:"noBottom",attrs:{prop:"auto_day"}},[e("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",format:"dd","value-format":"dd",placeholder:$t("xtplre7","请选择每月日期","lang")},model:{value:t.form.auto_day,callback:function(e){t.$set(t.form,"auto_day",e)},expression:"form.auto_day"}}),e("el-time-picker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:$t("il014u4","选择时间","lang")},model:{value:t.form.auto_time,callback:function(e){t.$set(t.form,"auto_time",e)},expression:"form.auto_time"}})],1):t._e(),"day"==t.form.auto_type?e("el-form-item",{staticClass:"noBottom",attrs:{prop:"auto_time"}},[e("el-time-picker",{staticStyle:{width:"300px"},attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:$t("usv83z9","请选择每日提取时间","lang")},model:{value:t.form.auto_time,callback:function(e){t.$set(t.form,"auto_time",e)},expression:"form.auto_time"}})],1):t._e(),e("el-form-item",[e("div",{staticClass:"tips"},[t._v($t("50tjx110","提现操作建议在10:00:00-22:00:00进行，以免影响操作时效。","lang"))])]),e("el-form-item",{attrs:{label:$t("d2v8i44","提现金额","lang"),prop:"min_cash"}},[e("span",{staticClass:"tips"},[t._v($t("xo7xc79","当可提现余额大于 ","lang"))]),e("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",min:"0"},model:{value:t.form.min_cash,callback:function(e){t.$set(t.form,"min_cash",t._n(e))},expression:"form.min_cash"}},[e("template",{slot:"append"},[t._v($t("g1v1","元","lang"))])],2),e("span",{staticClass:"tips"},[t._v($t("dcmi74"," 可提现","lang"))])],1),e("el-form-item",{attrs:{label:$t("d2r9004","提现类型","lang"),prop:"cash_type"}},[e("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:$t("wvd1c77","请选择提现类型","lang")},model:{value:t.form.cash_type,callback:function(e){t.$set(t.form,"cash_type",e)},expression:"form.cash_type"}},t._l(t.cash_type_options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]:t._e(),e("el-form-item",{attrs:{label:$t("7kd7iu6","商户暂冻金额","lang"),prop:"draw_limit"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:$t("l6wdl3","请输入","lang"),type:"number",min:"0"},model:{value:t.form.draw_limit,callback:function(e){t.$set(t.form,"draw_limit",e)},expression:"form.draw_limit"}},[e("template",{slot:"append"},[t._v($t("g1v1","元","lang"))])],2)],1),e("el-form-item",{staticClass:"noBottom",attrs:{label:$t("vbqifw5","不适用商户","lang")}},[e("el-radio-group",{model:{value:t.isAllShop,callback:function(e){t.isAllShop=e},expression:"isAllShop"}},[e("el-radio",{attrs:{label:"Y"}},[t._v($t("k4g1","无","lang"))]),e("el-radio",{attrs:{label:"N"}},[t._v($t("cvhahw4","指定商户","lang"))])],1)],1),"N"==t.isAllShop?[e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.seletedShopHandle}},[t._v($t("mwvnfz6"," 选择商户 ","lang"))])],1),e("selector-table",{attrs:{"seleted-business":t.form.draw_limit_list},on:{deleteRowHandle:t.deleteRowHandle}})]:t._e()],2)],1)],1)]),t.visible?[e("withdraw-shop",{attrs:{visible:t.visible,"seleted-business":t.form.draw_limit_list},on:{closeHandle:t.seletedShopHandle,saveSeletedBusinessHandle:t.saveSeletedBusinessHandle}})]:t._e()],2)],2)},[],!1,null,"40a80b94",null).exports}}]);