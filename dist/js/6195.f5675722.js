"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[6195],{76195:function(t,a,e){e.r(a),e.d(a,{default:function(){return n}});var s=e(95353),r=e(41776),i={data(){return{create_time:"",activeName:"waiting",loading:!1,total_count:0,dataList:[],params:{page:1,pageSize:20,order_id:"",status:"waiting"}}},computed:{...(0,s.L8)(["wheight"])},mounted(){this.getDataList(this.params)},methods:{handleClick(t,a){this.activeName=t.name,this.params.status="all"==t.name?"":t.name,this.params.page=1,this.getDataList(this.params)},dataSearch(){this.params.start_time="",this.params.end_time="",this.create_time="",this.params.page=1,this.getDataList(this.params)},getDataList(t){this.loading=!0,(0,r.getRefundErrorLogsList)(t).then(t=>{this.dataList=t.data.data.list,this.total_count=t.data.data.total_count,this.loading=!1})},dateChange(t){this.params.status="",t&&t.length>0?(this.params.start_time=this.dateStrToTimeStamp(t[0]+" 00:00:00"),this.params.end_time=this.dateStrToTimeStamp(t[1]+" 23:59:59")):(this.params.start_time="",this.params.end_time=""),this.params.page=1},dateStrToTimeStamp(t){return Date.parse(new Date(t))/1e3},refundResubmit(t){(0,r.refundResubmit)(t.id).then(t=>{this.$message.success($t("plbheq5","提交成功!","lang")),this.getDataList(this.params)})},handleCurrentChange(t){this.params.page=t,this.getDataList(this.params)},handleSizeChange(t){this.params.page=1,this.params.pageSize=t,this.getDataList(this.params)}}},n=(0,e(81656).A)(i,function(){var t=this,a=t._self._c;return a("SpPage",[a("SpFilterForm",{attrs:{model:t.params},on:{onSearch:function(a){return t.getDataList(t.params)},onReset:function(a){return t.getDataList(t.params)}}},[a("SpFilterFormItem",{attrs:{prop:"order_id",label:$t("hymdzq4","订单号:","lang")}},[a("el-input",{attrs:{placeholder:$t("7djicl6","请输入订单号","lang")},model:{value:t.params.order_id,callback:function(a){t.$set(t.params,"order_id",a)},expression:"params.order_id"}})],1),a("SpFilterFormItem",{attrs:{prop:"create_time",label:$t("hymdzq4","订单号:","lang")}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","value-format":"yyyy/MM/dd",placeholder:$t("t9q3f56","添加时间筛选","lang")},on:{change:t.dateChange},model:{value:t.params.create_time,callback:function(a){t.$set(t.params,"create_time",a)},expression:"params.create_time"}})],1)],1),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:$t("fjrcc3","未处理","lang"),name:"waiting"}}),a("el-tab-pane",{attrs:{label:$t("e75dg3","已处理","lang"),name:"is_resubmit"}}),a("el-tab-pane",{attrs:{label:$t("en402","全部","lang"),name:"all"}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList,height:t.wheight-150}},[a("el-table-column",{attrs:{prop:"order_id",label:$t("kuwys3","订单号","lang"),width:"180"}}),a("el-table-column",{attrs:{prop:"status",label:$t("je1qwx4","错误状态","lang"),width:"120"}}),a("el-table-column",{attrs:{prop:"error_code",label:$t("mind73","错误码","lang"),width:"100"}}),a("el-table-column",{attrs:{prop:"error_desc",label:$t("jdzh4n4","错误描述","lang")}}),a("el-table-column",{attrs:{prop:"create_time",label:$t("ar84e54","创建时间","lang"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("datetime")(e.row.create_time,"YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"is_resubmit",label:$t("xpente7","是否已重新提交","lang"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_resubmit?a("span",[t._v($t("et7om4"," 已提交","lang"))]):a("span",[t._v($t("g5tni4"," 未提交","lang"))])]}}])}),a("el-table-column",{attrs:{label:$t("hkxb2","操作","lang"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[!1===e.row.is_resubmit?a("el-link",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.refundResubmit(e.row)}}},[t._v($t("u81zd56"," 重新提交 ","lang"))])],1):t._e()]}}])})],1),a("div",{staticClass:"mt-4 text-right"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.params.page,"page-sizes":[10,20,50],total:t.total_count,"page-size":t.params.pageSize},on:{"update:currentPage":function(a){return t.$set(t.params,"page",a)},"update:current-page":function(a){return t.$set(t.params,"page",a)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1)},[],!1,null,null,null).exports}}]);