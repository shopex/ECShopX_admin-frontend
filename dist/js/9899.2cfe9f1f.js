"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[9899],{29899:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-box"},[e("img",{attrs:{src:a(56155),alt:""}}),e("div",{staticClass:"search-input"},[t._v("|")]),e("span",{staticClass:"search-input"},[t._v($t("hpqe2","搜索","lang"))])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"all"},[e("span",[t._v($t("g2w1","全","lang"))]),e("span",[t._v($t("smg1","部","lang"))]),t._v(" "),e("img",{attrs:{src:a(50793),alt:""}})])}],s=(a(18111),a(7588),a(26456)),n={data(){return{oneList:[],oneIndex:0,twoIndex:0,threeIndex:0,goodsIndex:[],main_cat_id:[]}},mounted(){this.feath()},methods:{async feath(){const t=await this.$api.goods.getCategory(this.VERSION_PLATFORM()?{is_main_category:!0}:{});t.forEach(t=>{t?.children?.length>0&&(t?.children?.unshift({category_id:"",category_name:$t("en402","全部","lang")}),t?.children?.forEach(t=>{t?.children?.length>0&&t?.children?.unshift({category_id:"",category_name:$t("en402","全部","lang")})}))}),this.oneList=t,this.oneCli(0)},oneCli(t){this.oneIndex=t,this.twoIndex=0,this.threeIndex=0,this.main_cat_id=[this.oneList[this.oneIndex].category_id],this.getItemsListAll()},twoCli(t){this.twoIndex=t,this.threeIndex=0,this.oneList[this.oneIndex].children[this.twoIndex].category_id?this.main_cat_id=[this.oneList[this.oneIndex].category_id,this.oneList[this.oneIndex].children[this.twoIndex].category_id]:this.main_cat_id=[this.oneList[this.oneIndex].category_id],this.getItemsListAll()},threeCli(t){this.threeIndex=t,this.oneList[this.oneIndex].children[this.twoIndex].children[this.threeIndex].category_id?this.main_cat_id=[this.oneList[this.oneIndex].category_id,this.oneList[this.oneIndex].children[this.twoIndex].category_id,this.oneList[this.oneIndex].children[this.twoIndex].children[this.threeIndex].category_id]:this.main_cat_id=[this.oneList[this.oneIndex].category_id,this.oneList[this.oneIndex].children[this.twoIndex].category_id],this.getItemsListAll()},async getItemsListAll(){let t={page:1,pageSize:10,item_type:"normal",operate_source:(0,s.WZ)()?"supplier":"platform",item_source:"platform"};this.VERSION_PLATFORM()?t.main_cat_id=this.main_cat_id:(t.category=this.main_cat_id[this.main_cat_id.length-1],t.distributor_id=0);const e=await this.$api.goods.getItemsListAll(t);this.goodsIndex=e.list}}},l=a(81656),r=(0,l.A)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"addCartas-view"},[t._m(0),e("div",[t.oneList.length>0?e("div",{staticClass:"one-level"},[t._l(t.oneList,function(a,i){return e("div",{key:i,staticClass:"one-level-item",on:{click:function(e){return t.oneCli(i)}}},[a.image_url?t._e():e("span",{class:{"one-level-item-imgs-span":i!=t.oneIndex,"one-level-item-img-span":i==t.oneIndex}},[t._v(t._s(a.category_name))]),a.image_url?e("img",{class:{"one-level-item-imgs":i!=t.oneIndex,"one-level-item-img":i==t.oneIndex},attrs:{src:a.image_url,alt:""}}):t._e(),e("span",{class:{"one-level-item-titles":i!=t.oneIndex,"one-level-item-title":i==t.oneIndex}},[t._v(t._s(a.category_name))])])}),t._m(1)],2):t._e(),t.oneList.length>0?e("div",{staticClass:"level-box"},[e("div",{staticClass:"level-box-left"},t._l(t.oneList?.[t.oneIndex]?.children,function(a,i){return e("div",{key:i,class:{"two-level":!0,"two-levels":t.twoIndex==i},on:{click:function(e){return t.twoCli(i)}}},[t.twoIndex==i?e("div",{staticClass:"lone"}):t._e(),e("div",{staticClass:"two-level-item-title"},[t._v(t._s(a?.category_name||""))])])}),0),e("div",{staticClass:"level-box-right"},[t.oneList?.[t.oneIndex]?.children?.[t.twoIndex]?.children?.length>0?e("div",{staticClass:"three-level-list"},t._l(t.oneList?.[t.oneIndex]?.children?.[t.twoIndex]?.children,function(a,i){return e("span",{key:i,class:{"three-level-list-title":!0,"three-level-list-titles":i==t.threeIndex},on:{click:function(e){return t.threeCli(i)}}},[t._v(t._s(a?.category_name||""))])}),0):t._e(),e("div",{staticClass:"three-level-item"},[t._l(t.goodsIndex,function(i,s){return e("div",{key:s,staticClass:"three-list"},[e("img",{staticClass:"three-list-img",attrs:{src:i.pics[0],alt:""}}),e("div",{staticClass:"three-list-title"},[e("span",{staticClass:"name"},[t._v(t._s(i.itemName))]),e("div",{staticClass:"price"},[e("div",[e("span",{staticClass:"price1"},[t._v(t._s(i.cost_price/100)+"."),e("span",{staticClass:"price2"},[t._v("96")])]),e("span",{staticClass:"price3"},[t._v(t._s(i.cost_price/100))])]),e("img",{staticClass:"cart",attrs:{src:a(47618),alt:""}})])])])}),0==t.goodsIndex.length?e("div",{staticClass:"three-level-item-title"},[t._v($t("k5k3np6","暂无数据哟～","lang"))]):t._e()],2)])]):t._e()])])},i,!1,null,"27e64056",null).exports,c=(a(44114),a(22489),a(20116),a(61701),a(95353)),o=a(87378),d=a(432),g=a.n(d),h=a(5748),m=a(79296),u={components:{imgPicker:o.default,draggable:g()},data(){return{customClassification:!0,goodsCateValue:"",goodsCateValueKey:0,mainCategoryValue:"",mainCategoryValueKey:0,currentFidx:0,currentSidx:0,currentLidx:0,seriesVisible:!1,seriesTitle:"",editableSeries:"",series:[],editableData:[{name:$t("eyrn2","名称","lang"),img:"",category_id:"",category_name:"",id:"",page_name:"",children:[{name:$t("eyrn2","名称","lang"),img:"",category_id:"",category_name:"",children:[]}]}],form:{name:"base",hasSeries:!1,data:[]},dragParentOptions:{group:"parent",sort:!0,handle:".move",draggable:".form-parent",forceFallback:!1,animation:150,scroll:!0},dragSecondOptions:{group:"second",sort:!0,handle:".move",draggable:".form-second",forceFallback:!1,animation:150,scroll:!0},dragLastOptions:{group:"last",sort:!0,handle:".move",draggable:".form-last",forceFallback:!1,animation:150,scroll:!0},isGetImage:!1,imgsVisible:!1,curCateType:"goodsCate",categoryLoading:!1,categoryDialog:!1,category:[],mainCategory:[],currentCategory:"",pageDialogVisible:!1,customPageList:[],selectedCustomPage:"",curTabIndex:0}},watch:{category(){this.goodsCateValueKey++},mainCategory(){this.mainCategoryValueKey++}},computed:{...(0,c.L8)(["template_name"])},mounted(){let t={template_name:this.template_name,version:"v1.0.1",page_name:"category"};(0,m.getParamByTempName)(t).then(t=>{if(0!==t.data.data?.list?.length){let e=t.data.data.list[0].params;e.hasSeries?(e.data?.map(t=>{t.content?.map(t=>{t.children?.map(t=>{t.children||Object.assign(t,{children:[]})})})}),this.form=e,this.series=e.data||[],this.editableData=this.series[0]?.content||[],this.editableSeries=e.data[0]?.name||""):(e.data?.map(t=>{t.children?.map(t=>{t.children||Object.assign(t,{children:[]})})}),this.form=e,this.editableData=e.data||[])}})},methods:{async switchChange(t){await this.$api.goods.postCategoryPageSetting({style:t?"category":"items"});this.$message.success($t("arhjwq4","切换成功","lang"))},curCateTypeChange(t){"mainCate"==t?(this.currentCategory={},this.mainCategoryValue=""):(this.currentCategory={},this.goodsCateValue="")},handleCateChange(t){0==t.length?this.currentCategory="":this.currentCategory={main_category_id:"",category_id:t[t.length-1],category_name:this.findCateName(t,this.category)}},handleMainCateChange(t){0!=t.length?this.currentCategory={main_category_id:t[t.length-1],category_id:"",category_name:this.findCateName(t,this.mainCategory)}:this.currentCategory=""},findCateName(t,e){const a=e.findIndex(e=>t[0]===e.value),i=t[1]?e[a].children.findIndex(e=>t[1]===e.value):"",s=t[2]?e[a].children[i].children.findIndex(e=>t[2]===e.value):"";let n="";return""!==s&&(n=e[a].children[i].children[s].label),""===s&&""!==i&&(n=e[a].children[i].label),""===s&&""===i&&(n=e[a].label),n},addSeries(){if(!this.seriesTitle)return void this.$message({message:$t("3v2s1n6","系列名称必填","lang"),type:"error"});if(this.series.length>=3)return void this.$message({message:$t("gzh6pe8","最多添加3个系列","lang"),type:"error"});let t=Date.parse(new Date)+"";this.series.push({title:this.seriesTitle,name:t,content:this.form.hasSeries?[]:this.editableData}),this.editableSeries=t,this.seriesTitle="",this.seriesVisible=!1,this.editableData=this.series[this.series.length-1].content,this.form.hasSeries=!0},handleCancel(){this.seriesTitle="",this.seriesVisible=!1},removeTab(t){this.$confirm($t("3yuwmin","删除系列将删除该系列下配置的分类, 是否继续?","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{let e=this.series,a=this.editableSeries;a===t&&e.forEach((i,s)=>{if(i.name===t){let t=e[s+1]||e[s-1];t&&(a=t.name)}}),this.editableSeries=a,this.series=e.filter(e=>e.name!==t),0===this.series.length?(this.form.hasSeries=!1,this.editableData=this.form.data.find(e=>e.name===t).content):this.editableData=this.series.find(t=>t.name===a).content}).catch(()=>{})},handleClick(t){this.curTabIndex=t.index,this.currentFidx=0,this.editableData=this.series[t.index].content},add(t,e){let a={name:"",img:"",category_id:"",category_name:""};void 0!==t&&void 0===e&&(a.children=[],this.editableData[t].children.push(a)),void 0!==t&&void 0!==e&&this.editableData[t].children[e].children.push(a),void 0===t&&void 0===e&&(a.children=[],a.hot=!1,this.editableData.push(a))},remove(t,e,a){void 0!==a?this.$confirm($t("8ddcgr5","确认删除？","lang")).then(i=>{this.editableData[t].children[e].children.splice(a,1)}).catch(t=>{}):this.$confirm($t("yfae3uk","删该分类将会删除其所有子级，确认删除吗？","lang")).then(a=>{void 0!==e?this.editableData[t].children.splice(e,1):this.editableData.splice(t,1)}).catch(t=>{})},switchTab(t){this.currentFidx=t},switchType(t){this.form.name=t},showImgs(t,e,a){this.imgsVisible=!0,this.isGetImage=!0,this.currentFidx=t,void 0!==a&&(this.currentSidx=e,this.currentLidx=a),void 0!==e&&void 0===a&&(this.currentSidx=e,this.currentLidx=""),void 0===e&&void 0===a&&(this.currentSidx="",this.currentLidx="")},pickImg(t){""!==this.currentLidx&&(this.editableData[this.currentFidx].children[this.currentSidx].children[this.currentLidx].img=t.url),""!==this.currentSidx&&""===this.currentLidx&&(this.editableData[this.currentFidx].children[this.currentSidx].img=t.url),""===this.currentSidx&&""===this.currentLidx&&(this.editableData[this.currentFidx].img=t.url),this.imgsVisible=!1},closeimgsVisible(){this.imgsVisible=!1},recursive(t,e){let a="";return t.forEach(t=>{const i=t=>{if(t.value==e)return a=t,a;let s=t.children;if(s)for(let t=0;t<s.length;t++)i(s[t],e)};i(t)}),a},async showCategory(t,e,a,i=null){const s=await(0,h.getCategory)();this.category=this.initCategory(s.data.data);const n=await(0,h.getCategory)({is_main_category:!0});if(this.mainCategory=this.initCategory(n.data.data),i)if(i.main_category_id){this.curCateType="mainCate";const t=this.recursive(this.mainCategory,i.main_category_id);t?(this.mainCategoryValue=t.value,this.currentCategory={main_category_id:t.value,category_id:"",category_name:t.label}):(this.currentCategory=[],this.mainCategoryValue=[])}else{this.curCateType="goodsCate";const t=i.category_id,e=this.recursive(this.category,t);e?(this.goodsCateValue=e.value,this.currentCategory={main_category_id:"",category_id:e.value,category_name:e.label}):(this.currentCategory=[],this.goodsCateValue=[])}this.currentFidx=t,this.currentCategory="",void 0!==a&&(this.currentSidx=e,this.currentLidx=a),void 0!==e&&void 0===a&&(this.currentSidx=e,this.currentLidx=""),void 0===e&&void 0===a&&(this.currentSidx="",this.currentLidx=""),this.categoryDialog=!0,this.categoryLoading=!0},initCategory(t){let e=[];return t?.map(t=>{let a={value:t.category_id,label:t.category_name};t.children.length&&(Object.assign(a,{children:[]}),t.children?.map(t=>{let e={value:t.category_id,label:t.category_name};t.children.length&&(Object.assign(e,{children:[]}),t.children?.map(t=>{let a={value:t.category_id,label:t.category_name};e.children.push(a)})),a.children.push(e)})),e.push(a)}),e},setCategory(){""!==this.currentLidx&&Object.assign(this.editableData[this.currentFidx].children[this.currentSidx].children[this.currentLidx],this.currentCategory),""!==this.currentSidx&&""===this.currentLidx&&Object.assign(this.editableData[this.currentFidx].children[this.currentSidx],this.currentCategory),""===this.currentSidx&&""===this.currentLidx&&Object.assign(this.editableData[this.currentFidx],this.currentCategory),this.categoryDialog=!1},hideCategory(){this.currentCategory="",this.categoryDialog=!1},saveConfig(){this.form.hasSeries?(this.series[this.curTabIndex].content=this.editableData,this.form.data=this.series):this.form.data=this.editableData,this.form.addCar=!0,this.form.classify=!1;let t={template_name:this.template_name,config:JSON.stringify([this.form]),page_name:"category"};(0,m.savePageParams)(t).then(t=>{t.data.data.status&&this.$message({message:$t("aghf564","保存成功","lang"),type:"success"})})},async _getCustomPageList(){const t=await(0,m.getCustomPageList)({page:1,pageSize:100,template_name:this.template_name});this.customPageList=t.data.data.list},confirmPageDialog(){this.pageDialogVisible=!1;const t=this.currentFidx;this.editableData[t].id=this.selectedCustomPage;const e=this.customPageList.find(t=>t.id==this.selectedCustomPage);e&&(this.editableData[t].page_name=e.page_name)},openPageDialog(t){!this.customPageList.length&&this._getCustomPageList(),this.pageDialogVisible=!0,this.currentFidx=t}}},v={components:{addCartas:r,index:(0,l.A)(u,function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"el-fade-in-linear",mode:"out-in"}},[e("div",[e("section",{staticClass:"section section-white category-view-warp",style:"height: 580px;"},[e("div",{staticClass:"category-type-view"},[e("div",{staticClass:"category-type-scroll"},[e("div",{staticClass:"layout-miniature",class:{active:"base"===t.form.name},on:{click:function(e){return t.switchType("base")}}},[e("div",{staticClass:"layout"},[e("div",{staticClass:"layout-left"},[e("div",{staticClass:"layout-item",class:{active:"base"===t.form.name}}),e("div",{staticClass:"layout-item"})]),e("div",{staticClass:"layout-right"},[e("div",{staticClass:"layout-group"},[e("div",{staticClass:"layout-banner"}),e("div",{staticClass:"layout-item-list"},[e("div",{staticClass:"layout-item"},[e("div",{staticClass:"item-icon"}),e("div",{staticClass:"item-name"})]),e("div",{staticClass:"layout-item"},[e("div",{staticClass:"item-icon"}),e("div",{staticClass:"item-name"})]),e("div",{staticClass:"layout-item"},[e("div",{staticClass:"item-icon"}),e("div",{staticClass:"item-name"})]),e("div",{staticClass:"layout-item"},[e("div",{staticClass:"item-icon"}),e("div",{staticClass:"item-name"})]),e("div",{staticClass:"layout-item"},[e("div",{staticClass:"item-icon"}),e("div",{staticClass:"item-name"})])])])])])])])]),e("div",{staticClass:"category-view"},[e("div",{staticClass:"template"},[e("div",{staticClass:"layout-view"},[t.series.length>0?e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.editableSeries,callback:function(e){t.editableSeries=e},expression:"editableSeries"}},t._l(t.series,function(t){return e("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})}),1):t._e()],1),"base"==t.form.name&&t.editableData.length>0?e("div",[e("div",{staticClass:"layout-view"},[e("div",{staticClass:"parent-view"},t._l(t.editableData,function(a,i){return e("div",{key:i,staticClass:"parent-item",class:{active:i===t.currentFidx},on:{click:function(e){return t.switchTab(i)}}},[a.hot?e("span",{staticClass:"hot-tag"}):t._e(),t._v(t._s(a.name?a.name:$t("emut2","分类","lang"))+" ")])}),0),e("div",{staticClass:"child-layout-view"},[e("div",{staticClass:"layout-group"},[e("img",{staticClass:"parent-img",attrs:{src:t.editableData[t.currentFidx].img?t.editableData[t.currentFidx].img:"https://fakeimg.pl/250x100/EFEFEF/CCC/",alt:""}}),t._l(t.editableData[t.currentFidx].children,function(a,i){return e("div",{key:i,staticClass:"child"},[a.name?e("div",{staticClass:"second-title"},[t._v(" "+t._s(a.name)+" ")]):t._e(),e("div",{staticClass:"child-view"},t._l(a.children,function(a,i){return e("div",{key:i,staticClass:"child-item"},[e("img",{staticClass:"child-img",attrs:{src:a.img?a.img:"https://fakeimg.pl/50x50/EFEFEF/CCC/",alt:""}}),e("div",[t._v(t._s(a.name?a.name:$t("ds4g53","子分类","lang")))])])}),0)])})],2)])])]):t._e(),"fresh"==t.form.name&&t.editableData.length>0?e("div",[e("div",{staticClass:"layout-view"},[e("div",{staticClass:"parent-view"},t._l(t.editableData,function(a,i){return e("div",{key:i,staticClass:"parent-item",class:{active:i===t.currentFidx},on:{click:function(e){return t.switchTab(i)}}},[t._v(" "+t._s(a.name?a.name:$t("emut2","分类","lang"))+" ")])}),0),e("div",{staticClass:"child-layout-view"},[e("div",{staticClass:"layout-group"},[e("img",{staticClass:"parent-img",attrs:{src:t.editableData[t.currentFidx].img?t.editableData[t.currentFidx].img:"https://fakeimg.pl/250x100/EFEFEF/CCC/",alt:""}}),t._l(3,function(a){return e("div",{key:a,staticClass:"child-goods-view"},[e("div",{staticClass:"child-item"},[e("img",{staticClass:"item-img",attrs:{src:"https://fakeimg.pl/70x70/EFEFEF/CCC/",alt:""}}),e("div",{staticClass:"item-caption"},[e("div",[e("div",{staticClass:"item-title"},[t._v($t("1awhzt8","当前类目商品标题","lang"))]),e("div",{staticClass:"item-desc"},[t._v($t("1avqg98","当前类目商品描述","lang"))])]),e("div",{staticClass:"item-icon"},[e("div",{staticClass:"iconfont icon-cart-plus"})])])])])})],2)])])]):t._e(),"beauty"==t.form.name&&t.editableData.length>0?e("div",[e("div",{staticClass:"layout-view layout-second"},[e("div",{staticClass:"child-layout-view"},t._l(t.editableData,function(a,i){return e("div",{key:i,staticClass:"layout-group",class:{active:i===t.currentFidx}},[e("img",{staticClass:"parent-img",attrs:{src:a.img?a.img:"https://fakeimg.pl/320x120/EFEFEF/CCC/",alt:""},on:{click:function(e){return t.switchTab(i)}}}),t._l(a.children,function(a,i){return e("div",{key:i,staticClass:"child"},[a.name?e("div",{staticClass:"second-title"},[t._v(" "+t._s(a.name)+" ")]):t._e(),e("div",{staticClass:"child-view"},t._l(a.children,function(a,i){return e("div",{key:i,staticClass:"child-item"},[e("img",{staticClass:"child-img",attrs:{src:a.img?a.img:"https://fakeimg.pl/70x70/EFEFEF/CCC/",alt:""}}),e("div",[t._v(t._s(a.name?a.name:$t("ds4g53","子分类","lang")))])])}),0)])})],2)}),0)])]):t._e(),t.editableData.length?t._e():e("div",{staticClass:"no-category-placeholder"},[e("div",{staticClass:"iconfont icon-th-list"}),e("div",[t._v($t("6robyn5","请添加分类","lang"))])])])]),e("div",{staticClass:"category-setting-view"},[e("div",{staticClass:"category-form"},[e("div",{staticClass:"content-bottom-padded clearfix"},[e("div",{staticClass:"series"},[t.series.length>0?e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.editableSeries,callback:function(e){t.editableSeries=e},expression:"editableSeries"}},t._l(t.series,function(a){return e("el-tab-pane",{key:a.name,attrs:{label:a.title,name:a.name}},[t.editableSeries===a.name?e("span",{attrs:{slot:"label"},slot:"label"},[e("el-input",{staticClass:"series-name-input",attrs:{size:"mini"},model:{value:a.title,callback:function(e){t.$set(a,"title",e)},expression:"item.title"}}),e("i",{staticClass:"iconfont icon-times",on:{click:function(e){return t.removeTab(a.name)}}})],1):t._e()])}),1):t._e(),e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.seriesVisible,callback:function(e){t.seriesVisible=e},expression:"seriesVisible"}},[e("div",{staticClass:"content-bottom-padded"},[e("el-input",{attrs:{type:"text",size:"small",placeholder:$t("hf5lw87","请输入系列名称","lang")},model:{value:t.seriesTitle,callback:function(e){t.seriesTitle=e},expression:"seriesTitle"}})],1),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:t.handleCancel}},[t._v($t("dd4ni4"," 取消 ","lang"))]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSeries}},[t._v($t("in1ck4"," 确定 ","lang"))])],1),e("el-button",{staticClass:"add-btn iconfont icon-plus-circle",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v($t("txe0v36"," 添加系列 ","lang"))])],1)],1)]),e("draggable",{attrs:{options:t.dragParentOptions},model:{value:t.editableData,callback:function(e){t.editableData=e},expression:"editableData"}},t._l(t.editableData,function(a,i){return e("div",{key:i,staticClass:"form-parent"},[e("div",{staticClass:"form-item"},[e("div",{staticClass:"setting-img",on:{click:function(e){return t.showImgs(i)}}},[a.img?e("img",{attrs:{src:a.img?a.img:"https://fakeimg.pl/50x50",alt:""}}):e("SpIcon",{attrs:{size:"22",name:"pic"}})],1),e("el-input",{attrs:{placeholder:$t("eyrn2","名称","lang")},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"item.name"}}),"fresh"===t.form.name?e("div",{staticClass:"bind-btn iconfont icon-link",on:{click:function(e){return t.showCategory(i)}}},[t._v(" "+t._s(a.category_name?a.category_name:$t("gdncgu4","绑定分类","lang"))+" ")]):t._e(),e("div",{staticClass:"bind-btn",class:{" iconfont icon-link":!a.main_category_id&&!a.category_id},on:{click:function(e){return t.showCategory(i,"","",a)}}},[a?[t._v(" "+t._s(a.main_category_id?$t("15kov45","管理分类：","lang"):"")+" "+t._s(a.category_id?$t("ap2ffa5","商品分类：","lang"):"")+" "+t._s(a.category_name?a.category_name:$t("gdncgu4","绑定分类","lang"))+" ")]:t._e()],2),e("el-checkbox",{model:{value:a.hot,callback:function(e){t.$set(a,"hot",e)},expression:"item.hot"}},[t._v($t("hku854"," 热推 ","lang"))]),e("div",{staticClass:"move",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"20",name:"sort-one"}})],1),e("div",{staticClass:"remove",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"18",name:"delete"},on:{click:function(e){return t.remove(i)}}})],1)],1),"fresh"!==t.form.name?e("div",{staticClass:"form-child"},[e("draggable",{attrs:{options:t.dragSecondOptions},model:{value:a.children,callback:function(e){t.$set(a,"children",e)},expression:"item.children"}},t._l(a.children,function(a,s){return e("div",{key:s,staticClass:"form-second"},[e("div",{staticClass:"form-item"},[e("el-input",{attrs:{placeholder:$t("eyrn2","名称","lang")},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"sitem.name"}}),e("div",{staticClass:"bind-btn",class:{" iconfont icon-link":!a.main_category_id&&!a.category_id},on:{click:function(e){return t.showCategory(i,s,"",a)}}},[a?[t._v(" "+t._s(a.main_category_id?$t("15kov45","管理分类：","lang"):"")+" "+t._s(a.category_id?$t("ap2ffa5","商品分类：","lang"):"")+" "+t._s(a.category_name?a.category_name:$t("gdncgu4","绑定分类","lang"))+" ")]:t._e()],2),e("div",{staticClass:"move",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"20",name:"sort-one"}})],1),e("div",{staticClass:"remove",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"18",name:"delete"},on:{click:function(e){return t.remove(i,s)}}})],1)],1),e("div",{staticClass:"form-child"},[e("draggable",{attrs:{options:t.dragLastOptions},model:{value:a.children,callback:function(e){t.$set(a,"children",e)},expression:"sitem.children"}},t._l(a.children,function(a,n){return e("div",{key:n,staticClass:"form-last"},[e("div",{staticClass:"form-item"},[e("div",{staticClass:"setting-img",on:{click:function(e){return t.showImgs(i,s,n)}}},[a.img?e("img",{attrs:{src:a.img?a.img:"https://fakeimg.pl/50x50",alt:""}}):e("SpIcon",{attrs:{size:"22",name:"pic"}})],1),e("el-input",{attrs:{placeholder:$t("eyrn2","名称","lang")},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"litem.name"}}),e("div",{staticClass:"bind-btn",class:{"iconfont icon-link":!a.main_category_id&&!a.category_id},on:{click:function(e){return t.showCategory(i,s,n,a)}}},[t._v(" "+t._s(a.main_category_id?$t("15kov45","管理分类：","lang"):"")+t._s(a.category_id?$t("ap2ffa5","商品分类：","lang"):"")+t._s(a.category_name?a.category_name:$t("gdncgu4","绑定分类","lang"))+" ")]),e("div",{staticClass:"move",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"20",name:"sort-one"}})],1),e("div",{staticClass:"remove",staticStyle:{"margin-left":"10px"}},[e("SpIcon",{attrs:{size:"18",name:"delete"},on:{click:function(e){return t.remove(i,s,n)}}})],1)],1)])}),0),e("el-button",{staticClass:"child-add-btn iconfont icon-plus-circle",attrs:{type:"text"},on:{click:function(e){return t.add(i,s)}}},[t._v($t("sb0vt48"," 添加三级分类 ","lang"))])],1)])}),0),e("el-button",{staticClass:"child-add-btn iconfont icon-plus-circle",attrs:{type:"text"},on:{click:function(e){return t.add(i)}}},[t._v($t("ub1xjf8"," 添加二级分类 ","lang"))])],1):t._e()])}),0),e("el-button",{staticClass:"parent-add-btn iconfont icon-plus",on:{click:function(e){return t.add()}}},[t._v($t("traq126"," 添加分类 ","lang"))])],1)])]),e("section",{staticClass:"content-padded-s section-white content-center"},[e("el-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:t.saveConfig}},[t._v($t("cp35x4"," 保存 ","lang"))])],1),e("el-dialog",{attrs:{title:$t("gdncgu4","绑定分类","lang"),visible:t.categoryDialog,"before-close":t.hideCategory},on:{"update:visible":function(e){t.categoryDialog=e}}},[e("el-form",[e("el-form-item",[e("el-radio-group",{on:{change:t.curCateTypeChange},model:{value:t.curCateType,callback:function(e){t.curCateType=e},expression:"curCateType"}},[e("el-radio-button",{attrs:{label:"goodsCate"}},[t._v($t("4gc2ts6"," 商品分类 ","lang"))]),e("el-radio-button",{attrs:{label:"mainCate"}},[t._v($t("gaz7466"," 管理分类 ","lang"))])],1)],1),e("el-form-item",{attrs:{label:$t("ikwi0l4","选择分类","lang")}},["goodsCate"===t.curCateType?e("el-cascader",{key:t.goodsCateValueKey,attrs:{placeholder:$t("rhnkj46","选择商品分类","lang"),options:t.category,props:{checkStrictly:!0},clearable:""},on:{change:t.handleCateChange},model:{value:t.goodsCateValue,callback:function(e){t.goodsCateValue=e},expression:"goodsCateValue"}}):t._e(),"mainCate"===t.curCateType?e("el-cascader",{key:t.mainCategoryValueKey,attrs:{placeholder:$t("wge4je6","选择管理分类","lang"),options:t.mainCategory,props:{checkStrictly:!0},clearable:""},on:{change:t.handleMainCateChange},model:{value:t.mainCategoryValue,callback:function(e){t.mainCategoryValue=e},expression:"mainCategoryValue"}}):t._e()],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.categoryDialog=!1}}},[t._v($t("caoqm3","取 消","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.setCategory}},[t._v($t("hnjoo3","确 定","lang"))])],1)],1),e("el-dialog",{attrs:{title:$t("il8mml4","选择页面","lang"),visible:t.pageDialogVisible},on:{"update:visible":function(e){t.pageDialogVisible=e}}},[e("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:t.selectedCustomPage,callback:function(e){t.selectedCustomPage=e},expression:"selectedCustomPage"}},t._l(t.customPageList,function(t,a){return e("el-option",{key:a,attrs:{label:t.page_name,value:t.id}})}),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.pageDialogVisible=!1}}},[t._v($t("b2spxe5"," 取 消 ","lang"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmPageDialog}},[t._v($t("fovd945"," 确 定 ","lang"))])],1)],1),e("imgPicker",{attrs:{"dialog-visible":t.imgsVisible,"sc-status":t.isGetImage},on:{chooseImg:t.pickImg,closeImgDialog:t.closeimgsVisible}})],1)])},[],!1,null,"5a7d5c74",null).exports},data(){return{addCar:!0,classify:!0}},computed:{...(0,c.L8)(["template_name"])},mounted(){this.feath()},methods:{async feath(){let t={template_name:this.template_name,version:"v1.0.1",page_name:"category"};const e=await this.$api.wxa.getParamByTempName(t);"boolean"==typeof e.list[0].params.addCar&&(this.addCar=e.list[0].params.addCar,this.classify=e.list[0].params.classify)},async saveConfig(){if(!this.classify&&this.addCar)this.$refs.indexTile.saveConfig();else{let t={template_name:this.template_name,config:JSON.stringify([{name:"base",hasSeries:!1,data:[],is_open:!0,addCar:this.addCar,classify:this.classify}]),page_name:"category"};await this.$api.wxa.savePageParams(t),this.$message({message:$t("aghf564","保存成功","lang"),type:"success"})}}}},C=(0,l.A)(v,function(){var t=this,e=t._self._c;return e("SpPage",[t.VERSION_SHUYUN()?t._e():e("SpPlatformTip",{attrs:{h5:"",app:"",alipay:""}}),e("div",{staticClass:"categorize"},[t._v($t("qsfr597"," 分类样式： ","lang")),e("el-radio-group",{model:{value:t.classify,callback:function(e){t.classify=e},expression:"classify"}},[e("el-radio",{attrs:{label:!0}},[t._v($t("ff4lmm4","直接加购","lang"))]),e("el-radio",{attrs:{label:!1}},[t._v($t("gvs72","平铺","lang"))])],1)],1),t.classify?t._e():e("div",[t._v($t("jh7izyc"," 是否开启自定义分类： ","lang")),e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.addCar,callback:function(e){t.addCar=e},expression:"addCar"}})],1),t.classify?e("addCartas"):t._e(),!t.classify&&t.addCar?e("index",{ref:"indexTile"}):t._e(),!t.classify&&!t.addCar||t.classify?e("div",{staticClass:"section-footer flex justify-start ml-[100px] mt-[20px]"},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveConfig}},[t._v($t("cp35x4"," 保存 ","lang"))])],1):t._e()],1)},[],!1,null,"2f288535",null).exports},47618:function(t,e,a){t.exports=a.p+"img/shopping-cart.eda9e654.png"},50793:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAJxsHGAAAAq0lEQVRYCe2VYQqAIAxG1cOKt8huIR7WasLAIpuRYj8+IYo51/OJTFtrN/WjYX7EklEAJJ0IDEmGMA8DMAADsw1odHvhCNDLBEEKhiRDmIcBGICB2QY+d/sYoy434ZzzKaWljLV+G2PW7q0jhOCpcCsE59GavJYDPd9voRiGGLob4o21QpUwQ4GouAR1hRkO9AR1B0P5pxtCgVGjvH01mFH/rtYlKHqqCcfEDh+aNcOBKiBMAAAAAElFTkSuQmCC"},56155:function(t){t.exports="data:image/png;base64,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"}}]);