"use strict";(self.webpackChunkecshopx_admin=self.webpackChunkecshopx_admin||[]).push([[7432],{97432:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});a(18111),a(22489),a(44114);var o=a(5134),r=a(98818),i=a(79296),l=a(87378),s=a(83350),n={components:{imgPicker:l.default},data(){return{params:{page:1,pageSize:10},form:{goods:"all",commission_type:"money",isOpenPopularize:!1,change_promoter:{type:"no_threshold",filter:{no_threshold:0,vip_grade:"vip",consume_money:0,order_num:0}},popularize_ratio:{order_money:[],profit:{first_level:{name:$t("dyvx2","上级","lang"),ratio:0},second_level:{name:$t("btgtj3","上上级","lang"),ratio:0}},type:"profit"},isOpenShop:!1,isOpenGuide:!1,isOpenRecharge:!1,recharge:{profit:{first_level:{name:$t("dyvx2","上级","lang"),ratio:0},second_level:{name:$t("btgtj3","上上级","lang"),ratio:0}}},isOpenPromoterInformation:!1,share_title:"",share_des:"",applets_share_img:"",h5_share_img:"",banner_img:""},promoterType:[{value:"no_threshold",label:$t("afw2648","无门槛成为推广员","lang")},{value:"internal",label:$t("boage66","仅内部可推广","lang")},{value:"vip_grade",label:$t("3mtflya","成为指定付费等级会员","lang")},{value:"consume_money",label:$t("x2z0e8a","会员消费达到指定金额","lang")},{value:"order_num",label:$t("l9x09x8","会员已完成订单数","lang")}],setImg:"",vipGradeList:{},imgDialog:!1,isGetImage:!1,custompage_template_id:0,FormworkVisible:!1,FormworkList:[]}},mounted(){(0,o.getPopularizeSetting)().then(e=>{this.form={...this.form,...e.data.data},this.form.goods=this.form.goods?this.form.goods:"all",this.form.share_title=this.form.share_title?this.form.share_title:$t("jhnmlv8","这家小店不一般！","lang"),this.form.share_des=this.form.share_des?this.form.share_des:$t("8wby8sd","这家店有好货，一起瞧瞧吧！","lang"),void 0===this.form.recharge&&(this.form.recharge={profit:{first_level:{name:$t("dyvx2","上级","lang"),ratio:0},second_level:{name:$t("btgtj3","上上级","lang"),ratio:0}}})}),(0,r.listVipGrade)().then(e=>{null!=e&&e.data.data&&e.data.data.length>0&&(this.vipGradeList=e.data.data)})},methods:{changeCommission_type(e){const t=this.form.popularize_ratio.type;this.form.is_open_point?"profit"==t&&"money"==this.form.commission_type?this.$confirm($t("6naw861c","修改奖励方式后，商品佣金算法：商品利润 × 百分比，其中商品利润为【支付金额-运费-商品成本价】","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.commission_type="money"==e?"point":"money",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})}):"order_money"==t&&"money"==this.form.commission_type?this.$confirm($t("vmgz5114","修改奖励方式后，商品佣金算法：订单金额×百分比，其中订单金额为【支付金额-运费】","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.commission_type="money"==e?"point":"money",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})}):"profit"==t&&"point"==this.form.commission_type?this.$confirm($t("3pen461n","修改奖励方式后，商品佣金算法：商品利润 × 百分比×积分与现金的抵扣比例，其中商品利润为【支付金额-运费-商品成本价】","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.commission_type="money"==e?"point":"money",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})}):"order_money"==t&&"point"==this.form.commission_type&&this.$confirm($t("hokwoj1f","修改奖励方式后，商品佣金算法：订单金额×百分比×积分与现金的抵扣比例，其中订单金额为【支付金额-运费】","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.commission_type="money"==e?"point":"money",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})}):this.$confirm($t("bm82j4u","未开启积分设置，请进入 「会员」-「 积分规则 」开启积分。","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),type:"warning"}).then(()=>{this.form.commission_type="money"}).catch(()=>{this.form.commission_type="money"})},linkTo(){let e="";(0,s.getWeappId)().then(t=>{var a=t.data.data.weappid,o=t.data.data.tempName;a&&(e=this.matchInternalRoute("custompage"),this.$store.dispatch("setWxappId",a),this.$store.dispatch("setTemplateName",o)),this.$router.push({path:e})})},changePopularizeRatioType(e){this.$confirm($t("49kf4g1c","切换返佣计算类型，将清空单品比例返佣设置（固定金额不影响），之前配置过的单品返佣比例需要重新配置","lang"),$t("hn562","提示","lang"),{confirmButtonText:$t("kzjg2","确定","lang"),cancelButtonText:$t("ev022","取消","lang"),type:"warning"}).then(()=>{}).catch(()=>{this.form.popularize_ratio.type="order_money"==e?"profit":"order_money",this.$message({type:"info",message:$t("e68dg3","已取消","lang")})})},handleImgChange(e="banner"){this.imgDialog=!0,this.isGetImage=!0,this.setImg=e},pickImg(e){switch(this.setImg){case"web":this.form.h5_share_img=e.url;break;case"wxapp":this.form.applets_share_img=e.url;break;case"qrcode_bg_img":this.form.qrcode_bg_img=e.url;break;default:this.form.banner_img=e.url}this.imgDialog=!1},closeImgDialog(){this.imgDialog=!1},save(){this.form.limit_rebate<1?this.$message({message:$t("1k2kfva","提现限制需不低于1元","lang"),type:"error"}):!this.form.isOpenPopularize||"vip_grade"!=this.form.change_promoter.type||""!=this.form.change_promoter.filter.vip_grade&&this.form.change_promoter.filter.vip_grade!=$t("l72nr3","请选择","lang")?(0,o.setPopularizeSetting)(this.form).then(e=>{this.$message({message:$t("aghf564","保存成功","lang"),type:"success"})}):this.$message({message:$t("y1mib5d","请选择成为指定付费等级会员","lang"),type:"error"})},getFormworkList(){this.loading=!0,(0,i.getCustomPageList)(this.params).then(e=>{this.FormworkList=e.data.data.list,this.total_count=e.data.data.total_count,this.loading=!1})},handleCurrentChange:function(e){this.params.page=e,this.getFormworkList()},batchChooseFormwork(){this.FormworkVisible=!0,this.params.page=1,this.getFormworkList()},onSubmitFormwork(e){this.FormworkVisible=!1}}},m=(0,a(81656).A)(n,function(){var e=this,t=e._self._c;return t("SpPage",{staticClass:"section section-white"},[e.VERSION_SHUYUN()?e._e():t("SpPlatformTip"),t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[t("div",{staticClass:"section-body"},[t("el-form-item",{attrs:{label:$t("o91ob25","推广员计划","lang")}},[t("el-switch",{attrs:{width:50,"active-value":"true","inactive-value":"false","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},model:{value:e.form.isOpenPopularize,callback:function(t){e.$set(e.form,"isOpenPopularize",t)},expression:"form.isOpenPopularize"}}),t("el-alert",{staticClass:"alert-text",attrs:{title:$t("nlpd3a1s","商家可邀请员工、合作伙伴、朋友等作为推广员一起推广您的店铺或商品, 成功推广后给予推广员奖励，以此给店铺带来更多的曝光和销售提升","lang"),type:"info","close-text":" "}})],1),t("el-form-item",{attrs:{label:$t("ayodpx4","分销商品","lang")}},[t("el-radio-group",{model:{value:e.form.goods,callback:function(t){e.$set(e.form,"goods",t)},expression:"form.goods"}},[t("el-radio",{attrs:{label:"all"}},[e._v($t("32l7x76"," 全部商品 ","lang"))]),t("el-radio",{attrs:{label:"select"}},[e._v($t("v2fnu08"," 指定分销商品 ","lang"))])],1),t("div",{staticClass:"frm-tips"},[t("p",[e._v($t("xidvkc1a"," 全部商品，表示所有的商品推广进行返佣。指定分销商品后，只有设置指定的商品可以进行推广返佣 ","lang"))]),t("p",[e._v($t("h4kacj1j"," 注意：将指定分销商品模式切换到全部商品模式，不会清空以前的选择，重新再切回指定商品模式，保留以前的选择商品 ","lang"))])])],1),"true"==e.form.isOpenPopularize?[t("el-form-item",{attrs:{label:$t("d2vm4m4","提现限制","lang")}},[e._v($t("asyzha9"," 单笔金额不低于 ","lang")),t("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",required:"",min:"1",placeholder:""},model:{value:e.form.limit_rebate,callback:function(t){e.$set(e.form,"limit_rebate",t)},expression:"form.limit_rebate"}}),e._v($t("dtml2","元 ","lang"))],1),t("el-form-item",{attrs:{label:$t("giooi24","结算限制","lang")}},[e._v($t("3re4yx6"," 订单完成 ","lang")),t("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.form.limit_time,callback:function(t){e.$set(e.form,"limit_time",t)},expression:"form.limit_time"}}),e._v($t("jqt5iv6"," 天后结算 ","lang"))],1),t("el-form-item",{attrs:{label:$t("t8bh7a7","成为推广员门槛","lang")}},[t("div",{staticClass:"line"},[t("el-select",{model:{value:e.form.change_promoter.type,callback:function(t){e.$set(e.form.change_promoter,"type",t)},expression:"form.change_promoter.type"}},e._l(e.promoterType,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),t("div",{directives:[{name:"show",rawName:"v-show",value:"vip_grade"==e.form.change_promoter.type,expression:"form.change_promoter.type == 'vip_grade'"}],staticClass:"gap-text"},[e._v($t("j34fcv8"," 选择付费等级 ","lang")),t("el-select",{attrs:{placeholder:$t("l72nr3","请选择","lang")},model:{value:e.form.change_promoter.filter.vip_grade,callback:function(t){e.$set(e.form.change_promoter.filter,"vip_grade",t)},expression:"form.change_promoter.filter.vip_grade"}},e._l(e.vipGradeList,function(e){return t("el-option",{key:e.lv_type,attrs:{label:e.grade_name,value:e.lv_type}})}),1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"consume_money"==e.form.change_promoter.type,expression:"form.change_promoter.type == 'consume_money'"}],staticClass:"gap-text"},[e._v($t("m0d1q4"," 达到 ","lang")),t("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",required:"",min:"0",placeholder:"",onkeyup:"this.value=this.value.replace(/\\D/g,'')"},model:{value:e.form.change_promoter.filter.consume_money,callback:function(t){e.$set(e.form.change_promoter.filter,"consume_money",t)},expression:"form.change_promoter.filter.consume_money"}}),e._v($t("ehct3"," 元 ","lang"))],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"order_num"==e.form.change_promoter.type,expression:"form.change_promoter.type == 'order_num'"}],staticClass:"gap-text"},[e._v($t("efu644"," 完成 ","lang")),t("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",required:"",min:"0",placeholder:""},model:{value:e.form.change_promoter.filter.order_num,callback:function(t){e.$set(e.form.change_promoter.filter,"order_num",t)},expression:"form.change_promoter.filter.order_num"}}),e._v($t("llf03"," 笔 ","lang"))],1)],1)]),t("el-form-item",{attrs:{label:$t("ih7nfh4","返佣模式","lang")}},[t("el-radio-group",{on:{change:e.changePopularizeRatioType},model:{value:e.form.popularize_ratio.type,callback:function(t){e.$set(e.form.popularize_ratio,"type",t)},expression:"form.popularize_ratio.type"}},[t("el-radio",{attrs:{label:"profit"}},[e._v($t("nitggt7"," 按利润分佣 ","lang"))]),t("el-radio",{attrs:{label:"order_money"}},[e._v($t("hva04b9"," 按订单金额分佣 ","lang"))])],1),t("div",{staticClass:"frm-tips"},[e._v($t("lc74ol1q"," 如果商品未指定，返佣计算类型，那么则使用当前设置的通用方式，如果在商品中指定了返佣模式，那么指定商品则使用自己的返佣方式 ","lang"))])],1),t("el-form-item",{attrs:{label:$t("df49pw7","推广员奖金设置","lang")}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"profit"==e.form.popularize_ratio.type,expression:"form.popularize_ratio.type == 'profit'"}]},[e._l(e.form.popularize_ratio.profit,function(a,o){return t("el-row",{key:o},[t("el-col",{attrs:{span:2}},[e._v(" "+e._s(a.name)+"： ")]),t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{type:"number",required:"",min:"0",maxlength:"3",placeholder:""},model:{value:e.form.popularize_ratio.profit[o].ratio,callback:function(t){e.$set(e.form.popularize_ratio.profit[o],"ratio",t)},expression:"form.popularize_ratio.profit[key].ratio"}},[t("template",{slot:"append"},[e._v(" % ")])],2)],1)],1)}),t("el-alert",{staticClass:"alert-text",attrs:{title:$t("m56l7zy","商品利润 ×  百分比，其中商品利润为【支付金额-运费-商品成本价】","lang"),type:"info","close-text":" "}})],2),t("div",{directives:[{name:"show",rawName:"v-show",value:"order_money"==e.form.popularize_ratio.type,expression:"form.popularize_ratio.type == 'order_money'"}]},[e._l(e.form.popularize_ratio.order_money,function(a,o){return t("el-row",{key:o},[t("el-col",{attrs:{span:2}},[e._v(" "+e._s(a.name)+"： ")]),t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{type:"number",required:"",min:"0",maxlength:"3",placeholder:""},model:{value:e.form.popularize_ratio.order_money[o].ratio,callback:function(t){e.$set(e.form.popularize_ratio.order_money[o],"ratio",t)},expression:"form.popularize_ratio.order_money[key].ratio"}},[t("template",{slot:"append"},[e._v(" % ")])],2)],1)],1)}),t("el-alert",{staticClass:"alert-text",attrs:{title:$t("h5fjjar","订单金额 × 百分比，其中订单金额为【支付金额-运费】","lang"),type:"info","close-text":" "}})],2)]),t("el-form-item",{attrs:{label:$t("bm8wr54","奖励方式","lang")}},[t("el-radio-group",{on:{change:e.changeCommission_type},model:{value:e.form.commission_type,callback:function(t){e.$set(e.form,"commission_type",t)},expression:"form.commission_type"}},[t("el-radio",{attrs:{label:"money"}},[e._v($t("k7u3us6"," 奖励现金 ","lang"))])],1)],1),t("el-form-item",{attrs:{label:$t("vg42gr7","推广二维码背景","lang")}},[t("div",[t("div",{staticClass:"upload-qr-box",on:{click:function(t){return e.handleImgChange("qrcode_bg_img")}}},[e.form.qrcode_bg_img?t("img",{staticClass:"avatar",attrs:{src:e.wximageurl+e.form.qrcode_bg_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]),t("div",{staticClass:"frm-tips"},[e._v($t("s5li9ky","建议尺寸 650px * 1157px；作用于推广员二维码背景图配置","lang"))])]),t("el-form-item",{attrs:{label:$t("o99p4n5","推广员小店","lang")}},[t("el-switch",{attrs:{width:50,"active-value":"true","inactive-value":"false","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},model:{value:e.form.isOpenShop,callback:function(t){e.$set(e.form,"isOpenShop",t)},expression:"form.isOpenShop"}})],1),"true"==e.form.isOpenShop?[t("el-form-item",{attrs:{label:$t("c0aaup4","小店图片","lang")}},[t("div",[t("div",{staticClass:"upload-box",on:{click:e.handleImgChange}},[e.form.banner_img?t("img",{staticClass:"avatar",attrs:{src:e.wximageurl+e.form.banner_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]),t("div",{staticClass:"frm-tips"},[e._v($t("wn1b21s","建议尺寸750px*400px；配置后显示在小店首页顶部","lang"))])]),t("el-form-item",{attrs:{label:$t("o9brch5","推广员信息","lang")}},[t("el-switch",{attrs:{width:50,"active-value":"true","inactive-value":"false","active-text":$t("gmcv2","开启","lang"),"inactive-text":$t("eod62","关闭","lang"),"active-color":"#13ce66"},model:{value:e.form.isOpenPromoterInformation,callback:function(t){e.$set(e.form,"isOpenPromoterInformation",t)},expression:"form.isOpenPromoterInformation"}}),t("el-alert",{staticClass:"alert-text",attrs:{title:$t("thohsmr","若开启，小店图片将不会生效；由每个推广员在移动端配置。","lang"),type:"info","close-text":" "}})],1),t("el-form-item",{attrs:{label:$t("aoh3124","分享标题","lang")}},[t("el-input",{staticStyle:{width:"500px"},attrs:{type:"text",maxlength:"15","show-word-limit":""},model:{value:e.form.share_title,callback:function(t){e.$set(e.form,"share_title",t)},expression:"form.share_title"}})],1),t("el-form-item",{attrs:{label:$t("aogbhi4","分享描述","lang")}},[t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",maxlength:"30",resize:"none","show-word-limit":""},model:{value:e.form.share_des,callback:function(t){e.$set(e.form,"share_des",t)},expression:"form.share_des"}})],1),t("el-form-item",{attrs:{label:$t("aodz5a4","分享图片","lang")}},[t("el-row",{staticStyle:{width:"500px"},attrs:{type:"flex"}},[t("el-col",[t("div",{staticClass:"center"},[t("div",{staticClass:"upload-box wxapp",on:{click:function(t){return e.handleImgChange("wxapp")}}},[e.form.applets_share_img?t("img",{staticClass:"avatar",attrs:{src:e.wximageurl+e.form.applets_share_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"frm-tips upload-box inline"},[e._v($t("etlrsz7","建议尺寸5:4","lang"))])])]),t("el-col",[t("div",{staticClass:"center"},[t("div",{staticClass:"upload-box h5",on:{click:function(t){return e.handleImgChange("web")}}},[e.form.h5_share_img?t("img",{staticClass:"avatar",attrs:{src:e.wximageurl+e.form.h5_share_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"frm-tips upload-box inline"},[e._v($t("etluru7","建议尺寸1:1","lang"))])])])],1)],1)]:e._e()]:e._e()],2),t("imgPicker",{attrs:{"dialog-visible":e.imgDialog,"sc-status":e.isGetImage},on:{chooseImg:e.pickImg,closeImgDialog:e.closeImgDialog}}),t("div",{staticClass:"section-footer with-border content-center"},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v($t("ako8wb5"," 保 存 ","lang"))])],1)],1)],1)},[],!1,null,"c939c032",null).exports}}]);